!function(t, e) {
    "function" == typeof define && define.amd ? define(e) : "object" == typeof exports ? module.exports = e() : t.ScrollMagic = e()
}(this, function() {
    "use strict";
    var t = function() {};
    t.version = "2.0.6",
    window.addEventListener("mousewheel", function() {});
    var e = "data-scrollmagic-pin-spacer";
    t.Controller = function(r) {
        var o, a, s = "REVERSE", l = "PAUSED", u = i.defaults, c = this, p = n.extend({}, u, r), h = [], d = !1, f = 0, m = l, y = !0, g = 0, _ = !0, v = function() {
            p.refreshInterval > 0 && (a = window.setTimeout(k, p.refreshInterval))
        }, x = function() {
            return p.vertical ? n.get.scrollTop(p.container) : n.get.scrollLeft(p.container)
        }, b = function() {
            return p.vertical ? n.get.height(p.container) : n.get.width(p.container)
        }, w = this._setScrollPos = function(t) {
            p.vertical ? y ? window.scrollTo(n.get.scrollLeft(), t) : p.container.scrollTop = t : y ? window.scrollTo(t, n.get.scrollTop()) : p.container.scrollLeft = t
        }
        , T = function() {
            if (_ && d) {
                var t = n.type.Array(d) ? d : h.slice(0);
                d = !1;
                var e = f
                  , i = (f = c.scrollPos()) - e;
                0 !== i && (m = i > 0 ? "FORWARD" : s),
                m === s && t.reverse(),
                t.forEach(function(t) {
                    t.update(!0)
                })
            }
        }, S = function() {
            o = n.rAF(T)
        }, A = function(t) {
            "resize" == t.type && (g = b(),
            m = l),
            !0 !== d && (d = !0,
            S())
        }, k = function() {
            if (!y && g != b()) {
                var t;
                try {
                    t = new Event("resize",{
                        bubbles: !1,
                        cancelable: !1
                    })
                } catch (e) {
                    (t = document.createEvent("Event")).initEvent("resize", !1, !1)
                }
                p.container.dispatchEvent(t)
            }
            h.forEach(function(t) {
                t.refresh()
            }),
            v()
        };
        this._options = p;
        var E = function(t) {
            if (t.length <= 1)
                return t;
            var e = t.slice(0);
            return e.sort(function(t, e) {
                return t.scrollOffset() > e.scrollOffset() ? 1 : -1
            }),
            e
        };
        return this.addScene = function(e) {
            if (n.type.Array(e))
                e.forEach(function(t) {
                    c.addScene(t)
                });
            else if (e instanceof t.Scene)
                if (e.controller() !== c)
                    e.addTo(c);
                else if (h.indexOf(e) < 0)
                    for (var i in h.push(e),
                    h = E(h),
                    e.on("shift.controller_sort", function() {
                        h = E(h)
                    }),
                    p.globalSceneOptions)
                        e[i] && e[i].call(e, p.globalSceneOptions[i]);
            return c
        }
        ,
        this.removeScene = function(t) {
            if (n.type.Array(t))
                t.forEach(function(t) {
                    c.removeScene(t)
                });
            else {
                var e = h.indexOf(t);
                e > -1 && (t.off("shift.controller_sort"),
                h.splice(e, 1),
                t.remove())
            }
            return c
        }
        ,
        this.updateScene = function(e, i) {
            return n.type.Array(e) ? e.forEach(function(t) {
                c.updateScene(t, i)
            }) : i ? e.update(!0) : !0 !== d && e instanceof t.Scene && (-1 == (d = d || []).indexOf(e) && d.push(e),
            d = E(d),
            S()),
            c
        }
        ,
        this.update = function(t) {
            return A({
                type: "resize"
            }),
            t && T(),
            c
        }
        ,
        this.scrollTo = function(i, r) {
            if (n.type.Number(i))
                w.call(p.container, i, r);
            else if (i instanceof t.Scene)
                i.controller() === c && c.scrollTo(i.scrollOffset(), r);
            else if (n.type.Function(i))
                w = i;
            else {
                var o = n.get.elements(i)[0];
                if (o) {
                    for (; o.parentNode.hasAttribute(e); )
                        o = o.parentNode;
                    var a = p.vertical ? "top" : "left"
                      , s = n.get.offset(p.container)
                      , l = n.get.offset(o);
                    y || (s[a] -= c.scrollPos()),
                    c.scrollTo(l[a] - s[a], r)
                }
            }
            return c
        }
        ,
        this.scrollPos = function(t) {
            return arguments.length ? (n.type.Function(t) && (x = t),
            c) : x.call(c)
        }
        ,
        this.info = function(t) {
            var e = {
                size: g,
                vertical: p.vertical,
                scrollPos: f,
                scrollDirection: m,
                container: p.container,
                isDocument: y
            };
            return arguments.length ? void 0 !== e[t] ? e[t] : void 0 : e
        }
        ,
        this.loglevel = function() {
            return c
        }
        ,
        this.enabled = function(t) {
            return arguments.length ? (_ != t && (_ = !!t,
            c.updateScene(h, !0)),
            c) : _
        }
        ,
        this.destroy = function(t) {
            window.clearTimeout(a);
            for (var e = h.length; e--; )
                h[e].destroy(t);
            return p.container.removeEventListener("resize", A),
            p.container.removeEventListener("scroll", A),
            n.cAF(o),
            null
        }
        ,
        function() {
            for (var t in p)
                u.hasOwnProperty(t) || delete p[t];
            if (p.container = n.get.elements(p.container)[0],
            !p.container)
                throw "ScrollMagic.Controller init failed.";
            (y = p.container === window || p.container === document.body || !document.body.contains(p.container)) && (p.container = window),
            g = b(),
            p.container.addEventListener("resize", A),
            p.container.addEventListener("scroll", A);
            var e = parseInt(p.refreshInterval, 10);
            p.refreshInterval = n.type.Number(e) ? e : u.refreshInterval,
            v()
        }(),
        c
    }
    ;
    var i = {
        defaults: {
            container: window,
            vertical: !0,
            globalSceneOptions: {},
            loglevel: 2,
            refreshInterval: 100
        }
    };
    t.Controller.addOption = function(t, e) {
        i.defaults[t] = e
    }
    ,
    t.Controller.extend = function(e) {
        var i = this;
        t.Controller = function() {
            return i.apply(this, arguments),
            this.$super = n.extend({}, this),
            e.apply(this, arguments) || this
        }
        ,
        n.extend(t.Controller, i),
        t.Controller.prototype = i.prototype,
        t.Controller.prototype.constructor = t.Controller
    }
    ,
    t.Scene = function(i) {
        var o, a, s = "BEFORE", l = "DURING", u = "AFTER", c = r.defaults, p = this, h = n.extend({}, c, i), d = s, f = 0, m = {
            start: 0,
            end: 0
        }, y = 0, g = !0, _ = {};
        this.on = function(t, e) {
            return n.type.Function(e) && (t = t.trim().split(" ")).forEach(function(t) {
                var i = t.split(".")
                  , r = i[0]
                  , n = i[1];
                "*" != r && (_[r] || (_[r] = []),
                _[r].push({
                    namespace: n || "",
                    callback: e
                }))
            }),
            p
        }
        ,
        this.off = function(t, e) {
            return t ? ((t = t.trim().split(" ")).forEach(function(t) {
                var i = t.split(".")
                  , r = i[0]
                  , n = i[1] || "";
                ("*" === r ? Object.keys(_) : [r]).forEach(function(t) {
                    for (var i = _[t] || [], r = i.length; r--; ) {
                        var o = i[r];
                        !o || n !== o.namespace && "*" !== n || e && e != o.callback || i.splice(r, 1)
                    }
                    i.length || delete _[t]
                })
            }),
            p) : p
        }
        ,
        this.trigger = function(e, i) {
            if (e) {
                var r = e.trim().split(".")
                  , n = r[0]
                  , o = r[1]
                  , a = _[n];
                a && a.forEach(function(e) {
                    o && o !== e.namespace || e.callback.call(p, new t.Event(n,e.namespace,p,i))
                })
            }
            return p
        }
        ,
        p.on("change.internal", function(t) {
            "loglevel" !== t.what && "tweenChanges" !== t.what && ("triggerElement" === t.what ? T() : "reverse" === t.what && p.update())
        }).on("shift.internal", function() {
            b(),
            p.update()
        }),
        this.addTo = function(e) {
            return e instanceof t.Controller && a != e && (a && a.removeScene(p),
            a = e,
            k(),
            w(!0),
            T(!0),
            b(),
            a.info("container").addEventListener("resize", S),
            e.addScene(p),
            p.trigger("add", {
                controller: a
            }),
            p.update()),
            p
        }
        ,
        this.enabled = function(t) {
            return arguments.length ? (g != t && (g = !!t,
            p.update(!0)),
            p) : g
        }
        ,
        this.remove = function() {
            if (a) {
                a.info("container").removeEventListener("resize", S);
                var t = a;
                a = void 0,
                t.removeScene(p),
                p.trigger("remove")
            }
            return p
        }
        ,
        this.destroy = function(t) {
            return p.trigger("destroy", {
                reset: t
            }),
            p.remove(),
            p.off("*.*"),
            null
        }
        ,
        this.update = function(t) {
            if (a)
                if (t)
                    if (a.enabled() && g) {
                        var e, i = a.info("scrollPos");
                        e = h.duration > 0 ? (i - m.start) / (m.end - m.start) : i >= m.start ? 1 : 0,
                        p.trigger("update", {
                            startPos: m.start,
                            endPos: m.end,
                            scrollPos: i
                        }),
                        p.progress(e)
                    } else
                        v && d === l && P(!0);
                else
                    a.updateScene(p, !1);
            return p
        }
        ,
        this.refresh = function() {
            return w(),
            T(),
            p
        }
        ,
        this.progress = function(t) {
            if (arguments.length) {
                var e = !1
                  , i = d
                  , r = a ? a.info("scrollDirection") : "PAUSED"
                  , n = h.reverse || t >= f;
                if (0 === h.duration ? (e = f != t,
                d = 0 === (f = 1 > t && n ? 0 : 1) ? s : l) : 0 > t && d !== s && n ? (f = 0,
                d = s,
                e = !0) : t >= 0 && 1 > t && n ? (f = t,
                d = l,
                e = !0) : t >= 1 && d !== u ? (f = 1,
                d = u,
                e = !0) : d !== l || n || P(),
                e) {
                    var o = {
                        progress: f,
                        state: d,
                        scrollDirection: r
                    }
                      , c = d != i
                      , m = function(t) {
                        p.trigger(t, o)
                    };
                    c && i !== l && (m("enter"),
                    m(i === s ? "start" : "end")),
                    m("progress"),
                    c && d !== l && (m(d === s ? "start" : "end"),
                    m("leave"))
                }
                return p
            }
            return f
        }
        ;
        var v, x, b = function() {
            m = {
                start: y + h.offset
            },
            a && h.triggerElement && (m.start -= a.info("size") * h.triggerHook),
            m.end = m.start + h.duration
        }, w = function(t) {
            if (o) {
                var e = "duration";
                E(e, o.call(p)) && !t && (p.trigger("change", {
                    what: e,
                    newval: h[e]
                }),
                p.trigger("shift", {
                    reason: e
                }))
            }
        }, T = function(t) {
            var i = 0
              , r = h.triggerElement;
            if (a && (r || y > 0)) {
                if (r)
                    if (r.parentNode) {
                        for (var o = a.info(), s = n.get.offset(o.container), l = o.vertical ? "top" : "left"; r.parentNode.hasAttribute(e); )
                            r = r.parentNode;
                        var u = n.get.offset(r);
                        o.isDocument || (s[l] -= a.scrollPos()),
                        i = u[l] - s[l]
                    } else
                        p.triggerElement(void 0);
                var c = i != y;
                y = i,
                c && !t && p.trigger("shift", {
                    reason: "triggerElementPosition"
                })
            }
        }, S = function() {
            h.triggerHook > 0 && p.trigger("shift", {
                reason: "containerResize"
            })
        }, A = n.extend(r.validate, {
            duration: function(t) {
                if (n.type.String(t) && t.match(/^(\.|\d)*\d+%$/)) {
                    var e = parseFloat(t) / 100;
                    t = function() {
                        return a ? a.info("size") * e : 0
                    }
                }
                if (n.type.Function(t)) {
                    o = t;
                    try {
                        t = parseFloat(o())
                    } catch (e) {
                        t = -1
                    }
                }
                if (t = parseFloat(t),
                !n.type.Number(t) || 0 > t)
                    throw o ? (o = void 0,
                    0) : 0;
                return t
            }
        }), k = function(t) {
            (t = arguments.length ? [t] : Object.keys(A)).forEach(function(t) {
                var e;
                if (A[t])
                    try {
                        e = A[t](h[t])
                    } catch (i) {
                        e = c[t]
                    } finally {
                        h[t] = e
                    }
            })
        }, E = function(t, e) {
            var i = !1
              , r = h[t];
            return h[t] != e && (h[t] = e,
            k(t),
            i = r != h[t]),
            i
        }, C = function(t) {
            p[t] || (p[t] = function(e) {
                return arguments.length ? ("duration" === t && (o = void 0),
                E(t, e) && (p.trigger("change", {
                    what: t,
                    newval: h[t]
                }),
                r.shifts.indexOf(t) > -1 && p.trigger("shift", {
                    reason: t
                })),
                p) : h[t]
            }
            )
        };
        this.controller = function() {
            return a
        }
        ,
        this.state = function() {
            return d
        }
        ,
        this.scrollOffset = function() {
            return m.start
        }
        ,
        this.triggerPosition = function() {
            var t = h.offset;
            return a && (t += h.triggerElement ? y : a.info("size") * p.triggerHook()),
            t
        }
        ,
        p.on("shift.internal", function(t) {
            var e = "duration" === t.reason;
            (d === u && e || d === l && 0 === h.duration) && P(),
            e && M()
        }).on("progress.internal", function() {
            P()
        }).on("add.internal", function() {
            M()
        }).on("destroy.internal", function(t) {
            p.removePin(t.reset)
        });
        var P = function(t) {
            if (v && a) {
                var e = a.info()
                  , i = x.spacer.firstChild;
                if (t || d !== l) {
                    var r = {
                        position: x.inFlow ? "relative" : "absolute",
                        top: 0,
                        left: 0
                    }
                      , o = n.css(i, "position") != r.position;
                    x.pushFollowers ? h.duration > 0 && (d === u && 0 === parseFloat(n.css(x.spacer, "padding-top")) ? o = !0 : d === s && 0 === parseFloat(n.css(x.spacer, "padding-bottom")) && (o = !0)) : r[e.vertical ? "top" : "left"] = h.duration * f,
                    n.css(i, r),
                    o && M()
                } else {
                    "fixed" != n.css(i, "position") && (n.css(i, {
                        position: "fixed"
                    }),
                    M());
                    var c = n.get.offset(x.spacer, !0)
                      , p = h.reverse || 0 === h.duration ? e.scrollPos - m.start : Math.round(f * h.duration * 10) / 10;
                    c[e.vertical ? "top" : "left"] += p,
                    n.css(x.spacer.firstChild, {
                        top: c.top,
                        left: c.left
                    })
                }
            }
        }
          , M = function() {
            if (v && a && x.inFlow) {
                var t = d === l
                  , e = a.info("vertical")
                  , i = x.spacer.firstChild
                  , r = n.isMarginCollapseType(n.css(x.spacer, "display"))
                  , o = {};
                x.relSize.width || x.relSize.autoFullWidth ? t ? n.css(v, {
                    width: n.get.width(x.spacer)
                }) : n.css(v, {
                    width: "100%"
                }) : (o["min-width"] = n.get.width(e ? v : i, !0, !0),
                o.width = t ? o["min-width"] : "auto"),
                x.relSize.height ? t ? n.css(v, {
                    height: n.get.height(x.spacer) - (x.pushFollowers ? h.duration : 0)
                }) : n.css(v, {
                    height: "100%"
                }) : (o["min-height"] = n.get.height(e ? i : v, !0, !r),
                o.height = t ? o["min-height"] : "auto"),
                x.pushFollowers && (o["padding" + (e ? "Top" : "Left")] = h.duration * f,
                o["padding" + (e ? "Bottom" : "Right")] = h.duration * (1 - f)),
                n.css(x.spacer, o)
            }
        }
          , I = function() {
            a && v && d === l && !a.info("isDocument") && P()
        }
          , z = function() {
            a && v && d === l && ((x.relSize.width || x.relSize.autoFullWidth) && n.get.width(window) != n.get.width(x.spacer.parentNode) || x.relSize.height && n.get.height(window) != n.get.height(x.spacer.parentNode)) && M()
        }
          , L = function(t) {
            a && v && d === l && !a.info("isDocument") && (t.preventDefault(),
            a._setScrollPos(a.info("scrollPos") - ((t.wheelDelta || t[a.info("vertical") ? "wheelDeltaY" : "wheelDeltaX"]) / 3 || 30 * -t.detail)))
        };
        this.setPin = function(t, i) {
            if (i = n.extend({}, {
                pushFollowers: !0,
                spacerClass: "scrollmagic-pin-spacer"
            }, i),
            !(t = n.get.elements(t)[0]))
                return p;
            if ("fixed" === n.css(t, "position"))
                return p;
            if (v) {
                if (v === t)
                    return p;
                p.removePin()
            }
            var r = (v = t).parentNode.style.display
              , o = ["top", "left", "bottom", "right", "margin", "marginLeft", "marginRight", "marginTop", "marginBottom"];
            v.parentNode.style.display = "none";
            var a = "absolute" != n.css(v, "position")
              , s = n.css(v, o.concat(["display"]))
              , l = n.css(v, ["width", "height"]);
            v.parentNode.style.display = r,
            !a && i.pushFollowers && (i.pushFollowers = !1);
            var u = v.parentNode.insertBefore(document.createElement("div"), v)
              , c = n.extend(s, {
                position: a ? "relative" : "absolute",
                boxSizing: "content-box",
                mozBoxSizing: "content-box",
                webkitBoxSizing: "content-box"
            });
            if (a || n.extend(c, n.css(v, ["width", "height"])),
            n.css(u, c),
            u.setAttribute(e, ""),
            n.addClass(u, i.spacerClass),
            x = {
                spacer: u,
                relSize: {
                    width: "%" === l.width.slice(-1),
                    height: "%" === l.height.slice(-1),
                    autoFullWidth: "auto" === l.width && a && n.isMarginCollapseType(s.display)
                },
                pushFollowers: i.pushFollowers,
                inFlow: a
            },
            !v.___origStyle) {
                v.___origStyle = {};
                var h = v.style;
                o.concat(["width", "height", "position", "boxSizing", "mozBoxSizing", "webkitBoxSizing"]).forEach(function(t) {
                    v.___origStyle[t] = h[t] || ""
                })
            }
            return x.relSize.width && n.css(u, {
                width: l.width
            }),
            x.relSize.height && n.css(u, {
                height: l.height
            }),
            u.appendChild(v),
            n.css(v, {
                position: a ? "relative" : "absolute",
                margin: "auto",
                top: "auto",
                left: "auto",
                bottom: "auto",
                right: "auto"
            }),
            (x.relSize.width || x.relSize.autoFullWidth) && n.css(v, {
                boxSizing: "border-box",
                mozBoxSizing: "border-box",
                webkitBoxSizing: "border-box"
            }),
            window.addEventListener("scroll", I),
            window.addEventListener("resize", I),
            window.addEventListener("resize", z),
            v.addEventListener("mousewheel", L),
            v.addEventListener("DOMMouseScroll", L),
            P(),
            p
        }
        ,
        this.removePin = function(t) {
            if (v) {
                if (d === l && P(!0),
                t || !a) {
                    var i = x.spacer.firstChild;
                    if (i.hasAttribute(e)) {
                        var r = x.spacer.style
                          , o = {};
                        ["margin", "marginLeft", "marginRight", "marginTop", "marginBottom"].forEach(function(t) {
                            o[t] = r[t] || ""
                        }),
                        n.css(i, o)
                    }
                    x.spacer.parentNode.insertBefore(i, x.spacer),
                    x.spacer.parentNode.removeChild(x.spacer),
                    v.parentNode.hasAttribute(e) || (n.css(v, v.___origStyle),
                    delete v.___origStyle)
                }
                window.removeEventListener("scroll", I),
                window.removeEventListener("resize", I),
                window.removeEventListener("resize", z),
                v.removeEventListener("mousewheel", L),
                v.removeEventListener("DOMMouseScroll", L),
                v = void 0
            }
            return p
        }
        ;
        var D, O = [];
        return p.on("destroy.internal", function(t) {
            p.removeClassToggle(t.reset)
        }),
        this.setClassToggle = function(t, e) {
            var i = n.get.elements(t);
            return 0 !== i.length && n.type.String(e) ? (O.length > 0 && p.removeClassToggle(),
            D = e,
            O = i,
            p.on("enter.internal_class leave.internal_class", function(t) {
                var e = "enter" === t.type ? n.addClass : n.removeClass;
                O.forEach(function(t) {
                    e(t, D)
                })
            }),
            p) : p
        }
        ,
        this.removeClassToggle = function(t) {
            return t && O.forEach(function(t) {
                n.removeClass(t, D)
            }),
            p.off("start.internal_class end.internal_class"),
            D = void 0,
            O = [],
            p
        }
        ,
        function() {
            for (var t in h)
                c.hasOwnProperty(t) || delete h[t];
            for (var e in c)
                C(e);
            k()
        }(),
        p
    }
    ;
    var r = {
        defaults: {
            duration: 0,
            offset: 0,
            triggerElement: void 0,
            triggerHook: .5,
            reverse: !0,
            loglevel: 2
        },
        validate: {
            offset: function(t) {
                if (t = parseFloat(t),
                !n.type.Number(t))
                    throw 0;
                return t
            },
            triggerElement: function(t) {
                if (t = t || void 0) {
                    var e = n.get.elements(t)[0];
                    if (!e || !e.parentNode)
                        throw 0;
                    t = e
                }
                return t
            },
            triggerHook: function(t) {
                var e = {
                    onCenter: .5,
                    onEnter: 1,
                    onLeave: 0
                };
                if (n.type.Number(t))
                    t = Math.max(0, Math.min(parseFloat(t), 1));
                else {
                    if (!(t in e))
                        throw 0;
                    t = e[t]
                }
                return t
            },
            reverse: function(t) {
                return !!t
            }
        },
        shifts: ["duration", "offset", "triggerHook"]
    };
    t.Scene.addOption = function(t, e, i, n) {
        t in r.defaults || (r.defaults[t] = e,
        r.validate[t] = i,
        n && r.shifts.push(t))
    }
    ,
    t.Scene.extend = function(e) {
        var i = this;
        t.Scene = function() {
            return i.apply(this, arguments),
            this.$super = n.extend({}, this),
            e.apply(this, arguments) || this
        }
        ,
        n.extend(t.Scene, i),
        t.Scene.prototype = i.prototype,
        t.Scene.prototype.constructor = t.Scene
    }
    ,
    t.Event = function(t, e, i, r) {
        for (var n in r = r || {})
            this[n] = r[n];
        return this.type = t,
        this.target = this.currentTarget = i,
        this.namespace = e || "",
        this.timeStamp = this.timestamp = Date.now(),
        this
    }
    ;
    var n = t._util = function(t) {
        var e, i = {}, r = function(t) {
            return parseFloat(t) || 0
        }, n = function(e) {
            return e.currentStyle ? e.currentStyle : t.getComputedStyle(e)
        }, o = function(e, i, o, a) {
            if ((i = i === document ? t : i) === t)
                a = !1;
            else if (!p.DomElement(i))
                return 0;
            e = e.charAt(0).toUpperCase() + e.substr(1).toLowerCase();
            var s = (o ? i["offset" + e] || i["outer" + e] : i["client" + e] || i["inner" + e]) || 0;
            if (o && a) {
                var l = n(i);
                s += "Height" === e ? r(l.marginTop) + r(l.marginBottom) : r(l.marginLeft) + r(l.marginRight)
            }
            return s
        }, a = function(t) {
            return t.replace(/^[^a-z]+([a-z])/g, "$1").replace(/-([a-z])/g, function(t) {
                return t[1].toUpperCase()
            })
        };
        i.extend = function(t) {
            for (t = t || {},
            e = 1; e < arguments.length; e++)
                if (arguments[e])
                    for (var i in arguments[e])
                        arguments[e].hasOwnProperty(i) && (t[i] = arguments[e][i]);
            return t
        }
        ,
        i.isMarginCollapseType = function(t) {
            return ["block", "flex", "list-item", "table", "-webkit-box"].indexOf(t) > -1
        }
        ;
        var s = 0
          , l = ["ms", "moz", "webkit", "o"]
          , u = t.requestAnimationFrame
          , c = t.cancelAnimationFrame;
        for (e = 0; !u && e < l.length; ++e)
            u = t[l[e] + "RequestAnimationFrame"],
            c = t[l[e] + "CancelAnimationFrame"] || t[l[e] + "CancelRequestAnimationFrame"];
        u || (u = function(e) {
            var i = (new Date).getTime()
              , r = Math.max(0, 16 - (i - s))
              , n = t.setTimeout(function() {
                e(i + r)
            }, r);
            return s = i + r,
            n
        }
        ),
        c || (c = function(e) {
            t.clearTimeout(e)
        }
        ),
        i.rAF = u.bind(t),
        i.cAF = c.bind(t);
        var p = i.type = function(t) {
            return Object.prototype.toString.call(t).replace(/^\[object (.+)\]$/, "$1").toLowerCase()
        }
        ;
        p.String = function(t) {
            return "string" === p(t)
        }
        ,
        p.Function = function(t) {
            return "function" === p(t)
        }
        ,
        p.Array = function(t) {
            return Array.isArray(t)
        }
        ,
        p.Number = function(t) {
            return !p.Array(t) && t - parseFloat(t) + 1 >= 0
        }
        ,
        p.DomElement = function(t) {
            return "object" == typeof HTMLElement ? t instanceof HTMLElement : t && "object" == typeof t && null !== t && 1 === t.nodeType && "string" == typeof t.nodeName
        }
        ;
        var h = i.get = {};
        return h.elements = function(e) {
            var i = [];
            if (p.String(e))
                try {
                    e = document.querySelectorAll(e)
                } catch (t) {
                    return i
                }
            if ("nodelist" === p(e) || p.Array(e))
                for (var r = 0, n = i.length = e.length; n > r; r++) {
                    var o = e[r];
                    i[r] = p.DomElement(o) ? o : h.elements(o)
                }
            else
                (p.DomElement(e) || e === document || e === t) && (i = [e]);
            return i
        }
        ,
        h.scrollTop = function(e) {
            return e && "number" == typeof e.scrollTop ? e.scrollTop : t.pageYOffset || 0
        }
        ,
        h.scrollLeft = function(e) {
            return e && "number" == typeof e.scrollLeft ? e.scrollLeft : t.pageXOffset || 0
        }
        ,
        h.width = function(t, e, i) {
            return o("width", t, e, i)
        }
        ,
        h.height = function(t, e, i) {
            return o("height", t, e, i)
        }
        ,
        h.offset = function(t, e) {
            var i = {
                top: 0,
                left: 0
            };
            if (t && t.getBoundingClientRect) {
                var r = t.getBoundingClientRect();
                i.top = r.top,
                i.left = r.left,
                e || (i.top += h.scrollTop(),
                i.left += h.scrollLeft())
            }
            return i
        }
        ,
        i.addClass = function(t, e) {
            e && (t.classList ? t.classList.add(e) : t.className += " " + e)
        }
        ,
        i.removeClass = function(t, e) {
            e && (t.classList ? t.classList.remove(e) : t.className = t.className.replace(RegExp("(^|\\b)" + e.split(" ").join("|") + "(\\b|$)", "gi"), " "))
        }
        ,
        i.css = function(t, e) {
            if (p.String(e))
                return n(t)[a(e)];
            if (p.Array(e)) {
                var i = {}
                  , r = n(t);
                return e.forEach(function(t) {
                    i[t] = r[a(t)]
                }),
                i
            }
            for (var o in e) {
                var s = e[o];
                s == parseFloat(s) && (s += "px"),
                t.style[a(o)] = s
            }
        }
        ,
        i
    }(window || {});
    return t
}),
function(t, e) {
    "function" == typeof define && define.amd ? define(["ScrollMagic", "jquery"], e) : "object" == typeof exports ? e(require("scrollmagic"), require("jquery")) : e(t.ScrollMagic, t.jQuery)
}(this, function(t, e) {
    "use strict";
    t._util.get.elements = function(t) {
        return e(t).toArray()
    }
    ,
    t._util.addClass = function(t, i) {
        e(t).addClass(i)
    }
    ,
    t._util.removeClass = function(t, i) {
        e(t).removeClass(i)
    }
    ,
    e.ScrollMagic = t
}),
function(t, e) {
    "function" == typeof define && define.amd ? define(["ScrollMagic", "TweenMax", "TimelineMax"], e) : "object" == typeof exports ? (require("gsap"),
    e(require("scrollmagic"), TweenMax, TimelineMax)) : e(t.ScrollMagic || t.jQuery && t.jQuery.ScrollMagic, t.TweenMax || t.TweenLite, t.TimelineMax || t.TimelineLite)
}(this, function(t, e, i) {
    "use strict";
    t.Scene.addOption("tweenChanges", !1, function(t) {
        return !!t
    }),
    t.Scene.extend(function() {
        var t, r = this;
        r.on("progress.plugin_gsap", function() {
            n()
        }),
        r.on("destroy.plugin_gsap", function(t) {
            r.removeTween(t.reset)
        });
        var n = function() {
            if (t) {
                var e = r.progress()
                  , i = r.state();
                t.repeat && -1 === t.repeat() ? "DURING" === i && t.paused() ? t.play() : "DURING" === i || t.paused() || t.pause() : e != t.progress() && (0 === r.duration() ? e > 0 ? t.play() : t.reverse() : r.tweenChanges() && t.tweenTo ? t.tweenTo(e * t.duration()) : t.progress(e).pause())
            }
        };
        r.setTween = function(o, a, s) {
            var l;
            arguments.length > 1 && (arguments.length < 3 && (s = a,
            a = 1),
            o = e.to(o, a, s));
            try {
                (l = i ? new i({
                    smoothChildTiming: !0
                }).add(o) : o).pause()
            } catch (t) {
                return r
            }
            return t && r.removeTween(),
            t = l,
            o.repeat && -1 === o.repeat() && (t.repeat(-1),
            t.yoyo(o.yoyo())),
            n(),
            r
        }
        ,
        r.removeTween = function(e) {
            return t && (e && t.progress(0).pause(),
            t.kill(),
            t = void 0),
            r
        }
    })
});
var _gsScope = "undefined" != typeof module && module.exports && "undefined" != typeof global ? global : this || window;
function horizontalAnnouncements() {
    if ($("footer.site-footer").html(""),
    $(".announcements-footer").length > 0) {
        $(".announcements-footer").appendTo("footer.site-footer");
        var t = {
            base: {
                width: 2100,
                time: $("body").innerWidth() > 960 ? 16e3 : 2e4
            },
            itemWidth: "auto",
            ticker: ".announcements",
            tickerClone: "announcements_cloned",
            wrapper: ".announcements_wrapper",
            slide: ".announcements_slide",
            content: ".announcements_content",
            core: {
                _getTime: function(e) {
                    return baseMargin = void 0 === d ? 0 : d.first().css("margin-left"),
                    baseMargin = baseMargin < 0 ? baseMargin : 0,
                    t.base.time * (e / (baseMargin + t.base.width))
                },
                _contentWidth: function(e) {
                    var i = 0;
                    return "auto" !== t.itemWidth && 0 !== t.itemWidth ? (i = e.length * t.itemWidth,
                    e.width(t.itemWidth)) : e.each(function() {
                        i += $(this).width()
                    }),
                    Math.ceil(i + 2)
                }
            }
        }
          , e = $(".announcements-footer");
        $(".main-container").addClass("padded"),
        $(e).on("mouseenter", function() {
            var t = e.data("animation");
            !e.data("stop") && t && (t.stop(),
            e.data("stop", !0))
        }),
        $(e).on("mouseleave", function() {
            e.data("stop") && (f(e),
            e.data("stop", !1))
        }),
        e.data("ticker", {
            stop: !0,
            animation: null
        });
        var i, r = e.find(t.ticker), n = e.find(t.wrapper), o = e.find(t.slide), a = e.find(t.content), s = t.core._contentWidth(r), l = n.width(), u = $();
        if (s < l) {
            for (var c = Math.ceil(l / s), p = a.children().clone(), h = 1; h <= c; h++)
                a.append(p.clone());
            t.itemWidth && "auto" != t.itemWidth ? s = a.children().length * t.itemWidth : s *= h
        }
        3 * s > o.width() && o.width(3 * s + 100),
        o.append(a.clone().addClass(t.tickerClone)),
        o.append(a.clone().addClass(t.tickerClone));
        var d = e.find(t.content);
        d.width(s),
        i = d.first();
        var f = function(r) {
            o.append(u);
            r = void 0 === r ? 0 : r;
            u.css("margin-left", r),
            e.data("stop", !1);
            var n = i.animate({
                "margin-left": -s
            }, {
                easing: "linear",
                duration: t.core._getTime(s),
                complete: function() {
                    u = i,
                    i = i.next(),
                    f.call(e)
                }
            });
            e.data("animation", n)
        };
        f.call(this)
    }
}
(_gsScope._gsQueue || (_gsScope._gsQueue = [])).push(function() {
    "use strict";
    var t, e, i, r, n, o, a, s, l, u, c, p, h, d, f, m;
    _gsScope._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, i) {
        var r = function(t) {
            var e, i = [], r = t.length;
            for (e = 0; e !== r; i.push(t[e++]))
                ;
            return i
        }
          , n = function(t, e, i) {
            var r, n, o = t.cycle;
            for (r in o)
                n = o[r],
                t[r] = "function" == typeof n ? n(i, e[i]) : n[i % n.length];
            delete t.cycle
        }
          , o = function(t, e, r) {
            i.call(this, t, e, r),
            this._cycle = 0,
            this._yoyo = !0 === this.vars.yoyo || !!this.vars.yoyoEase,
            this._repeat = this.vars.repeat || 0,
            this._repeatDelay = this.vars.repeatDelay || 0,
            this._repeat && this._uncache(!0),
            this.render = o.prototype.render
        }
          , a = 1e-10
          , s = i._internals
          , l = s.isSelector
          , u = s.isArray
          , c = o.prototype = i.to({}, .1, {})
          , p = [];
        o.version = "2.0.2",
        c.constructor = o,
        c.kill()._gc = !1,
        o.killTweensOf = o.killDelayedCallsTo = i.killTweensOf,
        o.getTweensOf = i.getTweensOf,
        o.lagSmoothing = i.lagSmoothing,
        o.ticker = i.ticker,
        o.render = i.render,
        c.invalidate = function() {
            return this._yoyo = !0 === this.vars.yoyo || !!this.vars.yoyoEase,
            this._repeat = this.vars.repeat || 0,
            this._repeatDelay = this.vars.repeatDelay || 0,
            this._yoyoEase = null,
            this._uncache(!0),
            i.prototype.invalidate.call(this)
        }
        ,
        c.updateTo = function(t, e) {
            var r, n = this.ratio, o = this.vars.immediateRender || t.immediateRender;
            for (r in e && this._startTime < this._timeline._time && (this._startTime = this._timeline._time,
            this._uncache(!1),
            this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay)),
            t)
                this.vars[r] = t[r];
            if (this._initted || o)
                if (e)
                    this._initted = !1,
                    o && this.render(0, !0, !0);
                else if (this._gc && this._enabled(!0, !1),
                this._notifyPluginsOfEnabled && this._firstPT && i._onPluginEvent("_onDisable", this),
                this._time / this._duration > .998) {
                    var a = this._totalTime;
                    this.render(0, !0, !1),
                    this._initted = !1,
                    this.render(a, !0, !1)
                } else if (this._initted = !1,
                this._init(),
                this._time > 0 || o)
                    for (var s, l = 1 / (1 - n), u = this._firstPT; u; )
                        s = u.s + u.c,
                        u.c *= l,
                        u.s = s - u.c,
                        u = u._next;
            return this
        }
        ,
        c.render = function(t, e, r) {
            this._initted || 0 === this._duration && this.vars.repeat && this.invalidate();
            var n, o, l, u, c, p, h, d, f, m = this._dirty ? this.totalDuration() : this._totalDuration, y = this._time, g = this._totalTime, _ = this._cycle, v = this._duration, x = this._rawPrevTime;
            if (t >= m - 1e-7 && t >= 0 ? (this._totalTime = m,
            this._cycle = this._repeat,
            this._yoyo && 0 != (1 & this._cycle) ? (this._time = 0,
            this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = v,
            this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1),
            this._reversed || (n = !0,
            o = "onComplete",
            r = r || this._timeline.autoRemoveChildren),
            0 === v && (this._initted || !this.vars.lazy || r) && (this._startTime === this._timeline._duration && (t = 0),
            (0 > x || 0 >= t && t >= -1e-7 || x === a && "isPause" !== this.data) && x !== t && (r = !0,
            x > a && (o = "onReverseComplete")),
            this._rawPrevTime = d = !e || t || x === t ? t : a)) : 1e-7 > t ? (this._totalTime = this._time = this._cycle = 0,
            this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0,
            (0 !== g || 0 === v && x > 0) && (o = "onReverseComplete",
            n = this._reversed),
            0 > t && (this._active = !1,
            0 === v && (this._initted || !this.vars.lazy || r) && (x >= 0 && (r = !0),
            this._rawPrevTime = d = !e || t || x === t ? t : a)),
            this._initted || (r = !0)) : (this._totalTime = this._time = t,
            0 !== this._repeat && (u = v + this._repeatDelay,
            this._cycle = this._totalTime / u >> 0,
            0 !== this._cycle && this._cycle === this._totalTime / u && t >= g && this._cycle--,
            this._time = this._totalTime - this._cycle * u,
            this._yoyo && 0 != (1 & this._cycle) && (this._time = v - this._time,
            (f = this._yoyoEase || this.vars.yoyoEase) && (this._yoyoEase || (!0 !== f || this._initted ? this._yoyoEase = f = !0 === f ? this._ease : f instanceof Ease ? f : Ease.map[f] : (f = this.vars.ease,
            this._yoyoEase = f = f ? f instanceof Ease ? f : "function" == typeof f ? new Ease(f,this.vars.easeParams) : Ease.map[f] || i.defaultEase : i.defaultEase)),
            this.ratio = f ? 1 - f.getRatio((v - this._time) / v) : 0)),
            this._time > v ? this._time = v : this._time < 0 && (this._time = 0)),
            this._easeType && !f ? (c = this._time / v,
            (1 === (p = this._easeType) || 3 === p && c >= .5) && (c = 1 - c),
            3 === p && (c *= 2),
            1 === (h = this._easePower) ? c *= c : 2 === h ? c *= c * c : 3 === h ? c *= c * c * c : 4 === h && (c *= c * c * c * c),
            1 === p ? this.ratio = 1 - c : 2 === p ? this.ratio = c : this._time / v < .5 ? this.ratio = c / 2 : this.ratio = 1 - c / 2) : f || (this.ratio = this._ease.getRatio(this._time / v))),
            y !== this._time || r || _ !== this._cycle) {
                if (!this._initted) {
                    if (this._init(),
                    !this._initted || this._gc)
                        return;
                    if (!r && this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration))
                        return this._time = y,
                        this._totalTime = g,
                        this._rawPrevTime = x,
                        this._cycle = _,
                        s.lazyTweens.push(this),
                        void (this._lazy = [t, e]);
                    !this._time || n || f ? n && this._ease._calcEnd && !f && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1)) : this.ratio = this._ease.getRatio(this._time / v)
                }
                for (!1 !== this._lazy && (this._lazy = !1),
                this._active || !this._paused && this._time !== y && t >= 0 && (this._active = !0),
                0 === g && (2 === this._initted && t > 0 && this._init(),
                this._startAt && (t >= 0 ? this._startAt.render(t, !0, r) : o || (o = "_dummyGS")),
                this.vars.onStart && (0 !== this._totalTime || 0 === v) && (e || this._callback("onStart"))),
                l = this._firstPT; l; )
                    l.f ? l.t[l.p](l.c * this.ratio + l.s) : l.t[l.p] = l.c * this.ratio + l.s,
                    l = l._next;
                this._onUpdate && (0 > t && this._startAt && this._startTime && this._startAt.render(t, !0, r),
                e || (this._totalTime !== g || o) && this._callback("onUpdate")),
                this._cycle !== _ && (e || this._gc || this.vars.onRepeat && this._callback("onRepeat")),
                o && (!this._gc || r) && (0 > t && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(t, !0, r),
                n && (this._timeline.autoRemoveChildren && this._enabled(!1, !1),
                this._active = !1),
                !e && this.vars[o] && this._callback(o),
                0 === v && this._rawPrevTime === a && d !== a && (this._rawPrevTime = 0))
            } else
                g !== this._totalTime && this._onUpdate && (e || this._callback("onUpdate"))
        }
        ,
        o.to = function(t, e, i) {
            return new o(t,e,i)
        }
        ,
        o.from = function(t, e, i) {
            return i.runBackwards = !0,
            i.immediateRender = 0 != i.immediateRender,
            new o(t,e,i)
        }
        ,
        o.fromTo = function(t, e, i, r) {
            return r.startAt = i,
            r.immediateRender = 0 != r.immediateRender && 0 != i.immediateRender,
            new o(t,e,r)
        }
        ,
        o.staggerTo = o.allTo = function(t, e, a, s, c, h, d) {
            s = s || 0;
            var f, m, y, g, _ = 0, v = [], x = function() {
                a.onComplete && a.onComplete.apply(a.onCompleteScope || this, arguments),
                c.apply(d || a.callbackScope || this, h || p)
            }, b = a.cycle, w = a.startAt && a.startAt.cycle;
            for (u(t) || ("string" == typeof t && (t = i.selector(t) || t),
            l(t) && (t = r(t))),
            t = t || [],
            0 > s && ((t = r(t)).reverse(),
            s *= -1),
            f = t.length - 1,
            y = 0; f >= y; y++) {
                for (g in m = {},
                a)
                    m[g] = a[g];
                if (b && (n(m, t, y),
                null != m.duration && (e = m.duration,
                delete m.duration)),
                w) {
                    for (g in w = m.startAt = {},
                    a.startAt)
                        w[g] = a.startAt[g];
                    n(m.startAt, t, y)
                }
                m.delay = _ + (m.delay || 0),
                y === f && c && (m.onComplete = x),
                v[y] = new o(t[y],e,m),
                _ += s
            }
            return v
        }
        ,
        o.staggerFrom = o.allFrom = function(t, e, i, r, n, a, s) {
            return i.runBackwards = !0,
            i.immediateRender = 0 != i.immediateRender,
            o.staggerTo(t, e, i, r, n, a, s)
        }
        ,
        o.staggerFromTo = o.allFromTo = function(t, e, i, r, n, a, s, l) {
            return r.startAt = i,
            r.immediateRender = 0 != r.immediateRender && 0 != i.immediateRender,
            o.staggerTo(t, e, r, n, a, s, l)
        }
        ,
        o.delayedCall = function(t, e, i, r, n) {
            return new o(e,0,{
                delay: t,
                onComplete: e,
                onCompleteParams: i,
                callbackScope: r,
                onReverseComplete: e,
                onReverseCompleteParams: i,
                immediateRender: !1,
                useFrames: n,
                overwrite: 0
            })
        }
        ,
        o.set = function(t, e) {
            return new o(t,0,e)
        }
        ,
        o.isTweening = function(t) {
            return i.getTweensOf(t, !0).length > 0
        }
        ;
        var h = function(t, e) {
            for (var r = [], n = 0, o = t._first; o; )
                o instanceof i ? r[n++] = o : (e && (r[n++] = o),
                n = (r = r.concat(h(o, e))).length),
                o = o._next;
            return r
        }
          , d = o.getAllTweens = function(e) {
            return h(t._rootTimeline, e).concat(h(t._rootFramesTimeline, e))
        }
        ;
        o.killAll = function(t, i, r, n) {
            null == i && (i = !0),
            null == r && (r = !0);
            var o, a, s, l = d(0 != n), u = l.length, c = i && r && n;
            for (s = 0; u > s; s++)
                a = l[s],
                (c || a instanceof e || (o = a.target === a.vars.onComplete) && r || i && !o) && (t ? a.totalTime(a._reversed ? 0 : a.totalDuration()) : a._enabled(!1, !1))
        }
        ,
        o.killChildTweensOf = function(t, e) {
            if (null != t) {
                var n, a, c, p, h, d = s.tweenLookup;
                if ("string" == typeof t && (t = i.selector(t) || t),
                l(t) && (t = r(t)),
                u(t))
                    for (p = t.length; --p > -1; )
                        o.killChildTweensOf(t[p], e);
                else {
                    for (c in n = [],
                    d)
                        for (a = d[c].target.parentNode; a; )
                            a === t && (n = n.concat(d[c].tweens)),
                            a = a.parentNode;
                    for (h = n.length,
                    p = 0; h > p; p++)
                        e && n[p].totalTime(n[p].totalDuration()),
                        n[p]._enabled(!1, !1)
                }
            }
        }
        ;
        var f = function(t, i, r, n) {
            i = !1 !== i,
            r = !1 !== r;
            for (var o, a, s = d(n = !1 !== n), l = i && r && n, u = s.length; --u > -1; )
                a = s[u],
                (l || a instanceof e || (o = a.target === a.vars.onComplete) && r || i && !o) && a.paused(t)
        };
        return o.pauseAll = function(t, e, i) {
            f(!0, t, e, i)
        }
        ,
        o.resumeAll = function(t, e, i) {
            f(!1, t, e, i)
        }
        ,
        o.globalTimeScale = function(e) {
            var r = t._rootTimeline
              , n = i.ticker.time;
            return arguments.length ? (e = e || a,
            r._startTime = n - (n - r._startTime) * r._timeScale / e,
            r = t._rootFramesTimeline,
            n = i.ticker.frame,
            r._startTime = n - (n - r._startTime) * r._timeScale / e,
            r._timeScale = t._rootTimeline._timeScale = e,
            e) : r._timeScale
        }
        ,
        c.progress = function(t, e) {
            return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 != (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), e) : this._time / this.duration()
        }
        ,
        c.totalProgress = function(t, e) {
            return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this._totalTime / this.totalDuration()
        }
        ,
        c.time = function(t, e) {
            return arguments.length ? (this._dirty && this.totalDuration(),
            t > this._duration && (t = this._duration),
            this._yoyo && 0 != (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)),
            this.totalTime(t, e)) : this._time
        }
        ,
        c.duration = function(e) {
            return arguments.length ? t.prototype.duration.call(this, e) : this._duration
        }
        ,
        c.totalDuration = function(t) {
            return arguments.length ? -1 === this._repeat ? this : this.duration((t - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat,
            this._dirty = !1),
            this._totalDuration)
        }
        ,
        c.repeat = function(t) {
            return arguments.length ? (this._repeat = t,
            this._uncache(!0)) : this._repeat
        }
        ,
        c.repeatDelay = function(t) {
            return arguments.length ? (this._repeatDelay = t,
            this._uncache(!0)) : this._repeatDelay
        }
        ,
        c.yoyo = function(t) {
            return arguments.length ? (this._yoyo = t,
            this) : this._yoyo
        }
        ,
        o
    }, !0),
    _gsScope._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, i) {
        var r = function(t) {
            e.call(this, t),
            this._labels = {},
            this.autoRemoveChildren = !0 === this.vars.autoRemoveChildren,
            this.smoothChildTiming = !0 === this.vars.smoothChildTiming,
            this._sortChildren = !0,
            this._onUpdate = this.vars.onUpdate;
            var i, r, n = this.vars;
            for (r in n)
                i = n[r],
                l(i) && -1 !== i.join("").indexOf("{self}") && (n[r] = this._swapSelfInParams(i));
            l(n.tweens) && this.add(n.tweens, 0, n.align, n.stagger)
        }
          , n = 1e-10
          , o = i._internals
          , a = r._internals = {}
          , s = o.isSelector
          , l = o.isArray
          , u = o.lazyTweens
          , c = o.lazyRender
          , p = _gsScope._gsDefine.globals
          , h = function(t) {
            var e, i = {};
            for (e in t)
                i[e] = t[e];
            return i
        }
          , d = function(t, e, i) {
            var r, n, o = t.cycle;
            for (r in o)
                n = o[r],
                t[r] = "function" == typeof n ? n(i, e[i]) : n[i % n.length];
            delete t.cycle
        }
          , f = a.pauseCallback = function() {}
          , m = function(t) {
            var e, i = [], r = t.length;
            for (e = 0; e !== r; i.push(t[e++]))
                ;
            return i
        }
          , y = r.prototype = new e;
        return r.version = "2.0.2",
        y.constructor = r,
        y.kill()._gc = y._forcingPlayhead = y._hasPause = !1,
        y.to = function(t, e, r, n) {
            var o = r.repeat && p.TweenMax || i;
            return e ? this.add(new o(t,e,r), n) : this.set(t, r, n)
        }
        ,
        y.from = function(t, e, r, n) {
            return this.add((r.repeat && p.TweenMax || i).from(t, e, r), n)
        }
        ,
        y.fromTo = function(t, e, r, n, o) {
            var a = n.repeat && p.TweenMax || i;
            return e ? this.add(a.fromTo(t, e, r, n), o) : this.set(t, n, o)
        }
        ,
        y.staggerTo = function(t, e, n, o, a, l, u, c) {
            var p, f, y = new r({
                onComplete: l,
                onCompleteParams: u,
                callbackScope: c,
                smoothChildTiming: this.smoothChildTiming
            }), g = n.cycle;
            for ("string" == typeof t && (t = i.selector(t) || t),
            s(t = t || []) && (t = m(t)),
            0 > (o = o || 0) && ((t = m(t)).reverse(),
            o *= -1),
            f = 0; f < t.length; f++)
                (p = h(n)).startAt && (p.startAt = h(p.startAt),
                p.startAt.cycle && d(p.startAt, t, f)),
                g && (d(p, t, f),
                null != p.duration && (e = p.duration,
                delete p.duration)),
                y.to(t[f], e, p, f * o);
            return this.add(y, a)
        }
        ,
        y.staggerFrom = function(t, e, i, r, n, o, a, s) {
            return i.immediateRender = 0 != i.immediateRender,
            i.runBackwards = !0,
            this.staggerTo(t, e, i, r, n, o, a, s)
        }
        ,
        y.staggerFromTo = function(t, e, i, r, n, o, a, s, l) {
            return r.startAt = i,
            r.immediateRender = 0 != r.immediateRender && 0 != i.immediateRender,
            this.staggerTo(t, e, r, n, o, a, s, l)
        }
        ,
        y.call = function(t, e, r, n) {
            return this.add(i.delayedCall(0, t, e, r), n)
        }
        ,
        y.set = function(t, e, r) {
            return r = this._parseTimeOrLabel(r, 0, !0),
            null == e.immediateRender && (e.immediateRender = r === this._time && !this._paused),
            this.add(new i(t,0,e), r)
        }
        ,
        r.exportRoot = function(t, e) {
            null == (t = t || {}).smoothChildTiming && (t.smoothChildTiming = !0);
            var n, o, a, s, l = new r(t), u = l._timeline;
            for (null == e && (e = !0),
            u._remove(l, !0),
            l._startTime = 0,
            l._rawPrevTime = l._time = l._totalTime = u._time,
            a = u._first; a; )
                s = a._next,
                e && a instanceof i && a.target === a.vars.onComplete || (0 > (o = a._startTime - a._delay) && (n = 1),
                l.add(a, o)),
                a = s;
            return u.add(l, 0),
            n && l.totalDuration(),
            l
        }
        ,
        y.add = function(n, o, a, s) {
            var u, c, p, h, d, f;
            if ("number" != typeof o && (o = this._parseTimeOrLabel(o, 0, !0, n)),
            !(n instanceof t)) {
                if (n instanceof Array || n && n.push && l(n)) {
                    for (a = a || "normal",
                    s = s || 0,
                    u = o,
                    c = n.length,
                    p = 0; c > p; p++)
                        l(h = n[p]) && (h = new r({
                            tweens: h
                        })),
                        this.add(h, u),
                        "string" != typeof h && "function" != typeof h && ("sequence" === a ? u = h._startTime + h.totalDuration() / h._timeScale : "start" === a && (h._startTime -= h.delay())),
                        u += s;
                    return this._uncache(!0)
                }
                if ("string" == typeof n)
                    return this.addLabel(n, o);
                if ("function" != typeof n)
                    throw "Cannot add " + n + " into the timeline; it is not a tween, timeline, function, or string.";
                n = i.delayedCall(0, n)
            }
            if (e.prototype.add.call(this, n, o),
            n._time && (u = Math.max(0, Math.min(n.totalDuration(), (this.rawTime() - n._startTime) * n._timeScale)),
            Math.abs(u - n._totalTime) > 1e-5 && n.render(u, !1, !1)),
            (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                for (f = (d = this).rawTime() > n._startTime; d._timeline; )
                    f && d._timeline.smoothChildTiming ? d.totalTime(d._totalTime, !0) : d._gc && d._enabled(!0, !1),
                    d = d._timeline;
            return this
        }
        ,
        y.remove = function(e) {
            if (e instanceof t) {
                this._remove(e, !1);
                var i = e._timeline = e.vars.useFrames ? t._rootFramesTimeline : t._rootTimeline;
                return e._startTime = (e._paused ? e._pauseTime : i._time) - (e._reversed ? e.totalDuration() - e._totalTime : e._totalTime) / e._timeScale,
                this
            }
            if (e instanceof Array || e && e.push && l(e)) {
                for (var r = e.length; --r > -1; )
                    this.remove(e[r]);
                return this
            }
            return "string" == typeof e ? this.removeLabel(e) : this.kill(null, e)
        }
        ,
        y._remove = function(t, i) {
            return e.prototype._remove.call(this, t, i),
            this._last ? this._time > this.duration() && (this._time = this._duration,
            this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0,
            this
        }
        ,
        y.append = function(t, e) {
            return this.add(t, this._parseTimeOrLabel(null, e, !0, t))
        }
        ,
        y.insert = y.insertMultiple = function(t, e, i, r) {
            return this.add(t, e || 0, i, r)
        }
        ,
        y.appendMultiple = function(t, e, i, r) {
            return this.add(t, this._parseTimeOrLabel(null, e, !0, t), i, r)
        }
        ,
        y.addLabel = function(t, e) {
            return this._labels[t] = this._parseTimeOrLabel(e),
            this
        }
        ,
        y.addPause = function(t, e, r, n) {
            var o = i.delayedCall(0, f, r, n || this);
            return o.vars.onComplete = o.vars.onReverseComplete = e,
            o.data = "isPause",
            this._hasPause = !0,
            this.add(o, t)
        }
        ,
        y.removeLabel = function(t) {
            return delete this._labels[t],
            this
        }
        ,
        y.getLabelTime = function(t) {
            return null != this._labels[t] ? this._labels[t] : -1
        }
        ,
        y._parseTimeOrLabel = function(e, i, r, n) {
            var o, a;
            if (n instanceof t && n.timeline === this)
                this.remove(n);
            else if (n && (n instanceof Array || n.push && l(n)))
                for (a = n.length; --a > -1; )
                    n[a]instanceof t && n[a].timeline === this && this.remove(n[a]);
            if (o = "number" != typeof e || i ? this.duration() > 99999999999 ? this.recent().endTime(!1) : this._duration : 0,
            "string" == typeof i)
                return this._parseTimeOrLabel(i, r && "number" == typeof e && null == this._labels[i] ? e - o : 0, r);
            if (i = i || 0,
            "string" != typeof e || !isNaN(e) && null == this._labels[e])
                null == e && (e = o);
            else {
                if (-1 === (a = e.indexOf("=")))
                    return null == this._labels[e] ? r ? this._labels[e] = o + i : i : this._labels[e] + i;
                i = parseInt(e.charAt(a - 1) + "1", 10) * Number(e.substr(a + 1)),
                e = a > 1 ? this._parseTimeOrLabel(e.substr(0, a - 1), 0, r) : o
            }
            return Number(e) + i
        }
        ,
        y.seek = function(t, e) {
            return this.totalTime("number" == typeof t ? t : this._parseTimeOrLabel(t), !1 !== e)
        }
        ,
        y.stop = function() {
            return this.paused(!0)
        }
        ,
        y.gotoAndPlay = function(t, e) {
            return this.play(t, e)
        }
        ,
        y.gotoAndStop = function(t, e) {
            return this.pause(t, e)
        }
        ,
        y.render = function(t, e, i) {
            this._gc && this._enabled(!0, !1);
            var r, o, a, s, l, p, h, d = this._time, f = this._dirty ? this.totalDuration() : this._totalDuration, m = this._startTime, y = this._timeScale, g = this._paused;
            if (d !== this._time && (t += this._time - d),
            t >= f - 1e-7 && t >= 0)
                this._totalTime = this._time = f,
                this._reversed || this._hasPausedChild() || (o = !0,
                s = "onComplete",
                l = !!this._timeline.autoRemoveChildren,
                0 === this._duration && (0 >= t && t >= -1e-7 || this._rawPrevTime < 0 || this._rawPrevTime === n) && this._rawPrevTime !== t && this._first && (l = !0,
                this._rawPrevTime > n && (s = "onReverseComplete"))),
                this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : n,
                t = f + 1e-4;
            else if (1e-7 > t)
                if (this._totalTime = this._time = 0,
                (0 !== d || 0 === this._duration && this._rawPrevTime !== n && (this._rawPrevTime > 0 || 0 > t && this._rawPrevTime >= 0)) && (s = "onReverseComplete",
                o = this._reversed),
                0 > t)
                    this._active = !1,
                    this._timeline.autoRemoveChildren && this._reversed ? (l = o = !0,
                    s = "onReverseComplete") : this._rawPrevTime >= 0 && this._first && (l = !0),
                    this._rawPrevTime = t;
                else {
                    if (this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : n,
                    0 === t && o)
                        for (r = this._first; r && 0 === r._startTime; )
                            r._duration || (o = !1),
                            r = r._next;
                    t = 0,
                    this._initted || (l = !0)
                }
            else {
                if (this._hasPause && !this._forcingPlayhead && !e) {
                    if (t >= d)
                        for (r = this._first; r && r._startTime <= t && !p; )
                            r._duration || "isPause" !== r.data || r.ratio || 0 === r._startTime && 0 === this._rawPrevTime || (p = r),
                            r = r._next;
                    else
                        for (r = this._last; r && r._startTime >= t && !p; )
                            r._duration || "isPause" === r.data && r._rawPrevTime > 0 && (p = r),
                            r = r._prev;
                    p && (this._time = t = p._startTime,
                    this._totalTime = t + this._cycle * (this._totalDuration + this._repeatDelay))
                }
                this._totalTime = this._time = this._rawPrevTime = t
            }
            if (this._time !== d && this._first || i || l || p) {
                if (this._initted || (this._initted = !0),
                this._active || !this._paused && this._time !== d && t > 0 && (this._active = !0),
                0 === d && this.vars.onStart && (0 === this._time && this._duration || e || this._callback("onStart")),
                (h = this._time) >= d)
                    for (r = this._first; r && (a = r._next,
                    h === this._time && (!this._paused || g)); )
                        (r._active || r._startTime <= h && !r._paused && !r._gc) && (p === r && this.pause(),
                        r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, i) : r.render((t - r._startTime) * r._timeScale, e, i)),
                        r = a;
                else
                    for (r = this._last; r && (a = r._prev,
                    h === this._time && (!this._paused || g)); ) {
                        if (r._active || r._startTime <= d && !r._paused && !r._gc) {
                            if (p === r) {
                                for (p = r._prev; p && p.endTime() > this._time; )
                                    p.render(p._reversed ? p.totalDuration() - (t - p._startTime) * p._timeScale : (t - p._startTime) * p._timeScale, e, i),
                                    p = p._prev;
                                p = null,
                                this.pause()
                            }
                            r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, i) : r.render((t - r._startTime) * r._timeScale, e, i)
                        }
                        r = a
                    }
                this._onUpdate && (e || (u.length && c(),
                this._callback("onUpdate"))),
                s && (this._gc || (m === this._startTime || y !== this._timeScale) && (0 === this._time || f >= this.totalDuration()) && (o && (u.length && c(),
                this._timeline.autoRemoveChildren && this._enabled(!1, !1),
                this._active = !1),
                !e && this.vars[s] && this._callback(s)))
            }
        }
        ,
        y._hasPausedChild = function() {
            for (var t = this._first; t; ) {
                if (t._paused || t instanceof r && t._hasPausedChild())
                    return !0;
                t = t._next
            }
            return !1
        }
        ,
        y.getChildren = function(t, e, r, n) {
            n = n || -9999999999;
            for (var o = [], a = this._first, s = 0; a; )
                a._startTime < n || (a instanceof i ? !1 !== e && (o[s++] = a) : (!1 !== r && (o[s++] = a),
                !1 !== t && (s = (o = o.concat(a.getChildren(!0, e, r))).length))),
                a = a._next;
            return o
        }
        ,
        y.getTweensOf = function(t, e) {
            var r, n, o = this._gc, a = [], s = 0;
            for (o && this._enabled(!0, !0),
            n = (r = i.getTweensOf(t)).length; --n > -1; )
                (r[n].timeline === this || e && this._contains(r[n])) && (a[s++] = r[n]);
            return o && this._enabled(!1, !0),
            a
        }
        ,
        y.recent = function() {
            return this._recent
        }
        ,
        y._contains = function(t) {
            for (var e = t.timeline; e; ) {
                if (e === this)
                    return !0;
                e = e.timeline
            }
            return !1
        }
        ,
        y.shiftChildren = function(t, e, i) {
            i = i || 0;
            for (var r, n = this._first, o = this._labels; n; )
                n._startTime >= i && (n._startTime += t),
                n = n._next;
            if (e)
                for (r in o)
                    o[r] >= i && (o[r] += t);
            return this._uncache(!0)
        }
        ,
        y._kill = function(t, e) {
            if (!t && !e)
                return this._enabled(!1, !1);
            for (var i = e ? this.getTweensOf(e) : this.getChildren(!0, !0, !1), r = i.length, n = !1; --r > -1; )
                i[r]._kill(t, e) && (n = !0);
            return n
        }
        ,
        y.clear = function(t) {
            var e = this.getChildren(!1, !0, !0)
              , i = e.length;
            for (this._time = this._totalTime = 0; --i > -1; )
                e[i]._enabled(!1, !1);
            return !1 !== t && (this._labels = {}),
            this._uncache(!0)
        }
        ,
        y.invalidate = function() {
            for (var e = this._first; e; )
                e.invalidate(),
                e = e._next;
            return t.prototype.invalidate.call(this)
        }
        ,
        y._enabled = function(t, i) {
            if (t === this._gc)
                for (var r = this._first; r; )
                    r._enabled(t, !0),
                    r = r._next;
            return e.prototype._enabled.call(this, t, i)
        }
        ,
        y.totalTime = function(e, i, r) {
            this._forcingPlayhead = !0;
            var n = t.prototype.totalTime.apply(this, arguments);
            return this._forcingPlayhead = !1,
            n
        }
        ,
        y.duration = function(t) {
            return arguments.length ? (0 !== this.duration() && 0 !== t && this.timeScale(this._duration / t),
            this) : (this._dirty && this.totalDuration(),
            this._duration)
        }
        ,
        y.totalDuration = function(t) {
            if (!arguments.length) {
                if (this._dirty) {
                    for (var e, i, r = 0, n = this._last, o = 999999999999; n; )
                        e = n._prev,
                        n._dirty && n.totalDuration(),
                        n._startTime > o && this._sortChildren && !n._paused && !this._calculatingDuration ? (this._calculatingDuration = 1,
                        this.add(n, n._startTime - n._delay),
                        this._calculatingDuration = 0) : o = n._startTime,
                        n._startTime < 0 && !n._paused && (r -= n._startTime,
                        this._timeline.smoothChildTiming && (this._startTime += n._startTime / this._timeScale,
                        this._time -= n._startTime,
                        this._totalTime -= n._startTime,
                        this._rawPrevTime -= n._startTime),
                        this.shiftChildren(-n._startTime, !1, -9999999999),
                        o = 0),
                        (i = n._startTime + n._totalDuration / n._timeScale) > r && (r = i),
                        n = e;
                    this._duration = this._totalDuration = r,
                    this._dirty = !1
                }
                return this._totalDuration
            }
            return t && this.totalDuration() ? this.timeScale(this._totalDuration / t) : this
        }
        ,
        y.paused = function(e) {
            if (!e)
                for (var i = this._first, r = this._time; i; )
                    i._startTime === r && "isPause" === i.data && (i._rawPrevTime = 0),
                    i = i._next;
            return t.prototype.paused.apply(this, arguments)
        }
        ,
        y.usesFrames = function() {
            for (var e = this._timeline; e._timeline; )
                e = e._timeline;
            return e === t._rootFramesTimeline
        }
        ,
        y.rawTime = function(t) {
            return t && (this._paused || this._repeat && this.time() > 0 && this.totalProgress() < 1) ? this._totalTime % (this._duration + this._repeatDelay) : this._paused ? this._totalTime : (this._timeline.rawTime(t) - this._startTime) * this._timeScale
        }
        ,
        r
    }, !0),
    _gsScope._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(t, e, i) {
        var r = function(e) {
            t.call(this, e),
            this._repeat = this.vars.repeat || 0,
            this._repeatDelay = this.vars.repeatDelay || 0,
            this._cycle = 0,
            this._yoyo = !0 === this.vars.yoyo,
            this._dirty = !0
        }
          , n = 1e-10
          , o = e._internals
          , a = o.lazyTweens
          , s = o.lazyRender
          , l = _gsScope._gsDefine.globals
          , u = new i(null,null,1,0)
          , c = r.prototype = new t;
        return c.constructor = r,
        c.kill()._gc = !1,
        r.version = "2.0.2",
        c.invalidate = function() {
            return this._yoyo = !0 === this.vars.yoyo,
            this._repeat = this.vars.repeat || 0,
            this._repeatDelay = this.vars.repeatDelay || 0,
            this._uncache(!0),
            t.prototype.invalidate.call(this)
        }
        ,
        c.addCallback = function(t, i, r, n) {
            return this.add(e.delayedCall(0, t, r, n), i)
        }
        ,
        c.removeCallback = function(t, e) {
            if (t)
                if (null == e)
                    this._kill(null, t);
                else
                    for (var i = this.getTweensOf(t, !1), r = i.length, n = this._parseTimeOrLabel(e); --r > -1; )
                        i[r]._startTime === n && i[r]._enabled(!1, !1);
            return this
        }
        ,
        c.removePause = function(e) {
            return this.removeCallback(t._internals.pauseCallback, e)
        }
        ,
        c.tweenTo = function(t, i) {
            i = i || {};
            var r, n, o, a = {
                ease: u,
                useFrames: this.usesFrames(),
                immediateRender: !1,
                lazy: !1
            }, s = i.repeat && l.TweenMax || e;
            for (n in i)
                a[n] = i[n];
            return a.time = this._parseTimeOrLabel(t),
            r = Math.abs(Number(a.time) - this._time) / this._timeScale || .001,
            o = new s(this,r,a),
            a.onStart = function() {
                o.target.paused(!0),
                o.vars.time === o.target.time() || r !== o.duration() || o.isFromTo || o.duration(Math.abs(o.vars.time - o.target.time()) / o.target._timeScale).render(o.time(), !0, !0),
                i.onStart && i.onStart.apply(i.onStartScope || i.callbackScope || o, i.onStartParams || [])
            }
            ,
            o
        }
        ,
        c.tweenFromTo = function(t, e, i) {
            i = i || {},
            t = this._parseTimeOrLabel(t),
            i.startAt = {
                onComplete: this.seek,
                onCompleteParams: [t],
                callbackScope: this
            },
            i.immediateRender = !1 !== i.immediateRender;
            var r = this.tweenTo(e, i);
            return r.isFromTo = 1,
            r.duration(Math.abs(r.vars.time - t) / this._timeScale || .001)
        }
        ,
        c.render = function(t, e, i) {
            this._gc && this._enabled(!0, !1);
            var r, o, l, u, c, p, h, d, f = this._time, m = this._dirty ? this.totalDuration() : this._totalDuration, y = this._duration, g = this._totalTime, _ = this._startTime, v = this._timeScale, x = this._rawPrevTime, b = this._paused, w = this._cycle;
            if (f !== this._time && (t += this._time - f),
            t >= m - 1e-7 && t >= 0)
                this._locked || (this._totalTime = m,
                this._cycle = this._repeat),
                this._reversed || this._hasPausedChild() || (o = !0,
                u = "onComplete",
                c = !!this._timeline.autoRemoveChildren,
                0 === this._duration && (0 >= t && t >= -1e-7 || 0 > x || x === n) && x !== t && this._first && (c = !0,
                x > n && (u = "onReverseComplete"))),
                this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : n,
                this._yoyo && 0 != (1 & this._cycle) ? this._time = t = 0 : (this._time = y,
                t = y + 1e-4);
            else if (1e-7 > t)
                if (this._locked || (this._totalTime = this._cycle = 0),
                this._time = 0,
                (0 !== f || 0 === y && x !== n && (x > 0 || 0 > t && x >= 0) && !this._locked) && (u = "onReverseComplete",
                o = this._reversed),
                0 > t)
                    this._active = !1,
                    this._timeline.autoRemoveChildren && this._reversed ? (c = o = !0,
                    u = "onReverseComplete") : x >= 0 && this._first && (c = !0),
                    this._rawPrevTime = t;
                else {
                    if (this._rawPrevTime = y || !e || t || this._rawPrevTime === t ? t : n,
                    0 === t && o)
                        for (r = this._first; r && 0 === r._startTime; )
                            r._duration || (o = !1),
                            r = r._next;
                    t = 0,
                    this._initted || (c = !0)
                }
            else if (0 === y && 0 > x && (c = !0),
            this._time = this._rawPrevTime = t,
            this._locked || (this._totalTime = t,
            0 !== this._repeat && (p = y + this._repeatDelay,
            this._cycle = this._totalTime / p >> 0,
            0 !== this._cycle && this._cycle === this._totalTime / p && t >= g && this._cycle--,
            this._time = this._totalTime - this._cycle * p,
            this._yoyo && 0 != (1 & this._cycle) && (this._time = y - this._time),
            this._time > y ? (this._time = y,
            t = y + 1e-4) : this._time < 0 ? this._time = t = 0 : t = this._time)),
            this._hasPause && !this._forcingPlayhead && !e) {
                if ((t = this._time) >= f || this._repeat && w !== this._cycle)
                    for (r = this._first; r && r._startTime <= t && !h; )
                        r._duration || "isPause" !== r.data || r.ratio || 0 === r._startTime && 0 === this._rawPrevTime || (h = r),
                        r = r._next;
                else
                    for (r = this._last; r && r._startTime >= t && !h; )
                        r._duration || "isPause" === r.data && r._rawPrevTime > 0 && (h = r),
                        r = r._prev;
                h && h._startTime < y && (this._time = t = h._startTime,
                this._totalTime = t + this._cycle * (this._totalDuration + this._repeatDelay))
            }
            if (this._cycle !== w && !this._locked) {
                var T = this._yoyo && 0 != (1 & w)
                  , S = T === (this._yoyo && 0 != (1 & this._cycle))
                  , A = this._totalTime
                  , k = this._cycle
                  , E = this._rawPrevTime
                  , C = this._time;
                if (this._totalTime = w * y,
                this._cycle < w ? T = !T : this._totalTime += y,
                this._time = f,
                this._rawPrevTime = 0 === y ? x - 1e-4 : x,
                this._cycle = w,
                this._locked = !0,
                f = T ? 0 : y,
                this.render(f, e, 0 === y),
                e || this._gc || this.vars.onRepeat && (this._cycle = k,
                this._locked = !1,
                this._callback("onRepeat")),
                f !== this._time)
                    return;
                if (S && (this._cycle = w,
                this._locked = !0,
                f = T ? y + 1e-4 : -1e-4,
                this.render(f, !0, !1)),
                this._locked = !1,
                this._paused && !b)
                    return;
                this._time = C,
                this._totalTime = A,
                this._cycle = k,
                this._rawPrevTime = E
            }
            if (this._time !== f && this._first || i || c || h) {
                if (this._initted || (this._initted = !0),
                this._active || !this._paused && this._totalTime !== g && t > 0 && (this._active = !0),
                0 === g && this.vars.onStart && (0 === this._totalTime && this._totalDuration || e || this._callback("onStart")),
                (d = this._time) >= f)
                    for (r = this._first; r && (l = r._next,
                    d === this._time && (!this._paused || b)); )
                        (r._active || r._startTime <= this._time && !r._paused && !r._gc) && (h === r && this.pause(),
                        r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, i) : r.render((t - r._startTime) * r._timeScale, e, i)),
                        r = l;
                else
                    for (r = this._last; r && (l = r._prev,
                    d === this._time && (!this._paused || b)); ) {
                        if (r._active || r._startTime <= f && !r._paused && !r._gc) {
                            if (h === r) {
                                for (h = r._prev; h && h.endTime() > this._time; )
                                    h.render(h._reversed ? h.totalDuration() - (t - h._startTime) * h._timeScale : (t - h._startTime) * h._timeScale, e, i),
                                    h = h._prev;
                                h = null,
                                this.pause()
                            }
                            r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, i) : r.render((t - r._startTime) * r._timeScale, e, i)
                        }
                        r = l
                    }
                this._onUpdate && (e || (a.length && s(),
                this._callback("onUpdate"))),
                u && (this._locked || this._gc || (_ === this._startTime || v !== this._timeScale) && (0 === this._time || m >= this.totalDuration()) && (o && (a.length && s(),
                this._timeline.autoRemoveChildren && this._enabled(!1, !1),
                this._active = !1),
                !e && this.vars[u] && this._callback(u)))
            } else
                g !== this._totalTime && this._onUpdate && (e || this._callback("onUpdate"))
        }
        ,
        c.getActive = function(t, e, i) {
            null == t && (t = !0),
            null == e && (e = !0),
            null == i && (i = !1);
            var r, n, o = [], a = this.getChildren(t, e, i), s = 0, l = a.length;
            for (r = 0; l > r; r++)
                (n = a[r]).isActive() && (o[s++] = n);
            return o
        }
        ,
        c.getLabelAfter = function(t) {
            t || 0 !== t && (t = this._time);
            var e, i = this.getLabelsArray(), r = i.length;
            for (e = 0; r > e; e++)
                if (i[e].time > t)
                    return i[e].name;
            return null
        }
        ,
        c.getLabelBefore = function(t) {
            null == t && (t = this._time);
            for (var e = this.getLabelsArray(), i = e.length; --i > -1; )
                if (e[i].time < t)
                    return e[i].name;
            return null
        }
        ,
        c.getLabelsArray = function() {
            var t, e = [], i = 0;
            for (t in this._labels)
                e[i++] = {
                    time: this._labels[t],
                    name: t
                };
            return e.sort(function(t, e) {
                return t.time - e.time
            }),
            e
        }
        ,
        c.invalidate = function() {
            return this._locked = !1,
            t.prototype.invalidate.call(this)
        }
        ,
        c.progress = function(t, e) {
            return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 != (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), e) : this._time / this.duration() || 0
        }
        ,
        c.totalProgress = function(t, e) {
            return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this._totalTime / this.totalDuration() || 0
        }
        ,
        c.totalDuration = function(e) {
            return arguments.length ? -1 !== this._repeat && e ? this.timeScale(this.totalDuration() / e) : this : (this._dirty && (t.prototype.totalDuration.call(this),
            this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat),
            this._totalDuration)
        }
        ,
        c.time = function(t, e) {
            return arguments.length ? (this._dirty && this.totalDuration(),
            t > this._duration && (t = this._duration),
            this._yoyo && 0 != (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)),
            this.totalTime(t, e)) : this._time
        }
        ,
        c.repeat = function(t) {
            return arguments.length ? (this._repeat = t,
            this._uncache(!0)) : this._repeat
        }
        ,
        c.repeatDelay = function(t) {
            return arguments.length ? (this._repeatDelay = t,
            this._uncache(!0)) : this._repeatDelay
        }
        ,
        c.yoyo = function(t) {
            return arguments.length ? (this._yoyo = t,
            this) : this._yoyo
        }
        ,
        c.currentLabel = function(t) {
            return arguments.length ? this.seek(t, !0) : this.getLabelBefore(this._time + 1e-8)
        }
        ,
        r
    }, !0),
    t = 180 / Math.PI,
    e = [],
    i = [],
    r = [],
    n = {},
    o = _gsScope._gsDefine.globals,
    a = function(t, e, i, r) {
        i === r && (i = r - (r - e) / 1e6),
        t === e && (e = t + (i - t) / 1e6),
        this.a = t,
        this.b = e,
        this.c = i,
        this.d = r,
        this.da = r - t,
        this.ca = i - t,
        this.ba = e - t
    }
    ,
    s = function(t, e, i, r) {
        var n = {
            a: t
        }
          , o = {}
          , a = {}
          , s = {
            c: r
        }
          , l = (t + e) / 2
          , u = (e + i) / 2
          , c = (i + r) / 2
          , p = (l + u) / 2
          , h = (u + c) / 2
          , d = (h - p) / 8;
        return n.b = l + (t - l) / 4,
        o.b = p + d,
        n.c = o.a = (n.b + o.b) / 2,
        o.c = a.a = (p + h) / 2,
        a.b = h - d,
        s.b = c + (r - c) / 4,
        a.c = s.a = (a.b + s.b) / 2,
        [n, o, a, s]
    }
    ,
    l = function(t, n, o, a, l) {
        var u, c, p, h, d, f, m, y, g, _, v, x, b, w = t.length - 1, T = 0, S = t[0].a;
        for (u = 0; w > u; u++)
            c = (d = t[T]).a,
            p = d.d,
            h = t[T + 1].d,
            l ? (v = e[u],
            b = ((x = i[u]) + v) * n * .25 / (a ? .5 : r[u] || .5),
            y = p - ((f = p - (p - c) * (a ? .5 * n : 0 !== v ? b / v : 0)) + (((m = p + (h - p) * (a ? .5 * n : 0 !== x ? b / x : 0)) - f) * (3 * v / (v + x) + .5) / 4 || 0))) : y = p - ((f = p - (p - c) * n * .5) + (m = p + (h - p) * n * .5)) / 2,
            f += y,
            m += y,
            d.c = g = f,
            d.b = 0 !== u ? S : S = d.a + .6 * (d.c - d.a),
            d.da = p - c,
            d.ca = g - c,
            d.ba = S - c,
            o ? (_ = s(c, S, g, p),
            t.splice(T, 1, _[0], _[1], _[2], _[3]),
            T += 4) : T++,
            S = m;
        (d = t[T]).b = S,
        d.c = S + .4 * (d.d - S),
        d.da = d.d - d.a,
        d.ca = d.c - d.a,
        d.ba = S - d.a,
        o && (_ = s(d.a, S, d.c, d.d),
        t.splice(T, 1, _[0], _[1], _[2], _[3]))
    }
    ,
    u = function(t, r, n, o) {
        var s, l, u, c, p, h, d = [];
        if (o)
            for (l = (t = [o].concat(t)).length; --l > -1; )
                "string" == typeof (h = t[l][r]) && "=" === h.charAt(1) && (t[l][r] = o[r] + Number(h.charAt(0) + h.substr(2)));
        if (0 > (s = t.length - 2))
            return d[0] = new a(t[0][r],0,0,t[0][r]),
            d;
        for (l = 0; s > l; l++)
            u = t[l][r],
            c = t[l + 1][r],
            d[l] = new a(u,0,0,c),
            n && (p = t[l + 2][r],
            e[l] = (e[l] || 0) + (c - u) * (c - u),
            i[l] = (i[l] || 0) + (p - c) * (p - c));
        return d[l] = new a(t[l][r],0,0,t[l + 1][r]),
        d
    }
    ,
    c = function(t, o, a, s, c, p) {
        var h, d, f, m, y, g, _, v, x = {}, b = [], w = p || t[0];
        for (d in c = "string" == typeof c ? "," + c + "," : ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",
        null == o && (o = 1),
        t[0])
            b.push(d);
        if (t.length > 1) {
            for (v = t[t.length - 1],
            _ = !0,
            h = b.length; --h > -1; )
                if (d = b[h],
                Math.abs(w[d] - v[d]) > .05) {
                    _ = !1;
                    break
                }
            _ && (t = t.concat(),
            p && t.unshift(p),
            t.push(t[1]),
            p = t[t.length - 3])
        }
        for (e.length = i.length = r.length = 0,
        h = b.length; --h > -1; )
            d = b[h],
            n[d] = -1 !== c.indexOf("," + d + ","),
            x[d] = u(t, d, n[d], p);
        for (h = e.length; --h > -1; )
            e[h] = Math.sqrt(e[h]),
            i[h] = Math.sqrt(i[h]);
        if (!s) {
            for (h = b.length; --h > -1; )
                if (n[d])
                    for (g = (f = x[b[h]]).length - 1,
                    m = 0; g > m; m++)
                        y = f[m + 1].da / i[m] + f[m].da / e[m] || 0,
                        r[m] = (r[m] || 0) + y * y;
            for (h = r.length; --h > -1; )
                r[h] = Math.sqrt(r[h])
        }
        for (h = b.length,
        m = a ? 4 : 1; --h > -1; )
            f = x[d = b[h]],
            l(f, o, a, s, n[d]),
            _ && (f.splice(0, m),
            f.splice(f.length - m, m));
        return x
    }
    ,
    p = function(t, e, i) {
        var r, n, o, s, l, u, c, p, h, d, f, m = {}, y = "cubic" === (e = e || "soft") ? 3 : 2, g = "soft" === e, _ = [];
        if (g && i && (t = [i].concat(t)),
        null == t || t.length < y + 1)
            throw "invalid Bezier data";
        for (h in t[0])
            _.push(h);
        for (u = _.length; --u > -1; ) {
            for (m[h = _[u]] = l = [],
            d = 0,
            p = t.length,
            c = 0; p > c; c++)
                r = null == i ? t[c][h] : "string" == typeof (f = t[c][h]) && "=" === f.charAt(1) ? i[h] + Number(f.charAt(0) + f.substr(2)) : Number(f),
                g && c > 1 && p - 1 > c && (l[d++] = (r + l[d - 2]) / 2),
                l[d++] = r;
            for (p = d - y + 1,
            d = 0,
            c = 0; p > c; c += y)
                r = l[c],
                n = l[c + 1],
                o = l[c + 2],
                s = 2 === y ? 0 : l[c + 3],
                l[d++] = f = 3 === y ? new a(r,n,o,s) : new a(r,(2 * n + r) / 3,(2 * n + o) / 3,o);
            l.length = d
        }
        return m
    }
    ,
    h = function(t, e, i) {
        for (var r, n, o, a, s, l, u, c, p, h, d, f = 1 / i, m = t.length; --m > -1; )
            for (o = (h = t[m]).a,
            a = h.d - o,
            s = h.c - o,
            l = h.b - o,
            r = n = 0,
            c = 1; i >= c; c++)
                r = n - (n = ((u = f * c) * u * a + 3 * (p = 1 - u) * (u * s + p * l)) * u),
                e[d = m * i + c - 1] = (e[d] || 0) + r * r
    }
    ,
    d = function(t, e) {
        var i, r, n, o, a = [], s = [], l = 0, u = 0, c = (e = e >> 0 || 6) - 1, p = [], d = [];
        for (i in t)
            h(t[i], a, e);
        for (n = a.length,
        r = 0; n > r; r++)
            l += Math.sqrt(a[r]),
            d[o = r % e] = l,
            o === c && (u += l,
            p[o = r / e >> 0] = d,
            s[o] = u,
            l = 0,
            d = []);
        return {
            length: u,
            lengths: s,
            segments: p
        }
    }
    ,
    f = _gsScope._gsDefine.plugin({
        propName: "bezier",
        priority: -1,
        version: "1.3.8",
        API: 2,
        global: !0,
        init: function(t, e, i) {
            this._target = t,
            e instanceof Array && (e = {
                values: e
            }),
            this._func = {},
            this._mod = {},
            this._props = [],
            this._timeRes = null == e.timeResolution ? 6 : parseInt(e.timeResolution, 10);
            var r, n, o, a, s, l = e.values || [], u = {}, h = l[0], f = e.autoRotate || i.vars.orientToBezier;
            for (r in this._autoRotate = f ? f instanceof Array ? f : [["x", "y", "rotation", !0 === f ? 0 : Number(f) || 0]] : null,
            h)
                this._props.push(r);
            for (o = this._props.length; --o > -1; )
                r = this._props[o],
                this._overwriteProps.push(r),
                n = this._func[r] = "function" == typeof t[r],
                u[r] = n ? t[r.indexOf("set") || "function" != typeof t["get" + r.substr(3)] ? r : "get" + r.substr(3)]() : parseFloat(t[r]),
                s || u[r] !== l[0][r] && (s = u);
            if (this._beziers = "cubic" !== e.type && "quadratic" !== e.type && "soft" !== e.type ? c(l, isNaN(e.curviness) ? 1 : e.curviness, !1, "thruBasic" === e.type, e.correlate, s) : p(l, e.type, u),
            this._segCount = this._beziers[r].length,
            this._timeRes) {
                var m = d(this._beziers, this._timeRes);
                this._length = m.length,
                this._lengths = m.lengths,
                this._segments = m.segments,
                this._l1 = this._li = this._s1 = this._si = 0,
                this._l2 = this._lengths[0],
                this._curSeg = this._segments[0],
                this._s2 = this._curSeg[0],
                this._prec = 1 / this._curSeg.length
            }
            if (f = this._autoRotate)
                for (this._initialRotations = [],
                f[0]instanceof Array || (this._autoRotate = f = [f]),
                o = f.length; --o > -1; ) {
                    for (a = 0; 3 > a; a++)
                        r = f[o][a],
                        this._func[r] = "function" == typeof t[r] && t[r.indexOf("set") || "function" != typeof t["get" + r.substr(3)] ? r : "get" + r.substr(3)];
                    r = f[o][2],
                    this._initialRotations[o] = (this._func[r] ? this._func[r].call(this._target) : this._target[r]) || 0,
                    this._overwriteProps.push(r)
                }
            return this._startRatio = i.vars.runBackwards ? 1 : 0,
            !0
        },
        set: function(e) {
            var i, r, n, o, a, s, l, u, c, p, h = this._segCount, d = this._func, f = this._target, m = e !== this._startRatio;
            if (this._timeRes) {
                if (c = this._lengths,
                p = this._curSeg,
                e *= this._length,
                n = this._li,
                e > this._l2 && h - 1 > n) {
                    for (u = h - 1; u > n && (this._l2 = c[++n]) <= e; )
                        ;
                    this._l1 = c[n - 1],
                    this._li = n,
                    this._curSeg = p = this._segments[n],
                    this._s2 = p[this._s1 = this._si = 0]
                } else if (e < this._l1 && n > 0) {
                    for (; n > 0 && (this._l1 = c[--n]) >= e; )
                        ;
                    0 === n && e < this._l1 ? this._l1 = 0 : n++,
                    this._l2 = c[n],
                    this._li = n,
                    this._curSeg = p = this._segments[n],
                    this._s1 = p[(this._si = p.length - 1) - 1] || 0,
                    this._s2 = p[this._si]
                }
                if (i = n,
                e -= this._l1,
                n = this._si,
                e > this._s2 && n < p.length - 1) {
                    for (u = p.length - 1; u > n && (this._s2 = p[++n]) <= e; )
                        ;
                    this._s1 = p[n - 1],
                    this._si = n
                } else if (e < this._s1 && n > 0) {
                    for (; n > 0 && (this._s1 = p[--n]) >= e; )
                        ;
                    0 === n && e < this._s1 ? this._s1 = 0 : n++,
                    this._s2 = p[n],
                    this._si = n
                }
                s = (n + (e - this._s1) / (this._s2 - this._s1)) * this._prec || 0
            } else
                s = (e - (i = 0 > e ? 0 : e >= 1 ? h - 1 : h * e >> 0) * (1 / h)) * h;
            for (r = 1 - s,
            n = this._props.length; --n > -1; )
                o = this._props[n],
                l = (s * s * (a = this._beziers[o][i]).da + 3 * r * (s * a.ca + r * a.ba)) * s + a.a,
                this._mod[o] && (l = this._mod[o](l, f)),
                d[o] ? f[o](l) : f[o] = l;
            if (this._autoRotate) {
                var y, g, _, v, x, b, w, T = this._autoRotate;
                for (n = T.length; --n > -1; )
                    o = T[n][2],
                    b = T[n][3] || 0,
                    w = !0 === T[n][4] ? 1 : t,
                    a = this._beziers[T[n][0]],
                    y = this._beziers[T[n][1]],
                    a && y && (a = a[i],
                    y = y[i],
                    g = a.a + (a.b - a.a) * s,
                    g += ((v = a.b + (a.c - a.b) * s) - g) * s,
                    v += (a.c + (a.d - a.c) * s - v) * s,
                    _ = y.a + (y.b - y.a) * s,
                    _ += ((x = y.b + (y.c - y.b) * s) - _) * s,
                    x += (y.c + (y.d - y.c) * s - x) * s,
                    l = m ? Math.atan2(x - _, v - g) * w + b : this._initialRotations[n],
                    this._mod[o] && (l = this._mod[o](l, f)),
                    d[o] ? f[o](l) : f[o] = l)
            }
        }
    }),
    m = f.prototype,
    f.bezierThrough = c,
    f.cubicToQuadratic = s,
    f._autoCSS = !0,
    f.quadraticToCubic = function(t, e, i) {
        return new a(t,(2 * e + t) / 3,(2 * e + i) / 3,i)
    }
    ,
    f._cssRegister = function() {
        var t = o.CSSPlugin;
        if (t) {
            var e = t._internals
              , i = e._parseToProxy
              , r = e._setPluginRatio
              , n = e.CSSPropTween;
            e._registerComplexSpecialProp("bezier", {
                parser: function(t, e, o, a, s, l) {
                    e instanceof Array && (e = {
                        values: e
                    }),
                    l = new f;
                    var u, c, p, h = e.values, d = h.length - 1, m = [], y = {};
                    if (0 > d)
                        return s;
                    for (u = 0; d >= u; u++)
                        p = i(t, h[u], a, s, l, d !== u),
                        m[u] = p.end;
                    for (c in e)
                        y[c] = e[c];
                    return y.values = m,
                    (s = new n(t,"bezier",0,0,p.pt,2)).data = p,
                    s.plugin = l,
                    s.setRatio = r,
                    0 === y.autoRotate && (y.autoRotate = !0),
                    !y.autoRotate || y.autoRotate instanceof Array || (u = !0 === y.autoRotate ? 0 : Number(y.autoRotate),
                    y.autoRotate = null != p.end.left ? [["left", "top", "rotation", u, !1]] : null != p.end.x && [["x", "y", "rotation", u, !1]]),
                    y.autoRotate && (a._transform || a._enableTransforms(!1),
                    p.autoRotate = a._target._gsTransform,
                    p.proxy.rotation = p.autoRotate.rotation || 0,
                    a._overwriteProps.push("rotation")),
                    l._onInitTween(p.proxy, y, a._tween),
                    s
                }
            })
        }
    }
    ,
    m._mod = function(t) {
        for (var e, i = this._overwriteProps, r = i.length; --r > -1; )
            (e = t[i[r]]) && "function" == typeof e && (this._mod[i[r]] = e)
    }
    ,
    m._kill = function(t) {
        var e, i, r = this._props;
        for (e in this._beziers)
            if (e in t)
                for (delete this._beziers[e],
                delete this._func[e],
                i = r.length; --i > -1; )
                    r[i] === e && r.splice(i, 1);
        if (r = this._autoRotate)
            for (i = r.length; --i > -1; )
                t[r[i][2]] && r.splice(i, 1);
        return this._super._kill.call(this, t)
    }
    ,
    _gsScope._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function(t, e) {
        var i, r, n, o, a = function() {
            t.call(this, "css"),
            this._overwriteProps.length = 0,
            this.setRatio = a.prototype.setRatio
        }, s = _gsScope._gsDefine.globals, l = {}, u = a.prototype = new t("css");
        u.constructor = a,
        a.version = "2.0.2",
        a.API = 2,
        a.defaultTransformPerspective = 0,
        a.defaultSkewType = "compensated",
        a.defaultSmoothOrigin = !0,
        u = "px",
        a.suffixMap = {
            top: u,
            right: u,
            bottom: u,
            left: u,
            width: u,
            height: u,
            fontSize: u,
            padding: u,
            margin: u,
            perspective: u,
            lineHeight: ""
        };
        var c, p, h, d, f, m, y, g, _ = /(?:\-|\.|\b)(\d|\.|e\-)+/g, v = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g, x = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi, b = /(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g, w = /(?:\d|\-|\+|=|#|\.)*/g, T = /opacity *= *([^)]*)/i, S = /opacity:([^;]*)/i, A = /alpha\(opacity *=.+?\)/i, k = /^(rgb|hsl)/, E = /([A-Z])/g, C = /-([a-z])/gi, P = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi, M = function(t, e) {
            return e.toUpperCase()
        }, I = /(?:Left|Right|Width)/i, z = /(M11|M12|M21|M22)=[\d\-\.e]+/gi, L = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i, D = /,(?=[^\)]*(?:\(|$))/gi, O = /[\s,\(]/i, R = Math.PI / 180, F = 180 / Math.PI, B = {}, N = {
            style: {}
        }, U = _gsScope.document || {
            createElement: function() {
                return N
            }
        }, V = function(t, e) {
            return U.createElementNS ? U.createElementNS(e || "http://www.w3.org/1999/xhtml", t) : U.createElement(t)
        }, j = V("div"), $ = V("img"), q = a._internals = {
            _specialProps: l
        }, W = (_gsScope.navigator || {}).userAgent || "", H = function() {
            var t = W.indexOf("Android")
              , e = V("a");
            return h = -1 !== W.indexOf("Safari") && -1 === W.indexOf("Chrome") && (-1 === t || parseFloat(W.substr(t + 8, 2)) > 3),
            f = h && parseFloat(W.substr(W.indexOf("Version/") + 8, 2)) < 6,
            d = -1 !== W.indexOf("Firefox"),
            (/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(W) || /Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(W)) && (m = parseFloat(RegExp.$1)),
            !!e && (e.style.cssText = "top:1px;opacity:.55;",
            /^0.55/.test(e.style.opacity))
        }(), X = function(t) {
            return T.test("string" == typeof t ? t : (t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1
        }, Z = function(t) {
            _gsScope.console && console.log(t)
        }, G = "", Y = "", K = function(t, e) {
            var i, r, n = (e = e || j).style;
            if (void 0 !== n[t])
                return t;
            for (t = t.charAt(0).toUpperCase() + t.substr(1),
            i = ["O", "Moz", "ms", "Ms", "Webkit"],
            r = 5; --r > -1 && void 0 === n[i[r] + t]; )
                ;
            return r >= 0 ? (G = "-" + (Y = 3 === r ? "ms" : i[r]).toLowerCase() + "-",
            Y + t) : null
        }, J = ("undefined" != typeof window ? window : U.defaultView || {
            getComputedStyle: function() {}
        }).getComputedStyle, Q = a.getStyle = function(t, e, i, r, n) {
            var o;
            return H || "opacity" !== e ? (!r && t.style[e] ? o = t.style[e] : (i = i || J(t)) ? o = i[e] || i.getPropertyValue(e) || i.getPropertyValue(e.replace(E, "-$1").toLowerCase()) : t.currentStyle && (o = t.currentStyle[e]),
            null == n || o && "none" !== o && "auto" !== o && "auto auto" !== o ? o : n) : X(t)
        }
        , tt = q.convertToPixels = function(t, i, r, n, o) {
            if ("px" === n || !n && "lineHeight" !== i)
                return r;
            if ("auto" === n || !r)
                return 0;
            var s, l, u, c = I.test(i), p = t, h = j.style, d = 0 > r, f = 1 === r;
            if (d && (r = -r),
            f && (r *= 100),
            "lineHeight" !== i || n)
                if ("%" === n && -1 !== i.indexOf("border"))
                    s = r / 100 * (c ? t.clientWidth : t.clientHeight);
                else {
                    if (h.cssText = "border:0 solid red;position:" + Q(t, "position") + ";line-height:0;",
                    "%" !== n && p.appendChild && "v" !== n.charAt(0) && "rem" !== n)
                        h[c ? "borderLeftWidth" : "borderTopWidth"] = r + n;
                    else {
                        if (p = t.parentNode || U.body,
                        -1 !== Q(p, "display").indexOf("flex") && (h.position = "absolute"),
                        l = p._gsCache,
                        u = e.ticker.frame,
                        l && c && l.time === u)
                            return l.width * r / 100;
                        h[c ? "width" : "height"] = r + n
                    }
                    p.appendChild(j),
                    s = parseFloat(j[c ? "offsetWidth" : "offsetHeight"]),
                    p.removeChild(j),
                    c && "%" === n && !1 !== a.cacheWidths && ((l = p._gsCache = p._gsCache || {}).time = u,
                    l.width = s / r * 100),
                    0 !== s || o || (s = tt(t, i, r, n, !0))
                }
            else
                l = J(t).lineHeight,
                t.style.lineHeight = r,
                s = parseFloat(J(t).lineHeight),
                t.style.lineHeight = l;
            return f && (s /= 100),
            d ? -s : s
        }
        , et = q.calculateOffset = function(t, e, i) {
            if ("absolute" !== Q(t, "position", i))
                return 0;
            var r = "left" === e ? "Left" : "Top"
              , n = Q(t, "margin" + r, i);
            return t["offset" + r] - (tt(t, e, parseFloat(n), n.replace(w, "")) || 0)
        }
        , it = function(t, e) {
            var i, r, n, o = {};
            if (e = e || J(t, null))
                if (i = e.length)
                    for (; --i > -1; )
                        (-1 === (n = e[i]).indexOf("-transform") || Pt === n) && (o[n.replace(C, M)] = e.getPropertyValue(n));
                else
                    for (i in e)
                        (-1 === i.indexOf("Transform") || Ct === i) && (o[i] = e[i]);
            else if (e = t.currentStyle || t.style)
                for (i in e)
                    "string" == typeof i && void 0 === o[i] && (o[i.replace(C, M)] = e[i]);
            return H || (o.opacity = X(t)),
            r = jt(t, e, !1),
            o.rotation = r.rotation,
            o.skewX = r.skewX,
            o.scaleX = r.scaleX,
            o.scaleY = r.scaleY,
            o.x = r.x,
            o.y = r.y,
            It && (o.z = r.z,
            o.rotationX = r.rotationX,
            o.rotationY = r.rotationY,
            o.scaleZ = r.scaleZ),
            o.filters && delete o.filters,
            o
        }, rt = function(t, e, i, r, n) {
            var o, a, s, l = {}, u = t.style;
            for (a in i)
                "cssText" !== a && "length" !== a && isNaN(a) && (e[a] !== (o = i[a]) || n && n[a]) && -1 === a.indexOf("Origin") && ("number" == typeof o || "string" == typeof o) && (l[a] = "auto" !== o || "left" !== a && "top" !== a ? "" !== o && "auto" !== o && "none" !== o || "string" != typeof e[a] || "" === e[a].replace(b, "") ? o : 0 : et(t, a),
                void 0 !== u[a] && (s = new _t(u,a,u[a],s)));
            if (r)
                for (a in r)
                    "className" !== a && (l[a] = r[a]);
            return {
                difs: l,
                firstMPT: s
            }
        }, nt = {
            width: ["Left", "Right"],
            height: ["Top", "Bottom"]
        }, ot = ["marginLeft", "marginRight", "marginTop", "marginBottom"], at = function(t, e, i) {
            if ("svg" === (t.nodeName + "").toLowerCase())
                return (i || J(t))[e] || 0;
            if (t.getCTM && Nt(t))
                return t.getBBox()[e] || 0;
            var r = parseFloat("width" === e ? t.offsetWidth : t.offsetHeight)
              , n = nt[e]
              , o = n.length;
            for (i = i || J(t, null); --o > -1; )
                r -= parseFloat(Q(t, "padding" + n[o], i, !0)) || 0,
                r -= parseFloat(Q(t, "border" + n[o] + "Width", i, !0)) || 0;
            return r
        }, st = function(t, e) {
            if ("contain" === t || "auto" === t || "auto auto" === t)
                return t + " ";
            (null == t || "" === t) && (t = "0 0");
            var i, r = t.split(" "), n = -1 !== t.indexOf("left") ? "0%" : -1 !== t.indexOf("right") ? "100%" : r[0], o = -1 !== t.indexOf("top") ? "0%" : -1 !== t.indexOf("bottom") ? "100%" : r[1];
            if (r.length > 3 && !e) {
                for (r = t.split(", ").join(",").split(","),
                t = [],
                i = 0; i < r.length; i++)
                    t.push(st(r[i]));
                return t.join(",")
            }
            return null == o ? o = "center" === n ? "50%" : "0" : "center" === o && (o = "50%"),
            ("center" === n || isNaN(parseFloat(n)) && -1 === (n + "").indexOf("=")) && (n = "50%"),
            t = n + " " + o + (r.length > 2 ? " " + r[2] : ""),
            e && (e.oxp = -1 !== n.indexOf("%"),
            e.oyp = -1 !== o.indexOf("%"),
            e.oxr = "=" === n.charAt(1),
            e.oyr = "=" === o.charAt(1),
            e.ox = parseFloat(n.replace(b, "")),
            e.oy = parseFloat(o.replace(b, "")),
            e.v = t),
            e || t
        }, lt = function(t, e) {
            return "function" == typeof t && (t = t(g, y)),
            "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) : parseFloat(t) - parseFloat(e) || 0
        }, ut = function(t, e) {
            "function" == typeof t && (t = t(g, y));
            var i = "string" == typeof t && "=" === t.charAt(1);
            return "string" == typeof t && "v" === t.charAt(t.length - 2) && (t = (i ? t.substr(0, 2) : 0) + window["inner" + ("vh" === t.substr(-2) ? "Height" : "Width")] * (parseFloat(i ? t.substr(2) : t) / 100)),
            null == t ? e : i ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) + e : parseFloat(t) || 0
        }, ct = function(t, e, i, r) {
            var n, o, a, s, l;
            return "function" == typeof t && (t = t(g, y)),
            null == t ? s = e : "number" == typeof t ? s = t : (n = 360,
            o = t.split("_"),
            a = ((l = "=" === t.charAt(1)) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(o[0].substr(2)) : parseFloat(o[0])) * (-1 === t.indexOf("rad") ? 1 : F) - (l ? 0 : e),
            o.length && (r && (r[i] = e + a),
            -1 !== t.indexOf("short") && ((a %= n) !== a % 180 && (a = 0 > a ? a + n : a - n)),
            -1 !== t.indexOf("_cw") && 0 > a ? a = (a + 9999999999 * n) % n - (a / n | 0) * n : -1 !== t.indexOf("ccw") && a > 0 && (a = (a - 9999999999 * n) % n - (a / n | 0) * n)),
            s = e + a),
            1e-6 > s && s > -1e-6 && (s = 0),
            s
        }, pt = {
            aqua: [0, 255, 255],
            lime: [0, 255, 0],
            silver: [192, 192, 192],
            black: [0, 0, 0],
            maroon: [128, 0, 0],
            teal: [0, 128, 128],
            blue: [0, 0, 255],
            navy: [0, 0, 128],
            white: [255, 255, 255],
            fuchsia: [255, 0, 255],
            olive: [128, 128, 0],
            yellow: [255, 255, 0],
            orange: [255, 165, 0],
            gray: [128, 128, 128],
            purple: [128, 0, 128],
            green: [0, 128, 0],
            red: [255, 0, 0],
            pink: [255, 192, 203],
            cyan: [0, 255, 255],
            transparent: [255, 255, 255, 0]
        }, ht = function(t, e, i) {
            return 255 * (1 > 6 * (t = 0 > t ? t + 1 : t > 1 ? t - 1 : t) ? e + (i - e) * t * 6 : .5 > t ? i : 2 > 3 * t ? e + (i - e) * (2 / 3 - t) * 6 : e) + .5 | 0
        }, dt = a.parseColor = function(t, e) {
            var i, r, n, o, a, s, l, u, c, p, h;
            if (t)
                if ("number" == typeof t)
                    i = [t >> 16, t >> 8 & 255, 255 & t];
                else {
                    if ("," === t.charAt(t.length - 1) && (t = t.substr(0, t.length - 1)),
                    pt[t])
                        i = pt[t];
                    else if ("#" === t.charAt(0))
                        4 === t.length && (r = t.charAt(1),
                        n = t.charAt(2),
                        o = t.charAt(3),
                        t = "#" + r + r + n + n + o + o),
                        i = [(t = parseInt(t.substr(1), 16)) >> 16, t >> 8 & 255, 255 & t];
                    else if ("hsl" === t.substr(0, 3))
                        if (i = h = t.match(_),
                        e) {
                            if (-1 !== t.indexOf("="))
                                return t.match(v)
                        } else
                            a = Number(i[0]) % 360 / 360,
                            s = Number(i[1]) / 100,
                            r = 2 * (l = Number(i[2]) / 100) - (n = .5 >= l ? l * (s + 1) : l + s - l * s),
                            i.length > 3 && (i[3] = Number(i[3])),
                            i[0] = ht(a + 1 / 3, r, n),
                            i[1] = ht(a, r, n),
                            i[2] = ht(a - 1 / 3, r, n);
                    else
                        i = t.match(_) || pt.transparent;
                    i[0] = Number(i[0]),
                    i[1] = Number(i[1]),
                    i[2] = Number(i[2]),
                    i.length > 3 && (i[3] = Number(i[3]))
                }
            else
                i = pt.black;
            return e && !h && (r = i[0] / 255,
            n = i[1] / 255,
            o = i[2] / 255,
            l = ((u = Math.max(r, n, o)) + (c = Math.min(r, n, o))) / 2,
            u === c ? a = s = 0 : (p = u - c,
            s = l > .5 ? p / (2 - u - c) : p / (u + c),
            a = u === r ? (n - o) / p + (o > n ? 6 : 0) : u === n ? (o - r) / p + 2 : (r - n) / p + 4,
            a *= 60),
            i[0] = a + .5 | 0,
            i[1] = 100 * s + .5 | 0,
            i[2] = 100 * l + .5 | 0),
            i
        }
        , ft = function(t, e) {
            var i, r, n, o = t.match(mt) || [], a = 0, s = "";
            if (!o.length)
                return t;
            for (i = 0; i < o.length; i++)
                r = o[i],
                a += (n = t.substr(a, t.indexOf(r, a) - a)).length + r.length,
                3 === (r = dt(r, e)).length && r.push(1),
                s += n + (e ? "hsla(" + r[0] + "," + r[1] + "%," + r[2] + "%," + r[3] : "rgba(" + r.join(",")) + ")";
            return s + t.substr(a)
        }, mt = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";
        for (u in pt)
            mt += "|" + u + "\\b";
        mt = new RegExp(mt + ")","gi"),
        a.colorStringFilter = function(t) {
            var e, i = t[0] + " " + t[1];
            mt.test(i) && (e = -1 !== i.indexOf("hsl(") || -1 !== i.indexOf("hsla("),
            t[0] = ft(t[0], e),
            t[1] = ft(t[1], e)),
            mt.lastIndex = 0
        }
        ,
        e.defaultStringFilter || (e.defaultStringFilter = a.colorStringFilter);
        var yt = function(t, e, i, r) {
            if (null == t)
                return function(t) {
                    return t
                }
                ;
            var n, o = e ? (t.match(mt) || [""])[0] : "", a = t.split(o).join("").match(x) || [], s = t.substr(0, t.indexOf(a[0])), l = ")" === t.charAt(t.length - 1) ? ")" : "", u = -1 !== t.indexOf(" ") ? " " : ",", c = a.length, p = c > 0 ? a[0].replace(_, "") : "";
            return c ? n = e ? function(t) {
                var e, h, d, f;
                if ("number" == typeof t)
                    t += p;
                else if (r && D.test(t)) {
                    for (f = t.replace(D, "|").split("|"),
                    d = 0; d < f.length; d++)
                        f[d] = n(f[d]);
                    return f.join(",")
                }
                if (e = (t.match(mt) || [o])[0],
                d = (h = t.split(e).join("").match(x) || []).length,
                c > d--)
                    for (; ++d < c; )
                        h[d] = i ? h[(d - 1) / 2 | 0] : a[d];
                return s + h.join(u) + u + e + l + (-1 !== t.indexOf("inset") ? " inset" : "")
            }
            : function(t) {
                var e, o, h;
                if ("number" == typeof t)
                    t += p;
                else if (r && D.test(t)) {
                    for (o = t.replace(D, "|").split("|"),
                    h = 0; h < o.length; h++)
                        o[h] = n(o[h]);
                    return o.join(",")
                }
                if (h = (e = t.match(x) || []).length,
                c > h--)
                    for (; ++h < c; )
                        e[h] = i ? e[(h - 1) / 2 | 0] : a[h];
                return s + e.join(u) + l
            }
            : function(t) {
                return t
            }
        }
          , gt = function(t) {
            return t = t.split(","),
            function(e, i, r, n, o, a, s) {
                var l, u = (i + "").split(" ");
                for (s = {},
                l = 0; 4 > l; l++)
                    s[t[l]] = u[l] = u[l] || u[(l - 1) / 2 >> 0];
                return n.parse(e, s, o, a)
            }
        }
          , _t = (q._setPluginRatio = function(t) {
            this.plugin.setRatio(t);
            for (var e, i, r, n, o, a = this.data, s = a.proxy, l = a.firstMPT; l; )
                e = s[l.v],
                l.r ? e = l.r(e) : 1e-6 > e && e > -1e-6 && (e = 0),
                l.t[l.p] = e,
                l = l._next;
            if (a.autoRotate && (a.autoRotate.rotation = a.mod ? a.mod.call(this._tween, s.rotation, this.t, this._tween) : s.rotation),
            1 === t || 0 === t)
                for (l = a.firstMPT,
                o = 1 === t ? "e" : "b"; l; ) {
                    if ((i = l.t).type) {
                        if (1 === i.type) {
                            for (n = i.xs0 + i.s + i.xs1,
                            r = 1; r < i.l; r++)
                                n += i["xn" + r] + i["xs" + (r + 1)];
                            i[o] = n
                        }
                    } else
                        i[o] = i.s + i.xs0;
                    l = l._next
                }
        }
        ,
        function(t, e, i, r, n) {
            this.t = t,
            this.p = e,
            this.v = i,
            this.r = n,
            r && (r._prev = this,
            this._next = r)
        }
        )
          , vt = (q._parseToProxy = function(t, e, i, r, n, o) {
            var a, s, l, u, c, p = r, h = {}, d = {}, f = i._transform, m = B;
            for (i._transform = null,
            B = e,
            r = c = i.parse(t, e, r, n),
            B = m,
            o && (i._transform = f,
            p && (p._prev = null,
            p._prev && (p._prev._next = null))); r && r !== p; ) {
                if (r.type <= 1 && (d[s = r.p] = r.s + r.c,
                h[s] = r.s,
                o || (u = new _t(r,"s",s,u,r.r),
                r.c = 0),
                1 === r.type))
                    for (a = r.l; --a > 0; )
                        l = "xn" + a,
                        d[s = r.p + "_" + l] = r.data[l],
                        h[s] = r[l],
                        o || (u = new _t(r,l,s,u,r.rxp[l]));
                r = r._next
            }
            return {
                proxy: h,
                end: d,
                firstMPT: u,
                pt: c
            }
        }
        ,
        q.CSSPropTween = function(t, e, r, n, a, s, l, u, c, p, h) {
            this.t = t,
            this.p = e,
            this.s = r,
            this.c = n,
            this.n = l || e,
            t instanceof vt || o.push(this.n),
            this.r = u ? "function" == typeof u ? u : Math.round : u,
            this.type = s || 0,
            c && (this.pr = c,
            i = !0),
            this.b = void 0 === p ? r : p,
            this.e = void 0 === h ? r + n : h,
            a && (this._next = a,
            a._prev = this)
        }
        )
          , xt = function(t, e, i, r, n, o) {
            var a = new vt(t,e,i,r - i,n,-1,o);
            return a.b = i,
            a.e = a.xs0 = r,
            a
        }
          , bt = a.parseComplex = function(t, e, i, r, n, o, s, l, u, p) {
            i = i || o || "",
            "function" == typeof r && (r = r(g, y)),
            s = new vt(t,e,0,0,s,p ? 2 : 1,null,!1,l,i,r),
            r += "",
            n && mt.test(r + i) && (r = [i, r],
            a.colorStringFilter(r),
            i = r[0],
            r = r[1]);
            var h, d, f, m, x, b, w, T, S, A, k, E, C, P = i.split(", ").join(",").split(" "), M = r.split(", ").join(",").split(" "), I = P.length, z = !1 !== c;
            for ((-1 !== r.indexOf(",") || -1 !== i.indexOf(",")) && (-1 !== (r + i).indexOf("rgb") || -1 !== (r + i).indexOf("hsl") ? (P = P.join(" ").replace(D, ", ").split(" "),
            M = M.join(" ").replace(D, ", ").split(" ")) : (P = P.join(" ").split(",").join(", ").split(" "),
            M = M.join(" ").split(",").join(", ").split(" ")),
            I = P.length),
            I !== M.length && (I = (P = (o || "").split(" ")).length),
            s.plugin = u,
            s.setRatio = p,
            mt.lastIndex = 0,
            h = 0; I > h; h++)
                if (m = P[h],
                x = M[h] + "",
                (T = parseFloat(m)) || 0 === T)
                    s.appendXtra("", T, lt(x, T), x.replace(v, ""), !(!z || -1 === x.indexOf("px")) && Math.round, !0);
                else if (n && mt.test(m))
                    E = ")" + ((E = x.indexOf(")") + 1) ? x.substr(E) : ""),
                    C = -1 !== x.indexOf("hsl") && H,
                    A = x,
                    m = dt(m, C),
                    x = dt(x, C),
                    (S = m.length + x.length > 6) && !H && 0 === x[3] ? (s["xs" + s.l] += s.l ? " transparent" : "transparent",
                    s.e = s.e.split(M[h]).join("transparent")) : (H || (S = !1),
                    C ? s.appendXtra(A.substr(0, A.indexOf("hsl")) + (S ? "hsla(" : "hsl("), m[0], lt(x[0], m[0]), ",", !1, !0).appendXtra("", m[1], lt(x[1], m[1]), "%,", !1).appendXtra("", m[2], lt(x[2], m[2]), S ? "%," : "%" + E, !1) : s.appendXtra(A.substr(0, A.indexOf("rgb")) + (S ? "rgba(" : "rgb("), m[0], x[0] - m[0], ",", Math.round, !0).appendXtra("", m[1], x[1] - m[1], ",", Math.round).appendXtra("", m[2], x[2] - m[2], S ? "," : E, Math.round),
                    S && (m = m.length < 4 ? 1 : m[3],
                    s.appendXtra("", m, (x.length < 4 ? 1 : x[3]) - m, E, !1))),
                    mt.lastIndex = 0;
                else if (b = m.match(_)) {
                    if (!(w = x.match(v)) || w.length !== b.length)
                        return s;
                    for (f = 0,
                    d = 0; d < b.length; d++)
                        k = b[d],
                        A = m.indexOf(k, f),
                        s.appendXtra(m.substr(f, A - f), Number(k), lt(w[d], k), "", !(!z || "px" !== m.substr(A + k.length, 2)) && Math.round, 0 === d),
                        f = A + k.length;
                    s["xs" + s.l] += m.substr(f)
                } else
                    s["xs" + s.l] += s.l || s["xs" + s.l] ? " " + x : x;
            if (-1 !== r.indexOf("=") && s.data) {
                for (E = s.xs0 + s.data.s,
                h = 1; h < s.l; h++)
                    E += s["xs" + h] + s.data["xn" + h];
                s.e = E + s["xs" + h]
            }
            return s.l || (s.type = -1,
            s.xs0 = s.e),
            s.xfirst || s
        }
          , wt = 9;
        for ((u = vt.prototype).l = u.pr = 0; --wt > 0; )
            u["xn" + wt] = 0,
            u["xs" + wt] = "";
        u.xs0 = "",
        u._next = u._prev = u.xfirst = u.data = u.plugin = u.setRatio = u.rxp = null,
        u.appendXtra = function(t, e, i, r, n, o) {
            var a = this
              , s = a.l;
            return a["xs" + s] += o && (s || a["xs" + s]) ? " " + t : t || "",
            i || 0 === s || a.plugin ? (a.l++,
            a.type = a.setRatio ? 2 : 1,
            a["xs" + a.l] = r || "",
            s > 0 ? (a.data["xn" + s] = e + i,
            a.rxp["xn" + s] = n,
            a["xn" + s] = e,
            a.plugin || (a.xfirst = new vt(a,"xn" + s,e,i,a.xfirst || a,0,a.n,n,a.pr),
            a.xfirst.xs0 = 0),
            a) : (a.data = {
                s: e + i
            },
            a.rxp = {},
            a.s = e,
            a.c = i,
            a.r = n,
            a)) : (a["xs" + s] += e + (r || ""),
            a)
        }
        ;
        var Tt = function(t, e) {
            e = e || {},
            this.p = e.prefix && K(t) || t,
            l[t] = l[this.p] = this,
            this.format = e.formatter || yt(e.defaultValue, e.color, e.collapsible, e.multi),
            e.parser && (this.parse = e.parser),
            this.clrs = e.color,
            this.multi = e.multi,
            this.keyword = e.keyword,
            this.dflt = e.defaultValue,
            this.pr = e.priority || 0
        }
          , St = q._registerComplexSpecialProp = function(t, e, i) {
            "object" != typeof e && (e = {
                parser: i
            });
            var r, n = t.split(","), o = e.defaultValue;
            for (i = i || [o],
            r = 0; r < n.length; r++)
                e.prefix = 0 === r && e.prefix,
                e.defaultValue = i[r] || o,
                new Tt(n[r],e)
        }
          , At = q._registerPluginProp = function(t) {
            if (!l[t]) {
                var e = t.charAt(0).toUpperCase() + t.substr(1) + "Plugin";
                St(t, {
                    parser: function(t, i, r, n, o, a, u) {
                        var c = s.com.greensock.plugins[e];
                        return c ? (c._cssRegister(),
                        l[r].parse(t, i, r, n, o, a, u)) : (Z("Error: " + e + " js file not loaded."),
                        o)
                    }
                })
            }
        }
        ;
        (u = Tt.prototype).parseComplex = function(t, e, i, r, n, o) {
            var a, s, l, u, c, p, h = this.keyword;
            if (this.multi && (D.test(i) || D.test(e) ? (s = e.replace(D, "|").split("|"),
            l = i.replace(D, "|").split("|")) : h && (s = [e],
            l = [i])),
            l) {
                for (u = l.length > s.length ? l.length : s.length,
                a = 0; u > a; a++)
                    e = s[a] = s[a] || this.dflt,
                    i = l[a] = l[a] || this.dflt,
                    h && ((c = e.indexOf(h)) !== (p = i.indexOf(h)) && (-1 === p ? s[a] = s[a].split(h).join("") : -1 === c && (s[a] += " " + h)));
                e = s.join(", "),
                i = l.join(", ")
            }
            return bt(t, this.p, e, i, this.clrs, this.dflt, r, this.pr, n, o)
        }
        ,
        u.parse = function(t, e, i, r, o, a, s) {
            return this.parseComplex(t.style, this.format(Q(t, this.p, n, !1, this.dflt)), this.format(e), o, a)
        }
        ,
        a.registerSpecialProp = function(t, e, i) {
            St(t, {
                parser: function(t, r, n, o, a, s, l) {
                    var u = new vt(t,n,0,0,a,2,n,!1,i);
                    return u.plugin = s,
                    u.setRatio = e(t, r, o._tween, n),
                    u
                },
                priority: i
            })
        }
        ,
        a.useSVGTransformAttr = !0;
        var kt, Et = "scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","), Ct = K("transform"), Pt = G + "transform", Mt = K("transformOrigin"), It = null !== K("perspective"), zt = q.Transform = function() {
            this.perspective = parseFloat(a.defaultTransformPerspective) || 0,
            this.force3D = !(!1 === a.defaultForce3D || !It) && (a.defaultForce3D || "auto")
        }
        , Lt = _gsScope.SVGElement, Dt = function(t, e, i) {
            var r, n = U.createElementNS("http://www.w3.org/2000/svg", t), o = /([a-z])([A-Z])/g;
            for (r in i)
                n.setAttributeNS(null, r.replace(o, "$1-$2").toLowerCase(), i[r]);
            return e.appendChild(n),
            n
        }, Ot = U.documentElement || {}, Rt = function() {
            var t, e, i, r = m || /Android/i.test(W) && !_gsScope.chrome;
            return U.createElementNS && !r && (t = Dt("svg", Ot),
            i = (e = Dt("rect", t, {
                width: 100,
                height: 50,
                x: 100
            })).getBoundingClientRect().width,
            e.style[Mt] = "50% 50%",
            e.style[Ct] = "scaleX(0.5)",
            r = i === e.getBoundingClientRect().width && !(d && It),
            Ot.removeChild(t)),
            r
        }(), Ft = function(t, e, i, r, n, o) {
            var s, l, u, c, p, h, d, f, m, y, g, _, v, x, b = t._gsTransform, w = Vt(t, !0);
            b && (v = b.xOrigin,
            x = b.yOrigin),
            (!r || (s = r.split(" ")).length < 2) && (0 === (d = t.getBBox()).x && 0 === d.y && d.width + d.height === 0 && (d = {
                x: parseFloat(t.hasAttribute("x") ? t.getAttribute("x") : t.hasAttribute("cx") ? t.getAttribute("cx") : 0) || 0,
                y: parseFloat(t.hasAttribute("y") ? t.getAttribute("y") : t.hasAttribute("cy") ? t.getAttribute("cy") : 0) || 0,
                width: 0,
                height: 0
            }),
            s = [(-1 !== (e = st(e).split(" "))[0].indexOf("%") ? parseFloat(e[0]) / 100 * d.width : parseFloat(e[0])) + d.x, (-1 !== e[1].indexOf("%") ? parseFloat(e[1]) / 100 * d.height : parseFloat(e[1])) + d.y]),
            i.xOrigin = c = parseFloat(s[0]),
            i.yOrigin = p = parseFloat(s[1]),
            r && w !== Ut && (h = w[0],
            d = w[1],
            f = w[2],
            m = w[3],
            y = w[4],
            g = w[5],
            (_ = h * m - d * f) && (l = c * (m / _) + p * (-f / _) + (f * g - m * y) / _,
            u = c * (-d / _) + p * (h / _) - (h * g - d * y) / _,
            c = i.xOrigin = s[0] = l,
            p = i.yOrigin = s[1] = u)),
            b && (o && (i.xOffset = b.xOffset,
            i.yOffset = b.yOffset,
            b = i),
            n || !1 !== n && !1 !== a.defaultSmoothOrigin ? (l = c - v,
            u = p - x,
            b.xOffset += l * w[0] + u * w[2] - l,
            b.yOffset += l * w[1] + u * w[3] - u) : b.xOffset = b.yOffset = 0),
            o || t.setAttribute("data-svg-origin", s.join(" "))
        }, Bt = function(t) {
            var e, i = V("svg", this.ownerSVGElement && this.ownerSVGElement.getAttribute("xmlns") || "http://www.w3.org/2000/svg"), r = this.parentNode, n = this.nextSibling, o = this.style.cssText;
            if (Ot.appendChild(i),
            i.appendChild(this),
            this.style.display = "block",
            t)
                try {
                    e = this.getBBox(),
                    this._originalGetBBox = this.getBBox,
                    this.getBBox = Bt
                } catch (t) {}
            else
                this._originalGetBBox && (e = this._originalGetBBox());
            return n ? r.insertBefore(this, n) : r.appendChild(this),
            Ot.removeChild(i),
            this.style.cssText = o,
            e
        }, Nt = function(t) {
            return !(!Lt || !t.getCTM || t.parentNode && !t.ownerSVGElement || !function(t) {
                try {
                    return t.getBBox()
                } catch (e) {
                    return Bt.call(t, !0)
                }
            }(t))
        }, Ut = [1, 0, 0, 1, 0, 0], Vt = function(t, e) {
            var i, r, n, o, a, s, l = t._gsTransform || new zt, u = t.style;
            if (Ct ? r = Q(t, Pt, null, !0) : t.currentStyle && (r = (r = t.currentStyle.filter.match(z)) && 4 === r.length ? [r[0].substr(4), Number(r[2].substr(4)), Number(r[1].substr(4)), r[3].substr(4), l.x || 0, l.y || 0].join(",") : ""),
            i = !r || "none" === r || "matrix(1, 0, 0, 1, 0, 0)" === r,
            !Ct || !(s = !J(t) || "none" === J(t).display) && t.parentNode || (s && (o = u.display,
            u.display = "block"),
            t.parentNode || (a = 1,
            Ot.appendChild(t)),
            i = !(r = Q(t, Pt, null, !0)) || "none" === r || "matrix(1, 0, 0, 1, 0, 0)" === r,
            o ? u.display = o : s && Ht(u, "display"),
            a && Ot.removeChild(t)),
            (l.svg || t.getCTM && Nt(t)) && (i && -1 !== (u[Ct] + "").indexOf("matrix") && (r = u[Ct],
            i = 0),
            n = t.getAttribute("transform"),
            i && n && (r = "matrix(" + (n = t.transform.baseVal.consolidate().matrix).a + "," + n.b + "," + n.c + "," + n.d + "," + n.e + "," + n.f + ")",
            i = 0)),
            i)
                return Ut;
            for (n = (r || "").match(_) || [],
            wt = n.length; --wt > -1; )
                o = Number(n[wt]),
                n[wt] = (a = o - (o |= 0)) ? (1e5 * a + (0 > a ? -.5 : .5) | 0) / 1e5 + o : o;
            return e && n.length > 6 ? [n[0], n[1], n[4], n[5], n[12], n[13]] : n
        }, jt = q.getTransform = function(t, i, r, n) {
            if (t._gsTransform && r && !n)
                return t._gsTransform;
            var o, s, l, u, c, p, h = r && t._gsTransform || new zt, d = h.scaleX < 0, f = 2e-5, m = 1e5, y = It && (parseFloat(Q(t, Mt, i, !1, "0 0 0").split(" ")[2]) || h.zOrigin) || 0, g = parseFloat(a.defaultTransformPerspective) || 0;
            if (h.svg = !(!t.getCTM || !Nt(t)),
            h.svg && (Ft(t, Q(t, Mt, i, !1, "50% 50%") + "", h, t.getAttribute("data-svg-origin")),
            kt = a.useSVGTransformAttr || Rt),
            (o = Vt(t)) !== Ut) {
                if (16 === o.length) {
                    var _, v, x, b, w, T = o[0], S = o[1], A = o[2], k = o[3], E = o[4], C = o[5], P = o[6], M = o[7], I = o[8], z = o[9], L = o[10], D = o[12], O = o[13], R = o[14], B = o[11], N = Math.atan2(P, L);
                    h.zOrigin && (D = I * (R = -h.zOrigin) - o[12],
                    O = z * R - o[13],
                    R = L * R + h.zOrigin - o[14]),
                    h.rotationX = N * F,
                    N && (_ = E * (b = Math.cos(-N)) + I * (w = Math.sin(-N)),
                    v = C * b + z * w,
                    x = P * b + L * w,
                    I = E * -w + I * b,
                    z = C * -w + z * b,
                    L = P * -w + L * b,
                    B = M * -w + B * b,
                    E = _,
                    C = v,
                    P = x),
                    N = Math.atan2(-A, L),
                    h.rotationY = N * F,
                    N && (v = S * (b = Math.cos(-N)) - z * (w = Math.sin(-N)),
                    x = A * b - L * w,
                    z = S * w + z * b,
                    L = A * w + L * b,
                    B = k * w + B * b,
                    T = _ = T * b - I * w,
                    S = v,
                    A = x),
                    N = Math.atan2(S, T),
                    h.rotation = N * F,
                    N && (_ = T * (b = Math.cos(N)) + S * (w = Math.sin(N)),
                    v = E * b + C * w,
                    x = I * b + z * w,
                    S = S * b - T * w,
                    C = C * b - E * w,
                    z = z * b - I * w,
                    T = _,
                    E = v,
                    I = x),
                    h.rotationX && Math.abs(h.rotationX) + Math.abs(h.rotation) > 359.9 && (h.rotationX = h.rotation = 0,
                    h.rotationY = 180 - h.rotationY),
                    N = Math.atan2(E, C),
                    h.scaleX = (Math.sqrt(T * T + S * S + A * A) * m + .5 | 0) / m,
                    h.scaleY = (Math.sqrt(C * C + P * P) * m + .5 | 0) / m,
                    h.scaleZ = (Math.sqrt(I * I + z * z + L * L) * m + .5 | 0) / m,
                    T /= h.scaleX,
                    E /= h.scaleY,
                    S /= h.scaleX,
                    C /= h.scaleY,
                    Math.abs(N) > f ? (h.skewX = N * F,
                    E = 0,
                    "simple" !== h.skewType && (h.scaleY *= 1 / Math.cos(N))) : h.skewX = 0,
                    h.perspective = B ? 1 / (0 > B ? -B : B) : 0,
                    h.x = D,
                    h.y = O,
                    h.z = R,
                    h.svg && (h.x -= h.xOrigin - (h.xOrigin * T - h.yOrigin * E),
                    h.y -= h.yOrigin - (h.yOrigin * S - h.xOrigin * C))
                } else if (!It || n || !o.length || h.x !== o[4] || h.y !== o[5] || !h.rotationX && !h.rotationY) {
                    var U = o.length >= 6
                      , V = U ? o[0] : 1
                      , j = o[1] || 0
                      , $ = o[2] || 0
                      , q = U ? o[3] : 1;
                    h.x = o[4] || 0,
                    h.y = o[5] || 0,
                    l = Math.sqrt(V * V + j * j),
                    u = Math.sqrt(q * q + $ * $),
                    c = V || j ? Math.atan2(j, V) * F : h.rotation || 0,
                    p = $ || q ? Math.atan2($, q) * F + c : h.skewX || 0,
                    h.scaleX = l,
                    h.scaleY = u,
                    h.rotation = c,
                    h.skewX = p,
                    It && (h.rotationX = h.rotationY = h.z = 0,
                    h.perspective = g,
                    h.scaleZ = 1),
                    h.svg && (h.x -= h.xOrigin - (h.xOrigin * V + h.yOrigin * $),
                    h.y -= h.yOrigin - (h.xOrigin * j + h.yOrigin * q))
                }
                for (s in Math.abs(h.skewX) > 90 && Math.abs(h.skewX) < 270 && (d ? (h.scaleX *= -1,
                h.skewX += h.rotation <= 0 ? 180 : -180,
                h.rotation += h.rotation <= 0 ? 180 : -180) : (h.scaleY *= -1,
                h.skewX += h.skewX <= 0 ? 180 : -180)),
                h.zOrigin = y,
                h)
                    h[s] < f && h[s] > -f && (h[s] = 0)
            }
            return r && (t._gsTransform = h,
            h.svg && (kt && t.style[Ct] ? e.delayedCall(.001, function() {
                Ht(t.style, Ct)
            }) : !kt && t.getAttribute("transform") && e.delayedCall(.001, function() {
                t.removeAttribute("transform")
            }))),
            h
        }
        , $t = function(t) {
            var e, i, r = this.data, n = -r.rotation * R, o = n + r.skewX * R, a = 1e5, s = (Math.cos(n) * r.scaleX * a | 0) / a, l = (Math.sin(n) * r.scaleX * a | 0) / a, u = (Math.sin(o) * -r.scaleY * a | 0) / a, c = (Math.cos(o) * r.scaleY * a | 0) / a, p = this.t.style, h = this.t.currentStyle;
            if (h) {
                i = l,
                l = -u,
                u = -i,
                e = h.filter,
                p.filter = "";
                var d, f, y = this.t.offsetWidth, g = this.t.offsetHeight, _ = "absolute" !== h.position, v = "progid:DXImageTransform.Microsoft.Matrix(M11=" + s + ", M12=" + l + ", M21=" + u + ", M22=" + c, x = r.x + y * r.xPercent / 100, b = r.y + g * r.yPercent / 100;
                if (null != r.ox && (x += (d = (r.oxp ? y * r.ox * .01 : r.ox) - y / 2) - (d * s + (f = (r.oyp ? g * r.oy * .01 : r.oy) - g / 2) * l),
                b += f - (d * u + f * c)),
                _ ? v += ", Dx=" + ((d = y / 2) - (d * s + (f = g / 2) * l) + x) + ", Dy=" + (f - (d * u + f * c) + b) + ")" : v += ", sizingMethod='auto expand')",
                -1 !== e.indexOf("DXImageTransform.Microsoft.Matrix(") ? p.filter = e.replace(L, v) : p.filter = v + " " + e,
                (0 === t || 1 === t) && 1 === s && 0 === l && 0 === u && 1 === c && (_ && -1 === v.indexOf("Dx=0, Dy=0") || T.test(e) && 100 !== parseFloat(RegExp.$1) || -1 === e.indexOf(e.indexOf("Alpha")) && p.removeAttribute("filter")),
                !_) {
                    var S, A, k, E = 8 > m ? 1 : -1;
                    for (d = r.ieOffsetX || 0,
                    f = r.ieOffsetY || 0,
                    r.ieOffsetX = Math.round((y - ((0 > s ? -s : s) * y + (0 > l ? -l : l) * g)) / 2 + x),
                    r.ieOffsetY = Math.round((g - ((0 > c ? -c : c) * g + (0 > u ? -u : u) * y)) / 2 + b),
                    wt = 0; 4 > wt; wt++)
                        k = (i = -1 !== (S = h[A = ot[wt]]).indexOf("px") ? parseFloat(S) : tt(this.t, A, parseFloat(S), S.replace(w, "")) || 0) !== r[A] ? 2 > wt ? -r.ieOffsetX : -r.ieOffsetY : 2 > wt ? d - r.ieOffsetX : f - r.ieOffsetY,
                        p[A] = (r[A] = Math.round(i - k * (0 === wt || 2 === wt ? 1 : E))) + "px"
                }
            }
        }, qt = q.set3DTransformRatio = q.setTransformRatio = function(t) {
            var e, i, r, n, o, a, s, l, u, c, p, h, f, m, y, g, _, v, x, b, w, T, S, A = this.data, k = this.t.style, E = A.rotation, C = A.rotationX, P = A.rotationY, M = A.scaleX, I = A.scaleY, z = A.scaleZ, L = A.x, D = A.y, O = A.z, F = A.svg, B = A.perspective, N = A.force3D, U = A.skewY, V = A.skewX;
            if (U && (V += U,
            E += U),
            !((1 !== t && 0 !== t || "auto" !== N || this.tween._totalTime !== this.tween._totalDuration && this.tween._totalTime) && N || O || B || P || C || 1 !== z) || kt && F || !It)
                E || V || F ? (E *= R,
                T = V * R,
                S = 1e5,
                i = Math.cos(E) * M,
                o = Math.sin(E) * M,
                r = Math.sin(E - T) * -I,
                a = Math.cos(E - T) * I,
                T && "simple" === A.skewType && (e = Math.tan(T - U * R),
                r *= e = Math.sqrt(1 + e * e),
                a *= e,
                U && (e = Math.tan(U * R),
                i *= e = Math.sqrt(1 + e * e),
                o *= e)),
                F && (L += A.xOrigin - (A.xOrigin * i + A.yOrigin * r) + A.xOffset,
                D += A.yOrigin - (A.xOrigin * o + A.yOrigin * a) + A.yOffset,
                kt && (A.xPercent || A.yPercent) && (y = this.t.getBBox(),
                L += .01 * A.xPercent * y.width,
                D += .01 * A.yPercent * y.height),
                (y = 1e-6) > L && L > -y && (L = 0),
                y > D && D > -y && (D = 0)),
                x = (i * S | 0) / S + "," + (o * S | 0) / S + "," + (r * S | 0) / S + "," + (a * S | 0) / S + "," + L + "," + D + ")",
                F && kt ? this.t.setAttribute("transform", "matrix(" + x) : k[Ct] = (A.xPercent || A.yPercent ? "translate(" + A.xPercent + "%," + A.yPercent + "%) matrix(" : "matrix(") + x) : k[Ct] = (A.xPercent || A.yPercent ? "translate(" + A.xPercent + "%," + A.yPercent + "%) matrix(" : "matrix(") + M + ",0,0," + I + "," + L + "," + D + ")";
            else {
                if (d && ((y = 1e-4) > M && M > -y && (M = z = 2e-5),
                y > I && I > -y && (I = z = 2e-5),
                !B || A.z || A.rotationX || A.rotationY || (B = 0)),
                E || V)
                    E *= R,
                    g = i = Math.cos(E),
                    _ = o = Math.sin(E),
                    V && (E -= V * R,
                    g = Math.cos(E),
                    _ = Math.sin(E),
                    "simple" === A.skewType && (e = Math.tan((V - U) * R),
                    g *= e = Math.sqrt(1 + e * e),
                    _ *= e,
                    A.skewY && (e = Math.tan(U * R),
                    i *= e = Math.sqrt(1 + e * e),
                    o *= e))),
                    r = -_,
                    a = g;
                else {
                    if (!(P || C || 1 !== z || B || F))
                        return void (k[Ct] = (A.xPercent || A.yPercent ? "translate(" + A.xPercent + "%," + A.yPercent + "%) translate3d(" : "translate3d(") + L + "px," + D + "px," + O + "px)" + (1 !== M || 1 !== I ? " scale(" + M + "," + I + ")" : ""));
                    i = a = 1,
                    r = o = 0
                }
                c = 1,
                n = s = l = u = p = h = 0,
                f = B ? -1 / B : 0,
                m = A.zOrigin,
                y = 1e-6,
                b = ",",
                w = "0",
                (E = P * R) && (g = Math.cos(E),
                l = -(_ = Math.sin(E)),
                p = f * -_,
                n = i * _,
                s = o * _,
                c = g,
                f *= g,
                i *= g,
                o *= g),
                (E = C * R) && (e = r * (g = Math.cos(E)) + n * (_ = Math.sin(E)),
                v = a * g + s * _,
                u = c * _,
                h = f * _,
                n = r * -_ + n * g,
                s = a * -_ + s * g,
                c *= g,
                f *= g,
                r = e,
                a = v),
                1 !== z && (n *= z,
                s *= z,
                c *= z,
                f *= z),
                1 !== I && (r *= I,
                a *= I,
                u *= I,
                h *= I),
                1 !== M && (i *= M,
                o *= M,
                l *= M,
                p *= M),
                (m || F) && (m && (L += n * -m,
                D += s * -m,
                O += c * -m + m),
                F && (L += A.xOrigin - (A.xOrigin * i + A.yOrigin * r) + A.xOffset,
                D += A.yOrigin - (A.xOrigin * o + A.yOrigin * a) + A.yOffset),
                y > L && L > -y && (L = w),
                y > D && D > -y && (D = w),
                y > O && O > -y && (O = 0)),
                x = A.xPercent || A.yPercent ? "translate(" + A.xPercent + "%," + A.yPercent + "%) matrix3d(" : "matrix3d(",
                x += (y > i && i > -y ? w : i) + b + (y > o && o > -y ? w : o) + b + (y > l && l > -y ? w : l),
                x += b + (y > p && p > -y ? w : p) + b + (y > r && r > -y ? w : r) + b + (y > a && a > -y ? w : a),
                C || P || 1 !== z ? (x += b + (y > u && u > -y ? w : u) + b + (y > h && h > -y ? w : h) + b + (y > n && n > -y ? w : n),
                x += b + (y > s && s > -y ? w : s) + b + (y > c && c > -y ? w : c) + b + (y > f && f > -y ? w : f) + b) : x += ",0,0,0,0,1,0,",
                x += L + b + D + b + O + b + (B ? 1 + -O / B : 1) + ")",
                k[Ct] = x
            }
        }
        ;
        (u = zt.prototype).x = u.y = u.z = u.skewX = u.skewY = u.rotation = u.rotationX = u.rotationY = u.zOrigin = u.xPercent = u.yPercent = u.xOffset = u.yOffset = 0,
        u.scaleX = u.scaleY = u.scaleZ = 1,
        St("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin", {
            parser: function(t, e, i, r, o, s, l) {
                if (r._lastParsedTransform === l)
                    return o;
                r._lastParsedTransform = l;
                var u, c = l.scale && "function" == typeof l.scale ? l.scale : 0;
                "function" == typeof l[i] && (u = l[i],
                l[i] = e),
                c && (l.scale = c(g, t));
                var p, h, d, f, m, _, v, x, b, w = t._gsTransform, T = t.style, S = Et.length, A = l, k = {}, E = "transformOrigin", C = jt(t, n, !0, A.parseTransform), P = A.transform && ("function" == typeof A.transform ? A.transform(g, y) : A.transform);
                if (C.skewType = A.skewType || C.skewType || a.defaultSkewType,
                r._transform = C,
                "rotationZ"in A && (A.rotation = A.rotationZ),
                P && "string" == typeof P && Ct)
                    (h = j.style)[Ct] = P,
                    h.display = "block",
                    h.position = "absolute",
                    -1 !== P.indexOf("%") && (h.width = Q(t, "width"),
                    h.height = Q(t, "height")),
                    U.body.appendChild(j),
                    p = jt(j, null, !1),
                    "simple" === C.skewType && (p.scaleY *= Math.cos(p.skewX * R)),
                    C.svg && (_ = C.xOrigin,
                    v = C.yOrigin,
                    p.x -= C.xOffset,
                    p.y -= C.yOffset,
                    (A.transformOrigin || A.svgOrigin) && (P = {},
                    Ft(t, st(A.transformOrigin), P, A.svgOrigin, A.smoothOrigin, !0),
                    _ = P.xOrigin,
                    v = P.yOrigin,
                    p.x -= P.xOffset - C.xOffset,
                    p.y -= P.yOffset - C.yOffset),
                    (_ || v) && (x = Vt(j, !0),
                    p.x -= _ - (_ * x[0] + v * x[2]),
                    p.y -= v - (_ * x[1] + v * x[3]))),
                    U.body.removeChild(j),
                    p.perspective || (p.perspective = C.perspective),
                    null != A.xPercent && (p.xPercent = ut(A.xPercent, C.xPercent)),
                    null != A.yPercent && (p.yPercent = ut(A.yPercent, C.yPercent));
                else if ("object" == typeof A) {
                    if (p = {
                        scaleX: ut(null != A.scaleX ? A.scaleX : A.scale, C.scaleX),
                        scaleY: ut(null != A.scaleY ? A.scaleY : A.scale, C.scaleY),
                        scaleZ: ut(A.scaleZ, C.scaleZ),
                        x: ut(A.x, C.x),
                        y: ut(A.y, C.y),
                        z: ut(A.z, C.z),
                        xPercent: ut(A.xPercent, C.xPercent),
                        yPercent: ut(A.yPercent, C.yPercent),
                        perspective: ut(A.transformPerspective, C.perspective)
                    },
                    null != (m = A.directionalRotation))
                        if ("object" == typeof m)
                            for (h in m)
                                A[h] = m[h];
                        else
                            A.rotation = m;
                    "string" == typeof A.x && -1 !== A.x.indexOf("%") && (p.x = 0,
                    p.xPercent = ut(A.x, C.xPercent)),
                    "string" == typeof A.y && -1 !== A.y.indexOf("%") && (p.y = 0,
                    p.yPercent = ut(A.y, C.yPercent)),
                    p.rotation = ct("rotation"in A ? A.rotation : "shortRotation"in A ? A.shortRotation + "_short" : C.rotation, C.rotation, "rotation", k),
                    It && (p.rotationX = ct("rotationX"in A ? A.rotationX : "shortRotationX"in A ? A.shortRotationX + "_short" : C.rotationX || 0, C.rotationX, "rotationX", k),
                    p.rotationY = ct("rotationY"in A ? A.rotationY : "shortRotationY"in A ? A.shortRotationY + "_short" : C.rotationY || 0, C.rotationY, "rotationY", k)),
                    p.skewX = ct(A.skewX, C.skewX),
                    p.skewY = ct(A.skewY, C.skewY)
                }
                for (It && null != A.force3D && (C.force3D = A.force3D,
                f = !0),
                (d = C.force3D || C.z || C.rotationX || C.rotationY || p.z || p.rotationX || p.rotationY || p.perspective) || null == A.scale || (p.scaleZ = 1); --S > -1; )
                    ((P = p[b = Et[S]] - C[b]) > 1e-6 || -1e-6 > P || null != A[b] || null != B[b]) && (f = !0,
                    o = new vt(C,b,C[b],P,o),
                    b in k && (o.e = k[b]),
                    o.xs0 = 0,
                    o.plugin = s,
                    r._overwriteProps.push(o.n));
                return P = A.transformOrigin,
                C.svg && (P || A.svgOrigin) && (_ = C.xOffset,
                v = C.yOffset,
                Ft(t, st(P), p, A.svgOrigin, A.smoothOrigin),
                o = xt(C, "xOrigin", (w ? C : p).xOrigin, p.xOrigin, o, E),
                o = xt(C, "yOrigin", (w ? C : p).yOrigin, p.yOrigin, o, E),
                (_ !== C.xOffset || v !== C.yOffset) && (o = xt(C, "xOffset", w ? _ : C.xOffset, C.xOffset, o, E),
                o = xt(C, "yOffset", w ? v : C.yOffset, C.yOffset, o, E)),
                P = "0px 0px"),
                (P || It && d && C.zOrigin) && (Ct ? (f = !0,
                b = Mt,
                P = (P || Q(t, b, n, !1, "50% 50%")) + "",
                (o = new vt(T,b,0,0,o,-1,E)).b = T[b],
                o.plugin = s,
                It ? (h = C.zOrigin,
                P = P.split(" "),
                C.zOrigin = (P.length > 2 && (0 === h || "0px" !== P[2]) ? parseFloat(P[2]) : h) || 0,
                o.xs0 = o.e = P[0] + " " + (P[1] || "50%") + " 0px",
                (o = new vt(C,"zOrigin",0,0,o,-1,o.n)).b = h,
                o.xs0 = o.e = C.zOrigin) : o.xs0 = o.e = P) : st(P + "", C)),
                f && (r._transformType = C.svg && kt || !d && 3 !== this._transformType ? 2 : 3),
                u && (l[i] = u),
                c && (l.scale = c),
                o
            },
            prefix: !0
        }),
        St("boxShadow", {
            defaultValue: "0px 0px 0px 0px #999",
            prefix: !0,
            color: !0,
            multi: !0,
            keyword: "inset"
        }),
        St("borderRadius", {
            defaultValue: "0px",
            parser: function(t, e, i, o, a, s) {
                e = this.format(e);
                var l, u, c, p, h, d, f, m, y, g, _, v, x, b, w, T, S = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"], A = t.style;
                for (y = parseFloat(t.offsetWidth),
                g = parseFloat(t.offsetHeight),
                l = e.split(" "),
                u = 0; u < S.length; u++)
                    this.p.indexOf("border") && (S[u] = K(S[u])),
                    -1 !== (h = p = Q(t, S[u], n, !1, "0px")).indexOf(" ") && (p = h.split(" "),
                    h = p[0],
                    p = p[1]),
                    d = c = l[u],
                    f = parseFloat(h),
                    v = h.substr((f + "").length),
                    (x = "=" === d.charAt(1)) ? (m = parseInt(d.charAt(0) + "1", 10),
                    d = d.substr(2),
                    m *= parseFloat(d),
                    _ = d.substr((m + "").length - (0 > m ? 1 : 0)) || "") : (m = parseFloat(d),
                    _ = d.substr((m + "").length)),
                    "" === _ && (_ = r[i] || v),
                    _ !== v && (b = tt(t, "borderLeft", f, v),
                    w = tt(t, "borderTop", f, v),
                    "%" === _ ? (h = b / y * 100 + "%",
                    p = w / g * 100 + "%") : "em" === _ ? (h = b / (T = tt(t, "borderLeft", 1, "em")) + "em",
                    p = w / T + "em") : (h = b + "px",
                    p = w + "px"),
                    x && (d = parseFloat(h) + m + _,
                    c = parseFloat(p) + m + _)),
                    a = bt(A, S[u], h + " " + p, d + " " + c, !1, "0px", a);
                return a
            },
            prefix: !0,
            formatter: yt("0px 0px 0px 0px", !1, !0)
        }),
        St("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius", {
            defaultValue: "0px",
            parser: function(t, e, i, r, o, a) {
                return bt(t.style, i, this.format(Q(t, i, n, !1, "0px 0px")), this.format(e), !1, "0px", o)
            },
            prefix: !0,
            formatter: yt("0px 0px", !1, !0)
        }),
        St("backgroundPosition", {
            defaultValue: "0 0",
            parser: function(t, e, i, r, o, a) {
                var s, l, u, c, p, h, d = "background-position", f = n || J(t, null), y = this.format((f ? m ? f.getPropertyValue(d + "-x") + " " + f.getPropertyValue(d + "-y") : f.getPropertyValue(d) : t.currentStyle.backgroundPositionX + " " + t.currentStyle.backgroundPositionY) || "0 0"), g = this.format(e);
                if (-1 !== y.indexOf("%") != (-1 !== g.indexOf("%")) && g.split(",").length < 2 && ((h = Q(t, "backgroundImage").replace(P, "")) && "none" !== h)) {
                    for (s = y.split(" "),
                    l = g.split(" "),
                    $.setAttribute("src", h),
                    u = 2; --u > -1; )
                        (c = -1 !== (y = s[u]).indexOf("%")) !== (-1 !== l[u].indexOf("%")) && (p = 0 === u ? t.offsetWidth - $.width : t.offsetHeight - $.height,
                        s[u] = c ? parseFloat(y) / 100 * p + "px" : parseFloat(y) / p * 100 + "%");
                    y = s.join(" ")
                }
                return this.parseComplex(t.style, y, g, o, a)
            },
            formatter: st
        }),
        St("backgroundSize", {
            defaultValue: "0 0",
            formatter: function(t) {
                return "co" === (t += "").substr(0, 2) ? t : st(-1 === t.indexOf(" ") ? t + " " + t : t)
            }
        }),
        St("perspective", {
            defaultValue: "0px",
            prefix: !0
        }),
        St("perspectiveOrigin", {
            defaultValue: "50% 50%",
            prefix: !0
        }),
        St("transformStyle", {
            prefix: !0
        }),
        St("backfaceVisibility", {
            prefix: !0
        }),
        St("userSelect", {
            prefix: !0
        }),
        St("margin", {
            parser: gt("marginTop,marginRight,marginBottom,marginLeft")
        }),
        St("padding", {
            parser: gt("paddingTop,paddingRight,paddingBottom,paddingLeft")
        }),
        St("clip", {
            defaultValue: "rect(0px,0px,0px,0px)",
            parser: function(t, e, i, r, o, a) {
                var s, l, u;
                return 9 > m ? (l = t.currentStyle,
                u = 8 > m ? " " : ",",
                s = "rect(" + l.clipTop + u + l.clipRight + u + l.clipBottom + u + l.clipLeft + ")",
                e = this.format(e).split(",").join(u)) : (s = this.format(Q(t, this.p, n, !1, this.dflt)),
                e = this.format(e)),
                this.parseComplex(t.style, s, e, o, a)
            }
        }),
        St("textShadow", {
            defaultValue: "0px 0px 0px #999",
            color: !0,
            multi: !0
        }),
        St("autoRound,strictUnits", {
            parser: function(t, e, i, r, n) {
                return n
            }
        }),
        St("border", {
            defaultValue: "0px solid #000",
            parser: function(t, e, i, r, o, a) {
                var s = Q(t, "borderTopWidth", n, !1, "0px")
                  , l = this.format(e).split(" ")
                  , u = l[0].replace(w, "");
                return "px" !== u && (s = parseFloat(s) / tt(t, "borderTopWidth", 1, u) + u),
                this.parseComplex(t.style, this.format(s + " " + Q(t, "borderTopStyle", n, !1, "solid") + " " + Q(t, "borderTopColor", n, !1, "#000")), l.join(" "), o, a)
            },
            color: !0,
            formatter: function(t) {
                var e = t.split(" ");
                return e[0] + " " + (e[1] || "solid") + " " + (t.match(mt) || ["#000"])[0]
            }
        }),
        St("borderWidth", {
            parser: gt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")
        }),
        St("float,cssFloat,styleFloat", {
            parser: function(t, e, i, r, n, o) {
                var a = t.style
                  , s = "cssFloat"in a ? "cssFloat" : "styleFloat";
                return new vt(a,s,0,0,n,-1,i,!1,0,a[s],e)
            }
        });
        var Wt = function(t) {
            var e, i = this.t, r = i.filter || Q(this.data, "filter") || "", n = this.s + this.c * t | 0;
            100 === n && (-1 === r.indexOf("atrix(") && -1 === r.indexOf("radient(") && -1 === r.indexOf("oader(") ? (i.removeAttribute("filter"),
            e = !Q(this.data, "filter")) : (i.filter = r.replace(A, ""),
            e = !0)),
            e || (this.xn1 && (i.filter = r = r || "alpha(opacity=" + n + ")"),
            -1 === r.indexOf("pacity") ? 0 === n && this.xn1 || (i.filter = r + " alpha(opacity=" + n + ")") : i.filter = r.replace(T, "opacity=" + n))
        };
        St("opacity,alpha,autoAlpha", {
            defaultValue: "1",
            parser: function(t, e, i, r, o, a) {
                var s = parseFloat(Q(t, "opacity", n, !1, "1"))
                  , l = t.style
                  , u = "autoAlpha" === i;
                return "string" == typeof e && "=" === e.charAt(1) && (e = ("-" === e.charAt(0) ? -1 : 1) * parseFloat(e.substr(2)) + s),
                u && 1 === s && "hidden" === Q(t, "visibility", n) && 0 !== e && (s = 0),
                H ? o = new vt(l,"opacity",s,e - s,o) : ((o = new vt(l,"opacity",100 * s,100 * (e - s),o)).xn1 = u ? 1 : 0,
                l.zoom = 1,
                o.type = 2,
                o.b = "alpha(opacity=" + o.s + ")",
                o.e = "alpha(opacity=" + (o.s + o.c) + ")",
                o.data = t,
                o.plugin = a,
                o.setRatio = Wt),
                u && ((o = new vt(l,"visibility",0,0,o,-1,null,!1,0,0 !== s ? "inherit" : "hidden",0 === e ? "hidden" : "inherit")).xs0 = "inherit",
                r._overwriteProps.push(o.n),
                r._overwriteProps.push(i)),
                o
            }
        });
        var Ht = function(t, e) {
            e && (t.removeProperty ? (("ms" === e.substr(0, 2) || "webkit" === e.substr(0, 6)) && (e = "-" + e),
            t.removeProperty(e.replace(E, "-$1").toLowerCase())) : t.removeAttribute(e))
        }
          , Xt = function(t) {
            if (this.t._gsClassPT = this,
            1 === t || 0 === t) {
                this.t.setAttribute("class", 0 === t ? this.b : this.e);
                for (var e = this.data, i = this.t.style; e; )
                    e.v ? i[e.p] = e.v : Ht(i, e.p),
                    e = e._next;
                1 === t && this.t._gsClassPT === this && (this.t._gsClassPT = null)
            } else
                this.t.getAttribute("class") !== this.e && this.t.setAttribute("class", this.e)
        };
        St("className", {
            parser: function(t, e, r, o, a, s, l) {
                var u, c, p, h, d, f = t.getAttribute("class") || "", m = t.style.cssText;
                if ((a = o._classNamePT = new vt(t,r,0,0,a,2)).setRatio = Xt,
                a.pr = -11,
                i = !0,
                a.b = f,
                c = it(t, n),
                p = t._gsClassPT) {
                    for (h = {},
                    d = p.data; d; )
                        h[d.p] = 1,
                        d = d._next;
                    p.setRatio(1)
                }
                return t._gsClassPT = a,
                a.e = "=" !== e.charAt(1) ? e : f.replace(new RegExp("(?:\\s|^)" + e.substr(2) + "(?![\\w-])"), "") + ("+" === e.charAt(0) ? " " + e.substr(2) : ""),
                t.setAttribute("class", a.e),
                u = rt(t, c, it(t), l, h),
                t.setAttribute("class", f),
                a.data = u.firstMPT,
                t.style.cssText = m,
                a.xfirst = o.parse(t, u.difs, a, s)
            }
        });
        var Zt = function(t) {
            if ((1 === t || 0 === t) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) {
                var e, i, r, n, o, a = this.t.style, s = l.transform.parse;
                if ("all" === this.e)
                    a.cssText = "",
                    n = !0;
                else
                    for (r = (e = this.e.split(" ").join("").split(",")).length; --r > -1; )
                        i = e[r],
                        l[i] && (l[i].parse === s ? n = !0 : i = "transformOrigin" === i ? Mt : l[i].p),
                        Ht(a, i);
                n && (Ht(a, Ct),
                (o = this.t._gsTransform) && (o.svg && (this.t.removeAttribute("data-svg-origin"),
                this.t.removeAttribute("transform")),
                delete this.t._gsTransform))
            }
        };
        for (St("clearProps", {
            parser: function(t, e, r, n, o) {
                return (o = new vt(t,r,0,0,o,2)).setRatio = Zt,
                o.e = e,
                o.pr = -10,
                o.data = n._tween,
                i = !0,
                o
            }
        }),
        u = "bezier,throwProps,physicsProps,physics2D".split(","),
        wt = u.length; wt--; )
            At(u[wt]);
        (u = a.prototype)._firstPT = u._lastParsedTransform = u._transform = null,
        u._onInitTween = function(t, e, s, u) {
            if (!t.nodeType)
                return !1;
            this._target = y = t,
            this._tween = s,
            this._vars = e,
            g = u,
            c = e.autoRound,
            i = !1,
            r = e.suffixMap || a.suffixMap,
            n = J(t, ""),
            o = this._overwriteProps;
            var d, m, _, v, x, b, w, T, A, k = t.style;
            if (p && "" === k.zIndex && (("auto" === (d = Q(t, "zIndex", n)) || "" === d) && this._addLazySet(k, "zIndex", 0)),
            "string" == typeof e && (v = k.cssText,
            d = it(t, n),
            k.cssText = v + ";" + e,
            d = rt(t, d, it(t)).difs,
            !H && S.test(e) && (d.opacity = parseFloat(RegExp.$1)),
            e = d,
            k.cssText = v),
            e.className ? this._firstPT = m = l.className.parse(t, e.className, "className", this, null, null, e) : this._firstPT = m = this.parse(t, e, null),
            this._transformType) {
                for (A = 3 === this._transformType,
                Ct ? h && (p = !0,
                "" === k.zIndex && (("auto" === (w = Q(t, "zIndex", n)) || "" === w) && this._addLazySet(k, "zIndex", 0)),
                f && this._addLazySet(k, "WebkitBackfaceVisibility", this._vars.WebkitBackfaceVisibility || (A ? "visible" : "hidden"))) : k.zoom = 1,
                _ = m; _ && _._next; )
                    _ = _._next;
                T = new vt(t,"transform",0,0,null,2),
                this._linkCSSP(T, null, _),
                T.setRatio = Ct ? qt : $t,
                T.data = this._transform || jt(t, n, !0),
                T.tween = s,
                T.pr = -1,
                o.pop()
            }
            if (i) {
                for (; m; ) {
                    for (b = m._next,
                    _ = v; _ && _.pr > m.pr; )
                        _ = _._next;
                    (m._prev = _ ? _._prev : x) ? m._prev._next = m : v = m,
                    (m._next = _) ? _._prev = m : x = m,
                    m = b
                }
                this._firstPT = v
            }
            return !0
        }
        ,
        u.parse = function(t, e, i, o) {
            var a, s, u, p, h, d, f, m, _, v, x = t.style;
            for (a in e) {
                if ("function" == typeof (d = e[a]) && (d = d(g, y)),
                s = l[a])
                    i = s.parse(t, d, a, this, i, o, e);
                else {
                    if ("--" === a.substr(0, 2)) {
                        this._tween._propLookup[a] = this._addTween.call(this._tween, t.style, "setProperty", J(t).getPropertyValue(a) + "", d + "", a, !1, a);
                        continue
                    }
                    h = Q(t, a, n) + "",
                    _ = "string" == typeof d,
                    "color" === a || "fill" === a || "stroke" === a || -1 !== a.indexOf("Color") || _ && k.test(d) ? (_ || (d = ((d = dt(d)).length > 3 ? "rgba(" : "rgb(") + d.join(",") + ")"),
                    i = bt(x, a, h, d, !0, "transparent", i, 0, o)) : _ && O.test(d) ? i = bt(x, a, h, d, !0, null, i, 0, o) : (f = (u = parseFloat(h)) || 0 === u ? h.substr((u + "").length) : "",
                    ("" === h || "auto" === h) && ("width" === a || "height" === a ? (u = at(t, a, n),
                    f = "px") : "left" === a || "top" === a ? (u = et(t, a, n),
                    f = "px") : (u = "opacity" !== a ? 0 : 1,
                    f = "")),
                    (v = _ && "=" === d.charAt(1)) ? (p = parseInt(d.charAt(0) + "1", 10),
                    d = d.substr(2),
                    p *= parseFloat(d),
                    m = d.replace(w, "")) : (p = parseFloat(d),
                    m = _ ? d.replace(w, "") : ""),
                    "" === m && (m = a in r ? r[a] : f),
                    d = p || 0 === p ? (v ? p + u : p) + m : e[a],
                    f !== m && ("" !== m || "lineHeight" === a) && (p || 0 === p) && u && (u = tt(t, a, u, f),
                    "%" === m ? (u /= tt(t, a, 100, "%") / 100,
                    !0 !== e.strictUnits && (h = u + "%")) : "em" === m || "rem" === m || "vw" === m || "vh" === m ? u /= tt(t, a, 1, m) : "px" !== m && (p = tt(t, a, p, m),
                    m = "px"),
                    v && (p || 0 === p) && (d = p + u + m)),
                    v && (p += u),
                    !u && 0 !== u || !p && 0 !== p ? void 0 !== x[a] && (d || d + "" != "NaN" && null != d) ? (i = new vt(x,a,p || u || 0,0,i,-1,a,!1,0,h,d)).xs0 = "none" !== d || "display" !== a && -1 === a.indexOf("Style") ? d : h : Z("invalid " + a + " tween value: " + e[a]) : (i = new vt(x,a,u,p - u,i,0,a,!1 !== c && ("px" === m || "zIndex" === a),0,h,d)).xs0 = m)
                }
                o && i && !i.plugin && (i.plugin = o)
            }
            return i
        }
        ,
        u.setRatio = function(t) {
            var e, i, r, n = this._firstPT;
            if (1 !== t || this._tween._time !== this._tween._duration && 0 !== this._tween._time)
                if (t || this._tween._time !== this._tween._duration && 0 !== this._tween._time || -1e-6 === this._tween._rawPrevTime)
                    for (; n; ) {
                        if (e = n.c * t + n.s,
                        n.r ? e = n.r(e) : 1e-6 > e && e > -1e-6 && (e = 0),
                        n.type)
                            if (1 === n.type)
                                if (2 === (r = n.l))
                                    n.t[n.p] = n.xs0 + e + n.xs1 + n.xn1 + n.xs2;
                                else if (3 === r)
                                    n.t[n.p] = n.xs0 + e + n.xs1 + n.xn1 + n.xs2 + n.xn2 + n.xs3;
                                else if (4 === r)
                                    n.t[n.p] = n.xs0 + e + n.xs1 + n.xn1 + n.xs2 + n.xn2 + n.xs3 + n.xn3 + n.xs4;
                                else if (5 === r)
                                    n.t[n.p] = n.xs0 + e + n.xs1 + n.xn1 + n.xs2 + n.xn2 + n.xs3 + n.xn3 + n.xs4 + n.xn4 + n.xs5;
                                else {
                                    for (i = n.xs0 + e + n.xs1,
                                    r = 1; r < n.l; r++)
                                        i += n["xn" + r] + n["xs" + (r + 1)];
                                    n.t[n.p] = i
                                }
                            else
                                -1 === n.type ? n.t[n.p] = n.xs0 : n.setRatio && n.setRatio(t);
                        else
                            n.t[n.p] = e + n.xs0;
                        n = n._next
                    }
                else
                    for (; n; )
                        2 !== n.type ? n.t[n.p] = n.b : n.setRatio(t),
                        n = n._next;
            else
                for (; n; ) {
                    if (2 !== n.type)
                        if (n.r && -1 !== n.type)
                            if (e = n.r(n.s + n.c),
                            n.type) {
                                if (1 === n.type) {
                                    for (r = n.l,
                                    i = n.xs0 + e + n.xs1,
                                    r = 1; r < n.l; r++)
                                        i += n["xn" + r] + n["xs" + (r + 1)];
                                    n.t[n.p] = i
                                }
                            } else
                                n.t[n.p] = e + n.xs0;
                        else
                            n.t[n.p] = n.e;
                    else
                        n.setRatio(t);
                    n = n._next
                }
        }
        ,
        u._enableTransforms = function(t) {
            this._transform = this._transform || jt(this._target, n, !0),
            this._transformType = this._transform.svg && kt || !t && 3 !== this._transformType ? 2 : 3
        }
        ;
        var Gt = function(t) {
            this.t[this.p] = this.e,
            this.data._linkCSSP(this, this._next, null, !0)
        };
        u._addLazySet = function(t, e, i) {
            var r = this._firstPT = new vt(t,e,0,0,this._firstPT,2);
            r.e = i,
            r.setRatio = Gt,
            r.data = this
        }
        ,
        u._linkCSSP = function(t, e, i, r) {
            return t && (e && (e._prev = t),
            t._next && (t._next._prev = t._prev),
            t._prev ? t._prev._next = t._next : this._firstPT === t && (this._firstPT = t._next,
            r = !0),
            i ? i._next = t : r || null !== this._firstPT || (this._firstPT = t),
            t._next = e,
            t._prev = i),
            t
        }
        ,
        u._mod = function(t) {
            for (var e = this._firstPT; e; )
                "function" == typeof t[e.p] && (e.r = t[e.p]),
                e = e._next
        }
        ,
        u._kill = function(e) {
            var i, r, n, o = e;
            if (e.autoAlpha || e.alpha) {
                for (r in o = {},
                e)
                    o[r] = e[r];
                o.opacity = 1,
                o.autoAlpha && (o.visibility = 1)
            }
            for (e.className && (i = this._classNamePT) && ((n = i.xfirst) && n._prev ? this._linkCSSP(n._prev, i._next, n._prev._prev) : n === this._firstPT && (this._firstPT = i._next),
            i._next && this._linkCSSP(i._next, i._next._next, n._prev),
            this._classNamePT = null),
            i = this._firstPT; i; )
                i.plugin && i.plugin !== r && i.plugin._kill && (i.plugin._kill(e),
                r = i.plugin),
                i = i._next;
            return t.prototype._kill.call(this, o)
        }
        ;
        var Yt = function(t, e, i) {
            var r, n, o, a;
            if (t.slice)
                for (n = t.length; --n > -1; )
                    Yt(t[n], e, i);
            else
                for (n = (r = t.childNodes).length; --n > -1; )
                    a = (o = r[n]).type,
                    o.style && (e.push(it(o)),
                    i && i.push(o)),
                    1 !== a && 9 !== a && 11 !== a || !o.childNodes.length || Yt(o, e, i)
        };
        return a.cascadeTo = function(t, i, r) {
            var n, o, a, s, l = e.to(t, i, r), u = [l], c = [], p = [], h = [], d = e._internals.reservedProps;
            for (t = l._targets || l.target,
            Yt(t, c, h),
            l.render(i, !0, !0),
            Yt(t, p),
            l.render(0, !0, !0),
            l._enabled(!0),
            n = h.length; --n > -1; )
                if ((o = rt(h[n], c[n], p[n])).firstMPT) {
                    for (a in o = o.difs,
                    r)
                        d[a] && (o[a] = r[a]);
                    for (a in s = {},
                    o)
                        s[a] = c[n][a];
                    u.push(e.fromTo(h[n], i, s, o))
                }
            return u
        }
        ,
        t.activate([a]),
        a
    }, !0),
    function() {
        var t = _gsScope._gsDefine.plugin({
            propName: "roundProps",
            version: "1.7.0",
            priority: -1,
            API: 2,
            init: function(t, e, i) {
                return this._tween = i,
                !0
            }
        })
          , e = function(t) {
            var e = 1 > t ? Math.pow(10, (t + "").length - 2) : 1;
            return function(i) {
                return (Math.round(i / t) * t * e | 0) / e
            }
        }
          , i = function(t, e) {
            for (; t; )
                t.f || t.blob || (t.m = e || Math.round),
                t = t._next
        }
          , r = t.prototype;
        r._onInitAllProps = function() {
            var t, r, n, o, a = this._tween, s = a.vars.roundProps, l = {}, u = a._propLookup.roundProps;
            if ("object" != typeof s || s.push)
                for ("string" == typeof s && (s = s.split(",")),
                n = s.length; --n > -1; )
                    l[s[n]] = Math.round;
            else
                for (o in s)
                    l[o] = e(s[o]);
            for (o in l)
                for (t = a._firstPT; t; )
                    r = t._next,
                    t.pg ? t.t._mod(l) : t.n === o && (2 === t.f && t.t ? i(t.t._firstPT, l[o]) : (this._add(t.t, o, t.s, t.c, l[o]),
                    r && (r._prev = t._prev),
                    t._prev ? t._prev._next = r : a._firstPT === t && (a._firstPT = r),
                    t._next = t._prev = null,
                    a._propLookup[o] = u)),
                    t = r;
            return !1
        }
        ,
        r._add = function(t, e, i, r, n) {
            this._addTween(t, e, i, i + r, e, n || Math.round),
            this._overwriteProps.push(e)
        }
    }(),
    _gsScope._gsDefine.plugin({
        propName: "attr",
        API: 2,
        version: "0.6.1",
        init: function(t, e, i, r) {
            var n, o;
            if ("function" != typeof t.setAttribute)
                return !1;
            for (n in e)
                "function" == typeof (o = e[n]) && (o = o(r, t)),
                this._addTween(t, "setAttribute", t.getAttribute(n) + "", o + "", n, !1, n),
                this._overwriteProps.push(n);
            return !0
        }
    }),
    _gsScope._gsDefine.plugin({
        propName: "directionalRotation",
        version: "0.3.1",
        API: 2,
        init: function(t, e, i, r) {
            "object" != typeof e && (e = {
                rotation: e
            }),
            this.finals = {};
            var n, o, a, s, l, u, c = !0 === e.useRadians ? 2 * Math.PI : 360;
            for (n in e)
                "useRadians" !== n && ("function" == typeof (s = e[n]) && (s = s(r, t)),
                o = (u = (s + "").split("_"))[0],
                a = parseFloat("function" != typeof t[n] ? t[n] : t[n.indexOf("set") || "function" != typeof t["get" + n.substr(3)] ? n : "get" + n.substr(3)]()),
                l = (s = this.finals[n] = "string" == typeof o && "=" === o.charAt(1) ? a + parseInt(o.charAt(0) + "1", 10) * Number(o.substr(2)) : Number(o) || 0) - a,
                u.length && (-1 !== (o = u.join("_")).indexOf("short") && ((l %= c) !== l % (c / 2) && (l = 0 > l ? l + c : l - c)),
                -1 !== o.indexOf("_cw") && 0 > l ? l = (l + 9999999999 * c) % c - (l / c | 0) * c : -1 !== o.indexOf("ccw") && l > 0 && (l = (l - 9999999999 * c) % c - (l / c | 0) * c)),
                (l > 1e-6 || -1e-6 > l) && (this._addTween(t, n, a, a + l, n),
                this._overwriteProps.push(n)));
            return !0
        },
        set: function(t) {
            var e;
            if (1 !== t)
                this._super.setRatio.call(this, t);
            else
                for (e = this._firstPT; e; )
                    e.f ? e.t[e.p](this.finals[e.p]) : e.t[e.p] = this.finals[e.p],
                    e = e._next
        }
    })._autoCSS = !0,
    _gsScope._gsDefine("easing.Back", ["easing.Ease"], function(t) {
        var e, i, r, n, o = _gsScope.GreenSockGlobals || _gsScope, a = o.com.greensock, s = 2 * Math.PI, l = Math.PI / 2, u = a._class, c = function(e, i) {
            var r = u("easing." + e, function() {}, !0)
              , n = r.prototype = new t;
            return n.constructor = r,
            n.getRatio = i,
            r
        }, p = t.register || function() {}
        , h = function(t, e, i, r, n) {
            var o = u("easing." + t, {
                easeOut: new e,
                easeIn: new i,
                easeInOut: new r
            }, !0);
            return p(o, t),
            o
        }, d = function(t, e, i) {
            this.t = t,
            this.v = e,
            i && (this.next = i,
            i.prev = this,
            this.c = i.v - e,
            this.gap = i.t - t)
        }, f = function(e, i) {
            var r = u("easing." + e, function(t) {
                this._p1 = t || 0 === t ? t : 1.70158,
                this._p2 = 1.525 * this._p1
            }, !0)
              , n = r.prototype = new t;
            return n.constructor = r,
            n.getRatio = i,
            n.config = function(t) {
                return new r(t)
            }
            ,
            r
        }, m = h("Back", f("BackOut", function(t) {
            return (t -= 1) * t * ((this._p1 + 1) * t + this._p1) + 1
        }), f("BackIn", function(t) {
            return t * t * ((this._p1 + 1) * t - this._p1)
        }), f("BackInOut", function(t) {
            return (t *= 2) < 1 ? .5 * t * t * ((this._p2 + 1) * t - this._p2) : .5 * ((t -= 2) * t * ((this._p2 + 1) * t + this._p2) + 2)
        })), y = u("easing.SlowMo", function(t, e, i) {
            e = e || 0 === e ? e : .7,
            null == t ? t = .7 : t > 1 && (t = 1),
            this._p = 1 !== t ? e : 0,
            this._p1 = (1 - t) / 2,
            this._p2 = t,
            this._p3 = this._p1 + this._p2,
            this._calcEnd = !0 === i
        }, !0), g = y.prototype = new t;
        return g.constructor = y,
        g.getRatio = function(t) {
            var e = t + (.5 - t) * this._p;
            return t < this._p1 ? this._calcEnd ? 1 - (t = 1 - t / this._p1) * t : e - (t = 1 - t / this._p1) * t * t * t * e : t > this._p3 ? this._calcEnd ? 1 === t ? 0 : 1 - (t = (t - this._p3) / this._p1) * t : e + (t - e) * (t = (t - this._p3) / this._p1) * t * t * t : this._calcEnd ? 1 : e
        }
        ,
        y.ease = new y(.7,.7),
        g.config = y.config = function(t, e, i) {
            return new y(t,e,i)
        }
        ,
        (g = (e = u("easing.SteppedEase", function(t, e) {
            t = t || 1,
            this._p1 = 1 / t,
            this._p2 = t + (e ? 0 : 1),
            this._p3 = e ? 1 : 0
        }, !0)).prototype = new t).constructor = e,
        g.getRatio = function(t) {
            return 0 > t ? t = 0 : t >= 1 && (t = .999999999),
            ((this._p2 * t | 0) + this._p3) * this._p1
        }
        ,
        g.config = e.config = function(t, i) {
            return new e(t,i)
        }
        ,
        (g = (i = u("easing.ExpoScaleEase", function(t, e, i) {
            this._p1 = Math.log(e / t),
            this._p2 = e - t,
            this._p3 = t,
            this._ease = i
        }, !0)).prototype = new t).constructor = i,
        g.getRatio = function(t) {
            return this._ease && (t = this._ease.getRatio(t)),
            (this._p3 * Math.exp(this._p1 * t) - this._p3) / this._p2
        }
        ,
        g.config = i.config = function(t, e, r) {
            return new i(t,e,r)
        }
        ,
        (g = (r = u("easing.RoughEase", function(e) {
            for (var i, r, n, o, a, s, l = (e = e || {}).taper || "none", u = [], c = 0, p = 0 | (e.points || 20), h = p, f = !1 !== e.randomize, m = !0 === e.clamp, y = e.template instanceof t ? e.template : null, g = "number" == typeof e.strength ? .4 * e.strength : .4; --h > -1; )
                i = f ? Math.random() : 1 / p * h,
                r = y ? y.getRatio(i) : i,
                "none" === l ? n = g : "out" === l ? n = (o = 1 - i) * o * g : "in" === l ? n = i * i * g : .5 > i ? n = (o = 2 * i) * o * .5 * g : n = (o = 2 * (1 - i)) * o * .5 * g,
                f ? r += Math.random() * n - .5 * n : h % 2 ? r += .5 * n : r -= .5 * n,
                m && (r > 1 ? r = 1 : 0 > r && (r = 0)),
                u[c++] = {
                    x: i,
                    y: r
                };
            for (u.sort(function(t, e) {
                return t.x - e.x
            }),
            s = new d(1,1,null),
            h = p; --h > -1; )
                a = u[h],
                s = new d(a.x,a.y,s);
            this._prev = new d(0,0,0 !== s.t ? s : s.next)
        }, !0)).prototype = new t).constructor = r,
        g.getRatio = function(t) {
            var e = this._prev;
            if (t > e.t) {
                for (; e.next && t >= e.t; )
                    e = e.next;
                e = e.prev
            } else
                for (; e.prev && t <= e.t; )
                    e = e.prev;
            return this._prev = e,
            e.v + (t - e.t) / e.gap * e.c
        }
        ,
        g.config = function(t) {
            return new r(t)
        }
        ,
        r.ease = new r,
        h("Bounce", c("BounceOut", function(t) {
            return 1 / 2.75 > t ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
        }), c("BounceIn", function(t) {
            return (t = 1 - t) < 1 / 2.75 ? 1 - 7.5625 * t * t : 2 / 2.75 > t ? 1 - (7.5625 * (t -= 1.5 / 2.75) * t + .75) : 2.5 / 2.75 > t ? 1 - (7.5625 * (t -= 2.25 / 2.75) * t + .9375) : 1 - (7.5625 * (t -= 2.625 / 2.75) * t + .984375)
        }), c("BounceInOut", function(t) {
            var e = .5 > t;
            return t = 1 / 2.75 > (t = e ? 1 - 2 * t : 2 * t - 1) ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375,
            e ? .5 * (1 - t) : .5 * t + .5
        })),
        h("Circ", c("CircOut", function(t) {
            return Math.sqrt(1 - (t -= 1) * t)
        }), c("CircIn", function(t) {
            return -(Math.sqrt(1 - t * t) - 1)
        }), c("CircInOut", function(t) {
            return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
        })),
        h("Elastic", (n = function(e, i, r) {
            var n = u("easing." + e, function(t, e) {
                this._p1 = t >= 1 ? t : 1,
                this._p2 = (e || r) / (1 > t ? t : 1),
                this._p3 = this._p2 / s * (Math.asin(1 / this._p1) || 0),
                this._p2 = s / this._p2
            }, !0)
              , o = n.prototype = new t;
            return o.constructor = n,
            o.getRatio = i,
            o.config = function(t, e) {
                return new n(t,e)
            }
            ,
            n
        }
        )("ElasticOut", function(t) {
            return this._p1 * Math.pow(2, -10 * t) * Math.sin((t - this._p3) * this._p2) + 1
        }, .3), n("ElasticIn", function(t) {
            return -this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2)
        }, .3), n("ElasticInOut", function(t) {
            return (t *= 2) < 1 ? this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2) * -.5 : this._p1 * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2) * .5 + 1
        }, .45)),
        h("Expo", c("ExpoOut", function(t) {
            return 1 - Math.pow(2, -10 * t)
        }), c("ExpoIn", function(t) {
            return Math.pow(2, 10 * (t - 1)) - .001
        }), c("ExpoInOut", function(t) {
            return (t *= 2) < 1 ? .5 * Math.pow(2, 10 * (t - 1)) : .5 * (2 - Math.pow(2, -10 * (t - 1)))
        })),
        h("Sine", c("SineOut", function(t) {
            return Math.sin(t * l)
        }), c("SineIn", function(t) {
            return 1 - Math.cos(t * l)
        }), c("SineInOut", function(t) {
            return -.5 * (Math.cos(Math.PI * t) - 1)
        })),
        u("easing.EaseLookup", {
            find: function(e) {
                return t.map[e]
            }
        }, !0),
        p(o.SlowMo, "SlowMo", "ease,"),
        p(r, "RoughEase", "ease,"),
        p(e, "SteppedEase", "ease,"),
        m
    }, !0)
}),
_gsScope._gsDefine && _gsScope._gsQueue.pop()(),
function(t, e) {
    "use strict";
    var i = {}
      , r = t.document
      , n = t.GreenSockGlobals = t.GreenSockGlobals || t
      , o = n[e];
    if (o)
        return "undefined" != typeof module && module.exports && (module.exports = o),
        o;
    var a, s, l, u, c, p = function(t) {
        var e, i = t.split("."), r = n;
        for (e = 0; e < i.length; e++)
            r[i[e]] = r = r[i[e]] || {};
        return r
    }, h = p("com.greensock"), d = 1e-10, f = function(t) {
        var e, i = [], r = t.length;
        for (e = 0; e !== r; i.push(t[e++]))
            ;
        return i
    }, m = function() {}, y = function() {
        var t = Object.prototype.toString
          , e = t.call([]);
        return function(i) {
            return null != i && (i instanceof Array || "object" == typeof i && !!i.push && t.call(i) === e)
        }
    }(), g = {}, _ = function(r, o, a, s) {
        this.sc = g[r] ? g[r].sc : [],
        g[r] = this,
        this.gsClass = null,
        this.func = a;
        var l = [];
        this.check = function(u) {
            for (var c, h, d, f, m = o.length, y = m; --m > -1; )
                (c = g[o[m]] || new _(o[m],[])).gsClass ? (l[m] = c.gsClass,
                y--) : u && c.sc.push(this);
            if (0 === y && a) {
                if (d = (h = ("com.greensock." + r).split(".")).pop(),
                f = p(h.join("."))[d] = this.gsClass = a.apply(a, l),
                s)
                    if (n[d] = i[d] = f,
                    "undefined" != typeof module && module.exports)
                        if (r === e)
                            for (m in module.exports = i[e] = f,
                            i)
                                f[m] = i[m];
                        else
                            i[e] && (i[e][d] = f);
                    else
                        "function" == typeof define && define.amd && define((t.GreenSockAMDPath ? t.GreenSockAMDPath + "/" : "") + r.split(".").pop(), [], function() {
                            return f
                        });
                for (m = 0; m < this.sc.length; m++)
                    this.sc[m].check()
            }
        }
        ,
        this.check(!0)
    }, v = t._gsDefine = function(t, e, i, r) {
        return new _(t,e,i,r)
    }
    , x = h._class = function(t, e, i) {
        return e = e || function() {}
        ,
        v(t, [], function() {
            return e
        }, i),
        e
    }
    ;
    v.globals = n;
    var b = [0, 0, 1, 1]
      , w = x("easing.Ease", function(t, e, i, r) {
        this._func = t,
        this._type = i || 0,
        this._power = r || 0,
        this._params = e ? b.concat(e) : b
    }, !0)
      , T = w.map = {}
      , S = w.register = function(t, e, i, r) {
        for (var n, o, a, s, l = e.split(","), u = l.length, c = (i || "easeIn,easeOut,easeInOut").split(","); --u > -1; )
            for (o = l[u],
            n = r ? x("easing." + o, null, !0) : h.easing[o] || {},
            a = c.length; --a > -1; )
                s = c[a],
                T[o + "." + s] = T[s + o] = n[s] = t.getRatio ? t : t[s] || new t
    }
    ;
    for ((l = w.prototype)._calcEnd = !1,
    l.getRatio = function(t) {
        if (this._func)
            return this._params[0] = t,
            this._func.apply(null, this._params);
        var e = this._type
          , i = this._power
          , r = 1 === e ? 1 - t : 2 === e ? t : .5 > t ? 2 * t : 2 * (1 - t);
        return 1 === i ? r *= r : 2 === i ? r *= r * r : 3 === i ? r *= r * r * r : 4 === i && (r *= r * r * r * r),
        1 === e ? 1 - r : 2 === e ? r : .5 > t ? r / 2 : 1 - r / 2
    }
    ,
    s = (a = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"]).length; --s > -1; )
        l = a[s] + ",Power" + s,
        S(new w(null,null,1,s), l, "easeOut", !0),
        S(new w(null,null,2,s), l, "easeIn" + (0 === s ? ",easeNone" : "")),
        S(new w(null,null,3,s), l, "easeInOut");
    T.linear = h.easing.Linear.easeIn,
    T.swing = h.easing.Quad.easeInOut;
    var A = x("events.EventDispatcher", function(t) {
        this._listeners = {},
        this._eventTarget = t || this
    });
    (l = A.prototype).addEventListener = function(t, e, i, r, n) {
        n = n || 0;
        var o, a, s = this._listeners[t], l = 0;
        for (this !== u || c || u.wake(),
        null == s && (this._listeners[t] = s = []),
        a = s.length; --a > -1; )
            (o = s[a]).c === e && o.s === i ? s.splice(a, 1) : 0 === l && o.pr < n && (l = a + 1);
        s.splice(l, 0, {
            c: e,
            s: i,
            up: r,
            pr: n
        })
    }
    ,
    l.removeEventListener = function(t, e) {
        var i, r = this._listeners[t];
        if (r)
            for (i = r.length; --i > -1; )
                if (r[i].c === e)
                    return void r.splice(i, 1)
    }
    ,
    l.dispatchEvent = function(t) {
        var e, i, r, n = this._listeners[t];
        if (n)
            for ((e = n.length) > 1 && (n = n.slice(0)),
            i = this._eventTarget; --e > -1; )
                (r = n[e]) && (r.up ? r.c.call(r.s || i, {
                    type: t,
                    target: i
                }) : r.c.call(r.s || i))
    }
    ;
    var k = t.requestAnimationFrame
      , E = t.cancelAnimationFrame
      , C = Date.now || function() {
        return (new Date).getTime()
    }
      , P = C();
    for (s = (a = ["ms", "moz", "webkit", "o"]).length; --s > -1 && !k; )
        k = t[a[s] + "RequestAnimationFrame"],
        E = t[a[s] + "CancelAnimationFrame"] || t[a[s] + "CancelRequestAnimationFrame"];
    x("Ticker", function(t, e) {
        var i, n, o, a, s, l = this, p = C(), h = !(!1 === e || !k) && "auto", f = 500, y = 33, g = function(t) {
            var e, r, u = C() - P;
            u > f && (p += u - y),
            P += u,
            l.time = (P - p) / 1e3,
            e = l.time - s,
            (!i || e > 0 || !0 === t) && (l.frame++,
            s += e + (e >= a ? .004 : a - e),
            r = !0),
            !0 !== t && (o = n(g)),
            r && l.dispatchEvent("tick")
        };
        A.call(l),
        l.time = l.frame = 0,
        l.tick = function() {
            g(!0)
        }
        ,
        l.lagSmoothing = function(t, e) {
            return arguments.length ? (f = t || 1 / d,
            void (y = Math.min(e, f, 0))) : 1 / d > f
        }
        ,
        l.sleep = function() {
            null != o && (h && E ? E(o) : clearTimeout(o),
            n = m,
            o = null,
            l === u && (c = !1))
        }
        ,
        l.wake = function(t) {
            null !== o ? l.sleep() : t ? p += -P + (P = C()) : l.frame > 10 && (P = C() - f + 5),
            n = 0 === i ? m : h && k ? k : function(t) {
                return setTimeout(t, 1e3 * (s - l.time) + 1 | 0)
            }
            ,
            l === u && (c = !0),
            g(2)
        }
        ,
        l.fps = function(t) {
            return arguments.length ? (a = 1 / ((i = t) || 60),
            s = this.time + a,
            void l.wake()) : i
        }
        ,
        l.useRAF = function(t) {
            return arguments.length ? (l.sleep(),
            h = t,
            void l.fps(i)) : h
        }
        ,
        l.fps(t),
        setTimeout(function() {
            "auto" === h && l.frame < 5 && "hidden" !== (r || {}).visibilityState && l.useRAF(!1)
        }, 1500)
    }),
    (l = h.Ticker.prototype = new h.events.EventDispatcher).constructor = h.Ticker;
    var M = x("core.Animation", function(t, e) {
        if (this.vars = e = e || {},
        this._duration = this._totalDuration = t || 0,
        this._delay = Number(e.delay) || 0,
        this._timeScale = 1,
        this._active = !0 === e.immediateRender,
        this.data = e.data,
        this._reversed = !0 === e.reversed,
        G) {
            c || u.wake();
            var i = this.vars.useFrames ? Z : G;
            i.add(this, i._time),
            this.vars.paused && this.paused(!0)
        }
    });
    u = M.ticker = new h.Ticker,
    (l = M.prototype)._dirty = l._gc = l._initted = l._paused = !1,
    l._totalTime = l._time = 0,
    l._rawPrevTime = -1,
    l._next = l._last = l._onUpdate = l._timeline = l.timeline = null,
    l._paused = !1;
    var I = function() {
        c && C() - P > 2e3 && ("hidden" !== (r || {}).visibilityState || !u.lagSmoothing()) && u.wake();
        var t = setTimeout(I, 2e3);
        t.unref && t.unref()
    };
    I(),
    l.play = function(t, e) {
        return null != t && this.seek(t, e),
        this.reversed(!1).paused(!1)
    }
    ,
    l.pause = function(t, e) {
        return null != t && this.seek(t, e),
        this.paused(!0)
    }
    ,
    l.resume = function(t, e) {
        return null != t && this.seek(t, e),
        this.paused(!1)
    }
    ,
    l.seek = function(t, e) {
        return this.totalTime(Number(t), !1 !== e)
    }
    ,
    l.restart = function(t, e) {
        return this.reversed(!1).paused(!1).totalTime(t ? -this._delay : 0, !1 !== e, !0)
    }
    ,
    l.reverse = function(t, e) {
        return null != t && this.seek(t || this.totalDuration(), e),
        this.reversed(!0).paused(!1)
    }
    ,
    l.render = function(t, e, i) {}
    ,
    l.invalidate = function() {
        return this._time = this._totalTime = 0,
        this._initted = this._gc = !1,
        this._rawPrevTime = -1,
        (this._gc || !this.timeline) && this._enabled(!0),
        this
    }
    ,
    l.isActive = function() {
        var t, e = this._timeline, i = this._startTime;
        return !e || !this._gc && !this._paused && e.isActive() && (t = e.rawTime(!0)) >= i && t < i + this.totalDuration() / this._timeScale - 1e-7
    }
    ,
    l._enabled = function(t, e) {
        return c || u.wake(),
        this._gc = !t,
        this._active = this.isActive(),
        !0 !== e && (t && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !t && this.timeline && this._timeline._remove(this, !0)),
        !1
    }
    ,
    l._kill = function(t, e) {
        return this._enabled(!1, !1)
    }
    ,
    l.kill = function(t, e) {
        return this._kill(t, e),
        this
    }
    ,
    l._uncache = function(t) {
        for (var e = t ? this : this.timeline; e; )
            e._dirty = !0,
            e = e.timeline;
        return this
    }
    ,
    l._swapSelfInParams = function(t) {
        for (var e = t.length, i = t.concat(); --e > -1; )
            "{self}" === t[e] && (i[e] = this);
        return i
    }
    ,
    l._callback = function(t) {
        var e = this.vars
          , i = e[t]
          , r = e[t + "Params"]
          , n = e[t + "Scope"] || e.callbackScope || this;
        switch (r ? r.length : 0) {
        case 0:
            i.call(n);
            break;
        case 1:
            i.call(n, r[0]);
            break;
        case 2:
            i.call(n, r[0], r[1]);
            break;
        default:
            i.apply(n, r)
        }
    }
    ,
    l.eventCallback = function(t, e, i, r) {
        if ("on" === (t || "").substr(0, 2)) {
            var n = this.vars;
            if (1 === arguments.length)
                return n[t];
            null == e ? delete n[t] : (n[t] = e,
            n[t + "Params"] = y(i) && -1 !== i.join("").indexOf("{self}") ? this._swapSelfInParams(i) : i,
            n[t + "Scope"] = r),
            "onUpdate" === t && (this._onUpdate = e)
        }
        return this
    }
    ,
    l.delay = function(t) {
        return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + t - this._delay),
        this._delay = t,
        this) : this._delay
    }
    ,
    l.duration = function(t) {
        return arguments.length ? (this._duration = this._totalDuration = t,
        this._uncache(!0),
        this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== t && this.totalTime(this._totalTime * (t / this._duration), !0),
        this) : (this._dirty = !1,
        this._duration)
    }
    ,
    l.totalDuration = function(t) {
        return this._dirty = !1,
        arguments.length ? this.duration(t) : this._totalDuration
    }
    ,
    l.time = function(t, e) {
        return arguments.length ? (this._dirty && this.totalDuration(),
        this.totalTime(t > this._duration ? this._duration : t, e)) : this._time
    }
    ,
    l.totalTime = function(t, e, i) {
        if (c || u.wake(),
        !arguments.length)
            return this._totalTime;
        if (this._timeline) {
            if (0 > t && !i && (t += this.totalDuration()),
            this._timeline.smoothChildTiming) {
                this._dirty && this.totalDuration();
                var r = this._totalDuration
                  , n = this._timeline;
                if (t > r && !i && (t = r),
                this._startTime = (this._paused ? this._pauseTime : n._time) - (this._reversed ? r - t : t) / this._timeScale,
                n._dirty || this._uncache(!1),
                n._timeline)
                    for (; n._timeline; )
                        n._timeline._time !== (n._startTime + n._totalTime) / n._timeScale && n.totalTime(n._totalTime, !0),
                        n = n._timeline
            }
            this._gc && this._enabled(!0, !1),
            (this._totalTime !== t || 0 === this._duration) && (O.length && K(),
            this.render(t, e, !1),
            O.length && K())
        }
        return this
    }
    ,
    l.progress = l.totalProgress = function(t, e) {
        var i = this.duration();
        return arguments.length ? this.totalTime(i * t, e) : i ? this._time / i : this.ratio
    }
    ,
    l.startTime = function(t) {
        return arguments.length ? (t !== this._startTime && (this._startTime = t,
        this.timeline && this.timeline._sortChildren && this.timeline.add(this, t - this._delay)),
        this) : this._startTime
    }
    ,
    l.endTime = function(t) {
        return this._startTime + (0 != t ? this.totalDuration() : this.duration()) / this._timeScale
    }
    ,
    l.timeScale = function(t) {
        if (!arguments.length)
            return this._timeScale;
        var e, i;
        for (t = t || d,
        this._timeline && this._timeline.smoothChildTiming && (i = (e = this._pauseTime) || 0 === e ? e : this._timeline.totalTime(),
        this._startTime = i - (i - this._startTime) * this._timeScale / t),
        this._timeScale = t,
        i = this.timeline; i && i.timeline; )
            i._dirty = !0,
            i.totalDuration(),
            i = i.timeline;
        return this
    }
    ,
    l.reversed = function(t) {
        return arguments.length ? (t != this._reversed && (this._reversed = t,
        this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)),
        this) : this._reversed
    }
    ,
    l.paused = function(t) {
        if (!arguments.length)
            return this._paused;
        var e, i, r = this._timeline;
        return t != this._paused && r && (c || t || u.wake(),
        i = (e = r.rawTime()) - this._pauseTime,
        !t && r.smoothChildTiming && (this._startTime += i,
        this._uncache(!1)),
        this._pauseTime = t ? e : null,
        this._paused = t,
        this._active = this.isActive(),
        !t && 0 !== i && this._initted && this.duration() && (e = r.smoothChildTiming ? this._totalTime : (e - this._startTime) / this._timeScale,
        this.render(e, e === this._totalTime, !0))),
        this._gc && !t && this._enabled(!0, !1),
        this
    }
    ;
    var z = x("core.SimpleTimeline", function(t) {
        M.call(this, 0, t),
        this.autoRemoveChildren = this.smoothChildTiming = !0
    });
    (l = z.prototype = new M).constructor = z,
    l.kill()._gc = !1,
    l._first = l._last = l._recent = null,
    l._sortChildren = !1,
    l.add = l.insert = function(t, e, i, r) {
        var n, o;
        if (t._startTime = Number(e || 0) + t._delay,
        t._paused && this !== t._timeline && (t._pauseTime = this.rawTime() - (t._timeline.rawTime() - t._pauseTime)),
        t.timeline && t.timeline._remove(t, !0),
        t.timeline = t._timeline = this,
        t._gc && t._enabled(!0, !0),
        n = this._last,
        this._sortChildren)
            for (o = t._startTime; n && n._startTime > o; )
                n = n._prev;
        return n ? (t._next = n._next,
        n._next = t) : (t._next = this._first,
        this._first = t),
        t._next ? t._next._prev = t : this._last = t,
        t._prev = n,
        this._recent = t,
        this._timeline && this._uncache(!0),
        this
    }
    ,
    l._remove = function(t, e) {
        return t.timeline === this && (e || t._enabled(!1, !0),
        t._prev ? t._prev._next = t._next : this._first === t && (this._first = t._next),
        t._next ? t._next._prev = t._prev : this._last === t && (this._last = t._prev),
        t._next = t._prev = t.timeline = null,
        t === this._recent && (this._recent = this._last),
        this._timeline && this._uncache(!0)),
        this
    }
    ,
    l.render = function(t, e, i) {
        var r, n = this._first;
        for (this._totalTime = this._time = this._rawPrevTime = t; n; )
            r = n._next,
            (n._active || t >= n._startTime && !n._paused && !n._gc) && (n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i)),
            n = r
    }
    ,
    l.rawTime = function() {
        return c || u.wake(),
        this._totalTime
    }
    ;
    var L = x("TweenLite", function(e, i, r) {
        if (M.call(this, i, r),
        this.render = L.prototype.render,
        null == e)
            throw "Cannot tween a null target.";
        this.target = e = "string" != typeof e ? e : L.selector(e) || e;
        var n, o, a, s = e.jquery || e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType), l = this.vars.overwrite;
        if (this._overwrite = l = null == l ? X[L.defaultOverwrite] : "number" == typeof l ? l >> 0 : X[l],
        (s || e instanceof Array || e.push && y(e)) && "number" != typeof e[0])
            for (this._targets = a = f(e),
            this._propLookup = [],
            this._siblings = [],
            n = 0; n < a.length; n++)
                (o = a[n]) ? "string" != typeof o ? o.length && o !== t && o[0] && (o[0] === t || o[0].nodeType && o[0].style && !o.nodeType) ? (a.splice(n--, 1),
                this._targets = a = a.concat(f(o))) : (this._siblings[n] = J(o, this, !1),
                1 === l && this._siblings[n].length > 1 && tt(o, this, null, 1, this._siblings[n])) : "string" == typeof (o = a[n--] = L.selector(o)) && a.splice(n + 1, 1) : a.splice(n--, 1);
        else
            this._propLookup = {},
            this._siblings = J(e, this, !1),
            1 === l && this._siblings.length > 1 && tt(e, this, null, 1, this._siblings);
        (this.vars.immediateRender || 0 === i && 0 === this._delay && !1 !== this.vars.immediateRender) && (this._time = -d,
        this.render(Math.min(0, -this._delay)))
    }, !0)
      , D = function(e) {
        return e && e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType)
    };
    (l = L.prototype = new M).constructor = L,
    l.kill()._gc = !1,
    l.ratio = 0,
    l._firstPT = l._targets = l._overwrittenProps = l._startAt = null,
    l._notifyPluginsOfEnabled = l._lazy = !1,
    L.version = "2.0.2",
    L.defaultEase = l._ease = new w(null,null,1,1),
    L.defaultOverwrite = "auto",
    L.ticker = u,
    L.autoSleep = 120,
    L.lagSmoothing = function(t, e) {
        u.lagSmoothing(t, e)
    }
    ,
    L.selector = t.$ || t.jQuery || function(e) {
        var i = t.$ || t.jQuery;
        return i ? (L.selector = i,
        i(e)) : (r || (r = t.document),
        r ? r.querySelectorAll ? r.querySelectorAll(e) : r.getElementById("#" === e.charAt(0) ? e.substr(1) : e) : e)
    }
    ;
    var O = []
      , R = {}
      , F = /(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi
      , B = /[\+-]=-?[\.\d]/
      , N = function(t) {
        for (var e, i = this._firstPT; i; )
            e = i.blob ? 1 === t && null != this.end ? this.end : t ? this.join("") : this.start : i.c * t + i.s,
            i.m ? e = i.m.call(this._tween, e, this._target || i.t, this._tween) : 1e-6 > e && e > -1e-6 && !i.blob && (e = 0),
            i.f ? i.fp ? i.t[i.p](i.fp, e) : i.t[i.p](e) : i.t[i.p] = e,
            i = i._next
    }
      , U = function(t, e, i, r) {
        var n, o, a, s, l, u, c, p = [], h = 0, d = "", f = 0;
        for (p.start = t,
        p.end = e,
        t = p[0] = t + "",
        e = p[1] = e + "",
        i && (i(p),
        t = p[0],
        e = p[1]),
        p.length = 0,
        n = t.match(F) || [],
        o = e.match(F) || [],
        r && (r._next = null,
        r.blob = 1,
        p._firstPT = p._applyPT = r),
        l = o.length,
        s = 0; l > s; s++)
            c = o[s],
            d += (u = e.substr(h, e.indexOf(c, h) - h)) || !s ? u : ",",
            h += u.length,
            f ? f = (f + 1) % 5 : "rgba(" === u.substr(-5) && (f = 1),
            c === n[s] || n.length <= s ? d += c : (d && (p.push(d),
            d = ""),
            a = parseFloat(n[s]),
            p.push(a),
            p._firstPT = {
                _next: p._firstPT,
                t: p,
                p: p.length - 1,
                s: a,
                c: ("=" === c.charAt(1) ? parseInt(c.charAt(0) + "1", 10) * parseFloat(c.substr(2)) : parseFloat(c) - a) || 0,
                f: 0,
                m: f && 4 > f ? Math.round : 0
            }),
            h += c.length;
        return (d += e.substr(h)) && p.push(d),
        p.setRatio = N,
        B.test(e) && (p.end = null),
        p
    }
      , V = function(t, e, i, r, n, o, a, s, l) {
        "function" == typeof r && (r = r(l || 0, t));
        var u = typeof t[e]
          , c = "function" !== u ? "" : e.indexOf("set") || "function" != typeof t["get" + e.substr(3)] ? e : "get" + e.substr(3)
          , p = "get" !== i ? i : c ? a ? t[c](a) : t[c]() : t[e]
          , h = "string" == typeof r && "=" === r.charAt(1)
          , d = {
            t: t,
            p: e,
            s: p,
            f: "function" === u,
            pg: 0,
            n: n || e,
            m: o ? "function" == typeof o ? o : Math.round : 0,
            pr: 0,
            c: h ? parseInt(r.charAt(0) + "1", 10) * parseFloat(r.substr(2)) : parseFloat(r) - p || 0
        };
        return ("number" != typeof p || "number" != typeof r && !h) && (a || isNaN(p) || !h && isNaN(r) || "boolean" == typeof p || "boolean" == typeof r ? (d.fp = a,
        d = {
            t: U(p, h ? parseFloat(d.s) + d.c + (d.s + "").replace(/[0-9\-\.]/g, "") : r, s || L.defaultStringFilter, d),
            p: "setRatio",
            s: 0,
            c: 1,
            f: 2,
            pg: 0,
            n: n || e,
            pr: 0,
            m: 0
        }) : (d.s = parseFloat(p),
        h || (d.c = parseFloat(r) - d.s || 0))),
        d.c ? ((d._next = this._firstPT) && (d._next._prev = d),
        this._firstPT = d,
        d) : void 0
    }
      , j = L._internals = {
        isArray: y,
        isSelector: D,
        lazyTweens: O,
        blobDif: U
    }
      , $ = L._plugins = {}
      , q = j.tweenLookup = {}
      , W = 0
      , H = j.reservedProps = {
        ease: 1,
        delay: 1,
        overwrite: 1,
        onComplete: 1,
        onCompleteParams: 1,
        onCompleteScope: 1,
        useFrames: 1,
        runBackwards: 1,
        startAt: 1,
        onUpdate: 1,
        onUpdateParams: 1,
        onUpdateScope: 1,
        onStart: 1,
        onStartParams: 1,
        onStartScope: 1,
        onReverseComplete: 1,
        onReverseCompleteParams: 1,
        onReverseCompleteScope: 1,
        onRepeat: 1,
        onRepeatParams: 1,
        onRepeatScope: 1,
        easeParams: 1,
        yoyo: 1,
        immediateRender: 1,
        repeat: 1,
        repeatDelay: 1,
        data: 1,
        paused: 1,
        reversed: 1,
        autoCSS: 1,
        lazy: 1,
        onOverwrite: 1,
        callbackScope: 1,
        stringFilter: 1,
        id: 1,
        yoyoEase: 1
    }
      , X = {
        none: 0,
        all: 1,
        auto: 2,
        concurrent: 3,
        allOnStart: 4,
        preexisting: 5,
        true: 1,
        false: 0
    }
      , Z = M._rootFramesTimeline = new z
      , G = M._rootTimeline = new z
      , Y = 30
      , K = j.lazyRender = function() {
        var t, e = O.length;
        for (R = {}; --e > -1; )
            (t = O[e]) && !1 !== t._lazy && (t.render(t._lazy[0], t._lazy[1], !0),
            t._lazy = !1);
        O.length = 0
    }
    ;
    G._startTime = u.time,
    Z._startTime = u.frame,
    G._active = Z._active = !0,
    setTimeout(K, 1),
    M._updateRoot = L.render = function() {
        var t, e, i;
        if (O.length && K(),
        G.render((u.time - G._startTime) * G._timeScale, !1, !1),
        Z.render((u.frame - Z._startTime) * Z._timeScale, !1, !1),
        O.length && K(),
        u.frame >= Y) {
            for (i in Y = u.frame + (parseInt(L.autoSleep, 10) || 120),
            q) {
                for (t = (e = q[i].tweens).length; --t > -1; )
                    e[t]._gc && e.splice(t, 1);
                0 === e.length && delete q[i]
            }
            if ((!(i = G._first) || i._paused) && L.autoSleep && !Z._first && 1 === u._listeners.tick.length) {
                for (; i && i._paused; )
                    i = i._next;
                i || u.sleep()
            }
        }
    }
    ,
    u.addEventListener("tick", M._updateRoot);
    var J = function(t, e, i) {
        var r, n, o = t._gsTweenID;
        if (q[o || (t._gsTweenID = o = "t" + W++)] || (q[o] = {
            target: t,
            tweens: []
        }),
        e && ((r = q[o].tweens)[n = r.length] = e,
        i))
            for (; --n > -1; )
                r[n] === e && r.splice(n, 1);
        return q[o].tweens
    }
      , Q = function(t, e, i, r) {
        var n, o, a = t.vars.onOverwrite;
        return a && (n = a(t, e, i, r)),
        (a = L.onOverwrite) && (o = a(t, e, i, r)),
        !1 !== n && !1 !== o
    }
      , tt = function(t, e, i, r, n) {
        var o, a, s, l;
        if (1 === r || r >= 4) {
            for (l = n.length,
            o = 0; l > o; o++)
                if ((s = n[o]) !== e)
                    s._gc || s._kill(null, t, e) && (a = !0);
                else if (5 === r)
                    break;
            return a
        }
        var u, c = e._startTime + d, p = [], h = 0, f = 0 === e._duration;
        for (o = n.length; --o > -1; )
            (s = n[o]) === e || s._gc || s._paused || (s._timeline !== e._timeline ? (u = u || et(e, 0, f),
            0 === et(s, u, f) && (p[h++] = s)) : s._startTime <= c && s._startTime + s.totalDuration() / s._timeScale > c && ((f || !s._initted) && c - s._startTime <= 2e-10 || (p[h++] = s)));
        for (o = h; --o > -1; )
            if (l = (s = p[o])._firstPT,
            2 === r && s._kill(i, t, e) && (a = !0),
            2 !== r || !s._firstPT && s._initted && l) {
                if (2 !== r && !Q(s, e))
                    continue;
                s._enabled(!1, !1) && (a = !0)
            }
        return a
    }
      , et = function(t, e, i) {
        for (var r = t._timeline, n = r._timeScale, o = t._startTime; r._timeline; ) {
            if (o += r._startTime,
            n *= r._timeScale,
            r._paused)
                return -100;
            r = r._timeline
        }
        return (o /= n) > e ? o - e : i && o === e || !t._initted && 2 * d > o - e ? d : (o += t.totalDuration() / t._timeScale / n) > e + d ? 0 : o - e - d
    };
    l._init = function() {
        var t, e, i, r, n, o, a = this.vars, s = this._overwrittenProps, l = this._duration, u = !!a.immediateRender, c = a.ease;
        if (a.startAt) {
            for (r in this._startAt && (this._startAt.render(-1, !0),
            this._startAt.kill()),
            n = {},
            a.startAt)
                n[r] = a.startAt[r];
            if (n.data = "isStart",
            n.overwrite = !1,
            n.immediateRender = !0,
            n.lazy = u && !1 !== a.lazy,
            n.startAt = n.delay = null,
            n.onUpdate = a.onUpdate,
            n.onUpdateParams = a.onUpdateParams,
            n.onUpdateScope = a.onUpdateScope || a.callbackScope || this,
            this._startAt = L.to(this.target || {}, 0, n),
            u)
                if (this._time > 0)
                    this._startAt = null;
                else if (0 !== l)
                    return
        } else if (a.runBackwards && 0 !== l)
            if (this._startAt)
                this._startAt.render(-1, !0),
                this._startAt.kill(),
                this._startAt = null;
            else {
                for (r in 0 !== this._time && (u = !1),
                i = {},
                a)
                    H[r] && "autoCSS" !== r || (i[r] = a[r]);
                if (i.overwrite = 0,
                i.data = "isFromStart",
                i.lazy = u && !1 !== a.lazy,
                i.immediateRender = u,
                this._startAt = L.to(this.target, 0, i),
                u) {
                    if (0 === this._time)
                        return
                } else
                    this._startAt._init(),
                    this._startAt._enabled(!1),
                    this.vars.immediateRender && (this._startAt = null)
            }
        if (this._ease = c = c ? c instanceof w ? c : "function" == typeof c ? new w(c,a.easeParams) : T[c] || L.defaultEase : L.defaultEase,
        a.easeParams instanceof Array && c.config && (this._ease = c.config.apply(c, a.easeParams)),
        this._easeType = this._ease._type,
        this._easePower = this._ease._power,
        this._firstPT = null,
        this._targets)
            for (o = this._targets.length,
            t = 0; o > t; t++)
                this._initProps(this._targets[t], this._propLookup[t] = {}, this._siblings[t], s ? s[t] : null, t) && (e = !0);
        else
            e = this._initProps(this.target, this._propLookup, this._siblings, s, 0);
        if (e && L._onPluginEvent("_onInitAllProps", this),
        s && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)),
        a.runBackwards)
            for (i = this._firstPT; i; )
                i.s += i.c,
                i.c = -i.c,
                i = i._next;
        this._onUpdate = a.onUpdate,
        this._initted = !0
    }
    ,
    l._initProps = function(e, i, r, n, o) {
        var a, s, l, u, c, p;
        if (null == e)
            return !1;
        for (a in R[e._gsTweenID] && K(),
        this.vars.css || e.style && e !== t && e.nodeType && $.css && !1 !== this.vars.autoCSS && function(t, e) {
            var i, r = {};
            for (i in t)
                H[i] || i in e && "transform" !== i && "x" !== i && "y" !== i && "width" !== i && "height" !== i && "className" !== i && "border" !== i || !(!$[i] || $[i] && $[i]._autoCSS) || (r[i] = t[i],
                delete t[i]);
            t.css = r
        }(this.vars, e),
        this.vars)
            if (p = this.vars[a],
            H[a])
                p && (p instanceof Array || p.push && y(p)) && -1 !== p.join("").indexOf("{self}") && (this.vars[a] = p = this._swapSelfInParams(p, this));
            else if ($[a] && (u = new $[a])._onInitTween(e, this.vars[a], this, o)) {
                for (this._firstPT = c = {
                    _next: this._firstPT,
                    t: u,
                    p: "setRatio",
                    s: 0,
                    c: 1,
                    f: 1,
                    n: a,
                    pg: 1,
                    pr: u._priority,
                    m: 0
                },
                s = u._overwriteProps.length; --s > -1; )
                    i[u._overwriteProps[s]] = this._firstPT;
                (u._priority || u._onInitAllProps) && (l = !0),
                (u._onDisable || u._onEnable) && (this._notifyPluginsOfEnabled = !0),
                c._next && (c._next._prev = c)
            } else
                i[a] = V.call(this, e, a, "get", p, a, 0, null, this.vars.stringFilter, o);
        return n && this._kill(n, e) ? this._initProps(e, i, r, n, o) : this._overwrite > 1 && this._firstPT && r.length > 1 && tt(e, this, i, this._overwrite, r) ? (this._kill(i, e),
        this._initProps(e, i, r, n, o)) : (this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration) && (R[e._gsTweenID] = !0),
        l)
    }
    ,
    l.render = function(t, e, i) {
        var r, n, o, a, s = this._time, l = this._duration, u = this._rawPrevTime;
        if (t >= l - 1e-7 && t >= 0)
            this._totalTime = this._time = l,
            this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1,
            this._reversed || (r = !0,
            n = "onComplete",
            i = i || this._timeline.autoRemoveChildren),
            0 === l && (this._initted || !this.vars.lazy || i) && (this._startTime === this._timeline._duration && (t = 0),
            (0 > u || 0 >= t && t >= -1e-7 || u === d && "isPause" !== this.data) && u !== t && (i = !0,
            u > d && (n = "onReverseComplete")),
            this._rawPrevTime = a = !e || t || u === t ? t : d);
        else if (1e-7 > t)
            this._totalTime = this._time = 0,
            this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0,
            (0 !== s || 0 === l && u > 0) && (n = "onReverseComplete",
            r = this._reversed),
            0 > t && (this._active = !1,
            0 === l && (this._initted || !this.vars.lazy || i) && (u >= 0 && (u !== d || "isPause" !== this.data) && (i = !0),
            this._rawPrevTime = a = !e || t || u === t ? t : d)),
            (!this._initted || this._startAt && this._startAt.progress()) && (i = !0);
        else if (this._totalTime = this._time = t,
        this._easeType) {
            var c = t / l
              , p = this._easeType
              , h = this._easePower;
            (1 === p || 3 === p && c >= .5) && (c = 1 - c),
            3 === p && (c *= 2),
            1 === h ? c *= c : 2 === h ? c *= c * c : 3 === h ? c *= c * c * c : 4 === h && (c *= c * c * c * c),
            this.ratio = 1 === p ? 1 - c : 2 === p ? c : .5 > t / l ? c / 2 : 1 - c / 2
        } else
            this.ratio = this._ease.getRatio(t / l);
        if (this._time !== s || i) {
            if (!this._initted) {
                if (this._init(),
                !this._initted || this._gc)
                    return;
                if (!i && this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration))
                    return this._time = this._totalTime = s,
                    this._rawPrevTime = u,
                    O.push(this),
                    void (this._lazy = [t, e]);
                this._time && !r ? this.ratio = this._ease.getRatio(this._time / l) : r && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
            }
            for (!1 !== this._lazy && (this._lazy = !1),
            this._active || !this._paused && this._time !== s && t >= 0 && (this._active = !0),
            0 === s && (this._startAt && (t >= 0 ? this._startAt.render(t, !0, i) : n || (n = "_dummyGS")),
            this.vars.onStart && (0 !== this._time || 0 === l) && (e || this._callback("onStart"))),
            o = this._firstPT; o; )
                o.f ? o.t[o.p](o.c * this.ratio + o.s) : o.t[o.p] = o.c * this.ratio + o.s,
                o = o._next;
            this._onUpdate && (0 > t && this._startAt && -1e-4 !== t && this._startAt.render(t, !0, i),
            e || (this._time !== s || r || i) && this._callback("onUpdate")),
            n && (!this._gc || i) && (0 > t && this._startAt && !this._onUpdate && -1e-4 !== t && this._startAt.render(t, !0, i),
            r && (this._timeline.autoRemoveChildren && this._enabled(!1, !1),
            this._active = !1),
            !e && this.vars[n] && this._callback(n),
            0 === l && this._rawPrevTime === d && a !== d && (this._rawPrevTime = 0))
        }
    }
    ,
    l._kill = function(t, e, i) {
        if ("all" === t && (t = null),
        null == t && (null == e || e === this.target))
            return this._lazy = !1,
            this._enabled(!1, !1);
        e = "string" != typeof e ? e || this._targets || this.target : L.selector(e) || e;
        var r, n, o, a, s, l, u, c, p, h = i && this._time && i._startTime === this._startTime && this._timeline === i._timeline, d = this._firstPT;
        if ((y(e) || D(e)) && "number" != typeof e[0])
            for (r = e.length; --r > -1; )
                this._kill(t, e[r], i) && (l = !0);
        else {
            if (this._targets) {
                for (r = this._targets.length; --r > -1; )
                    if (e === this._targets[r]) {
                        s = this._propLookup[r] || {},
                        this._overwrittenProps = this._overwrittenProps || [],
                        n = this._overwrittenProps[r] = t ? this._overwrittenProps[r] || {} : "all";
                        break
                    }
            } else {
                if (e !== this.target)
                    return !1;
                s = this._propLookup,
                n = this._overwrittenProps = t ? this._overwrittenProps || {} : "all"
            }
            if (s) {
                if (u = t || s,
                c = t !== n && "all" !== n && t !== s && ("object" != typeof t || !t._tempKill),
                i && (L.onOverwrite || this.vars.onOverwrite)) {
                    for (o in u)
                        s[o] && (p || (p = []),
                        p.push(o));
                    if ((p || !t) && !Q(this, i, e, p))
                        return !1
                }
                for (o in u)
                    (a = s[o]) && (h && (a.f ? a.t[a.p](a.s) : a.t[a.p] = a.s,
                    l = !0),
                    a.pg && a.t._kill(u) && (l = !0),
                    a.pg && 0 !== a.t._overwriteProps.length || (a._prev ? a._prev._next = a._next : a === this._firstPT && (this._firstPT = a._next),
                    a._next && (a._next._prev = a._prev),
                    a._next = a._prev = null),
                    delete s[o]),
                    c && (n[o] = 1);
                !this._firstPT && this._initted && d && this._enabled(!1, !1)
            }
        }
        return l
    }
    ,
    l.invalidate = function() {
        return this._notifyPluginsOfEnabled && L._onPluginEvent("_onDisable", this),
        this._firstPT = this._overwrittenProps = this._startAt = this._onUpdate = null,
        this._notifyPluginsOfEnabled = this._active = this._lazy = !1,
        this._propLookup = this._targets ? {} : [],
        M.prototype.invalidate.call(this),
        this.vars.immediateRender && (this._time = -d,
        this.render(Math.min(0, -this._delay))),
        this
    }
    ,
    l._enabled = function(t, e) {
        if (c || u.wake(),
        t && this._gc) {
            var i, r = this._targets;
            if (r)
                for (i = r.length; --i > -1; )
                    this._siblings[i] = J(r[i], this, !0);
            else
                this._siblings = J(this.target, this, !0)
        }
        return M.prototype._enabled.call(this, t, e),
        !(!this._notifyPluginsOfEnabled || !this._firstPT) && L._onPluginEvent(t ? "_onEnable" : "_onDisable", this)
    }
    ,
    L.to = function(t, e, i) {
        return new L(t,e,i)
    }
    ,
    L.from = function(t, e, i) {
        return i.runBackwards = !0,
        i.immediateRender = 0 != i.immediateRender,
        new L(t,e,i)
    }
    ,
    L.fromTo = function(t, e, i, r) {
        return r.startAt = i,
        r.immediateRender = 0 != r.immediateRender && 0 != i.immediateRender,
        new L(t,e,r)
    }
    ,
    L.delayedCall = function(t, e, i, r, n) {
        return new L(e,0,{
            delay: t,
            onComplete: e,
            onCompleteParams: i,
            callbackScope: r,
            onReverseComplete: e,
            onReverseCompleteParams: i,
            immediateRender: !1,
            lazy: !1,
            useFrames: n,
            overwrite: 0
        })
    }
    ,
    L.set = function(t, e) {
        return new L(t,0,e)
    }
    ,
    L.getTweensOf = function(t, e) {
        if (null == t)
            return [];
        var i, r, n, o;
        if (t = "string" != typeof t ? t : L.selector(t) || t,
        (y(t) || D(t)) && "number" != typeof t[0]) {
            for (i = t.length,
            r = []; --i > -1; )
                r = r.concat(L.getTweensOf(t[i], e));
            for (i = r.length; --i > -1; )
                for (o = r[i],
                n = i; --n > -1; )
                    o === r[n] && r.splice(i, 1)
        } else if (t._gsTweenID)
            for (i = (r = J(t).concat()).length; --i > -1; )
                (r[i]._gc || e && !r[i].isActive()) && r.splice(i, 1);
        return r || []
    }
    ,
    L.killTweensOf = L.killDelayedCallsTo = function(t, e, i) {
        "object" == typeof e && (i = e,
        e = !1);
        for (var r = L.getTweensOf(t, e), n = r.length; --n > -1; )
            r[n]._kill(i, t)
    }
    ;
    var it = x("plugins.TweenPlugin", function(t, e) {
        this._overwriteProps = (t || "").split(","),
        this._propName = this._overwriteProps[0],
        this._priority = e || 0,
        this._super = it.prototype
    }, !0);
    if (l = it.prototype,
    it.version = "1.19.0",
    it.API = 2,
    l._firstPT = null,
    l._addTween = V,
    l.setRatio = N,
    l._kill = function(t) {
        var e, i = this._overwriteProps, r = this._firstPT;
        if (null != t[this._propName])
            this._overwriteProps = [];
        else
            for (e = i.length; --e > -1; )
                null != t[i[e]] && i.splice(e, 1);
        for (; r; )
            null != t[r.n] && (r._next && (r._next._prev = r._prev),
            r._prev ? (r._prev._next = r._next,
            r._prev = null) : this._firstPT === r && (this._firstPT = r._next)),
            r = r._next;
        return !1
    }
    ,
    l._mod = l._roundProps = function(t) {
        for (var e, i = this._firstPT; i; )
            (e = t[this._propName] || null != i.n && t[i.n.split(this._propName + "_").join("")]) && "function" == typeof e && (2 === i.f ? i.t._applyPT.m = e : i.m = e),
            i = i._next
    }
    ,
    L._onPluginEvent = function(t, e) {
        var i, r, n, o, a, s = e._firstPT;
        if ("_onInitAllProps" === t) {
            for (; s; ) {
                for (a = s._next,
                r = n; r && r.pr > s.pr; )
                    r = r._next;
                (s._prev = r ? r._prev : o) ? s._prev._next = s : n = s,
                (s._next = r) ? r._prev = s : o = s,
                s = a
            }
            s = e._firstPT = n
        }
        for (; s; )
            s.pg && "function" == typeof s.t[t] && s.t[t]() && (i = !0),
            s = s._next;
        return i
    }
    ,
    it.activate = function(t) {
        for (var e = t.length; --e > -1; )
            t[e].API === it.API && ($[(new t[e])._propName] = t[e]);
        return !0
    }
    ,
    v.plugin = function(t) {
        if (!(t && t.propName && t.init && t.API))
            throw "illegal plugin definition.";
        var e, i = t.propName, r = t.priority || 0, n = t.overwriteProps, o = {
            init: "_onInitTween",
            set: "setRatio",
            kill: "_kill",
            round: "_mod",
            mod: "_mod",
            initAll: "_onInitAllProps"
        }, a = x("plugins." + i.charAt(0).toUpperCase() + i.substr(1) + "Plugin", function() {
            it.call(this, i, r),
            this._overwriteProps = n || []
        }, !0 === t.global), s = a.prototype = new it(i);
        for (e in s.constructor = a,
        a.API = t.API,
        o)
            "function" == typeof t[e] && (s[o[e]] = t[e]);
        return a.version = t.version,
        it.activate([a]),
        a
    }
    ,
    a = t._gsQueue) {
        for (s = 0; s < a.length; s++)
            a[s]();
        for (l in g)
            g[l].func || t.console.log("GSAP encountered missing dependency: " + l)
    }
    c = !1
}("undefined" != typeof module && module.exports && "undefined" != typeof global ? global : this || window, "TweenMax"),
function(t) {
    var e = navigator.userAgent;
    t.HTMLPictureElement && /ecko/.test(e) && e.match(/rv\:(\d+)/) && RegExp.$1 < 45 && addEventListener("resize", function() {
        var e, i = document.createElement("source"), r = function(t) {
            var e, r, n = t.parentNode;
            "PICTURE" === n.nodeName.toUpperCase() ? (e = i.cloneNode(),
            n.insertBefore(e, n.firstElementChild),
            setTimeout(function() {
                n.removeChild(e)
            })) : (!t._pfLastSize || t.offsetWidth > t._pfLastSize) && (t._pfLastSize = t.offsetWidth,
            r = t.sizes,
            t.sizes += ",100vw",
            setTimeout(function() {
                t.sizes = r
            }))
        }, n = function() {
            var t, e = document.querySelectorAll("picture > img, img[srcset][sizes]");
            for (t = 0; t < e.length; t++)
                r(e[t])
        }, o = function() {
            clearTimeout(e),
            e = setTimeout(n, 99)
        }, a = t.matchMedia && matchMedia("(orientation: landscape)"), s = function() {
            o(),
            a && a.addListener && a.addListener(o)
        };
        return i.srcset = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",
        /^[c|i]|d$/.test(document.readyState || "") ? s() : document.addEventListener("DOMContentLoaded", s),
        o
    }())
}(window),
function(t, e, i) {
    "use strict";
    function r(t) {
        return " " === t || "  " === t || "\n" === t || "\f" === t || "\r" === t
    }
    function n(t, e, i, r) {
        var n, o, a;
        return "saveData" === x.algorithm ? t > 2.7 ? a = i + 1 : (o = (e - i) * (n = Math.pow(t - .6, 1.5)),
        r && (o += .1 * n),
        a = t + o) : a = i > 1 ? Math.sqrt(t * e) : t,
        a > i
    }
    function o(t, e) {
        return t.res - e.res
    }
    function a(t, e, i) {
        var r;
        return !i && e && (i = (i = t[p.ns].sets) && i[i.length - 1]),
        (r = s(e, i)) && (e = p.makeUrl(e),
        t[p.ns].curSrc = e,
        t[p.ns].curCan = r,
        r.res || H(r, r.set.sizes)),
        r
    }
    function s(t, e) {
        var i, r, n;
        if (t && e)
            for (n = p.parseSet(e),
            t = p.makeUrl(t),
            i = 0; i < n.length; i++)
                if (t === p.makeUrl(n[i].url)) {
                    r = n[i];
                    break
                }
        return r
    }
    e.createElement("picture");
    var l, u, c, p = {}, h = !1, d = function() {}, f = e.createElement("img"), m = f.getAttribute, y = f.setAttribute, g = f.removeAttribute, _ = e.documentElement, v = {}, x = {
        algorithm: ""
    }, b = "data-pfsrc", w = b + "set", T = navigator.userAgent, S = /rident/.test(T) || /ecko/.test(T) && T.match(/rv\:(\d+)/) && RegExp.$1 > 35, A = "currentSrc", k = /\s+\+?\d+(e\d+)?w/, E = /(\([^)]+\))?\s*(.+)/, C = t.picturefillCFG, P = "font-size:100%!important;", M = !0, I = {}, z = {}, L = t.devicePixelRatio, D = {
        px: 1,
        in: 96
    }, O = e.createElement("a"), R = !1, F = /^[ \t\n\r\u000c]+/, B = /^[, \t\n\r\u000c]+/, N = /^[^ \t\n\r\u000c]+/, U = /[,]+$/, V = /^\d+$/, j = /^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/, $ = function(t, e, i, r) {
        t.addEventListener ? t.addEventListener(e, i, r || !1) : t.attachEvent && t.attachEvent("on" + e, i)
    }, q = function(t) {
        var e = {};
        return function(i) {
            return i in e || (e[i] = t(i)),
            e[i]
        }
    }, W = function() {
        var t = /^([\d\.]+)(em|vw|px)$/
          , e = q(function(t) {
            return "return " + function() {
                for (var t = arguments, e = 0, i = t[0]; ++e in t; )
                    i = i.replace(t[e], t[++e]);
                return i
            }((t || "").toLowerCase(), /\band\b/g, "&&", /,/g, "||", /min-([a-z-\s]+):/g, "e.$1>=", /max-([a-z-\s]+):/g, "e.$1<=", /calc([^)]+)/g, "($1)", /(\d+[\.]*[\d]*)([a-z]+)/g, "($1 * e.$2)", /^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi, "") + ";"
        });
        return function(i, r) {
            var n;
            if (!(i in I))
                if (I[i] = !1,
                r && (n = i.match(t)))
                    I[i] = n[1] * D[n[2]];
                else
                    try {
                        I[i] = new Function("e",e(i))(D)
                    } catch (t) {}
            return I[i]
        }
    }(), H = function(t, e) {
        return t.w ? (t.cWidth = p.calcListLength(e || "100vw"),
        t.res = t.w / t.cWidth) : t.res = t.d,
        t
    }, X = function(t) {
        if (h) {
            var i, r, n, o = t || {};
            if (o.elements && 1 === o.elements.nodeType && ("IMG" === o.elements.nodeName.toUpperCase() ? o.elements = [o.elements] : (o.context = o.elements,
            o.elements = null)),
            n = (i = o.elements || p.qsa(o.context || e, o.reevaluate || o.reselect ? p.sel : p.selShort)).length) {
                for (p.setupRun(o),
                R = !0,
                r = 0; n > r; r++)
                    p.fillImg(i[r], o);
                p.teardownRun(o)
            }
        }
    };
    t.console && console.warn,
    A in f || (A = "src"),
    v["image/jpeg"] = !0,
    v["image/gif"] = !0,
    v["image/png"] = !0,
    v["image/svg+xml"] = e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image", "1.1"),
    p.ns = ("pf" + (new Date).getTime()).substr(0, 9),
    p.supSrcset = "srcset"in f,
    p.supSizes = "sizes"in f,
    p.supPicture = !!t.HTMLPictureElement,
    p.supSrcset && p.supPicture && !p.supSizes && function(t) {
        f.srcset = "data:,a",
        t.src = "data:,a",
        p.supSrcset = f.complete === t.complete,
        p.supPicture = p.supSrcset && p.supPicture
    }(e.createElement("img")),
    p.supSrcset && !p.supSizes ? function() {
        var t = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
          , i = e.createElement("img")
          , r = function() {
            2 === i.width && (p.supSizes = !0),
            u = p.supSrcset && !p.supSizes,
            h = !0,
            setTimeout(X)
        };
        i.onload = r,
        i.onerror = r,
        i.setAttribute("sizes", "9px"),
        i.srcset = t + " 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",
        i.src = t
    }() : h = !0,
    p.selShort = "picture>img,img[srcset]",
    p.sel = p.selShort,
    p.cfg = x,
    p.DPR = L || 1,
    p.u = D,
    p.types = v,
    p.setSize = d,
    p.makeUrl = q(function(t) {
        return O.href = t,
        O.href
    }),
    p.qsa = function(t, e) {
        return "querySelector"in t ? t.querySelectorAll(e) : []
    }
    ,
    p.matchesMedia = function() {
        return t.matchMedia && (matchMedia("(min-width: 0.1em)") || {}).matches ? p.matchesMedia = function(t) {
            return !t || matchMedia(t).matches
        }
        : p.matchesMedia = p.mMQ,
        p.matchesMedia.apply(this, arguments)
    }
    ,
    p.mMQ = function(t) {
        return !t || W(t)
    }
    ,
    p.calcLength = function(t) {
        var e = W(t, !0) || !1;
        return 0 > e && (e = !1),
        e
    }
    ,
    p.supportsType = function(t) {
        return !t || v[t]
    }
    ,
    p.parseSize = q(function(t) {
        var e = (t || "").match(E);
        return {
            media: e && e[1],
            length: e && e[2]
        }
    }),
    p.parseSet = function(t) {
        return t.cands || (t.cands = function(t, e) {
            function i(e) {
                var i, r = e.exec(t.substring(h));
                return r ? (i = r[0],
                h += i.length,
                i) : void 0
            }
            function n() {
                var t, i, r, n, o, l, u, c, p, h = !1, f = {};
                for (n = 0; n < s.length; n++)
                    l = (o = s[n])[o.length - 1],
                    u = o.substring(0, o.length - 1),
                    c = parseInt(u, 10),
                    p = parseFloat(u),
                    V.test(u) && "w" === l ? ((t || i) && (h = !0),
                    0 === c ? h = !0 : t = c) : j.test(u) && "x" === l ? ((t || i || r) && (h = !0),
                    0 > p ? h = !0 : i = p) : V.test(u) && "h" === l ? ((r || i) && (h = !0),
                    0 === c ? h = !0 : r = c) : h = !0;
                h || (f.url = a,
                t && (f.w = t),
                i && (f.d = i),
                r && (f.h = r),
                r || i || t || (f.d = 1),
                1 === f.d && (e.has1x = !0),
                f.set = e,
                d.push(f))
            }
            function o() {
                for (i(F),
                l = "",
                u = "in descriptor"; ; ) {
                    if (c = t.charAt(h),
                    "in descriptor" === u)
                        if (r(c))
                            l && (s.push(l),
                            l = "",
                            u = "after descriptor");
                        else {
                            if ("," === c)
                                return h += 1,
                                l && s.push(l),
                                void n();
                            if ("(" === c)
                                l += c,
                                u = "in parens";
                            else {
                                if ("" === c)
                                    return l && s.push(l),
                                    void n();
                                l += c
                            }
                        }
                    else if ("in parens" === u)
                        if (")" === c)
                            l += c,
                            u = "in descriptor";
                        else {
                            if ("" === c)
                                return s.push(l),
                                void n();
                            l += c
                        }
                    else if ("after descriptor" === u)
                        if (r(c))
                            ;
                        else {
                            if ("" === c)
                                return void n();
                            u = "in descriptor",
                            h -= 1
                        }
                    h += 1
                }
            }
            for (var a, s, l, u, c, p = t.length, h = 0, d = []; ; ) {
                if (i(B),
                h >= p)
                    return d;
                a = i(N),
                s = [],
                "," === a.slice(-1) ? (a = a.replace(U, ""),
                n()) : o()
            }
        }(t.srcset, t)),
        t.cands
    }
    ,
    p.getEmValue = function() {
        var t;
        if (!l && (t = e.body)) {
            var i = e.createElement("div")
              , r = _.style.cssText
              , n = t.style.cssText;
            i.style.cssText = "position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",
            _.style.cssText = P,
            t.style.cssText = P,
            t.appendChild(i),
            l = i.offsetWidth,
            t.removeChild(i),
            l = parseFloat(l, 10),
            _.style.cssText = r,
            t.style.cssText = n
        }
        return l || 16
    }
    ,
    p.calcListLength = function(t) {
        if (!(t in z) || x.uT) {
            var e = p.calcLength(function(t) {
                function e(t) {
                    return !!(u.test(t) && parseFloat(t) >= 0) || !!c.test(t) || "0" === t || "-0" === t || "+0" === t
                }
                var i, n, o, a, s, l, u = /^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i, c = /^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;
                for (n = function(t) {
                    function e() {
                        o && (a.push(o),
                        o = "")
                    }
                    function i() {
                        a[0] && (s.push(a),
                        a = [])
                    }
                    for (var n, o = "", a = [], s = [], l = 0, u = 0, c = !1; ; ) {
                        if ("" === (n = t.charAt(u)))
                            return e(),
                            i(),
                            s;
                        if (c) {
                            if ("*" === n && "/" === t[u + 1]) {
                                c = !1,
                                u += 2,
                                e();
                                continue
                            }
                            u += 1
                        } else {
                            if (r(n)) {
                                if (t.charAt(u - 1) && r(t.charAt(u - 1)) || !o) {
                                    u += 1;
                                    continue
                                }
                                if (0 === l) {
                                    e(),
                                    u += 1;
                                    continue
                                }
                                n = " "
                            } else if ("(" === n)
                                l += 1;
                            else if (")" === n)
                                l -= 1;
                            else {
                                if ("," === n) {
                                    e(),
                                    i(),
                                    u += 1;
                                    continue
                                }
                                if ("/" === n && "*" === t.charAt(u + 1)) {
                                    c = !0,
                                    u += 2;
                                    continue
                                }
                            }
                            o += n,
                            u += 1
                        }
                    }
                }(t),
                o = n.length,
                i = 0; o > i; i++)
                    if (e(s = (a = n[i])[a.length - 1])) {
                        if (l = s,
                        a.pop(),
                        0 === a.length)
                            return l;
                        if (a = a.join(" "),
                        p.matchesMedia(a))
                            return l
                    }
                return "100vw"
            }(t));
            z[t] = e || D.width
        }
        return z[t]
    }
    ,
    p.setRes = function(t) {
        var e;
        if (t)
            for (var i = 0, r = (e = p.parseSet(t)).length; r > i; i++)
                H(e[i], t.sizes);
        return e
    }
    ,
    p.setRes.res = H,
    p.applySetCandidate = function(t, e) {
        if (t.length) {
            var i, r, s, l, u, c, h, d, f, m = e[p.ns], y = p.DPR;
            if (c = m.curSrc || e[A],
            (h = m.curCan || a(e, c, t[0].set)) && h.set === t[0].set && ((f = S && !e.complete && h.res - .1 > y) || (h.cached = !0,
            h.res >= y && (u = h))),
            !u)
                for (t.sort(o),
                u = t[(l = t.length) - 1],
                r = 0; l > r; r++)
                    if ((i = t[r]).res >= y) {
                        u = t[s = r - 1] && (f || c !== p.makeUrl(i.url)) && n(t[s].res, i.res, y, t[s].cached) ? t[s] : i;
                        break
                    }
            u && (d = p.makeUrl(u.url),
            m.curSrc = d,
            m.curCan = u,
            d !== c && p.setSrc(e, u),
            p.setSize(e))
        }
    }
    ,
    p.setSrc = function(t, e) {
        var i;
        t.src = e.url,
        "image/svg+xml" === e.set.type && (i = t.style.width,
        t.style.width = t.offsetWidth + 1 + "px",
        t.offsetWidth + 1 && (t.style.width = i))
    }
    ,
    p.getSet = function(t) {
        var e, i, r, n = !1, o = t[p.ns].sets;
        for (e = 0; e < o.length && !n; e++)
            if ((i = o[e]).srcset && p.matchesMedia(i.media) && (r = p.supportsType(i.type))) {
                "pending" === r && (i = r),
                n = i;
                break
            }
        return n
    }
    ,
    p.parseSets = function(t, e, r) {
        var n, o, a, l, c = e && "PICTURE" === e.nodeName.toUpperCase(), h = t[p.ns];
        (h.src === i || r.src) && (h.src = m.call(t, "src"),
        h.src ? y.call(t, b, h.src) : g.call(t, b)),
        (h.srcset === i || r.srcset || !p.supSrcset || t.srcset) && (n = m.call(t, "srcset"),
        h.srcset = n,
        l = !0),
        h.sets = [],
        c && (h.pic = !0,
        function(t, e) {
            var i, r, n, o, a = t.getElementsByTagName("source");
            for (i = 0,
            r = a.length; r > i; i++)
                (n = a[i])[p.ns] = !0,
                (o = n.getAttribute("srcset")) && e.push({
                    srcset: o,
                    media: n.getAttribute("media"),
                    type: n.getAttribute("type"),
                    sizes: n.getAttribute("sizes")
                })
        }(e, h.sets)),
        h.srcset ? (o = {
            srcset: h.srcset,
            sizes: m.call(t, "sizes")
        },
        h.sets.push(o),
        (a = (u || h.src) && k.test(h.srcset || "")) || !h.src || s(h.src, o) || o.has1x || (o.srcset += ", " + h.src,
        o.cands.push({
            url: h.src,
            d: 1,
            set: o
        }))) : h.src && h.sets.push({
            srcset: h.src,
            sizes: null
        }),
        h.curCan = null,
        h.curSrc = i,
        h.supported = !(c || o && !p.supSrcset || a && !p.supSizes),
        l && p.supSrcset && !h.supported && (n ? (y.call(t, w, n),
        t.srcset = "") : g.call(t, w)),
        h.supported && !h.srcset && (!h.src && t.src || t.src !== p.makeUrl(h.src)) && (null === h.src ? t.removeAttribute("src") : t.src = h.src),
        h.parsed = !0
    }
    ,
    p.fillImg = function(t, e) {
        var i, r = e.reselect || e.reevaluate;
        t[p.ns] || (t[p.ns] = {}),
        i = t[p.ns],
        (r || i.evaled !== c) && ((!i.parsed || e.reevaluate) && p.parseSets(t, t.parentNode, e),
        i.supported ? i.evaled = c : function(t) {
            var e, i = p.getSet(t), r = !1;
            "pending" !== i && (r = c,
            i && (e = p.setRes(i),
            p.applySetCandidate(e, t))),
            t[p.ns].evaled = r
        }(t))
    }
    ,
    p.setupRun = function() {
        (!R || M || L !== t.devicePixelRatio) && (M = !1,
        L = t.devicePixelRatio,
        I = {},
        z = {},
        p.DPR = L || 1,
        D.width = Math.max(t.innerWidth || 0, _.clientWidth),
        D.height = Math.max(t.innerHeight || 0, _.clientHeight),
        D.vw = D.width / 100,
        D.vh = D.height / 100,
        c = [D.height, D.width, L].join("-"),
        D.em = p.getEmValue(),
        D.rem = D.em)
    }
    ,
    p.supPicture ? (X = d,
    p.fillImg = d) : function() {
        var i, r = t.attachEvent ? /d$|^c/ : /d$|^c|^i/, n = function() {
            var t = e.readyState || "";
            o = setTimeout(n, "loading" === t ? 200 : 999),
            e.body && (p.fillImgs(),
            (i = i || r.test(t)) && clearTimeout(o))
        }, o = setTimeout(n, e.body ? 9 : 99), a = _.clientHeight;
        $(t, "resize", function(t, e) {
            var i, r, n = function() {
                var o = new Date - r;
                e > o ? i = setTimeout(n, e - o) : (i = null,
                t())
            };
            return function() {
                r = new Date,
                i || (i = setTimeout(n, e))
            }
        }(function() {
            M = Math.max(t.innerWidth || 0, _.clientWidth) !== D.width || _.clientHeight !== a,
            a = _.clientHeight,
            M && p.fillImgs()
        }, 99)),
        $(e, "readystatechange", n)
    }(),
    p.picturefill = X,
    p.fillImgs = X,
    p.teardownRun = d,
    X._ = p,
    t.picturefillCFG = {
        pf: p,
        push: function(t) {
            var e = t.shift();
            "function" == typeof p[e] ? p[e].apply(p, t) : (x[e] = t[0],
            R && p.fillImgs({
                reselect: !0
            }))
        }
    };
    for (; C && C.length; )
        t.picturefillCFG.push(C.shift());
    t.picturefill = X,
    "object" == typeof module && "object" == typeof module.exports ? module.exports = X : "function" == typeof define && define.amd && define("picturefill", function() {
        return X
    }),
    p.supPicture || (v["image/webp"] = function(e, i) {
        var r = new t.Image;
        return r.onerror = function() {
            v[e] = !1,
            X()
        }
        ,
        r.onload = function() {
            v[e] = 1 === r.width,
            X()
        }
        ,
        r.src = i,
        "pending"
    }("image/webp", "data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))
}(window, document),
function() {
    "use strict";
    var t = function() {
        this.called = !1,
        this.callonce = !0,
        this.compat()
    };
    t.prototype.init = function(t, e) {
        this.retina = window.devicePixelRatio > 1,
        this.elements = [],
        this.callback = "function" == typeof e ? e : function() {}
        ,
        this.curwidth = this.getWidth();
        for (var i = this.gather(t), r = 0, n = i.length; r < n; r++)
            this.parse(i[r]);
        this.set(),
        this.resize()
    }
    ,
    t.prototype.compat = function() {
        var t = document;
        "function" != typeof t.getElementsByClassName && (t.getElementsByClassName = function(e) {
            return t.querySelectorAll("." + e)
        }
        ),
        String.prototype.trim || (String.prototype.trim = function() {
            return this.replace(/^\s+|\s+$/g, "")
        }
        ),
        t.addEventListener || (this.addEvent = function(t, e, i) {
            t.attachEvent("on" + e, function(t) {
                i(t || window.event)
            })
        }
        )
    }
    ,
    t.prototype.gather = function(t) {
        var e = t
          , i = e.nodeType ? "Object" : Object.prototype.toString.call(e).replace(/^\[object |\]$/g, "")
          , r = "parse" + i;
        return ["HTMLCollection", "NodeList"].indexOf(i) > -1 ? e : this[r] ? this[r](e) : []
    }
    ,
    t.prototype.parseObject = function(t) {
        return t.nodeType ? [t] : []
    }
    ,
    t.prototype.parseArray = function(t) {
        return t
    }
    ,
    t.prototype.parseString = function(t) {
        var e = document
          , i = t.trim()
          , r = i[0]
          , n = [];
        switch (!0) {
        case "." === r:
            n = e.getElementsByClassName(i.substring(1));
            break;
        case "#" === r:
            n.push(e.getElementById(i.substring(1)));
            break;
        case /^[a-zA-Z]+$/.test(i):
            n = e.getElementsByTagName(i);
            break;
        default:
            n = []
        }
        return n
    }
    ,
    t.prototype.parse = function(t) {
        var e = t.getAttribute("bg-srcset");
        if (null === r)
            return !1;
        this.elements.push({});
        var i = e.split(",")
          , r = ""
          , n = this.elements[this.elements.length - 1];
        n.node = t,
        n.srcset = [];
        for (var o = 0, a = i.length; o < a; o++) {
            n.srcset.push({});
            for (var s, l, u, c = (r = i[o].trim()).split(" "), p = 0, h = c.length; p < h; p++) {
                switch (s = c[p],
                l = n.srcset[o],
                u = s.length - 1,
                !0) {
                case "" === s.trim():
                    continue;
                case "w" !== s[u] && "x" !== s[s.length - 1] && s.indexOf("align") < 0:
                    l.src = s;
                    break;
                case s.indexOf("align") >= 0:
                    l.align = s;
                    break;
                case "w" === s[u] && s.indexOf("align") < 0:
                    l.width = parseInt(s.slice(0, -1));
                    break;
                case "x" === s[u] && s.indexOf("align") < 0:
                    l.retina = parseInt(s.slice(0, -1)) > 1
                }
                l.width || (l.width = Number.POSITIVE_INFINITY),
                l.retina || (l.retina = !1)
            }
        }
    }
    ,
    t.prototype.set = function() {
        for (var t = 0, e = this.elements.length; t < e; t++)
            this.setSingle(t)
    }
    ,
    t.prototype.setSingle = function(t) {
        var e, i = this.elements[t], r = [], n = 0, o = this;
        e = this.getWidth(),
        i.srcset = i.srcset.sort(function(t) {
            var e = 1;
            "-" === t[0] && (e = -1,
            t = t.substr(1));
            return function(i, r) {
                var n = i[t] < r[t] ? -1 : i[t] > r[t] ? 1 : 0;
                return n * e
            }
        }("width"));
        for (var a = 0, s = i.srcset.length; a < s; a++)
            i.srcset[a].width < e || r.push(i.srcset[a]);
        if (0 === r.length && r.push(i.srcset[i.srcset.length - 1]),
        n = r[0],
        r.length > 1 && r[0].width === r[1].width && (n = r[0].retina !== this.retina ? r[1] : r[0]),
        void 0 !== n.src && "null" !== n.src) {
            var l = new Image
              , u = !1;
            l.onload = l.onreadystatechange = function() {
                if (!(u || this.readyState && "loaded" !== this.readyState && "complete" !== this.readyState)) {
                    u = !0;
                    var t = "";
                    t = n.align ? n.align.split("_") : ["center", "center"],
                    i.node.style.backgroundPosition = t[1] + " " + t[2],
                    i.node.style.backgroundImage = "url('" + n.src + "')",
                    o.called || (o.callback(i),
                    o.called = o.callonce)
                }
            }
            ,
            l.src = n.src
        } else
            i.node.style.backgroundImage = ""
    }
    ,
    t.prototype.resize = function() {
        var t = this
          , e = setTimeout(function() {}, 0);
        this.addEvent(window, "resize", function() {
            clearTimeout(e),
            e = setTimeout(function() {
                var e = t.getWidth();
                e !== t.curwidth && (t.curwidth = e,
                t.set())
            }, 250)
        })
    }
    ,
    t.prototype.addEvent = function(t, e, i) {
        t.addEventListener(e, i, !1)
    }
    ,
    t.prototype.getWidth = function() {
        var t, e, i, r;
        return t = window,
        i = (e = document).documentElement,
        r = e.getElementsByTagName("body")[0],
        t.innerWidth || i.clientWidth || r.clientWidth
    }
    ,
    window.bgsrcset = t
}(),
function(t) {
    var e = {}
      , i = "doTimeout"
      , r = Array.prototype.slice;
    function n(i) {
        var n, o = this, a = {}, s = i ? t.fn : t, l = arguments, u = 4, c = l[1], p = l[2], h = l[3];
        function d() {
            i ? n.removeData(i) : c && delete e[c]
        }
        function f() {
            a.id = setTimeout(function() {
                a.fn()
            }, p)
        }
        if ("string" != typeof c && (u--,
        c = i = 0,
        p = l[1],
        h = l[2]),
        i ? (n = o.eq(0)).data(i, a = n.data(i) || {}) : c && (a = e[c] || (e[c] = {})),
        a.id && clearTimeout(a.id),
        delete a.id,
        h)
            a.fn = function(t) {
                "string" == typeof h && (h = s[h]),
                !0 !== h.apply(o, r.call(l, u)) || t ? d() : f()
            }
            ,
            f();
        else {
            if (a.fn)
                return void 0 === p ? d() : a.fn(!1 === p),
                !0;
            d()
        }
    }
    t[i] = function() {
        return n.apply(window, [0].concat(r.call(arguments)))
    }
    ,
    t.fn[i] = function() {
        var t = r.call(arguments)
          , e = n.apply(this, [i + t[0]].concat(t));
        return "number" == typeof t[0] || "number" == typeof t[1] ? this : e
    }
}(jQuery),
function(t, e) {
    "function" == typeof define && define.amd ? define("ev-emitter/ev-emitter", e) : "object" == typeof module && module.exports ? module.exports = e() : t.EvEmitter = e()
}("undefined" != typeof window ? window : this, function() {
    function t() {}
    var e = t.prototype;
    return e.on = function(t, e) {
        if (t && e) {
            var i = this._events = this._events || {}
              , r = i[t] = i[t] || [];
            return -1 == r.indexOf(e) && r.push(e),
            this
        }
    }
    ,
    e.once = function(t, e) {
        if (t && e) {
            this.on(t, e);
            var i = this._onceEvents = this._onceEvents || {};
            return (i[t] = i[t] || {})[e] = !0,
            this
        }
    }
    ,
    e.off = function(t, e) {
        var i = this._events && this._events[t];
        if (i && i.length) {
            var r = i.indexOf(e);
            return -1 != r && i.splice(r, 1),
            this
        }
    }
    ,
    e.emitEvent = function(t, e) {
        var i = this._events && this._events[t];
        if (i && i.length) {
            var r = 0
              , n = i[r];
            e = e || [];
            for (var o = this._onceEvents && this._onceEvents[t]; n; ) {
                var a = o && o[n];
                a && (this.off(t, n),
                delete o[n]),
                n.apply(this, e),
                n = i[r += a ? 0 : 1]
            }
            return this
        }
    }
    ,
    e.allOff = e.removeAllListeners = function() {
        delete this._events,
        delete this._onceEvents
    }
    ,
    t
}),
function(t, e) {
    "use strict";
    "function" == typeof define && define.amd ? define(["ev-emitter/ev-emitter"], function(i) {
        return e(t, i)
    }) : "object" == typeof module && module.exports ? module.exports = e(t, require("ev-emitter")) : t.imagesLoaded = e(t, t.EvEmitter)
}("undefined" != typeof window ? window : this, function(t, e) {
    function i(t, e) {
        for (var i in e)
            t[i] = e[i];
        return t
    }
    function r(t, e, n) {
        return this instanceof r ? ("string" == typeof t && (t = document.querySelectorAll(t)),
        this.elements = function(t) {
            var e = [];
            if (Array.isArray(t))
                e = t;
            else if ("number" == typeof t.length)
                for (var i = 0; i < t.length; i++)
                    e.push(t[i]);
            else
                e.push(t);
            return e
        }(t),
        this.options = i({}, this.options),
        "function" == typeof e ? n = e : i(this.options, e),
        n && this.on("always", n),
        this.getImages(),
        a && (this.jqDeferred = new a.Deferred),
        void setTimeout(function() {
            this.check()
        }
        .bind(this))) : new r(t,e,n)
    }
    function n(t) {
        this.img = t
    }
    function o(t, e) {
        this.url = t,
        this.element = e,
        this.img = new Image
    }
    var a = t.jQuery
      , s = t.console;
    r.prototype = Object.create(e.prototype),
    r.prototype.options = {},
    r.prototype.getImages = function() {
        this.images = [],
        this.elements.forEach(this.addElementImages, this)
    }
    ,
    r.prototype.addElementImages = function(t) {
        "IMG" == t.nodeName && this.addImage(t),
        !0 === this.options.background && this.addElementBackgroundImages(t);
        var e = t.nodeType;
        if (e && l[e]) {
            for (var i = t.querySelectorAll("img"), r = 0; r < i.length; r++) {
                var n = i[r];
                this.addImage(n)
            }
            if ("string" == typeof this.options.background) {
                var o = t.querySelectorAll(this.options.background);
                for (r = 0; r < o.length; r++) {
                    var a = o[r];
                    this.addElementBackgroundImages(a)
                }
            }
        }
    }
    ;
    var l = {
        1: !0,
        9: !0,
        11: !0
    };
    return r.prototype.addElementBackgroundImages = function(t) {
        var e = getComputedStyle(t);
        if (e)
            for (var i = /url\((['"])?(.*?)\1\)/gi, r = i.exec(e.backgroundImage); null !== r; ) {
                var n = r && r[2];
                n && this.addBackground(n, t),
                r = i.exec(e.backgroundImage)
            }
    }
    ,
    r.prototype.addImage = function(t) {
        var e = new n(t);
        this.images.push(e)
    }
    ,
    r.prototype.addBackground = function(t, e) {
        var i = new o(t,e);
        this.images.push(i)
    }
    ,
    r.prototype.check = function() {
        function t(t, i, r) {
            setTimeout(function() {
                e.progress(t, i, r)
            })
        }
        var e = this;
        return this.progressedCount = 0,
        this.hasAnyBroken = !1,
        this.images.length ? void this.images.forEach(function(e) {
            e.once("progress", t),
            e.check()
        }) : void this.complete()
    }
    ,
    r.prototype.progress = function(t, e, i) {
        this.progressedCount++,
        this.hasAnyBroken = this.hasAnyBroken || !t.isLoaded,
        this.emitEvent("progress", [this, t, e]),
        this.jqDeferred && this.jqDeferred.notify && this.jqDeferred.notify(this, t),
        this.progressedCount == this.images.length && this.complete(),
        this.options.debug && s && s.log("progress: " + i, t, e)
    }
    ,
    r.prototype.complete = function() {
        var t = this.hasAnyBroken ? "fail" : "done";
        if (this.isComplete = !0,
        this.emitEvent(t, [this]),
        this.emitEvent("always", [this]),
        this.jqDeferred) {
            var e = this.hasAnyBroken ? "reject" : "resolve";
            this.jqDeferred[e](this)
        }
    }
    ,
    n.prototype = Object.create(e.prototype),
    n.prototype.check = function() {
        return this.getIsImageComplete() ? void this.confirm(0 !== this.img.naturalWidth, "naturalWidth") : (this.proxyImage = new Image,
        this.proxyImage.addEventListener("load", this),
        this.proxyImage.addEventListener("error", this),
        this.img.addEventListener("load", this),
        this.img.addEventListener("error", this),
        void (this.proxyImage.src = this.img.src))
    }
    ,
    n.prototype.getIsImageComplete = function() {
        return this.img.complete && void 0 !== this.img.naturalWidth
    }
    ,
    n.prototype.confirm = function(t, e) {
        this.isLoaded = t,
        this.emitEvent("progress", [this, this.img, e])
    }
    ,
    n.prototype.handleEvent = function(t) {
        var e = "on" + t.type;
        this[e] && this[e](t)
    }
    ,
    n.prototype.onload = function() {
        this.confirm(!0, "onload"),
        this.unbindEvents()
    }
    ,
    n.prototype.onerror = function() {
        this.confirm(!1, "onerror"),
        this.unbindEvents()
    }
    ,
    n.prototype.unbindEvents = function() {
        this.proxyImage.removeEventListener("load", this),
        this.proxyImage.removeEventListener("error", this),
        this.img.removeEventListener("load", this),
        this.img.removeEventListener("error", this)
    }
    ,
    o.prototype = Object.create(n.prototype),
    o.prototype.check = function() {
        this.img.addEventListener("load", this),
        this.img.addEventListener("error", this),
        this.img.src = this.url,
        this.getIsImageComplete() && (this.confirm(0 !== this.img.naturalWidth, "naturalWidth"),
        this.unbindEvents())
    }
    ,
    o.prototype.unbindEvents = function() {
        this.img.removeEventListener("load", this),
        this.img.removeEventListener("error", this)
    }
    ,
    o.prototype.confirm = function(t, e) {
        this.isLoaded = t,
        this.emitEvent("progress", [this, this.element, e])
    }
    ,
    r.makeJQueryPlugin = function(e) {
        (e = e || t.jQuery) && ((a = e).fn.imagesLoaded = function(t, e) {
            return new r(this,t,e).jqDeferred.promise(a(this))
        }
        )
    }
    ,
    r.makeJQueryPlugin(),
    r
}),
function(t, e) {
    t.MixItUp = function() {
        var e = this;
        e._execAction("_constructor", 0),
        t.extend(e, {
            selectors: {
                target: ".mix",
                filter: ".filter",
                sort: ".sort"
            },
            animation: {
                enable: !0,
                effects: "fade scale",
                duration: 600,
                easing: "ease",
                perspectiveDistance: "3000",
                perspectiveOrigin: "50% 50%",
                queue: !0,
                queueLimit: 1,
                animateChangeLayout: !1,
                animateResizeContainer: !0,
                animateResizeTargets: !1,
                staggerSequence: !1,
                reverseOut: !1
            },
            callbacks: {
                onMixLoad: !1,
                onMixStart: !1,
                onMixBusy: !1,
                onMixEnd: !1,
                onMixFail: !1,
                _user: !1
            },
            controls: {
                enable: !0,
                live: !1,
                toggleFilterButtons: !1,
                toggleLogic: "or",
                activeClass: "active"
            },
            layout: {
                display: "inline-block",
                containerClass: "",
                containerClassFail: "fail"
            },
            load: {
                filter: "all",
                sort: !1
            },
            _$body: null,
            _$container: null,
            _$targets: null,
            _$parent: null,
            _$sortButtons: null,
            _$filterButtons: null,
            _suckMode: !1,
            _mixing: !1,
            _sorting: !1,
            _clicking: !1,
            _loading: !0,
            _changingLayout: !1,
            _changingClass: !1,
            _changingDisplay: !1,
            _origOrder: [],
            _startOrder: [],
            _newOrder: [],
            _activeFilter: null,
            _toggleArray: [],
            _toggleString: "",
            _activeSort: "default:asc",
            _newSort: null,
            _startHeight: null,
            _newHeight: null,
            _incPadding: !0,
            _newDisplay: null,
            _newClass: null,
            _targetsBound: 0,
            _targetsDone: 0,
            _queue: [],
            _$show: t(),
            _$hide: t()
        }),
        e._execAction("_constructor", 1)
    }
    ,
    t.MixItUp.prototype = {
        constructor: t.MixItUp,
        _instances: {},
        _handled: {
            _filter: {},
            _sort: {}
        },
        _bound: {
            _filter: {},
            _sort: {}
        },
        _actions: {},
        _filters: {},
        extend: function(e) {
            for (var i in e)
                t.MixItUp.prototype[i] = e[i]
        },
        addAction: function(e, i, r, n) {
            t.MixItUp.prototype._addHook("_actions", e, i, r, n)
        },
        addFilter: function(e, i, r, n) {
            t.MixItUp.prototype._addHook("_filters", e, i, r, n)
        },
        _addHook: function(e, i, r, n, o) {
            var a = t.MixItUp.prototype[e]
              , s = {};
            o = 1 === o || "post" === o ? "post" : "pre",
            s[i] = {},
            s[i][o] = {},
            s[i][o][r] = n,
            t.extend(!0, a, s)
        },
        _init: function(e, i) {
            var r = this;
            if (r._execAction("_init", 0, arguments),
            i && t.extend(!0, r, i),
            r._$body = t("body"),
            r._domNode = e,
            r._$container = t(e),
            r._$container.addClass(r.layout.containerClass),
            r._id = e.id,
            r._platformDetect(),
            r._brake = r._getPrefixedCSS("transition", "none"),
            r._refresh(!0),
            r._$parent = r._$targets.parent().length ? r._$targets.parent() : r._$container,
            r.load.sort && (r._newSort = r._parseSort(r.load.sort),
            r._newSortString = r.load.sort,
            r._activeSort = r.load.sort,
            r._sort(),
            r._printSort()),
            r._activeFilter = "all" === r.load.filter ? r.selectors.target : "none" === r.load.filter ? "" : r.load.filter,
            r.controls.enable && r._bindHandlers(),
            r.controls.toggleFilterButtons) {
                r._buildToggleArray();
                for (var n = 0; n < r._toggleArray.length; n++)
                    r._updateControls({
                        filter: r._toggleArray[n],
                        sort: r._activeSort
                    }, !0)
            } else
                r.controls.enable && r._updateControls({
                    filter: r._activeFilter,
                    sort: r._activeSort
                });
            r._filter(),
            r._init = !0,
            r._$container.data("mixItUp", r),
            r._execAction("_init", 1, arguments),
            r._buildState(),
            r._$targets.css(r._brake),
            r._goMix(r.animation.enable)
        },
        _platformDetect: function() {
            var t = this
              , i = ["Webkit", "Moz", "O", "ms"]
              , r = ["webkit", "moz"]
              , n = window.navigator.appVersion.match(/Chrome\/(\d+)\./) || !1
              , o = "undefined" != typeof InstallTrigger
              , a = function(t) {
                for (var e = 0; e < i.length; e++)
                    if (i[e] + "Transition"in t.style)
                        return {
                            prefix: "-" + i[e].toLowerCase() + "-",
                            vendor: i[e]
                        };
                return "transition"in t.style && ""
            }(t._domNode);
            t._execAction("_platformDetect", 0),
            t._chrome = !!n && parseInt(n[1], 10),
            t._ff = !!o && parseInt(window.navigator.userAgent.match(/rv:([^)]+)\)/)[1]),
            t._prefix = a.prefix,
            t._vendor = a.vendor,
            t._suckMode = !window.atob || !t._prefix,
            t._suckMode && (t.animation.enable = !1),
            t._ff && t._ff <= 4 && (t.animation.enable = !1);
            for (var s = 0; s < r.length && !window.requestAnimationFrame; s++)
                window.requestAnimationFrame = window[r[s] + "RequestAnimationFrame"];
            "function" != typeof Object.getPrototypeOf && (Object.getPrototypeOf = "object" == typeof "test".__proto__ ? function(t) {
                return t.__proto__
            }
            : function(t) {
                return t.constructor.prototype
            }
            ),
            t._domNode.nextElementSibling === e && Object.defineProperty(Element.prototype, "nextElementSibling", {
                get: function() {
                    for (var t = this.nextSibling; t; ) {
                        if (1 === t.nodeType)
                            return t;
                        t = t.nextSibling
                    }
                    return null
                }
            }),
            t._execAction("_platformDetect", 1)
        },
        _refresh: function(t, i) {
            var r = this;
            r._execAction("_refresh", 0, arguments),
            r._$targets = r._$container.find(r.selectors.target);
            for (var n = 0; n < r._$targets.length; n++) {
                if ((c = r._$targets[n]).dataset === e || i) {
                    c.dataset = {};
                    for (var o = 0; o < c.attributes.length; o++) {
                        var a = c.attributes[o]
                          , s = a.name
                          , l = a.value;
                        if (s.indexOf("data-") > -1) {
                            var u = r._helpers._camelCase(s.substring(5, s.length));
                            c.dataset[u] = l
                        }
                    }
                }
                c.mixParent === e && (c.mixParent = r._id)
            }
            if (r._$targets.length && t || !r._origOrder.length && r._$targets.length) {
                r._origOrder = [];
                for (n = 0; n < r._$targets.length; n++) {
                    var c = r._$targets[n];
                    r._origOrder.push(c)
                }
            }
            r._execAction("_refresh", 1, arguments)
        },
        _bindHandlers: function() {
            var i = this
              , r = t.MixItUp.prototype._bound._filter
              , n = t.MixItUp.prototype._bound._sort;
            i._execAction("_bindHandlers", 0),
            i.controls.live ? i._$body.on("click.mixItUp." + i._id, i.selectors.sort, function() {
                i._processClick(t(this), "sort")
            }).on("click.mixItUp." + i._id, i.selectors.filter, function() {
                i._processClick(t(this), "filter")
            }) : (i._$sortButtons = t(i.selectors.sort),
            i._$filterButtons = t(i.selectors.filter),
            i._$sortButtons.on("click.mixItUp." + i._id, function() {
                i._processClick(t(this), "sort")
            }),
            i._$filterButtons.on("click.mixItUp." + i._id, function() {
                i._processClick(t(this), "filter")
            })),
            r[i.selectors.filter] = r[i.selectors.filter] === e ? 1 : r[i.selectors.filter] + 1,
            n[i.selectors.sort] = n[i.selectors.sort] === e ? 1 : n[i.selectors.sort] + 1,
            i._execAction("_bindHandlers", 1)
        },
        _processClick: function(i, r) {
            var n = this
              , o = function(i, r, o) {
                var a = t.MixItUp.prototype;
                a._handled["_" + r][n.selectors[r]] = a._handled["_" + r][n.selectors[r]] === e ? 1 : a._handled["_" + r][n.selectors[r]] + 1,
                a._handled["_" + r][n.selectors[r]] === a._bound["_" + r][n.selectors[r]] && (i[(o ? "remove" : "add") + "Class"](n.controls.activeClass),
                delete a._handled["_" + r][n.selectors[r]])
            };
            if (n._execAction("_processClick", 0, arguments),
            !n._mixing || n.animation.queue && n._queue.length < n.animation.queueLimit) {
                if (n._clicking = !0,
                "sort" === r) {
                    var a = i.attr("data-sort");
                    (!i.hasClass(n.controls.activeClass) || a.indexOf("random") > -1) && (t(n.selectors.sort).removeClass(n.controls.activeClass),
                    o(i, r),
                    n.sort(a))
                }
                if ("filter" === r) {
                    var s, l = i.attr("data-filter"), u = "or" === n.controls.toggleLogic ? "," : "";
                    n.controls.toggleFilterButtons ? (n._buildToggleArray(),
                    i.hasClass(n.controls.activeClass) ? (o(i, r, !0),
                    s = n._toggleArray.indexOf(l),
                    n._toggleArray.splice(s, 1)) : (o(i, r),
                    n._toggleArray.push(l)),
                    n._toggleArray = t.grep(n._toggleArray, function(t) {
                        return t
                    }),
                    n._toggleString = n._toggleArray.join(u),
                    n.filter(n._toggleString)) : i.hasClass(n.controls.activeClass) || (t(n.selectors.filter).removeClass(n.controls.activeClass),
                    o(i, r),
                    n.filter(l))
                }
                n._execAction("_processClick", 1, arguments)
            } else
                "function" == typeof n.callbacks.onMixBusy && n.callbacks.onMixBusy.call(n._domNode, n._state, n),
                n._execAction("_processClickBusy", 1, arguments)
        },
        _buildToggleArray: function() {
            var t = this
              , e = t._activeFilter.replace(/\s/g, "");
            if (t._execAction("_buildToggleArray", 0, arguments),
            "or" === t.controls.toggleLogic)
                t._toggleArray = e.split(",");
            else {
                t._toggleArray = e.split("."),
                !t._toggleArray[0] && t._toggleArray.shift();
                for (var i, r = 0; i = t._toggleArray[r]; r++)
                    t._toggleArray[r] = "." + i
            }
            t._execAction("_buildToggleArray", 1, arguments)
        },
        _updateControls: function(i, r) {
            var n = this
              , o = {
                filter: i.filter,
                sort: i.sort
            }
              , a = function(t, e) {
                r && "filter" === s && "none" !== o.filter && "" !== o.filter ? t.filter(e).addClass(n.controls.activeClass) : t.removeClass(n.controls.activeClass).filter(e).addClass(n.controls.activeClass)
            }
              , s = "filter"
              , l = null;
            n._execAction("_updateControls", 0, arguments),
            i.filter === e && (o.filter = n._activeFilter),
            i.sort === e && (o.sort = n._activeSort),
            o.filter === n.selectors.target && (o.filter = "all");
            for (var u = 0; 2 > u; u++)
                (l = n.controls.live ? t(n.selectors[s]) : n["_$" + s + "Buttons"]) && a(l, "[data-" + s + '="' + o[s] + '"]'),
                s = "sort";
            n._execAction("_updateControls", 1, arguments)
        },
        _filter: function() {
            var e = this;
            e._execAction("_filter", 0);
            for (var i = 0; i < e._$targets.length; i++) {
                var r = t(e._$targets[i]);
                r.is(e._activeFilter) ? e._$show = e._$show.add(r) : e._$hide = e._$hide.add(r)
            }
            e._execAction("_filter", 1)
        },
        _sort: function() {
            var t = this;
            t._execAction("_sort", 0),
            t._startOrder = [];
            for (var e = 0; e < t._$targets.length; e++) {
                var i = t._$targets[e];
                t._startOrder.push(i)
            }
            switch (t._newSort[0].sortBy) {
            case "default":
                t._newOrder = t._origOrder;
                break;
            case "random":
                t._newOrder = function(t) {
                    for (var e = t.slice(), i = e.length, r = i; r--; ) {
                        var n = parseInt(Math.random() * i)
                          , o = e[r];
                        e[r] = e[n],
                        e[n] = o
                    }
                    return e
                }(t._startOrder);
                break;
            case "custom":
                t._newOrder = t._newSort[0].order;
                break;
            default:
                t._newOrder = t._startOrder.concat().sort(function(e, i) {
                    return t._compare(e, i)
                })
            }
            t._execAction("_sort", 1)
        },
        _compare: function(t, e, i) {
            i = i || 0;
            var r = this
              , n = r._newSort[i].order
              , o = function(t) {
                return t.dataset[r._newSort[i].sortBy] || 0
            }
              , a = isNaN(1 * o(t)) ? o(t).toLowerCase() : 1 * o(t)
              , s = isNaN(1 * o(e)) ? o(e).toLowerCase() : 1 * o(e);
            return s > a ? "asc" === n ? -1 : 1 : a > s ? "asc" === n ? 1 : -1 : a === s && r._newSort.length > i + 1 ? r._compare(t, e, i + 1) : 0
        },
        _printSort: function(t) {
            var e = this
              , i = t ? e._startOrder : e._newOrder
              , r = e._$parent[0].querySelectorAll(e.selectors.target)
              , n = r.length ? r[r.length - 1].nextElementSibling : null
              , o = document.createDocumentFragment();
            e._execAction("_printSort", 0, arguments);
            for (var a = 0; a < r.length; a++) {
                var s = r[a]
                  , l = s.nextSibling;
                "absolute" !== s.style.position && (l && "#text" === l.nodeName && e._$parent[0].removeChild(l),
                e._$parent[0].removeChild(s))
            }
            for (a = 0; a < i.length; a++) {
                var u = i[a];
                if ("default" !== e._newSort[0].sortBy || "desc" !== e._newSort[0].order || t)
                    o.appendChild(u),
                    o.appendChild(document.createTextNode(" "));
                else {
                    var c = o.firstChild;
                    o.insertBefore(u, c),
                    o.insertBefore(document.createTextNode(" "), u)
                }
            }
            n ? e._$parent[0].insertBefore(o, n) : e._$parent[0].appendChild(o),
            e._execAction("_printSort", 1, arguments)
        },
        _parseSort: function(t) {
            for (var e = "string" == typeof t ? t.split(" ") : [t], i = [], r = 0; r < e.length; r++) {
                var n = "string" == typeof t ? e[r].split(":") : ["custom", e[r]]
                  , o = {
                    sortBy: this._helpers._camelCase(n[0]),
                    order: n[1] || "asc"
                };
                if (i.push(o),
                "default" === o.sortBy || "random" === o.sortBy)
                    break
            }
            return this._execFilter("_parseSort", i, arguments)
        },
        _parseEffects: function() {
            var t = this
              , e = {
                opacity: "",
                transformIn: "",
                transformOut: "",
                filter: ""
            }
              , i = function(e, i) {
                if (t.animation.effects.indexOf(e) > -1) {
                    if (i) {
                        var r = t.animation.effects.indexOf(e + "(");
                        if (r > -1) {
                            var n = t.animation.effects.substring(r);
                            return {
                                val: /\(([^)]+)\)/.exec(n)[1]
                            }
                        }
                    }
                    return !0
                }
                return !1
            }
              , r = function(t, e) {
                return e ? "-" === t.charAt(0) ? t.substr(1, t.length) : "-" + t : t
            }
              , n = function(t, n) {
                for (var o = [["scale", ".01"], ["translateX", "20px"], ["translateY", "20px"], ["translateZ", "20px"], ["rotateX", "90deg"], ["rotateY", "90deg"], ["rotateZ", "180deg"]], a = 0; a < o.length; a++) {
                    var s = o[a][0]
                      , l = o[a][1]
                      , u = n && "scale" !== s;
                    e[t] += i(s) ? s + "(" + r(i(s, !0).val || l, u) + ") " : ""
                }
            };
            return e.opacity = i("fade") ? i("fade", !0).val || "0" : "1",
            n("transformIn"),
            t.animation.reverseOut ? n("transformOut", !0) : e.transformOut = e.transformIn,
            e.transition = {},
            e.transition = t._getPrefixedCSS("transition", "all " + t.animation.duration + "ms " + t.animation.easing + ", opacity " + t.animation.duration + "ms linear"),
            t.animation.stagger = !!i("stagger"),
            t.animation.staggerDuration = parseInt(i("stagger") && i("stagger", !0).val ? i("stagger", !0).val : 100),
            t._execFilter("_parseEffects", e)
        },
        _buildState: function(t) {
            var e, i = this;
            return i._execAction("_buildState", 0),
            e = {
                activeFilter: "" === i._activeFilter ? "none" : i._activeFilter,
                activeSort: t && i._newSortString ? i._newSortString : i._activeSort,
                fail: !i._$show.length && "" !== i._activeFilter,
                $targets: i._$targets,
                $show: i._$show,
                $hide: i._$hide,
                totalTargets: i._$targets.length,
                totalShow: i._$show.length,
                totalHide: i._$hide.length,
                display: t && i._newDisplay ? i._newDisplay : i.layout.display
            },
            t ? i._execFilter("_buildState", e) : (i._state = e,
            void i._execAction("_buildState", 1))
        },
        _goMix: function(t) {
            var e = this
              , i = function() {
                e._chrome && 31 === e._chrome && o(e._$parent[0]),
                e._setInter(),
                r()
            }
              , r = function() {
                var t = window.pageYOffset
                  , i = window.pageXOffset;
                document.documentElement.scrollHeight,
                e._getInterMixData(),
                e._setFinal(),
                e._getFinalMixData(),
                window.pageYOffset !== t && window.scrollTo(i, t),
                e._prepTargets(),
                window.requestAnimationFrame ? requestAnimationFrame(n) : setTimeout(function() {
                    n()
                }, 20)
            }
              , n = function() {
                e._animateTargets(),
                0 === e._targetsBound && e._cleanUp()
            }
              , o = function(t) {
                var e = t.parentElement
                  , i = document.createElement("div")
                  , r = document.createDocumentFragment();
                e.insertBefore(i, t),
                r.appendChild(t),
                e.replaceChild(t, i)
            }
              , a = e._buildState(!0);
            e._execAction("_goMix", 0, arguments),
            !e.animation.duration && (t = !1),
            e._mixing = !0,
            e._$container.removeClass(e.layout.containerClassFail),
            "function" == typeof e.callbacks.onMixStart && e.callbacks.onMixStart.call(e._domNode, e._state, a, e),
            e._$container.trigger("mixStart", [e._state, a, e]),
            e._getOrigMixData(),
            t && !e._suckMode ? window.requestAnimationFrame ? requestAnimationFrame(i) : i() : e._cleanUp(),
            e._execAction("_goMix", 1, arguments)
        },
        _getTargetData: function(t, e) {
            var i;
            t.dataset[e + "PosX"] = t.offsetLeft,
            t.dataset[e + "PosY"] = t.offsetTop,
            this.animation.animateResizeTargets && (i = window.getComputedStyle(t),
            t.dataset[e + "MarginBottom"] = parseInt(i.marginBottom),
            t.dataset[e + "MarginRight"] = parseInt(i.marginRight),
            t.dataset[e + "Width"] = t.offsetWidth,
            t.dataset[e + "Height"] = t.offsetHeight)
        },
        _getOrigMixData: function() {
            var t = this
              , e = t._suckMode ? {
                boxSizing: ""
            } : window.getComputedStyle(t._$parent[0])
              , i = e.boxSizing || e[t._vendor + "BoxSizing"];
            t._incPadding = "border-box" === i,
            t._execAction("_getOrigMixData", 0),
            !t._suckMode && (t.effects = t._parseEffects()),
            t._$toHide = t._$hide.filter(":visible"),
            t._$toShow = t._$show.filter(":hidden"),
            t._$pre = t._$targets.filter(":visible"),
            t._startHeight = t._incPadding ? t._$parent.outerHeight() : t._$parent.height();
            for (var r = 0; r < t._$pre.length; r++) {
                var n = t._$pre[r];
                t._getTargetData(n, "orig")
            }
            t._execAction("_getOrigMixData", 1)
        },
        _setInter: function() {
            var t = this;
            t._execAction("_setInter", 0),
            t._changingLayout && t.animation.animateChangeLayout ? (t._$toShow.css("display", t._newDisplay),
            t._changingClass && t._$container.removeClass(t.layout.containerClass).addClass(t._newClass)) : t._$toShow.css("display", t.layout.display),
            t._execAction("_setInter", 1)
        },
        _getInterMixData: function() {
            var t = this;
            t._execAction("_getInterMixData", 0);
            for (var e = 0; e < t._$toShow.length; e++) {
                var i = t._$toShow[e];
                t._getTargetData(i, "inter")
            }
            for (e = 0; e < t._$pre.length; e++) {
                i = t._$pre[e];
                t._getTargetData(i, "inter")
            }
            t._execAction("_getInterMixData", 1)
        },
        _setFinal: function() {
            var t = this;
            t._execAction("_setFinal", 0),
            t._sorting && t._printSort(),
            t._$toHide.removeStyle("display"),
            t._changingLayout && t.animation.animateChangeLayout && t._$pre.css("display", t._newDisplay),
            t._execAction("_setFinal", 1)
        },
        _getFinalMixData: function() {
            var t = this;
            t._execAction("_getFinalMixData", 0);
            for (var e = 0; e < t._$toShow.length; e++) {
                var i = t._$toShow[e];
                t._getTargetData(i, "final")
            }
            for (e = 0; e < t._$pre.length; e++) {
                i = t._$pre[e];
                t._getTargetData(i, "final")
            }
            t._newHeight = t._incPadding ? t._$parent.outerHeight() : t._$parent.height(),
            t._sorting && t._printSort(!0),
            t._$toShow.removeStyle("display"),
            t._$pre.css("display", t.layout.display),
            t._changingClass && t.animation.animateChangeLayout && t._$container.removeClass(t._newClass).addClass(t.layout.containerClass),
            t._execAction("_getFinalMixData", 1)
        },
        _prepTargets: function() {
            var e = this
              , i = {
                _in: e._getPrefixedCSS("transform", e.effects.transformIn),
                _out: e._getPrefixedCSS("transform", e.effects.transformOut)
            };
            e._execAction("_prepTargets", 0),
            e.animation.animateResizeContainer && e._$parent.css("height", e._startHeight + "px");
            for (var r = 0; r < e._$toShow.length; r++) {
                var n = e._$toShow[r]
                  , o = t(n);
                n.style.opacity = e.effects.opacity,
                n.style.display = e._changingLayout && e.animation.animateChangeLayout ? e._newDisplay : e.layout.display,
                o.css(i._in),
                e.animation.animateResizeTargets && (n.style.width = n.dataset.finalWidth + "px",
                n.style.height = n.dataset.finalHeight + "px",
                n.style.marginRight = -(n.dataset.finalWidth - n.dataset.interWidth) + 1 * n.dataset.finalMarginRight + "px",
                n.style.marginBottom = -(n.dataset.finalHeight - n.dataset.interHeight) + 1 * n.dataset.finalMarginBottom + "px")
            }
            for (r = 0; r < e._$pre.length; r++) {
                n = e._$pre[r],
                o = t(n);
                var a = {
                    x: n.dataset.origPosX - n.dataset.interPosX,
                    y: n.dataset.origPosY - n.dataset.interPosY
                };
                i = e._getPrefixedCSS("transform", "translate(" + a.x + "px," + a.y + "px)");
                o.css(i),
                e.animation.animateResizeTargets && (n.style.width = n.dataset.origWidth + "px",
                n.style.height = n.dataset.origHeight + "px",
                n.dataset.origWidth - n.dataset.finalWidth && (n.style.marginRight = -(n.dataset.origWidth - n.dataset.interWidth) + 1 * n.dataset.origMarginRight + "px"),
                n.dataset.origHeight - n.dataset.finalHeight && (n.style.marginBottom = -(n.dataset.origHeight - n.dataset.interHeight) + 1 * n.dataset.origMarginBottom + "px"))
            }
            e._execAction("_prepTargets", 1)
        },
        _animateTargets: function() {
            var e = this;
            e._execAction("_animateTargets", 0),
            e._targetsDone = 0,
            e._targetsBound = 0,
            e._$parent.css(e._getPrefixedCSS("perspective", e.animation.perspectiveDistance + "px")).css(e._getPrefixedCSS("perspective-origin", e.animation.perspectiveOrigin)),
            e.animation.animateResizeContainer && e._$parent.css(e._getPrefixedCSS("transition", "height " + e.animation.duration + "ms ease")).css("height", e._newHeight + "px");
            for (var i = 0; i < e._$toShow.length; i++) {
                var r = e._$toShow[i]
                  , n = t(r)
                  , o = {
                    x: r.dataset.finalPosX - r.dataset.interPosX,
                    y: r.dataset.finalPosY - r.dataset.interPosY
                }
                  , a = e._getDelay(i)
                  , s = {};
                r.style.opacity = "";
                for (var l = 0; 2 > l; l++) {
                    var u = 0 === l ? u = e._prefix : "";
                    e._ff && e._ff <= 20 && (s[u + "transition-property"] = "all",
                    s[u + "transition-timing-function"] = e.animation.easing + "ms",
                    s[u + "transition-duration"] = e.animation.duration + "ms"),
                    s[u + "transition-delay"] = a + "ms",
                    s[u + "transform"] = "translate(" + o.x + "px," + o.y + "px)"
                }
                (e.effects.transform || e.effects.opacity) && e._bindTargetDone(n),
                e._ff && e._ff <= 20 ? n.css(s) : n.css(e.effects.transition).css(s)
            }
            for (i = 0; i < e._$pre.length; i++) {
                r = e._$pre[i],
                n = t(r),
                o = {
                    x: r.dataset.finalPosX - r.dataset.interPosX,
                    y: r.dataset.finalPosY - r.dataset.interPosY
                },
                a = e._getDelay(i);
                (r.dataset.finalPosX !== r.dataset.origPosX || r.dataset.finalPosY !== r.dataset.origPosY) && e._bindTargetDone(n),
                n.css(e._getPrefixedCSS("transition", "all " + e.animation.duration + "ms " + e.animation.easing + " " + a + "ms")),
                n.css(e._getPrefixedCSS("transform", "translate(" + o.x + "px," + o.y + "px)")),
                e.animation.animateResizeTargets && (r.dataset.origWidth - r.dataset.finalWidth && 1 * r.dataset.finalWidth && (r.style.width = r.dataset.finalWidth + "px",
                r.style.marginRight = -(r.dataset.finalWidth - r.dataset.interWidth) + 1 * r.dataset.finalMarginRight + "px"),
                r.dataset.origHeight - r.dataset.finalHeight && 1 * r.dataset.finalHeight && (r.style.height = r.dataset.finalHeight + "px",
                r.style.marginBottom = -(r.dataset.finalHeight - r.dataset.interHeight) + 1 * r.dataset.finalMarginBottom + "px"))
            }
            e._changingClass && e._$container.removeClass(e.layout.containerClass).addClass(e._newClass);
            for (i = 0; i < e._$toHide.length; i++) {
                r = e._$toHide[i],
                n = t(r),
                a = e._getDelay(i);
                var c = {};
                for (l = 0; 2 > l; l++) {
                    c[(u = 0 === l ? u = e._prefix : "") + "transition-delay"] = a + "ms",
                    c[u + "transform"] = e.effects.transformOut,
                    c.opacity = e.effects.opacity
                }
                n.css(e.effects.transition).css(c),
                (e.effects.transform || e.effects.opacity) && e._bindTargetDone(n)
            }
            e._execAction("_animateTargets", 1)
        },
        _bindTargetDone: function(e) {
            var i = this
              , r = e[0];
            i._execAction("_bindTargetDone", 0, arguments),
            r.dataset.bound || (r.dataset.bound = !0,
            i._targetsBound++,
            e.on("webkitTransitionEnd.mixItUp transitionend.mixItUp", function(n) {
                n.originalEvent && (n.originalEvent.propertyName.indexOf("transform") > -1 || n.originalEvent.propertyName.indexOf("opacity") > -1) && t(n.originalEvent.target).is(i.selectors.target) && (e.off(".mixItUp"),
                delete r.dataset.bound,
                i._targetDone())
            })),
            i._execAction("_bindTargetDone", 1, arguments)
        },
        _targetDone: function() {
            var t = this;
            t._execAction("_targetDone", 0),
            t._targetsDone++,
            t._targetsDone === t._targetsBound && t._cleanUp(),
            t._execAction("_targetDone", 1)
        },
        _cleanUp: function() {
            var e = this
              , i = e.animation.animateResizeTargets ? "transform opacity width height margin-bottom margin-right" : "transform opacity";
            unBrake = function() {
                e._$targets.removeStyle("transition", e._prefix)
            }
            ,
            e._execAction("_cleanUp", 0),
            e._changingLayout ? e._$show.css("display", e._newDisplay) : e._$show.css("display", e.layout.display),
            e._$targets.css(e._brake),
            e._$targets.removeStyle(i, e._prefix).removeAttr("data-inter-pos-x data-inter-pos-y data-final-pos-x data-final-pos-y data-orig-pos-x data-orig-pos-y data-orig-height data-orig-width data-final-height data-final-width data-inter-width data-inter-height data-orig-margin-right data-orig-margin-bottom data-inter-margin-right data-inter-margin-bottom data-final-margin-right data-final-margin-bottom"),
            e._$hide.removeStyle("display"),
            e._$parent.removeStyle("height transition perspective-distance perspective perspective-origin-x perspective-origin-y perspective-origin perspectiveOrigin", e._prefix),
            e._sorting && (e._printSort(),
            e._activeSort = e._newSortString,
            e._sorting = !1),
            e._changingLayout && (e._changingDisplay && (e.layout.display = e._newDisplay,
            e._changingDisplay = !1),
            e._changingClass && (e._$parent.removeClass(e.layout.containerClass).addClass(e._newClass),
            e.layout.containerClass = e._newClass,
            e._changingClass = !1),
            e._changingLayout = !1),
            e._refresh(),
            e._buildState(),
            e._state.fail && e._$container.addClass(e.layout.containerClassFail),
            e._$show = t(),
            e._$hide = t(),
            window.requestAnimationFrame && requestAnimationFrame(unBrake),
            e._mixing = !1,
            "function" == typeof e.callbacks._user && e.callbacks._user.call(e._domNode, e._state, e),
            "function" == typeof e.callbacks.onMixEnd && e.callbacks.onMixEnd.call(e._domNode, e._state, e),
            e._$container.trigger("mixEnd", [e._state, e]),
            e._state.fail && ("function" == typeof e.callbacks.onMixFail && e.callbacks.onMixFail.call(e._domNode, e._state, e),
            e._$container.trigger("mixFail", [e._state, e])),
            e._loading && ("function" == typeof e.callbacks.onMixLoad && e.callbacks.onMixLoad.call(e._domNode, e._state, e),
            e._$container.trigger("mixLoad", [e._state, e])),
            e._queue.length && (e._execAction("_queue", 0),
            e.multiMix(e._queue[0][0], e._queue[0][1], e._queue[0][2]),
            e._queue.splice(0, 1)),
            e._execAction("_cleanUp", 1),
            e._loading = !1
        },
        _getPrefixedCSS: function(t, e, r) {
            var n = {};
            for (i = 0; 2 > i; i++) {
                var o = 0 === i ? this._prefix : "";
                n[o + t] = r ? o + e : e
            }
            return this._execFilter("_getPrefixedCSS", n, arguments)
        },
        _getDelay: function(t) {
            var e = this
              , i = "function" == typeof e.animation.staggerSequence ? e.animation.staggerSequence.call(e._domNode, t, e._state) : t
              , r = e.animation.stagger ? i * e.animation.staggerDuration : 0;
            return e._execFilter("_getDelay", r, arguments)
        },
        _parseMultiMixArgs: function(t) {
            for (var e = {
                command: null,
                animate: this.animation.enable,
                callback: null
            }, i = 0; i < t.length; i++) {
                var r = t[i];
                null !== r && ("object" == typeof r || "string" == typeof r ? e.command = r : "boolean" == typeof r ? e.animate = r : "function" == typeof r && (e.callback = r))
            }
            return this._execFilter("_parseMultiMixArgs", e, arguments)
        },
        _parseInsertArgs: function(e) {
            for (var i = this, r = {
                index: 0,
                $object: t(),
                multiMix: {
                    filter: i._state.activeFilter
                },
                callback: null
            }, n = 0; n < e.length; n++) {
                var o = e[n];
                "number" == typeof o ? r.index = o : "object" == typeof o && o instanceof t ? r.$object = o : "object" == typeof o && i._helpers._isElement(o) ? r.$object = t(o) : "object" == typeof o && null !== o ? r.multiMix = o : "boolean" != typeof o || o ? "function" == typeof o && (r.callback = o) : r.multiMix = !1
            }
            return i._execFilter("_parseInsertArgs", r, arguments)
        },
        _execAction: function(t, e, i) {
            var r = this
              , n = e ? "post" : "pre";
            if (!r._actions.isEmptyObject && r._actions.hasOwnProperty(t))
                for (var o in r._actions[t][n])
                    r._actions[t][n][o].call(r, i)
        },
        _execFilter: function(t, e, i) {
            var r = this;
            if (r._filters.isEmptyObject || !r._filters.hasOwnProperty(t))
                return e;
            for (var n in r._filters[t])
                return r._filters[t][n].call(r, i)
        },
        _helpers: {
            _camelCase: function(t) {
                return t.replace(/-([a-z])/g, function(t) {
                    return t[1].toUpperCase()
                })
            },
            _isElement: function(t) {
                return window.HTMLElement ? t instanceof HTMLElement : null !== t && 1 === t.nodeType && "string" === t.nodeName
            }
        },
        isMixing: function() {
            return this._execFilter("isMixing", this._mixing)
        },
        filter: function() {
            var t = this
              , e = t._parseMultiMixArgs(arguments);
            t._clicking && (t._toggleString = ""),
            t.multiMix({
                filter: e.command
            }, e.animate, e.callback)
        },
        sort: function() {
            var t = this._parseMultiMixArgs(arguments);
            this.multiMix({
                sort: t.command
            }, t.animate, t.callback)
        },
        changeLayout: function() {
            var t = this._parseMultiMixArgs(arguments);
            this.multiMix({
                changeLayout: t.command
            }, t.animate, t.callback)
        },
        multiMix: function() {
            var t = this
              , i = t._parseMultiMixArgs(arguments);
            if (t._execAction("multiMix", 0, arguments),
            t._mixing)
                t.animation.queue && t._queue.length < t.animation.queueLimit ? (t._queue.push(arguments),
                t.controls.enable && !t._clicking && t._updateControls(i.command),
                t._execAction("multiMixQueue", 1, arguments)) : ("function" == typeof t.callbacks.onMixBusy && t.callbacks.onMixBusy.call(t._domNode, t._state, t),
                t._$container.trigger("mixBusy", [t._state, t]),
                t._execAction("multiMixBusy", 1, arguments));
            else {
                t.controls.enable && !t._clicking && (t.controls.toggleFilterButtons && t._buildToggleArray(),
                t._updateControls(i.command, t.controls.toggleFilterButtons)),
                t._queue.length < 2 && (t._clicking = !1),
                delete t.callbacks._user,
                i.callback && (t.callbacks._user = i.callback);
                var r = i.command.sort
                  , n = i.command.filter
                  , o = i.command.changeLayout;
                t._refresh(),
                r && (t._newSort = t._parseSort(r),
                t._newSortString = r,
                t._sorting = !0,
                t._sort()),
                n !== e && (n = "all" === n ? t.selectors.target : n,
                t._activeFilter = n),
                t._filter(),
                o && (t._newDisplay = "string" == typeof o ? o : o.display || t.layout.display,
                t._newClass = o.containerClass || "",
                (t._newDisplay !== t.layout.display || t._newClass !== t.layout.containerClass) && (t._changingLayout = !0,
                t._changingClass = t._newClass !== t.layout.containerClass,
                t._changingDisplay = t._newDisplay !== t.layout.display)),
                t._$targets.css(t._brake),
                t._goMix(i.animate ^ t.animation.enable ? i.animate : t.animation.enable),
                t._execAction("multiMix", 1, arguments)
            }
        },
        insert: function() {
            var t = this
              , e = t._parseInsertArgs(arguments)
              , i = "function" == typeof e.callback ? e.callback : null
              , r = document.createDocumentFragment()
              , n = (t._refresh(),
            t._$targets.length ? e.index < t._$targets.length || !t._$targets.length ? t._$targets[e.index] : t._$targets[t._$targets.length - 1].nextElementSibling : t._$parent[0].children[0]);
            if (t._execAction("insert", 0, arguments),
            e.$object) {
                for (var o = 0; o < e.$object.length; o++) {
                    var a = e.$object[o];
                    r.appendChild(a),
                    r.appendChild(document.createTextNode(" "))
                }
                t._$parent[0].insertBefore(r, n)
            }
            t._execAction("insert", 1, arguments),
            "object" == typeof e.multiMix && t.multiMix(e.multiMix, i)
        },
        prepend: function() {
            var t = this._parseInsertArgs(arguments);
            this.insert(0, t.$object, t.multiMix, t.callback)
        },
        append: function() {
            var t = this
              , e = t._parseInsertArgs(arguments);
            t.insert(t._state.totalTargets, e.$object, e.multiMix, e.callback)
        },
        getOption: function(t) {
            var i = this;
            return t ? i._execFilter("getOption", function(t, i) {
                for (var r = i.split("."), n = r.pop(), o = r.length, a = 1, s = r[0] || i; (t = t[s]) && o > a; )
                    s = r[a],
                    a++;
                return t !== e ? t[n] !== e ? t[n] : t : void 0
            }(i, t), arguments) : i
        },
        setOptions: function(e) {
            var i = this;
            i._execAction("setOptions", 0, arguments),
            "object" == typeof e && t.extend(!0, i, e),
            i._execAction("setOptions", 1, arguments)
        },
        getState: function() {
            var t = this;
            return t._execFilter("getState", t._state, t)
        },
        forceRefresh: function() {
            this._refresh(!1, !0)
        },
        destroy: function(e) {
            var i = this;
            i._execAction("destroy", 0, arguments),
            i._$body.add(t(i.selectors.sort)).add(t(i.selectors.filter)).off(".mixItUp");
            for (var r = 0; r < i._$targets.length; r++) {
                var n = i._$targets[r];
                e && (n.style.display = ""),
                delete n.mixParent
            }
            i._execAction("destroy", 1, arguments),
            delete t.MixItUp.prototype._instances[i._id]
        }
    },
    t.fn.mixItUp = function() {
        var i, r = arguments, n = [];
        return i = this.each(function() {
            if (r && "string" == typeof r[0]) {
                var i = t.MixItUp.prototype._instances[this.id];
                if ("isLoaded" === r[0])
                    n.push(!!i);
                else {
                    var o = i[r[0]](r[1], r[2], r[3]);
                    o !== e && n.push(o)
                }
            } else
                !function(e, i) {
                    var r = new t.MixItUp;
                    r._execAction("_instantiate", 0, arguments),
                    e.id = e.id ? e.id : "MixItUp" + ("00000" + (16777216 * Math.random() << 0).toString(16)).substr(-6).toUpperCase(),
                    r._instances[e.id] || (r._instances[e.id] = r,
                    r._init(e, i)),
                    r._execAction("_instantiate", 1, arguments)
                }(this, r[0])
        }),
        n.length ? n.length > 1 ? n : n[0] : i
    }
    ,
    t.fn.removeStyle = function(i, r) {
        return r = r || "",
        this.each(function() {
            for (var n = this, o = i.split(" "), a = 0; a < o.length; a++)
                for (var s = 0; 4 > s; s++) {
                    switch (s) {
                    case 0:
                        var l = o[a];
                        break;
                    case 1:
                        l = t.MixItUp.prototype._helpers._camelCase(l);
                        break;
                    case 2:
                        l = r + o[a];
                        break;
                    case 3:
                        l = t.MixItUp.prototype._helpers._camelCase(r + o[a])
                    }
                    if (n.style[l] !== e && "unknown" != typeof n.style[l] && n.style[l].length > 0 && (n.style[l] = ""),
                    !r && 1 === s)
                        break
                }
            n.attributes && n.attributes.style && n.attributes.style !== e && "" === n.attributes.style.value && n.attributes.removeNamedItem("style")
        })
    }
}(jQuery),
function(t, e) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : t.lozad = e()
}(this, function() {
    "use strict";
    var t = Object.assign || function(t) {
        for (var e = 1; e < arguments.length; e++) {
            var i = arguments[e];
            for (var r in i)
                Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
        }
        return t
    }
      , e = "undefined" != typeof document && document.documentMode
      , i = {
        rootMargin: "0px",
        threshold: 0,
        load: function(t) {
            if ("picture" === t.nodeName.toLowerCase()) {
                var i = document.createElement("img");
                e && t.getAttribute("data-iesrc") && (i.src = t.getAttribute("data-iesrc")),
                t.getAttribute("data-alt") && (i.alt = t.getAttribute("data-alt")),
                t.appendChild(i)
            }
            if ("video" === t.nodeName.toLowerCase() && !t.getAttribute("data-src") && t.children) {
                for (var r = t.children, n = void 0, o = 0; o <= r.length - 1; o++)
                    (n = r[o].getAttribute("data-src")) && (r[o].src = n);
                t.load()
            }
            t.getAttribute("data-src") && (t.src = t.getAttribute("data-src")),
            t.getAttribute("data-srcset") && t.setAttribute("srcset", t.getAttribute("data-srcset")),
            t.getAttribute("data-background-image") && (t.style.backgroundImage = "url('" + t.getAttribute("data-background-image") + "')"),
            t.getAttribute("data-toggle-class") && t.classList.toggle(t.getAttribute("data-toggle-class"))
        },
        loaded: function() {}
    };
    function r(t) {
        t.setAttribute("data-loaded", !0)
    }
    var n = function(t) {
        return "true" === t.getAttribute("data-loaded")
    };
    return function() {
        var e, o, a = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : ".lozad", s = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, l = t({}, i, s), u = l.root, c = l.rootMargin, p = l.threshold, h = l.load, d = l.loaded, f = void 0;
        return window.IntersectionObserver && (f = new IntersectionObserver((e = h,
        o = d,
        function(t, i) {
            t.forEach(function(t) {
                (0 < t.intersectionRatio || t.isIntersecting) && (i.unobserve(t.target),
                n(t.target) || (e(t.target),
                r(t.target),
                o(t.target)))
            })
        }
        ),{
            root: u,
            rootMargin: c,
            threshold: p
        })),
        {
            observe: function() {
                for (var t = function(t) {
                    var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : document;
                    return t instanceof Element ? [t] : t instanceof NodeList ? t : e.querySelectorAll(t)
                }(a, u), e = 0; e < t.length; e++)
                    n(t[e]) || (f ? f.observe(t[e]) : (h(t[e]),
                    r(t[e]),
                    d(t[e])))
            },
            triggerLoad: function(t) {
                n(t) || (h(t),
                r(t),
                d(t))
            },
            observer: f
        }
    }
}),
window.Modernizr = function(t, e, i) {
    function r(t) {
        m.cssText = t
    }
    function n(t, e) {
        return typeof t === e
    }
    function o(t, e) {
        return !!~("" + t).indexOf(e)
    }
    function a(t, e) {
        for (var r in t) {
            var n = t[r];
            if (!o(n, "-") && m[n] !== i)
                return "pfx" != e || n
        }
        return !1
    }
    function s(t, e, r) {
        for (var o in t) {
            var a = e[t[o]];
            if (a !== i)
                return !1 === r ? t[o] : n(a, "function") ? a.bind(r || e) : a
        }
        return !1
    }
    function l(t, e, i) {
        var r = t.charAt(0).toUpperCase() + t.slice(1)
          , o = (t + " " + b.join(r + " ") + r).split(" ");
        return n(e, "string") || n(e, "undefined") ? a(o, e) : s(o = (t + " " + w.join(r + " ") + r).split(" "), e, i)
    }
    var u, c, p = {}, h = e.documentElement, d = "modernizr", f = e.createElement(d), m = f.style, y = e.createElement("input"), g = ":)", _ = {}.toString, v = " -webkit- -moz- -o- -ms- ".split(" "), x = "Webkit Moz O ms", b = x.split(" "), w = x.toLowerCase().split(" "), T = "http://www.w3.org/2000/svg", S = {}, A = {}, k = {}, E = [], C = E.slice, P = function(t, i, r, n) {
        var o, a, s, l, u = e.createElement("div"), c = e.body, p = c || e.createElement("body");
        if (parseInt(r, 10))
            for (; r--; )
                (s = e.createElement("div")).id = n ? n[r] : d + (r + 1),
                u.appendChild(s);
        return o = ["&#173;", '<style id="s', d, '">', t, "</style>"].join(""),
        u.id = d,
        (c ? u : p).innerHTML += o,
        p.appendChild(u),
        c || (p.style.background = "",
        p.style.overflow = "hidden",
        l = h.style.overflow,
        h.style.overflow = "hidden",
        h.appendChild(p)),
        a = i(u, t),
        c ? u.parentNode.removeChild(u) : (p.parentNode.removeChild(p),
        h.style.overflow = l),
        !!a
    }, M = function() {
        var t = {
            select: "input",
            change: "input",
            submit: "form",
            reset: "form",
            error: "img",
            load: "img",
            abort: "img"
        };
        return function(r, o) {
            o = o || e.createElement(t[r] || "div");
            var a = (r = "on" + r)in o;
            return a || (o.setAttribute || (o = e.createElement("div")),
            o.setAttribute && o.removeAttribute && (o.setAttribute(r, ""),
            a = n(o[r], "function"),
            n(o[r], "undefined") || (o[r] = i),
            o.removeAttribute(r))),
            o = null,
            a
        }
    }(), I = {}.hasOwnProperty;
    for (var z in c = n(I, "undefined") || n(I.call, "undefined") ? function(t, e) {
        return e in t && n(t.constructor.prototype[e], "undefined")
    }
    : function(t, e) {
        return I.call(t, e)
    }
    ,
    Function.prototype.bind || (Function.prototype.bind = function(t) {
        var e = this;
        if ("function" != typeof e)
            throw new TypeError;
        var i = C.call(arguments, 1)
          , r = function() {
            if (this instanceof r) {
                var n = function() {};
                n.prototype = e.prototype;
                var o = new n
                  , a = e.apply(o, i.concat(C.call(arguments)));
                return Object(a) === a ? a : o
            }
            return e.apply(t, i.concat(C.call(arguments)))
        };
        return r
    }
    ),
    S.flexbox = function() {
        return l("flexWrap")
    }
    ,
    S.canvas = function() {
        var t = e.createElement("canvas");
        return !!t.getContext && !!t.getContext("2d")
    }
    ,
    S.canvastext = function() {
        return !!p.canvas && !!n(e.createElement("canvas").getContext("2d").fillText, "function")
    }
    ,
    S.webgl = function() {
        return !!t.WebGLRenderingContext
    }
    ,
    S.touch = function() {
        var i;
        return "ontouchstart"in t || t.DocumentTouch && e instanceof DocumentTouch ? i = !0 : P(["@media (", v.join("touch-enabled),("), d, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function(t) {
            i = 9 === t.offsetTop
        }),
        i
    }
    ,
    S.geolocation = function() {
        return "geolocation"in navigator
    }
    ,
    S.postmessage = function() {
        return !!t.postMessage
    }
    ,
    S.websqldatabase = function() {
        return !!t.openDatabase
    }
    ,
    S.indexedDB = function() {
        return !!l("indexedDB", t)
    }
    ,
    S.hashchange = function() {
        return M("hashchange", t) && (e.documentMode === i || e.documentMode > 7)
    }
    ,
    S.history = function() {
        return !!t.history && !!history.pushState
    }
    ,
    S.draganddrop = function() {
        var t = e.createElement("div");
        return "draggable"in t || "ondragstart"in t && "ondrop"in t
    }
    ,
    S.websockets = function() {
        return "WebSocket"in t || "MozWebSocket"in t
    }
    ,
    S.rgba = function() {
        return r("background-color:rgba(150,255,150,.5)"),
        o(m.backgroundColor, "rgba")
    }
    ,
    S.hsla = function() {
        return r("background-color:hsla(120,40%,100%,.5)"),
        o(m.backgroundColor, "rgba") || o(m.backgroundColor, "hsla")
    }
    ,
    S.multiplebgs = function() {
        return r("background:url(https://),url(https://),red url(https://)"),
        /(url\s*\(.*?){3}/.test(m.background)
    }
    ,
    S.backgroundsize = function() {
        return l("backgroundSize")
    }
    ,
    S.borderimage = function() {
        return l("borderImage")
    }
    ,
    S.borderradius = function() {
        return l("borderRadius")
    }
    ,
    S.boxshadow = function() {
        return l("boxShadow")
    }
    ,
    S.textshadow = function() {
        return "" === e.createElement("div").style.textShadow
    }
    ,
    S.opacity = function() {
        return t = "opacity:.55",
        r(v.join(t + ";") + (e || "")),
        /^0.55$/.test(m.opacity);
        var t, e
    }
    ,
    S.cssanimations = function() {
        return l("animationName")
    }
    ,
    S.csscolumns = function() {
        return l("columnCount")
    }
    ,
    S.cssgradients = function() {
        var t = "background-image:";
        return r((t + "-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));" + t) + v.join("linear-gradient(left top,#9f9, white);" + t)).slice(0, -t.length)),
        o(m.backgroundImage, "gradient")
    }
    ,
    S.cssreflections = function() {
        return l("boxReflect")
    }
    ,
    S.csstransforms = function() {
        return !!l("transform")
    }
    ,
    S.csstransforms3d = function() {
        var t = !!l("perspective");
        return t && "webkitPerspective"in h.style && P("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", function(e, i) {
            t = 9 === e.offsetLeft && 3 === e.offsetHeight
        }),
        t
    }
    ,
    S.csstransitions = function() {
        return l("transition")
    }
    ,
    S.fontface = function() {
        var t;
        return P('@font-face {font-family:"font";src:url("https://")}', function(i, r) {
            var n = e.getElementById("smodernizr")
              , o = n.sheet || n.styleSheet
              , a = o ? o.cssRules && o.cssRules[0] ? o.cssRules[0].cssText : o.cssText || "" : "";
            t = /src/i.test(a) && 0 === a.indexOf(r.split(" ")[0])
        }),
        t
    }
    ,
    S.generatedcontent = function() {
        var t;
        return P(["#", d, "{font:0/0 a}#", d, ':after{content:"', g, '";visibility:hidden;font:3px/1 a}'].join(""), function(e) {
            t = e.offsetHeight >= 3
        }),
        t
    }
    ,
    S.video = function() {
        var t = e.createElement("video")
          , i = !1;
        try {
            (i = !!t.canPlayType) && ((i = new Boolean(i)).ogg = t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""),
            i.h264 = t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""),
            i.webm = t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, ""))
        } catch (t) {}
        return i
    }
    ,
    S.audio = function() {
        var t = e.createElement("audio")
          , i = !1;
        try {
            (i = !!t.canPlayType) && ((i = new Boolean(i)).ogg = t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
            i.mp3 = t.canPlayType("audio/mpeg;").replace(/^no$/, ""),
            i.wav = t.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""),
            i.m4a = (t.canPlayType("audio/x-m4a;") || t.canPlayType("audio/aac;")).replace(/^no$/, ""))
        } catch (t) {}
        return i
    }
    ,
    S.localstorage = function() {
        try {
            return localStorage.setItem(d, d),
            localStorage.removeItem(d),
            !0
        } catch (t) {
            return !1
        }
    }
    ,
    S.sessionstorage = function() {
        try {
            return sessionStorage.setItem(d, d),
            sessionStorage.removeItem(d),
            !0
        } catch (t) {
            return !1
        }
    }
    ,
    S.webworkers = function() {
        return !!t.Worker
    }
    ,
    S.applicationcache = function() {
        return !!t.applicationCache
    }
    ,
    S.svg = function() {
        return !!e.createElementNS && !!e.createElementNS(T, "svg").createSVGRect
    }
    ,
    S.inlinesvg = function() {
        var t = e.createElement("div");
        return t.innerHTML = "<svg/>",
        (t.firstChild && t.firstChild.namespaceURI) == T
    }
    ,
    S.smil = function() {
        return !!e.createElementNS && /SVGAnimate/.test(_.call(e.createElementNS(T, "animate")))
    }
    ,
    S.svgclippaths = function() {
        return !!e.createElementNS && /SVGClipPath/.test(_.call(e.createElementNS(T, "clipPath")))
    }
    ,
    S)
        c(S, z) && (u = z.toLowerCase(),
        p[u] = S[z](),
        E.push((p[u] ? "" : "no-") + u));
    return p.input || (p.input = function(i) {
        for (var r = 0, n = i.length; r < n; r++)
            k[i[r]] = i[r]in y;
        return k.list && (k.list = !!e.createElement("datalist") && !!t.HTMLDataListElement),
        k
    }("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),
    p.inputtypes = function(t) {
        for (var r, n, o, a = 0, s = t.length; a < s; a++)
            y.setAttribute("type", n = t[a]),
            (r = "text" !== y.type) && (y.value = g,
            y.style.cssText = "position:absolute;visibility:hidden;",
            /^range$/.test(n) && y.style.WebkitAppearance !== i ? (h.appendChild(y),
            r = (o = e.defaultView).getComputedStyle && "textfield" !== o.getComputedStyle(y, null).WebkitAppearance && 0 !== y.offsetHeight,
            h.removeChild(y)) : /^(search|tel)$/.test(n) || (r = /^(url|email)$/.test(n) ? y.checkValidity && !1 === y.checkValidity() : y.value != g)),
            A[t[a]] = !!r;
        return A
    }("search tel url email datetime date month week time datetime-local number range color".split(" "))),
    p.addTest = function(t, e) {
        if ("object" == typeof t)
            for (var r in t)
                c(t, r) && p.addTest(r, t[r]);
        else {
            if (t = t.toLowerCase(),
            p[t] !== i)
                return p;
            e = "function" == typeof e ? e() : e,
            h.className += " " + (e ? "" : "no-") + t,
            p[t] = e
        }
        return p
    }
    ,
    r(""),
    f = y = null,
    function(t, e) {
        function i() {
            var t = f.elements;
            return "string" == typeof t ? t.split(" ") : t
        }
        function r(t) {
            var e = d[t[p]];
            return e || (e = {},
            h++,
            t[p] = h,
            d[h] = e),
            e
        }
        function n(t, i, n) {
            return i || (i = e),
            s ? i.createElement(t) : (n || (n = r(i)),
            !(o = n.cache[t] ? n.cache[t].cloneNode() : c.test(t) ? (n.cache[t] = n.createElem(t)).cloneNode() : n.createElem(t)).canHaveChildren || u.test(t) || o.tagUrn ? o : n.frag.appendChild(o));
            var o
        }
        function o(t) {
            t || (t = e);
            var o = r(t);
            return f.shivCSS && !a && !o.hasCSS && (o.hasCSS = !!function(t, e) {
                var i = t.createElement("p")
                  , r = t.getElementsByTagName("head")[0] || t.documentElement;
                return i.innerHTML = "x<style>" + e + "</style>",
                r.insertBefore(i.lastChild, r.firstChild)
            }(t, "article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),
            s || function(t, e) {
                e.cache || (e.cache = {},
                e.createElem = t.createElement,
                e.createFrag = t.createDocumentFragment,
                e.frag = e.createFrag()),
                t.createElement = function(i) {
                    return f.shivMethods ? n(i, t, e) : e.createElem(i)
                }
                ,
                t.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + i().join().replace(/[\w\-]+/g, function(t) {
                    return e.createElem(t),
                    e.frag.createElement(t),
                    'c("' + t + '")'
                }) + ");return n}")(f, e.frag)
            }(t, o),
            t
        }
        var a, s, l = t.html5 || {}, u = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i, c = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i, p = "_html5shiv", h = 0, d = {};
        !function() {
            try {
                var t = e.createElement("a");
                t.innerHTML = "<xyz></xyz>",
                a = "hidden"in t,
                s = 1 == t.childNodes.length || function() {
                    e.createElement("a");
                    var t = e.createDocumentFragment();
                    return void 0 === t.cloneNode || void 0 === t.createDocumentFragment || void 0 === t.createElement
                }()
            } catch (t) {
                a = !0,
                s = !0
            }
        }();
        var f = {
            elements: l.elements || "abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",
            version: "3.7.0",
            shivCSS: !1 !== l.shivCSS,
            supportsUnknownElements: s,
            shivMethods: !1 !== l.shivMethods,
            type: "default",
            shivDocument: o,
            createElement: n,
            createDocumentFragment: function(t, n) {
                if (t || (t = e),
                s)
                    return t.createDocumentFragment();
                for (var o = (n = n || r(t)).frag.cloneNode(), a = 0, l = i(), u = l.length; a < u; a++)
                    o.createElement(l[a]);
                return o
            }
        };
        t.html5 = f,
        o(e)
    }(this, e),
    p._version = "2.8.3",
    p._prefixes = v,
    p._domPrefixes = w,
    p._cssomPrefixes = b,
    p.hasEvent = M,
    p.testProp = function(t) {
        return a([t])
    }
    ,
    p.testAllProps = l,
    p.testStyles = P,
    p.prefixed = function(t, e, i) {
        return e ? l(t, e, i) : l(t, "pfx")
    }
    ,
    h.className = h.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + " js " + E.join(" "),
    p
}(this, this.document),
function(t, e, i) {
    function r(t) {
        return "[object Function]" == y.call(t)
    }
    function n(t) {
        return "string" == typeof t
    }
    function o() {}
    function a(t) {
        return !t || "loaded" == t || "complete" == t || "uninitialized" == t
    }
    function s() {
        var t = g.shift();
        _ = 1,
        t ? t.t ? f(function() {
            ("c" == t.t ? h.injectCss : h.injectJs)(t.s, 0, t.a, t.x, t.e, 1)
        }, 0) : (t(),
        s()) : _ = 0
    }
    function l(t, i, r, n, o, l, u) {
        function c(e) {
            if (!d && a(p.readyState) && (v.r = d = 1,
            !_ && s(),
            p.onload = p.onreadystatechange = null,
            e))
                for (var r in "img" != t && f(function() {
                    b.removeChild(p)
                }, 50),
                k[i])
                    k[i].hasOwnProperty(r) && k[i][r].onload()
        }
        u = u || h.errorTimeout;
        var p = e.createElement(t)
          , d = 0
          , y = 0
          , v = {
            t: r,
            s: i,
            e: o,
            a: l,
            x: u
        };
        1 === k[i] && (y = 1,
        k[i] = []),
        "object" == t ? p.data = i : (p.src = i,
        p.type = t),
        p.width = p.height = "0",
        p.onerror = p.onload = p.onreadystatechange = function() {
            c.call(this, y)
        }
        ,
        g.splice(n, 0, v),
        "img" != t && (y || 2 === k[i] ? (b.insertBefore(p, x ? null : m),
        f(c, u)) : k[i].push(p))
    }
    function u(t, e, i, r, o) {
        return _ = 0,
        e = e || "j",
        n(t) ? l("c" == e ? T : w, t, e, this.i++, i, r, o) : (g.splice(this.i++, 0, t),
        1 == g.length && s()),
        this
    }
    function c() {
        var t = h;
        return t.loader = {
            load: u,
            i: 0
        },
        t
    }
    var p, h, d = e.documentElement, f = t.setTimeout, m = e.getElementsByTagName("script")[0], y = {}.toString, g = [], _ = 0, v = "MozAppearance"in d.style, x = v && !!e.createRange().compareNode, b = x ? d : m.parentNode, w = (d = t.opera && "[object Opera]" == y.call(t.opera),
    d = !!e.attachEvent && !d,
    v ? "object" : d ? "script" : "img"), T = d ? "script" : w, S = Array.isArray || function(t) {
        return "[object Array]" == y.call(t)
    }
    , A = [], k = {}, E = {
        timeout: function(t, e) {
            return e.length && (t.timeout = e[0]),
            t
        }
    };
    (h = function(t) {
        function e(t, e, n, o, a) {
            var s = function(t) {
                t = t.split("!");
                var e, i, r, n = A.length, o = t.pop(), a = t.length;
                for (o = {
                    url: o,
                    origUrl: o,
                    prefixes: t
                },
                i = 0; i < a; i++)
                    r = t[i].split("="),
                    (e = E[r.shift()]) && (o = e(o, r));
                for (i = 0; i < n; i++)
                    o = A[i](o);
                return o
            }(t)
              , l = s.autoCallback;
            s.url.split(".").pop().split("?").shift(),
            s.bypass || (e && (e = r(e) ? e : e[t] || e[o] || e[t.split("/").pop().split("?")[0]]),
            s.instead ? s.instead(t, e, n, o, a) : (k[s.url] ? s.noexec = !0 : k[s.url] = 1,
            n.load(s.url, s.forceCSS || !s.forceJS && "css" == s.url.split(".").pop().split("?").shift() ? "c" : i, s.noexec, s.attrs, s.timeout),
            (r(e) || r(l)) && n.load(function() {
                c(),
                e && e(s.origUrl, a, o),
                l && l(s.origUrl, a, o),
                k[s.url] = 2
            })))
        }
        function a(t, i) {
            function a(t, o) {
                if (t) {
                    if (n(t))
                        o || (p = function() {
                            var t = [].slice.call(arguments);
                            h.apply(this, t),
                            d()
                        }
                        ),
                        e(t, p, i, 0, u);
                    else if (Object(t) === t)
                        for (l in s = function() {
                            var e, i = 0;
                            for (e in t)
                                t.hasOwnProperty(e) && i++;
                            return i
                        }(),
                        t)
                            t.hasOwnProperty(l) && (!o && !--s && (r(p) ? p = function() {
                                var t = [].slice.call(arguments);
                                h.apply(this, t),
                                d()
                            }
                            : p[l] = function(t) {
                                return function() {
                                    var e = [].slice.call(arguments);
                                    t && t.apply(this, e),
                                    d()
                                }
                            }(h[l])),
                            e(t[l], p, i, l, u))
                } else
                    !o && d()
            }
            var s, l, u = !!t.test, c = t.load || t.both, p = t.callback || o, h = p, d = t.complete || o;
            a(u ? t.yep : t.nope, !!c),
            c && a(c)
        }
        var s, l, u = this.yepnope.loader;
        if (n(t))
            e(t, 0, u, 0);
        else if (S(t))
            for (s = 0; s < t.length; s++)
                n(l = t[s]) ? e(l, 0, u, 0) : S(l) ? h(l) : Object(l) === l && a(l, u);
        else
            Object(t) === t && a(t, u)
    }
    ).addPrefix = function(t, e) {
        E[t] = e
    }
    ,
    h.addFilter = function(t) {
        A.push(t)
    }
    ,
    h.errorTimeout = 1e4,
    null == e.readyState && e.addEventListener && (e.readyState = "loading",
    e.addEventListener("DOMContentLoaded", p = function() {
        e.removeEventListener("DOMContentLoaded", p, 0),
        e.readyState = "complete"
    }
    , 0)),
    t.yepnope = c(),
    t.yepnope.executeStack = s,
    t.yepnope.injectJs = function(t, i, r, n, l, u) {
        var c, p, d = e.createElement("script");
        n = n || h.errorTimeout;
        for (p in d.src = t,
        r)
            d.setAttribute(p, r[p]);
        i = u ? s : i || o,
        d.onreadystatechange = d.onload = function() {
            !c && a(d.readyState) && (c = 1,
            i(),
            d.onload = d.onreadystatechange = null)
        }
        ,
        f(function() {
            c || (c = 1,
            i(1))
        }, n),
        l ? d.onload() : m.parentNode.insertBefore(d, m)
    }
    ,
    t.yepnope.injectCss = function(t, i, r, n, a, l) {
        var u;
        n = e.createElement("link"),
        i = l ? s : i || o;
        for (u in n.href = t,
        n.rel = "stylesheet",
        n.type = "text/css",
        r)
            n.setAttribute(u, r[u]);
        a || (m.parentNode.insertBefore(n, m),
        f(i, 0))
    }
}(this, document),
Modernizr.load = function() {
    yepnope.apply(window, [].slice.call(arguments, 0))
}
;
var previousTop = 0;
function initParallaxElements() {
    $("body").innerWidth() > 960 ? initstickyParallax("[data-parallax]") : initstickyParallax('[data-parallax-mobile="true"]')
}
function initstickyParallax(t) {
    stickyParallaxHolder(t),
    window.addEventListener("scroll", function() {
        stickParallax(t)
    }, {
        capture: !0,
        passive: !0
    }),
    $(window).resized(function() {
        stickyParallaxHolder(t)
    })
}
function stickyParallaxHolder(t) {
    $(t).each(function(t, e) {
        var i = $(e)
          , r = i.data("parallax")
          , n = r.axis;
        if ("x" == n)
            r.fixed && i.parent().height(i.height());
        else if ("y" == n) {
            var o = i.outerHeight(!0)
              , a = $(".parallaxParent");
            i.parent(".parallaxParent").length > 0 ? a.css("height", o + "px") : (i.wrap("<div class='parallaxParent'></div>"),
            (a = i.parent(".parallaxParent")).css("height", o + "px"))
        }
    })
}
function stickParallax(t) {
    var e = $(document).scrollTop();
    e != previousTop && setStickPosition(t),
    previousTop = e
}
function setStickPosition(t) {
    var e = $(document).scrollTop();
    $(t).each(function(t, i) {
        var r = $(i)
          , n = r.data("parallax")
          , o = n.axis;
        if ("path" == o) {
            var a = $(this).parents(".row-inner").offset().top + $(this).parents(".row-inner").height()
              , s = parseInt(r.css("stroke-dasharray"));
            (h = 100 * e / a * s / 100) < 0 && (h = 0),
            TweenLite.set(r, {
                strokeDashoffset: h
            })
        } else if ("x" == o) {
            var l = n.fixed
              , u = n.direction
              , c = (a = $(this).parents(".row-inner").offset().top + $(this).parents(".row-inner").height(),
            r.outerWidth());
            "true" == l && (a = $("footer.site-footer").offset().top - r.outerHeight() - ($(window).height() / 2 - r.outerHeight()),
            c = $("body").innerWidth() + r.outerWidth());
            var p = 100 * e / a * c / 100
              , h = p;
            "true" == l && (h = p - r.outerWidth());
            var d = "true" == l ? "-50%" : "0";
            TweenLite.to(r, 0, {
                x: "right" == u ? -h : h,
                y: d,
                ease: Power2.easeOut
            })
        } else {
            var f = r.parent().offset().top
              , m = $(n.fixedTil);
            if (e >= f) {
                if (m.length > 0) {
                    var y = r.outerHeight();
                    a = m.offset().top + m.outerHeight() - y;
                    e >= f && e < a ? $(i).css({
                        position: "fixed",
                        top: "100px",
                        width: $(i).parent().width()
                    }) : $(i).removeAttr("style")
                }
            } else
                $(i).removeAttr("style")
        }
    })
}
function initMouseIcon() {
    var t, e = document.getElementById("js-dragger"), i = "#main-logo, a[href], button, button i, .slick-arrow, .slick-dots li, .marker", r = ".style-dark-bg, .style-color-jevc-bg", n = ".style-light-bg, .style-color-xsdn-bg", o = ".js-back-area", a = ".js-close-area", s = ".slick-banners.has_cursor", l = ".home_intro", u = "", c = "", p = !1, h = {
        duration: .35,
        ease: Expo.easeOut,
        isStuck: !1
    };
    function d(t) {
        h.x = t.clientX,
        h.y = t.clientY,
        TweenLite.set(e, {
            x: h.x,
            y: h.y,
            rotation: 45,
            force3D: !0
        }),
        !1
    }
    function f(e) {
        clearTimeout(t),
        t = setTimeout(function() {
            p || (p = !0,
            homeIntro())
        }, 500)
    }
    function m() {
        p && (p = !1,
        $(".glitch-transition").removeClass("visible opening")),
        clearTimeout(t)
    }
    function y(t) {
        switch (t) {
        case "grow":
            e.setAttribute("data-expand", !0),
            e.setAttribute("data-arrows", !1),
            e.setAttribute("data-close", !1),
            e.setAttribute("data-drag", !1),
            e.setAttribute("data-hold", !1);
            break;
        case "shrink":
            e.setAttribute("data-arrows", !1),
            e.setAttribute("data-expand", !1),
            e.setAttribute("data-close", !1),
            e.setAttribute("data-drag", !1),
            e.setAttribute("data-hold", !1);
            break;
        case "dark":
            e.setAttribute("data-dark", !0);
            break;
        case "light":
            e.setAttribute("data-dark", !1);
            break;
        case "back":
            e.setAttribute("data-back", !0);
            break;
        case "backOut":
            e.setAttribute("data-back", !1);
            break;
        case "close":
            e.setAttribute("data-close", !0),
            e.setAttribute("data-expand", !0);
            break;
        case "closeOut":
            e.setAttribute("data-close", !1),
            e.setAttribute("data-expand", !1);
            break;
        case "drag":
            e.setAttribute("data-expand", !0),
            e.setAttribute("data-arrows", !0),
            e.setAttribute("data-drag", !0);
            break;
        case "dragOut":
            e.setAttribute("data-expand", !1),
            e.setAttribute("data-arrows", !1),
            e.setAttribute("data-drag", !1);
            break;
        case "hold":
            e.setAttribute("data-hold", !0);
            break;
        case "holdOut":
            e.setAttribute("data-hold", !1);
            break;
        case "sliderModeOn":
            e.setAttribute("data-drag", !1),
            e.setAttribute("data-expand", !0),
            e.setAttribute("data-arrows", !0);
            break;
        case "sliderModeOff":
            e.setAttribute("data-expand", !1),
            e.setAttribute("data-arrows", !1);
            break;
        case "sliderDirection":
            var i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "both";
            e.setAttribute("data-direction", i);
            break;
        default:
            e.setAttribute("data-arrows", !1),
            e.setAttribute("data-expand", !1)
        }
    }
    pageSettings = {
        x: 100,
        y: 100
    },
    $(e).length > 0 && function() {
        c && $(c).length > 0 && (c.addEventListener("mousedown", f, !1),
        c.addEventListener("mouseup", m, !1),
        c.addEventListener("touchstart", f, !1),
        c.addEventListener("touchend", m, !1));
        if ($("html").hasClass("touch"))
            return !1;
        $("html").addClass("mouse-active"),
        window.addEventListener("mousemove", d, !1),
        $("body").on("mouseenter", i, function(t) {
            y("grow")
        }),
        $("body").on("mouseleave", i, function(t) {
            y("shrink")
        }),
        $("body").on("mouseenter", r, function(t) {
            y("light")
        }),
        $("body").on("mouseenter", n, function(t) {
            y("dark")
        }),
        o && $(o).length > 0 && ($("body").on("mouseenter", o, function(t) {
            y("back")
        }),
        $("body").on("mouseleave", o, function(t) {
            y("backOut")
        }));
        a && $(a).length > 0 && ($("body").on("mouseenter", a, function(t) {
            y("close")
        }),
        $("body").on("mouseleave", a, function(t) {
            y("closeOut")
        }));
        l && $(l).length > 0 && ($("body").on("mouseover", l, function(t) {
            1 == $(t.target).closest(this).length && y("hold")
        }),
        $("body").on("mouseleave", l, function(t) {
            0 == $(t.target).closest(this).length && y("holdOut")
        }));
        u && $(u).length > 0 && ($("body").on("mouseenter", u, function(t) {
            y("drag")
        }),
        $("body").on("mouseleave", u, function(t) {
            y("dragOut")
        }));
        s && ($("body").on("mouseenter", s, function(t) {
            y("sliderModeOn")
        }),
        $("body").on("mouseleave", s, function(t) {
            y("sliderModeOff")
        }))
    }()
}
function initMouseEvents() {
    1 == $cursorActive && initMouseIcon()
}
!function(t, e) {
    "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define("scrollMonitor", [], e) : "object" == typeof exports ? exports.scrollMonitor = e() : t.scrollMonitor = e()
}(this, function() {
    return function(t) {
        function e(r) {
            if (i[r])
                return i[r].exports;
            var n = i[r] = {
                exports: {},
                id: r,
                loaded: !1
            };
            return t[r].call(n.exports, n, n.exports, e),
            n.loaded = !0,
            n.exports
        }
        var i = {};
        return e.m = t,
        e.c = i,
        e.p = "",
        e(0)
    }([function(t, e, i) {
        "use strict";
        var r = i(1).isInBrowser
          , n = new (i(2))(r ? document.body : null);
        n.setStateFromDOM(null),
        n.listenToDOM(),
        r && (window.scrollMonitor = n),
        t.exports = n
    }
    , function(t, e) {
        "use strict";
        e.VISIBILITYCHANGE = "visibilityChange",
        e.ENTERVIEWPORT = "enterViewport",
        e.FULLYENTERVIEWPORT = "fullyEnterViewport",
        e.EXITVIEWPORT = "exitViewport",
        e.PARTIALLYEXITVIEWPORT = "partiallyExitViewport",
        e.LOCATIONCHANGE = "locationChange",
        e.STATECHANGE = "stateChange",
        e.eventTypes = [e.VISIBILITYCHANGE, e.ENTERVIEWPORT, e.FULLYENTERVIEWPORT, e.EXITVIEWPORT, e.PARTIALLYEXITVIEWPORT, e.LOCATIONCHANGE, e.STATECHANGE],
        e.isOnServer = "undefined" == typeof window,
        e.isInBrowser = !e.isOnServer,
        e.defaultOffsets = {
            top: 0,
            bottom: 0
        }
    }
    , function(t, e, i) {
        "use strict";
        function r(t) {
            return s ? 0 : t === document.body ? window.innerHeight || document.documentElement.clientHeight : t.clientHeight
        }
        function n(t) {
            return s ? 0 : t === document.body ? Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.documentElement.clientHeight) : t.scrollHeight
        }
        function o(t) {
            return s ? 0 : t === document.body ? window.pageYOffset || document.documentElement && document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop
        }
        var a = i(1)
          , s = a.isOnServer
          , l = a.isInBrowser
          , u = a.eventTypes
          , c = i(3)
          , p = !1;
        if (l)
            try {
                var h = Object.defineProperty({}, "passive", {
                    get: function() {
                        p = !0
                    }
                });
                window.addEventListener("test", null, h)
            } catch (t) {}
        var d = !!p && {
            capture: !1,
            passive: !0
        }
          , f = function() {
            function t(e, i) {
                !function(t, e) {
                    if (!(t instanceof e))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var a, s, l, c = this;
                this.item = e,
                this.watchers = [],
                this.viewportTop = null,
                this.viewportBottom = null,
                this.documentHeight = n(e),
                this.viewportHeight = r(e),
                this.DOMListener = function() {
                    t.prototype.DOMListener.apply(c, arguments)
                }
                ,
                this.eventTypes = u,
                i && (this.containerWatcher = i.create(e)),
                this.update = function() {
                    (function() {
                        if (c.viewportTop = o(e),
                        c.viewportBottom = c.viewportTop + c.viewportHeight,
                        c.documentHeight = n(e),
                        c.documentHeight !== a) {
                            for (s = c.watchers.length; s--; )
                                c.watchers[s].recalculateLocation();
                            a = c.documentHeight
                        }
                    }
                    )(),
                    function() {
                        for (l = c.watchers.length; l--; )
                            c.watchers[l].update();
                        for (l = c.watchers.length; l--; )
                            c.watchers[l].triggerCallbacks()
                    }()
                }
                ,
                this.recalculateLocations = function() {
                    this.documentHeight = 0,
                    this.update()
                }
            }
            return t.prototype.listenToDOM = function() {
                l && (window.addEventListener ? (this.item === document.body ? window.addEventListener("scroll", this.DOMListener, d) : this.item.addEventListener("scroll", this.DOMListener, d),
                window.addEventListener("resize", this.DOMListener)) : (this.item === document.body ? window.attachEvent("onscroll", this.DOMListener) : this.item.attachEvent("onscroll", this.DOMListener),
                window.attachEvent("onresize", this.DOMListener)),
                this.destroy = function() {
                    window.addEventListener ? (this.item === document.body ? (window.removeEventListener("scroll", this.DOMListener, d),
                    this.containerWatcher.destroy()) : this.item.removeEventListener("scroll", this.DOMListener, d),
                    window.removeEventListener("resize", this.DOMListener)) : (this.item === document.body ? (window.detachEvent("onscroll", this.DOMListener),
                    this.containerWatcher.destroy()) : this.item.detachEvent("onscroll", this.DOMListener),
                    window.detachEvent("onresize", this.DOMListener))
                }
                )
            }
            ,
            t.prototype.destroy = function() {}
            ,
            t.prototype.DOMListener = function(t) {
                this.setStateFromDOM(t)
            }
            ,
            t.prototype.setStateFromDOM = function(t) {
                var e = o(this.item)
                  , i = r(this.item)
                  , a = n(this.item);
                this.setState(e, i, a, t)
            }
            ,
            t.prototype.setState = function(t, e, i, r) {
                var n = e !== this.viewportHeight || i !== this.contentHeight;
                if (this.latestEvent = r,
                this.viewportTop = t,
                this.viewportHeight = e,
                this.viewportBottom = t + e,
                this.contentHeight = i,
                n)
                    for (var o = this.watchers.length; o--; )
                        this.watchers[o].recalculateLocation();
                this.updateAndTriggerWatchers(r)
            }
            ,
            t.prototype.updateAndTriggerWatchers = function(t) {
                for (var e = this.watchers.length; e--; )
                    this.watchers[e].update();
                for (e = this.watchers.length; e--; )
                    this.watchers[e].triggerCallbacks(t)
            }
            ,
            t.prototype.createCustomContainer = function() {
                return new t
            }
            ,
            t.prototype.createContainer = function(e) {
                "string" == typeof e ? e = document.querySelector(e) : e && e.length > 0 && (e = e[0]);
                var i = new t(e,this);
                return i.setStateFromDOM(),
                i.listenToDOM(),
                i
            }
            ,
            t.prototype.create = function(t, e) {
                "string" == typeof t ? t = document.querySelector(t) : t && t.length > 0 && (t = t[0]);
                var i = new c(this,t,e);
                return this.watchers.push(i),
                i
            }
            ,
            t.prototype.beget = function(t, e) {
                return this.create(t, e)
            }
            ,
            t
        }();
        t.exports = f
    }
    , function(t, e, i) {
        "use strict";
        function r(t, e, i) {
            function r(t, e) {
                if (0 !== t.length)
                    for (g = t.length; g--; )
                        (_ = t[g]).callback.call(v, e, v),
                        _.isOne && t.splice(g, 1)
            }
            var n, f, m, y, g, _, v = this;
            this.watchItem = e,
            this.container = t,
            this.offsets = i ? i === +i ? {
                top: i,
                bottom: i
            } : {
                top: i.top || d.top,
                bottom: i.bottom || d.bottom
            } : d,
            this.callbacks = {};
            for (var x = 0, b = h.length; x < b; x++)
                v.callbacks[h[x]] = [];
            this.locked = !1,
            this.triggerCallbacks = function(t) {
                switch (this.isInViewport && !n && r(this.callbacks[a], t),
                this.isFullyInViewport && !f && r(this.callbacks[s], t),
                this.isAboveViewport !== m && this.isBelowViewport !== y && (r(this.callbacks[o], t),
                f || this.isFullyInViewport || (r(this.callbacks[s], t),
                r(this.callbacks[u], t)),
                n || this.isInViewport || (r(this.callbacks[a], t),
                r(this.callbacks[l], t))),
                !this.isFullyInViewport && f && r(this.callbacks[u], t),
                !this.isInViewport && n && r(this.callbacks[l], t),
                this.isInViewport !== n && r(this.callbacks[o], t),
                !0) {
                case n !== this.isInViewport:
                case f !== this.isFullyInViewport:
                case m !== this.isAboveViewport:
                case y !== this.isBelowViewport:
                    r(this.callbacks[p], t)
                }
                n = this.isInViewport,
                f = this.isFullyInViewport,
                m = this.isAboveViewport,
                y = this.isBelowViewport
            }
            ,
            this.recalculateLocation = function() {
                if (!this.locked) {
                    var t = this.top
                      , e = this.bottom;
                    if (this.watchItem.nodeName) {
                        var i = this.watchItem.style.display;
                        "none" === i && (this.watchItem.style.display = "");
                        for (var n = 0, o = this.container; o.containerWatcher; )
                            n += o.containerWatcher.top - o.containerWatcher.container.viewportTop,
                            o = o.containerWatcher.container;
                        var a = this.watchItem.getBoundingClientRect();
                        this.top = a.top + this.container.viewportTop - n,
                        this.bottom = a.bottom + this.container.viewportTop - n,
                        "none" === i && (this.watchItem.style.display = i)
                    } else
                        this.watchItem === +this.watchItem ? this.watchItem > 0 ? this.top = this.bottom = this.watchItem : this.top = this.bottom = this.container.documentHeight - this.watchItem : (this.top = this.watchItem.top,
                        this.bottom = this.watchItem.bottom);
                    this.top -= this.offsets.top,
                    this.bottom += this.offsets.bottom,
                    this.height = this.bottom - this.top,
                    void 0 === t && void 0 === e || this.top === t && this.bottom === e || r(this.callbacks[c], null)
                }
            }
            ,
            this.recalculateLocation(),
            this.update(),
            n = this.isInViewport,
            f = this.isFullyInViewport,
            m = this.isAboveViewport,
            y = this.isBelowViewport
        }
        var n = i(1)
          , o = n.VISIBILITYCHANGE
          , a = n.ENTERVIEWPORT
          , s = n.FULLYENTERVIEWPORT
          , l = n.EXITVIEWPORT
          , u = n.PARTIALLYEXITVIEWPORT
          , c = n.LOCATIONCHANGE
          , p = n.STATECHANGE
          , h = n.eventTypes
          , d = n.defaultOffsets;
        r.prototype = {
            on: function(t, e, i) {
                switch (!0) {
                case t === o && !this.isInViewport && this.isAboveViewport:
                case t === a && this.isInViewport:
                case t === s && this.isFullyInViewport:
                case t === l && this.isAboveViewport && !this.isInViewport:
                case t === u && this.isInViewport && this.isAboveViewport:
                    if (e.call(this, this.container.latestEvent, this),
                    i)
                        return
                }
                if (!this.callbacks[t])
                    throw new Error("Tried to add a scroll monitor listener of type " + t + ". Your options are: " + h.join(", "));
                this.callbacks[t].push({
                    callback: e,
                    isOne: i || !1
                })
            },
            off: function(t, e) {
                if (!this.callbacks[t])
                    throw new Error("Tried to remove a scroll monitor listener of type " + t + ". Your options are: " + h.join(", "));
                for (var i, r = 0; i = this.callbacks[t][r]; r++)
                    if (i.callback === e) {
                        this.callbacks[t].splice(r, 1);
                        break
                    }
            },
            one: function(t, e) {
                this.on(t, e, !0)
            },
            recalculateSize: function() {
                this.height = this.watchItem.offsetHeight + this.offsets.top + this.offsets.bottom,
                this.bottom = this.top + this.height
            },
            update: function() {
                this.isAboveViewport = this.top < this.container.viewportTop,
                this.isBelowViewport = this.bottom > this.container.viewportBottom,
                this.isInViewport = this.top < this.container.viewportBottom && this.bottom > this.container.viewportTop,
                this.isFullyInViewport = this.top >= this.container.viewportTop && this.bottom <= this.container.viewportBottom || this.isAboveViewport && this.isBelowViewport
            },
            destroy: function() {
                var t = this.container.watchers.indexOf(this);
                this.container.watchers.splice(t, 1);
                for (var e = 0, i = h.length; e < i; e++)
                    this.callbacks[h[e]].length = 0
            },
            lock: function() {
                this.locked = !0
            },
            unlock: function() {
                this.locked = !1
            }
        };
        for (var f = function(t) {
            return function(e, i) {
                this.on.call(this, t, e, i)
            }
        }, m = 0, y = h.length; m < y; m++) {
            var g = h[m];
            r.prototype[g] = f(g)
        }
        t.exports = r
    }
    ])
}),
function() {
    function t(t, e, i) {
        return t.call.apply(t.bind, arguments)
    }
    function e(t, e, i) {
        if (!t)
            throw Error();
        if (2 < arguments.length) {
            var r = Array.prototype.slice.call(arguments, 2);
            return function() {
                var i = Array.prototype.slice.call(arguments);
                return Array.prototype.unshift.apply(i, r),
                t.apply(e, i)
            }
        }
        return function() {
            return t.apply(e, arguments)
        }
    }
    function i(r, n, o) {
        return (i = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? t : e).apply(null, arguments)
    }
    var r = Date.now || function() {
        return +new Date
    }
    ;
    function n(t, e) {
        this.a = t,
        this.m = e || t,
        this.c = this.m.document
    }
    var o = !!window.FontFace;
    function a(t, e, i, r) {
        if (e = t.c.createElement(e),
        i)
            for (var n in i)
                i.hasOwnProperty(n) && ("style" == n ? e.style.cssText = i[n] : e.setAttribute(n, i[n]));
        return r && e.appendChild(t.c.createTextNode(r)),
        e
    }
    function s(t, e, i) {
        (t = t.c.getElementsByTagName(e)[0]) || (t = document.documentElement),
        t.insertBefore(i, t.lastChild)
    }
    function l(t) {
        t.parentNode && t.parentNode.removeChild(t)
    }
    function u(t, e, i) {
        e = e || [],
        i = i || [];
        for (var r = t.className.split(/\s+/), n = 0; n < e.length; n += 1) {
            for (var o = !1, a = 0; a < r.length; a += 1)
                if (e[n] === r[a]) {
                    o = !0;
                    break
                }
            o || r.push(e[n])
        }
        for (e = [],
        n = 0; n < r.length; n += 1) {
            for (o = !1,
            a = 0; a < i.length; a += 1)
                if (r[n] === i[a]) {
                    o = !0;
                    break
                }
            o || e.push(r[n])
        }
        t.className = e.join(" ").replace(/\s+/g, " ").replace(/^\s+|\s+$/, "")
    }
    function c(t, e) {
        for (var i = t.className.split(/\s+/), r = 0, n = i.length; r < n; r++)
            if (i[r] == e)
                return !0;
        return !1
    }
    function p(t) {
        if ("string" == typeof t.f)
            return t.f;
        var e = t.m.location.protocol;
        return "about:" == e && (e = t.a.location.protocol),
        "https:" == e ? "https:" : "http:"
    }
    function h(t, e, i) {
        function r() {
            c && n && l && (c(u),
            c = null)
        }
        e = a(t, "link", {
            rel: "stylesheet",
            href: e,
            media: "all"
        });
        var n = !1
          , l = !0
          , u = null
          , c = i || null;
        o ? (e.onload = function() {
            n = !0,
            r()
        }
        ,
        e.onerror = function() {
            n = !0,
            u = Error("Stylesheet failed to load"),
            r()
        }
        ) : setTimeout(function() {
            n = !0,
            r()
        }, 0),
        s(t, "head", e)
    }
    function d(t, e, i, r) {
        var n = t.c.getElementsByTagName("head")[0];
        if (n) {
            var o = a(t, "script", {
                src: e
            })
              , s = !1;
            return o.onload = o.onreadystatechange = function() {
                s || this.readyState && "loaded" != this.readyState && "complete" != this.readyState || (s = !0,
                i && i(null),
                o.onload = o.onreadystatechange = null,
                "HEAD" == o.parentNode.tagName && n.removeChild(o))
            }
            ,
            n.appendChild(o),
            setTimeout(function() {
                s || (s = !0,
                i && i(Error("Script load timeout")))
            }, r || 5e3),
            o
        }
        return null
    }
    function f() {
        this.a = 0,
        this.c = null
    }
    function m(t) {
        return t.a++,
        function() {
            t.a--,
            g(t)
        }
    }
    function y(t, e) {
        t.c = e,
        g(t)
    }
    function g(t) {
        0 == t.a && t.c && (t.c(),
        t.c = null)
    }
    function _(t) {
        this.a = t || "-"
    }
    function v(t, e) {
        this.c = t,
        this.f = 4,
        this.a = "n";
        var i = (e || "n4").match(/^([nio])([1-9])$/i);
        i && (this.a = i[1],
        this.f = parseInt(i[2], 10))
    }
    function x(t) {
        var e = [];
        t = t.split(/,\s*/);
        for (var i = 0; i < t.length; i++) {
            var r = t[i].replace(/['"]/g, "");
            -1 != r.indexOf(" ") || /^\d/.test(r) ? e.push("'" + r + "'") : e.push(r)
        }
        return e.join(",")
    }
    function b(t) {
        return t.a + t.f
    }
    function w(t) {
        var e = "normal";
        return "o" === t.a ? e = "oblique" : "i" === t.a && (e = "italic"),
        e
    }
    function T(t) {
        var e = 4
          , i = "n"
          , r = null;
        return t && ((r = t.match(/(normal|oblique|italic)/i)) && r[1] && (i = r[1].substr(0, 1).toLowerCase()),
        (r = t.match(/([1-9]00|normal|bold)/i)) && r[1] && (/bold/i.test(r[1]) ? e = 7 : /[1-9]00/.test(r[1]) && (e = parseInt(r[1].substr(0, 1), 10)))),
        i + e
    }
    function S(t, e) {
        this.c = t,
        this.f = t.m.document.documentElement,
        this.h = e,
        this.a = new _("-"),
        this.j = !1 !== e.events,
        this.g = !1 !== e.classes
    }
    function A(t) {
        if (t.g) {
            var e = c(t.f, t.a.c("wf", "active"))
              , i = []
              , r = [t.a.c("wf", "loading")];
            e || i.push(t.a.c("wf", "inactive")),
            u(t.f, i, r)
        }
        k(t, "inactive")
    }
    function k(t, e, i) {
        t.j && t.h[e] && (i ? t.h[e](i.c, b(i)) : t.h[e]())
    }
    function E() {
        this.c = {}
    }
    function C(t, e) {
        this.c = t,
        this.f = e,
        this.a = a(this.c, "span", {
            "aria-hidden": "true"
        }, this.f)
    }
    function P(t) {
        s(t.c, "body", t.a)
    }
    function M(t) {
        return "display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:" + x(t.c) + ";font-style:" + w(t) + ";font-weight:" + t.f + "00;"
    }
    function I(t, e, i, r, n, o) {
        this.g = t,
        this.j = e,
        this.a = r,
        this.c = i,
        this.f = n || 3e3,
        this.h = o || void 0
    }
    function z(t, e, i, r, n, o, a) {
        this.v = t,
        this.B = e,
        this.c = i,
        this.a = r,
        this.s = a || "BESbswy",
        this.f = {},
        this.w = n || 3e3,
        this.u = o || null,
        this.o = this.j = this.h = this.g = null,
        this.g = new C(this.c,this.s),
        this.h = new C(this.c,this.s),
        this.j = new C(this.c,this.s),
        this.o = new C(this.c,this.s),
        t = M(t = new v(this.a.c + ",serif",b(this.a))),
        this.g.a.style.cssText = t,
        t = M(t = new v(this.a.c + ",sans-serif",b(this.a))),
        this.h.a.style.cssText = t,
        t = M(t = new v("serif",b(this.a))),
        this.j.a.style.cssText = t,
        t = M(t = new v("sans-serif",b(this.a))),
        this.o.a.style.cssText = t,
        P(this.g),
        P(this.h),
        P(this.j),
        P(this.o)
    }
    _.prototype.c = function(t) {
        for (var e = [], i = 0; i < arguments.length; i++)
            e.push(arguments[i].replace(/[\W_]+/g, "").toLowerCase());
        return e.join(this.a)
    }
    ,
    I.prototype.start = function() {
        var t = this.c.m.document
          , e = this
          , i = r()
          , n = new Promise(function(n, o) {
            !function a() {
                r() - i >= e.f ? o() : t.fonts.load(function(t) {
                    return w(t) + " " + t.f + "00 300px " + x(t.c)
                }(e.a), e.h).then(function(t) {
                    1 <= t.length ? n() : setTimeout(a, 25)
                }, function() {
                    o()
                })
            }()
        }
        )
          , o = new Promise(function(t, i) {
            setTimeout(i, e.f)
        }
        );
        Promise.race([o, n]).then(function() {
            e.g(e.a)
        }, function() {
            e.j(e.a)
        })
    }
    ;
    var L = {
        D: "serif",
        C: "sans-serif"
    }
      , D = null;
    function O() {
        if (null === D) {
            var t = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);
            D = !!t && (536 > parseInt(t[1], 10) || 536 === parseInt(t[1], 10) && 11 >= parseInt(t[2], 10))
        }
        return D
    }
    function R(t, e, i) {
        for (var r in L)
            if (L.hasOwnProperty(r) && e === t.f[L[r]] && i === t.f[L[r]])
                return !0;
        return !1
    }
    function F(t) {
        var e, n = t.g.a.offsetWidth, o = t.h.a.offsetWidth;
        (e = n === t.f.serif && o === t.f["sans-serif"]) || (e = O() && R(t, n, o)),
        e ? r() - t.A >= t.w ? O() && R(t, n, o) && (null === t.u || t.u.hasOwnProperty(t.a.c)) ? B(t, t.v) : B(t, t.B) : function(t) {
            setTimeout(i(function() {
                F(this)
            }, t), 50)
        }(t) : B(t, t.v)
    }
    function B(t, e) {
        setTimeout(i(function() {
            l(this.g.a),
            l(this.h.a),
            l(this.j.a),
            l(this.o.a),
            e(this.a)
        }, t), 0)
    }
    function N(t, e, i) {
        this.c = t,
        this.a = e,
        this.f = 0,
        this.o = this.j = !1,
        this.s = i
    }
    z.prototype.start = function() {
        this.f.serif = this.j.a.offsetWidth,
        this.f["sans-serif"] = this.o.a.offsetWidth,
        this.A = r(),
        F(this)
    }
    ;
    var U = null;
    function V(t) {
        0 == --t.f && t.j && (t.o ? ((t = t.a).g && u(t.f, [t.a.c("wf", "active")], [t.a.c("wf", "loading"), t.a.c("wf", "inactive")]),
        k(t, "active")) : A(t.a))
    }
    function j(t) {
        this.j = t,
        this.a = new E,
        this.h = 0,
        this.f = this.g = !0
    }
    function $(t, e, r, n, o) {
        var a = 0 == --t.h;
        (t.f || t.g) && setTimeout(function() {
            var t = o || null
              , s = n || {};
            if (0 === r.length && a)
                A(e.a);
            else {
                e.f += r.length,
                a && (e.j = a);
                var l, c = [];
                for (l = 0; l < r.length; l++) {
                    var p = r[l]
                      , h = s[p.c]
                      , d = e.a
                      , f = p;
                    d.g && u(d.f, [d.a.c("wf", f.c, b(f).toString(), "loading")]),
                    k(d, "fontloading", f),
                    d = null,
                    null === U && (U = !!window.FontFace && (!(f = /Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent)) || 42 < parseInt(f[1], 10))),
                    d = U ? new I(i(e.g, e),i(e.h, e),e.c,p,e.s,h) : new z(i(e.g, e),i(e.h, e),e.c,p,e.s,t,h),
                    c.push(d)
                }
                for (l = 0; l < c.length; l++)
                    c[l].start()
            }
        }, 0)
    }
    function q(t, e) {
        this.c = t,
        this.a = e
    }
    function W(t, e) {
        this.c = t,
        this.a = e
    }
    function H(t, e, i) {
        this.c = t || e + X,
        this.a = [],
        this.f = [],
        this.g = i || ""
    }
    N.prototype.g = function(t) {
        var e = this.a;
        e.g && u(e.f, [e.a.c("wf", t.c, b(t).toString(), "active")], [e.a.c("wf", t.c, b(t).toString(), "loading"), e.a.c("wf", t.c, b(t).toString(), "inactive")]),
        k(e, "fontactive", t),
        this.o = !0,
        V(this)
    }
    ,
    N.prototype.h = function(t) {
        var e = this.a;
        if (e.g) {
            var i = c(e.f, e.a.c("wf", t.c, b(t).toString(), "active"))
              , r = []
              , n = [e.a.c("wf", t.c, b(t).toString(), "loading")];
            i || r.push(e.a.c("wf", t.c, b(t).toString(), "inactive")),
            u(e.f, r, n)
        }
        k(e, "fontinactive", t),
        V(this)
    }
    ,
    j.prototype.load = function(t) {
        this.c = new n(this.j,t.context || this.j),
        this.g = !1 !== t.events,
        this.f = !1 !== t.classes,
        function(t, e, i) {
            var r = []
              , n = i.timeout;
            !function(t) {
                t.g && u(t.f, [t.a.c("wf", "loading")]),
                k(t, "loading")
            }(e);
            var r = function(t, e, i) {
                var r, n = [];
                for (r in e)
                    if (e.hasOwnProperty(r)) {
                        var o = t.c[r];
                        o && n.push(o(e[r], i))
                    }
                return n
            }(t.a, i, t.c)
              , o = new N(t.c,e,n);
            for (t.h = r.length,
            e = 0,
            i = r.length; e < i; e++)
                r[e].load(function(e, i, r) {
                    $(t, o, e, i, r)
                })
        }(this, new S(this.c,t), t)
    }
    ,
    q.prototype.load = function(t) {
        var e = this
          , i = e.a.projectId
          , r = e.a.version;
        if (i) {
            var n = e.c.m;
            d(this.c, function(t, e, i) {
                return p(t.c) + "//" + (t = (t.a.api || "fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/, "")) + "/" + e + ".js" + (i ? "?v=" + i : "")
            }(e, i, r), function(r) {
                r ? t([]) : (n["__MonotypeConfiguration__" + i] = function() {
                    return e.a
                }
                ,
                function e() {
                    if (n["__mti_fntLst" + i]) {
                        var r, o = n["__mti_fntLst" + i](), a = [];
                        if (o)
                            for (var s = 0; s < o.length; s++) {
                                var l = o[s].fontfamily;
                                null != o[s].fontStyle && null != o[s].fontWeight ? (r = o[s].fontStyle + o[s].fontWeight,
                                a.push(new v(l,r))) : a.push(new v(l))
                            }
                        t(a)
                    } else
                        setTimeout(function() {
                            e()
                        }, 50)
                }())
            }).id = "__MonotypeAPIScript__" + i
        } else
            t([])
    }
    ,
    W.prototype.load = function(t) {
        var e, i, r = this.a.urls || [], n = this.a.families || [], o = this.a.testStrings || {}, a = new f;
        for (e = 0,
        i = r.length; e < i; e++)
            h(this.c, r[e], m(a));
        var s = [];
        for (e = 0,
        i = n.length; e < i; e++)
            if ((r = n[e].split(":"))[1])
                for (var l = r[1].split(","), u = 0; u < l.length; u += 1)
                    s.push(new v(r[0],l[u]));
            else
                s.push(new v(r[0]));
        y(a, function() {
            t(s, o)
        })
    }
    ;
    var X = "//fonts.googleapis.com/css";
    function Z(t) {
        this.f = t,
        this.a = [],
        this.c = {}
    }
    var G = {
        latin: "BESbswy",
        "latin-ext": "çöüğş",
        cyrillic: "йяЖ",
        greek: "αβΣ",
        khmer: "កខគ",
        Hanuman: "កខគ"
    }
      , Y = {
        thin: "1",
        extralight: "2",
        "extra-light": "2",
        ultralight: "2",
        "ultra-light": "2",
        light: "3",
        regular: "4",
        book: "4",
        medium: "5",
        "semi-bold": "6",
        semibold: "6",
        "demi-bold": "6",
        demibold: "6",
        bold: "7",
        "extra-bold": "8",
        extrabold: "8",
        "ultra-bold": "8",
        ultrabold: "8",
        black: "9",
        heavy: "9",
        l: "3",
        r: "4",
        b: "7"
    }
      , K = {
        i: "i",
        italic: "i",
        n: "n",
        normal: "n"
    }
      , J = /^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;
    function Q(t, e) {
        this.c = t,
        this.a = e
    }
    var tt = {
        Arimo: !0,
        Cousine: !0,
        Tinos: !0
    };
    function et(t, e) {
        this.c = t,
        this.a = e
    }
    function it(t, e) {
        this.c = t,
        this.f = e,
        this.a = []
    }
    Q.prototype.load = function(t) {
        var e = new f
          , i = this.c
          , r = new H(this.a.api,p(i),this.a.text)
          , n = this.a.families;
        !function(t, e) {
            for (var i = e.length, r = 0; r < i; r++) {
                var n = e[r].split(":");
                3 == n.length && t.f.push(n.pop());
                var o = "";
                2 == n.length && "" != n[1] && (o = ":"),
                t.a.push(n.join(o))
            }
        }(r, n);
        var o = new Z(n);
        !function(t) {
            for (var e = t.f.length, i = 0; i < e; i++) {
                var r = t.f[i].split(":")
                  , n = r[0].replace(/\+/g, " ")
                  , o = ["n4"];
                if (2 <= r.length) {
                    var a;
                    if (a = [],
                    s = r[1])
                        for (var s, l = (s = s.split(",")).length, u = 0; u < l; u++) {
                            var c;
                            if ((c = s[u]).match(/^[\w-]+$/))
                                if (null == (h = J.exec(c.toLowerCase())))
                                    c = "";
                                else {
                                    if (c = null == (c = h[2]) || "" == c ? "n" : K[c],
                                    null == (h = h[1]) || "" == h)
                                        h = "4";
                                    else
                                        var p = Y[h]
                                          , h = p || (isNaN(h) ? "4" : h.substr(0, 1));
                                    c = [c, h].join("")
                                }
                            else
                                c = "";
                            c && a.push(c)
                        }
                    0 < a.length && (o = a),
                    3 == r.length && (a = [],
                    0 < (r = (r = r[2]) ? r.split(",") : a).length && (r = G[r[0]]) && (t.c[n] = r))
                }
                for (t.c[n] || (r = G[n]) && (t.c[n] = r),
                r = 0; r < o.length; r += 1)
                    t.a.push(new v(n,o[r]))
            }
        }(o),
        h(i, function(t) {
            if (0 == t.a.length)
                throw Error("No fonts to load!");
            if (-1 != t.c.indexOf("kit="))
                return t.c;
            for (var e = t.a.length, i = [], r = 0; r < e; r++)
                i.push(t.a[r].replace(/ /g, "+"));
            return e = t.c + "?family=" + i.join("%7C"),
            0 < t.f.length && (e += "&subset=" + t.f.join(",")),
            0 < t.g.length && (e += "&text=" + encodeURIComponent(t.g)),
            e
        }(r), m(e)),
        y(e, function() {
            t(o.a, o.c, tt)
        })
    }
    ,
    et.prototype.load = function(t) {
        var e = this.a.id
          , i = this.c.m;
        e ? d(this.c, (this.a.api || "https://use.typekit.net") + "/" + e + ".js", function(e) {
            if (e)
                t([]);
            else if (i.Typekit && i.Typekit.config && i.Typekit.config.fn) {
                e = i.Typekit.config.fn;
                for (var r = [], n = 0; n < e.length; n += 2)
                    for (var o = e[n], a = e[n + 1], s = 0; s < a.length; s++)
                        r.push(new v(o,a[s]));
                try {
                    i.Typekit.load({
                        events: !1,
                        classes: !1,
                        async: !0
                    })
                } catch (t) {}
                t(r)
            }
        }, 2e3) : t([])
    }
    ,
    it.prototype.load = function(t) {
        var e = this.f.id
          , i = this.c.m
          , r = this;
        e ? (i.__webfontfontdeckmodule__ || (i.__webfontfontdeckmodule__ = {}),
        i.__webfontfontdeckmodule__[e] = function(e, i) {
            for (var n = 0, o = i.fonts.length; n < o; ++n) {
                var a = i.fonts[n];
                r.a.push(new v(a.name,T("font-weight:" + a.weight + ";font-style:" + a.style)))
            }
            t(r.a)
        }
        ,
        d(this.c, p(this.c) + (this.f.api || "//f.fontdeck.com/s/css/js/") + function(t) {
            return t.m.location.hostname || t.a.location.hostname
        }(this.c) + "/" + e + ".js", function(e) {
            e && t([])
        })) : t([])
    }
    ;
    var rt = new j(window);
    rt.a.c.custom = function(t, e) {
        return new W(e,t)
    }
    ,
    rt.a.c.fontdeck = function(t, e) {
        return new it(e,t)
    }
    ,
    rt.a.c.monotype = function(t, e) {
        return new q(e,t)
    }
    ,
    rt.a.c.typekit = function(t, e) {
        return new et(e,t)
    }
    ,
    rt.a.c.google = function(t, e) {
        return new Q(e,t)
    }
    ;
    var nt = {
        load: i(rt.load, rt)
    };
    "function" == typeof define && define.amd ? define(function() {
        return nt
    }) : "undefined" != typeof module && module.exports ? module.exports = nt : (window.WebFont = nt,
    window.WebFontConfig && rt.load(window.WebFontConfig))
}(),
function(t, e) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : t.mapboxgl = e()
}(this, function() {
    "use strict";
    var t, e, i;
    function r(r, n) {
        if (t)
            if (e) {
                var o = "var sharedChunk = {}; (" + t + ")(sharedChunk); (" + e + ")(sharedChunk);"
                  , a = {};
                t(a),
                (i = n(a)).workerUrl = window.URL.createObjectURL(new Blob([o],{
                    type: "text/javascript"
                }))
            } else
                e = n;
        else
            t = n
    }
    return r(0, function(t) {
        function e(t, e) {
            return t(e = {
                exports: {}
            }, e.exports),
            e.exports
        }
        var i = r;
        function r(t, e, i, r) {
            this.cx = 3 * t,
            this.bx = 3 * (i - t) - this.cx,
            this.ax = 1 - this.cx - this.bx,
            this.cy = 3 * e,
            this.by = 3 * (r - e) - this.cy,
            this.ay = 1 - this.cy - this.by,
            this.p1x = t,
            this.p1y = r,
            this.p2x = i,
            this.p2y = r
        }
        r.prototype.sampleCurveX = function(t) {
            return ((this.ax * t + this.bx) * t + this.cx) * t
        }
        ,
        r.prototype.sampleCurveY = function(t) {
            return ((this.ay * t + this.by) * t + this.cy) * t
        }
        ,
        r.prototype.sampleCurveDerivativeX = function(t) {
            return (3 * this.ax * t + 2 * this.bx) * t + this.cx
        }
        ,
        r.prototype.solveCurveX = function(t, e) {
            var i, r, n, o, a;
            for (void 0 === e && (e = 1e-6),
            n = t,
            a = 0; a < 8; a++) {
                if (o = this.sampleCurveX(n) - t,
                Math.abs(o) < e)
                    return n;
                var s = this.sampleCurveDerivativeX(n);
                if (Math.abs(s) < 1e-6)
                    break;
                n -= o / s
            }
            if ((n = t) < (i = 0))
                return i;
            if (n > (r = 1))
                return r;
            for (; i < r; ) {
                if (o = this.sampleCurveX(n),
                Math.abs(o - t) < e)
                    return n;
                t > o ? i = n : r = n,
                n = .5 * (r - i) + i
            }
            return n
        }
        ,
        r.prototype.solve = function(t, e) {
            return this.sampleCurveY(this.solveCurveX(t, e))
        }
        ;
        var n = o;
        function o(t, e) {
            this.x = t,
            this.y = e
        }
        function a(t, e) {
            if (Array.isArray(t)) {
                if (!Array.isArray(e) || t.length !== e.length)
                    return !1;
                for (var i = 0; i < t.length; i++)
                    if (!a(t[i], e[i]))
                        return !1;
                return !0
            }
            if ("object" == typeof t && null !== t && null !== e) {
                if ("object" != typeof e)
                    return !1;
                if (Object.keys(t).length !== Object.keys(e).length)
                    return !1;
                for (var r in t)
                    if (!a(t[r], e[r]))
                        return !1;
                return !0
            }
            return t === e
        }
        function s(t, e, r, n) {
            var o = new i(t,e,r,n);
            return function(t) {
                return o.solve(t)
            }
        }
        o.prototype = {
            clone: function() {
                return new o(this.x,this.y)
            },
            add: function(t) {
                return this.clone()._add(t)
            },
            sub: function(t) {
                return this.clone()._sub(t)
            },
            multByPoint: function(t) {
                return this.clone()._multByPoint(t)
            },
            divByPoint: function(t) {
                return this.clone()._divByPoint(t)
            },
            mult: function(t) {
                return this.clone()._mult(t)
            },
            div: function(t) {
                return this.clone()._div(t)
            },
            rotate: function(t) {
                return this.clone()._rotate(t)
            },
            rotateAround: function(t, e) {
                return this.clone()._rotateAround(t, e)
            },
            matMult: function(t) {
                return this.clone()._matMult(t)
            },
            unit: function() {
                return this.clone()._unit()
            },
            perp: function() {
                return this.clone()._perp()
            },
            round: function() {
                return this.clone()._round()
            },
            mag: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y)
            },
            equals: function(t) {
                return this.x === t.x && this.y === t.y
            },
            dist: function(t) {
                return Math.sqrt(this.distSqr(t))
            },
            distSqr: function(t) {
                var e = t.x - this.x
                  , i = t.y - this.y;
                return e * e + i * i
            },
            angle: function() {
                return Math.atan2(this.y, this.x)
            },
            angleTo: function(t) {
                return Math.atan2(this.y - t.y, this.x - t.x)
            },
            angleWith: function(t) {
                return this.angleWithSep(t.x, t.y)
            },
            angleWithSep: function(t, e) {
                return Math.atan2(this.x * e - this.y * t, this.x * t + this.y * e)
            },
            _matMult: function(t) {
                var e = t[0] * this.x + t[1] * this.y
                  , i = t[2] * this.x + t[3] * this.y;
                return this.x = e,
                this.y = i,
                this
            },
            _add: function(t) {
                return this.x += t.x,
                this.y += t.y,
                this
            },
            _sub: function(t) {
                return this.x -= t.x,
                this.y -= t.y,
                this
            },
            _mult: function(t) {
                return this.x *= t,
                this.y *= t,
                this
            },
            _div: function(t) {
                return this.x /= t,
                this.y /= t,
                this
            },
            _multByPoint: function(t) {
                return this.x *= t.x,
                this.y *= t.y,
                this
            },
            _divByPoint: function(t) {
                return this.x /= t.x,
                this.y /= t.y,
                this
            },
            _unit: function() {
                return this._div(this.mag()),
                this
            },
            _perp: function() {
                var t = this.y;
                return this.y = this.x,
                this.x = -t,
                this
            },
            _rotate: function(t) {
                var e = Math.cos(t)
                  , i = Math.sin(t)
                  , r = e * this.x - i * this.y
                  , n = i * this.x + e * this.y;
                return this.x = r,
                this.y = n,
                this
            },
            _rotateAround: function(t, e) {
                var i = Math.cos(t)
                  , r = Math.sin(t)
                  , n = e.x + i * (this.x - e.x) - r * (this.y - e.y)
                  , o = e.y + r * (this.x - e.x) + i * (this.y - e.y);
                return this.x = n,
                this.y = o,
                this
            },
            _round: function() {
                return this.x = Math.round(this.x),
                this.y = Math.round(this.y),
                this
            }
        },
        o.convert = function(t) {
            return t instanceof o ? t : Array.isArray(t) ? new o(t[0],t[1]) : t
        }
        ;
        var l = s(.25, .1, .25, 1);
        function u(t, e, i) {
            return Math.min(i, Math.max(e, t))
        }
        function c(t, e, i) {
            var r = i - e
              , n = ((t - e) % r + r) % r + e;
            return n === e ? i : n
        }
        function p(t) {
            for (var e = [], i = arguments.length - 1; i-- > 0; )
                e[i] = arguments[i + 1];
            for (var r = 0, n = e; r < n.length; r += 1) {
                var o = n[r];
                for (var a in o)
                    t[a] = o[a]
            }
            return t
        }
        var h = 1;
        function d() {
            return h++
        }
        function f() {
            return function t(e) {
                return e ? (e ^ 16 * Math.random() >> e / 4).toString(16) : ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, t)
            }()
        }
        function m(t) {
            return !!t && /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)
        }
        function y(t, e) {
            t.forEach(function(t) {
                e[t] && (e[t] = e[t].bind(e))
            })
        }
        function g(t, e) {
            return -1 !== t.indexOf(e, t.length - e.length)
        }
        function _(t, e, i) {
            var r = {};
            for (var n in t)
                r[n] = e.call(i || this, t[n], n, t);
            return r
        }
        function v(t, e, i) {
            var r = {};
            for (var n in t)
                e.call(i || this, t[n], n, t) && (r[n] = t[n]);
            return r
        }
        function x(t) {
            return Array.isArray(t) ? t.map(x) : "object" == typeof t && t ? _(t, x) : t
        }
        var b = {};
        function w(t) {
            b[t] || ("undefined" != typeof console && console.warn(t),
            b[t] = !0)
        }
        function T(t, e, i) {
            return (i.y - t.y) * (e.x - t.x) > (e.y - t.y) * (i.x - t.x)
        }
        function S(t) {
            for (var e = 0, i = 0, r = t.length, n = r - 1, o = void 0, a = void 0; i < r; n = i++)
                o = t[i],
                e += ((a = t[n]).x - o.x) * (o.y + a.y);
            return e
        }
        function A(t) {
            try {
                var e = self[t];
                return e.setItem("_mapbox_test_", 1),
                e.removeItem("_mapbox_test_"),
                !0
            } catch (t) {
                return !1
            }
        }
        var k = self.performance && self.performance.now ? self.performance.now.bind(self.performance) : Date.now.bind(Date)
          , E = self.requestAnimationFrame || self.mozRequestAnimationFrame || self.webkitRequestAnimationFrame || self.msRequestAnimationFrame
          , C = self.cancelAnimationFrame || self.mozCancelAnimationFrame || self.webkitCancelAnimationFrame || self.msCancelAnimationFrame
          , P = {
            now: k,
            frame: function(t) {
                var e = E(t);
                return {
                    cancel: function() {
                        return C(e)
                    }
                }
            },
            getImageData: function(t) {
                var e = self.document.createElement("canvas")
                  , i = e.getContext("2d");
                if (!i)
                    throw new Error("failed to create canvas 2d context");
                return e.width = t.width,
                e.height = t.height,
                i.drawImage(t, 0, 0, t.width, t.height),
                i.getImageData(0, 0, t.width, t.height)
            },
            resolveURL: function(t) {
                var e = self.document.createElement("a");
                return e.href = t,
                e.href
            },
            hardwareConcurrency: self.navigator.hardwareConcurrency || 4,
            get devicePixelRatio() {
                return self.devicePixelRatio
            },
            supportsWebp: !1
        };
        if (self.document) {
            var M = self.document.createElement("img");
            M.onload = function() {
                P.supportsWebp = !0
            }
            ,
            M.src = "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="
        }
        var I = {
            API_URL: "https://api.mapbox.com",
            get EVENTS_URL() {
                return 0 === this.API_URL.indexOf("https://api.mapbox.cn") ? "https://events.mapbox.cn/events/v2" : "https://events.mapbox.com/events/v2"
            },
            REQUIRE_ACCESS_TOKEN: !0,
            ACCESS_TOKEN: null,
            MAX_PARALLEL_IMAGE_REQUESTS: 16
        }
          , z = "See https://www.mapbox.com/api-documentation/#access-tokens";
        function L(t, e) {
            var i = N(I.API_URL);
            if (t.protocol = i.protocol,
            t.authority = i.authority,
            "/" !== i.path && (t.path = "" + i.path + t.path),
            !I.REQUIRE_ACCESS_TOKEN)
                return U(t);
            if (!(e = e || I.ACCESS_TOKEN))
                throw new Error("An API access token is required to use Mapbox GL. " + z);
            if ("s" === e[0])
                throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). " + z);
            return t.params.push("access_token=" + e),
            U(t)
        }
        function D(t) {
            return 0 === t.indexOf("mapbox:")
        }
        var O = /^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;
        function R(t) {
            return O.test(t)
        }
        var F = /(\.(png|jpg)\d*)(?=$)/
          , B = /^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;
        function N(t) {
            var e = t.match(B);
            if (!e)
                throw new Error("Unable to parse URL object");
            return {
                protocol: e[1],
                authority: e[2],
                path: e[3] || "/",
                params: e[4] ? e[4].split("&") : []
            }
        }
        function U(t) {
            var e = t.params.length ? "?" + t.params.join("&") : "";
            return t.protocol + "://" + t.authority + t.path + e
        }
        var V = function(t) {
            this.type = t,
            this.anonId = null,
            this.eventData = {
                lastSuccess: null,
                accessToken: I.ACCESS_TOKEN
            },
            this.queue = [],
            this.pendingRequest = null
        };
        V.prototype.fetchEventData = function() {
            var t = A("localStorage")
              , e = "mapbox.eventData:" + (I.ACCESS_TOKEN || "")
              , i = "mapbox.eventData.uuid:" + (I.ACCESS_TOKEN || "");
            if (t)
                try {
                    var r = self.localStorage.getItem(e);
                    r && (this.eventData = JSON.parse(r));
                    var n = self.localStorage.getItem(i);
                    n && (this.anonId = n)
                } catch (t) {
                    w("Unable to read from LocalStorage")
                }
        }
        ,
        V.prototype.saveEventData = function() {
            var t = A("localStorage")
              , e = "mapbox.eventData:" + (I.ACCESS_TOKEN || "")
              , i = "mapbox.eventData.uuid:" + (I.ACCESS_TOKEN || "");
            if (t)
                try {
                    self.localStorage.setItem(i, this.anonId),
                    this.eventData.lastSuccess && self.localStorage.setItem(e, JSON.stringify(this.eventData))
                } catch (t) {
                    w("Unable to write to LocalStorage")
                }
        }
        ,
        V.prototype.processRequests = function() {}
        ,
        V.prototype.postEvent = function(t, e, i) {
            var r = this
              , n = N(I.EVENTS_URL);
            n.params.push("access_token=" + (I.ACCESS_TOKEN || ""));
            var o = {
                event: this.type,
                created: new Date(t).toISOString(),
                sdkIdentifier: "mapbox-gl-js",
                sdkVersion: "0.51.0",
                userId: this.anonId
            }
              , a = e ? p(o, e) : o
              , s = {
                url: U(n),
                headers: {
                    "Content-Type": "text/plain"
                },
                body: JSON.stringify([a])
            };
            this.pendingRequest = J(s, function(t) {
                r.pendingRequest = null,
                i(t),
                r.saveEventData(),
                r.processRequests()
            })
        }
        ,
        V.prototype.queueRequest = function(t) {
            this.queue.push(t),
            this.processRequests()
        }
        ;
        var j = function(t) {
            function e() {
                t.call(this, "map.load"),
                this.success = {}
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.postMapLoadEvent = function(t, e) {
                I.ACCESS_TOKEN && Array.isArray(t) && t.some(function(t) {
                    return R(t)
                }) && this.queueRequest({
                    id: e,
                    timestamp: Date.now()
                })
            }
            ,
            e.prototype.processRequests = function() {
                var t = this;
                if (!this.pendingRequest && 0 !== this.queue.length) {
                    var e = this.queue.shift()
                      , i = e.id
                      , r = e.timestamp;
                    i && this.success[i] || (this.anonId || this.fetchEventData(),
                    m(this.anonId) || (this.anonId = f()),
                    this.postEvent(r, {}, function(e) {
                        e || i && (t.success[i] = !0)
                    }))
                }
            }
            ,
            e
        }(V)
          , $ = new (function(t) {
            function e() {
                t.call(this, "appUserTurnstile")
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.postTurnstileEvent = function(t) {
                I.ACCESS_TOKEN && Array.isArray(t) && t.some(function(t) {
                    return R(t)
                }) && this.queueRequest(Date.now())
            }
            ,
            e.prototype.processRequests = function() {
                var t = this;
                if (!this.pendingRequest && 0 !== this.queue.length) {
                    var e = !!this.eventData.accessToken && this.eventData.accessToken !== I.ACCESS_TOKEN;
                    e && (this.anonId = this.eventData.lastSuccess = null),
                    this.anonId && this.eventData.lastSuccess || this.fetchEventData(),
                    m(this.anonId) || (this.anonId = f(),
                    e = !0);
                    var i = this.queue.shift();
                    if (this.eventData.lastSuccess) {
                        var r = new Date(this.eventData.lastSuccess)
                          , n = new Date(i)
                          , o = (i - this.eventData.lastSuccess) / 864e5;
                        e = e || o >= 1 || o < -1 || r.getDate() !== n.getDate()
                    } else
                        e = !0;
                    if (!e)
                        return this.processRequests();
                    this.postEvent(i, {
                        "enabled.telemetry": !1
                    }, function(e) {
                        e || (t.eventData.lastSuccess = i,
                        t.eventData.accessToken = I.ACCESS_TOKEN)
                    })
                }
            }
            ,
            e
        }(V))
          , q = $.postTurnstileEvent.bind($)
          , W = new j
          , H = W.postMapLoadEvent.bind(W)
          , X = {
            Unknown: "Unknown",
            Style: "Style",
            Source: "Source",
            Tile: "Tile",
            Glyphs: "Glyphs",
            SpriteImage: "SpriteImage",
            SpriteJSON: "SpriteJSON",
            Image: "Image"
        };
        "function" == typeof Object.freeze && Object.freeze(X);
        var Z = function(t) {
            function e(e, i, r) {
                401 === i && R(r) && (e += ": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens"),
                t.call(this, e),
                this.status = i,
                this.url = r,
                this.name = this.constructor.name,
                this.message = e
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.toString = function() {
                return this.name + ": " + this.message + " (" + this.status + "): " + this.url
            }
            ,
            e
        }(Error)
          , G = "undefined" != typeof WorkerGlobalScope && "undefined" != typeof self && self instanceof WorkerGlobalScope ? function() {
            return self.worker && self.worker.referrer
        }
        : function() {
            var t = self.location.origin;
            if (t && "null" !== t && "file://" !== t)
                return t + self.location.pathname
        }
          , Y = self.fetch && self.Request && self.AbortController ? function(t, e) {
            var i = new self.AbortController
              , r = new self.Request(t.url,{
                method: t.method || "GET",
                body: t.body,
                credentials: t.credentials,
                headers: t.headers,
                referrer: G(),
                signal: i.signal
            });
            return "json" === t.type && r.headers.set("Accept", "application/json"),
            self.fetch(r).then(function(i) {
                i.ok ? i[t.type || "text"]().then(function(t) {
                    e(null, t, i.headers.get("Cache-Control"), i.headers.get("Expires"))
                }).catch(function(t) {
                    return e(new Error(t.message))
                }) : e(new Z(i.statusText,i.status,t.url))
            }).catch(function(t) {
                e(new Error(t.message))
            }),
            {
                cancel: function() {
                    return i.abort()
                }
            }
        }
        : function(t, e) {
            var i = new self.XMLHttpRequest;
            for (var r in i.open(t.method || "GET", t.url, !0),
            "arrayBuffer" === t.type && (i.responseType = "arraybuffer"),
            t.headers)
                i.setRequestHeader(r, t.headers[r]);
            return "json" === t.type && i.setRequestHeader("Accept", "application/json"),
            i.withCredentials = "include" === t.credentials,
            i.onerror = function() {
                e(new Error(i.statusText))
            }
            ,
            i.onload = function() {
                if ((i.status >= 200 && i.status < 300 || 0 === i.status) && null !== i.response) {
                    var r = i.response;
                    if ("json" === t.type)
                        try {
                            r = JSON.parse(i.response)
                        } catch (t) {
                            return e(t)
                        }
                    e(null, r, i.getResponseHeader("Cache-Control"), i.getResponseHeader("Expires"))
                } else
                    e(new Z(i.statusText,i.status,t.url))
            }
            ,
            i.send(t.body),
            {
                cancel: function() {
                    return i.abort()
                }
            }
        }
          , K = function(t, e) {
            return Y(p(t, {
                type: "arrayBuffer"
            }), e)
        }
          , J = function(t, e) {
            return Y(p(t, {
                method: "POST"
            }), e)
        }
          , Q = []
          , tt = 0
          , et = function(t, e) {
            if (tt >= I.MAX_PARALLEL_IMAGE_REQUESTS) {
                var i = {
                    requestParameters: t,
                    callback: e,
                    cancelled: !1
                };
                return Q.push(i),
                {
                    cancel: function() {
                        i.cancelled = !0
                    }
                }
            }
            return tt++,
            K(t, function(t, i, r, n) {
                for (tt--; Q.length && tt < I.MAX_PARALLEL_IMAGE_REQUESTS; ) {
                    var o = Q.shift()
                      , a = o.requestParameters
                      , s = o.callback;
                    o.cancelled || et(a, s)
                }
                if (t)
                    e(t);
                else if (i) {
                    var l = new self.Image
                      , u = self.URL || self.webkitURL;
                    l.onload = function() {
                        e(null, l),
                        u.revokeObjectURL(l.src)
                    }
                    ,
                    l.onerror = function() {
                        return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))
                    }
                    ;
                    var c = new self.Blob([new Uint8Array(i)],{
                        type: "image/png"
                    });
                    l.cacheControl = r,
                    l.expires = n,
                    l.src = i.byteLength ? u.createObjectURL(c) : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="
                }
            })
        };
        function it(t, e, i) {
            i[t] && -1 !== i[t].indexOf(e) || (i[t] = i[t] || [],
            i[t].push(e))
        }
        function rt(t, e, i) {
            if (i && i[t]) {
                var r = i[t].indexOf(e);
                -1 !== r && i[t].splice(r, 1)
            }
        }
        var nt = function(t, e) {
            void 0 === e && (e = {}),
            p(this, e),
            this.type = t
        }
          , ot = function(t) {
            function e(e, i) {
                void 0 === i && (i = {}),
                t.call(this, "error", p({
                    error: e
                }, i))
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e
        }(nt)
          , at = function() {};
        at.prototype.on = function(t, e) {
            return this._listeners = this._listeners || {},
            it(t, e, this._listeners),
            this
        }
        ,
        at.prototype.off = function(t, e) {
            return rt(t, e, this._listeners),
            rt(t, e, this._oneTimeListeners),
            this
        }
        ,
        at.prototype.once = function(t, e) {
            return this._oneTimeListeners = this._oneTimeListeners || {},
            it(t, e, this._oneTimeListeners),
            this
        }
        ,
        at.prototype.fire = function(t) {
            "string" == typeof t && (t = new nt(t,arguments[1] || {}));
            var e = t.type;
            if (this.listens(e)) {
                t.target = this;
                for (var i = 0, r = this._listeners && this._listeners[e] ? this._listeners[e].slice() : []; i < r.length; i += 1)
                    r[i].call(this, t);
                for (var n = 0, o = this._oneTimeListeners && this._oneTimeListeners[e] ? this._oneTimeListeners[e].slice() : []; n < o.length; n += 1) {
                    var a = o[n];
                    rt(e, a, this._oneTimeListeners),
                    a.call(this, t)
                }
                var s = this._eventedParent;
                s && (p(t, "function" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData),
                s.fire(t))
            } else
                t instanceof ot && console.error(t.error);
            return this
        }
        ,
        at.prototype.listens = function(t) {
            return this._listeners && this._listeners[t] && this._listeners[t].length > 0 || this._oneTimeListeners && this._oneTimeListeners[t] && this._oneTimeListeners[t].length > 0 || this._eventedParent && this._eventedParent.listens(t)
        }
        ,
        at.prototype.setEventedParent = function(t, e) {
            return this._eventedParent = t,
            this._eventedParentData = e,
            this
        }
        ;
        var st = {
            $version: 8,
            $root: {
                version: {
                    required: !0,
                    type: "enum",
                    values: [8]
                },
                name: {
                    type: "string"
                },
                metadata: {
                    type: "*"
                },
                center: {
                    type: "array",
                    value: "number"
                },
                zoom: {
                    type: "number"
                },
                bearing: {
                    type: "number",
                    default: 0,
                    period: 360,
                    units: "degrees"
                },
                pitch: {
                    type: "number",
                    default: 0,
                    units: "degrees"
                },
                light: {
                    type: "light"
                },
                sources: {
                    required: !0,
                    type: "sources"
                },
                sprite: {
                    type: "string"
                },
                glyphs: {
                    type: "string"
                },
                transition: {
                    type: "transition"
                },
                layers: {
                    required: !0,
                    type: "array",
                    value: "layer"
                }
            },
            sources: {
                "*": {
                    type: "source"
                }
            },
            source: ["source_vector", "source_raster", "source_raster_dem", "source_geojson", "source_video", "source_image"],
            source_vector: {
                type: {
                    required: !0,
                    type: "enum",
                    values: {
                        vector: {}
                    }
                },
                url: {
                    type: "string"
                },
                tiles: {
                    type: "array",
                    value: "string"
                },
                bounds: {
                    type: "array",
                    value: "number",
                    length: 4,
                    default: [-180, -85.051129, 180, 85.051129]
                },
                scheme: {
                    type: "enum",
                    values: {
                        xyz: {},
                        tms: {}
                    },
                    default: "xyz"
                },
                minzoom: {
                    type: "number",
                    default: 0
                },
                maxzoom: {
                    type: "number",
                    default: 22
                },
                attribution: {
                    type: "string"
                },
                "*": {
                    type: "*"
                }
            },
            source_raster: {
                type: {
                    required: !0,
                    type: "enum",
                    values: {
                        raster: {}
                    }
                },
                url: {
                    type: "string"
                },
                tiles: {
                    type: "array",
                    value: "string"
                },
                bounds: {
                    type: "array",
                    value: "number",
                    length: 4,
                    default: [-180, -85.051129, 180, 85.051129]
                },
                minzoom: {
                    type: "number",
                    default: 0
                },
                maxzoom: {
                    type: "number",
                    default: 22
                },
                tileSize: {
                    type: "number",
                    default: 512,
                    units: "pixels"
                },
                scheme: {
                    type: "enum",
                    values: {
                        xyz: {},
                        tms: {}
                    },
                    default: "xyz"
                },
                attribution: {
                    type: "string"
                },
                "*": {
                    type: "*"
                }
            },
            source_raster_dem: {
                type: {
                    required: !0,
                    type: "enum",
                    values: {
                        "raster-dem": {}
                    }
                },
                url: {
                    type: "string"
                },
                tiles: {
                    type: "array",
                    value: "string"
                },
                bounds: {
                    type: "array",
                    value: "number",
                    length: 4,
                    default: [-180, -85.051129, 180, 85.051129]
                },
                minzoom: {
                    type: "number",
                    default: 0
                },
                maxzoom: {
                    type: "number",
                    default: 22
                },
                tileSize: {
                    type: "number",
                    default: 512,
                    units: "pixels"
                },
                attribution: {
                    type: "string"
                },
                encoding: {
                    type: "enum",
                    values: {
                        terrarium: {},
                        mapbox: {}
                    },
                    default: "mapbox"
                },
                "*": {
                    type: "*"
                }
            },
            source_geojson: {
                type: {
                    required: !0,
                    type: "enum",
                    values: {
                        geojson: {}
                    }
                },
                data: {
                    type: "*"
                },
                maxzoom: {
                    type: "number",
                    default: 18
                },
                attribution: {
                    type: "string"
                },
                buffer: {
                    type: "number",
                    default: 128,
                    maximum: 512,
                    minimum: 0
                },
                tolerance: {
                    type: "number",
                    default: .375
                },
                cluster: {
                    type: "boolean",
                    default: !1
                },
                clusterRadius: {
                    type: "number",
                    default: 50,
                    minimum: 0
                },
                clusterMaxZoom: {
                    type: "number"
                },
                lineMetrics: {
                    type: "boolean",
                    default: !1
                },
                generateId: {
                    type: "boolean",
                    default: !1
                }
            },
            source_video: {
                type: {
                    required: !0,
                    type: "enum",
                    values: {
                        video: {}
                    }
                },
                urls: {
                    required: !0,
                    type: "array",
                    value: "string"
                },
                coordinates: {
                    required: !0,
                    type: "array",
                    length: 4,
                    value: {
                        type: "array",
                        length: 2,
                        value: "number"
                    }
                }
            },
            source_image: {
                type: {
                    required: !0,
                    type: "enum",
                    values: {
                        image: {}
                    }
                },
                url: {
                    required: !0,
                    type: "string"
                },
                coordinates: {
                    required: !0,
                    type: "array",
                    length: 4,
                    value: {
                        type: "array",
                        length: 2,
                        value: "number"
                    }
                }
            },
            layer: {
                id: {
                    type: "string",
                    required: !0
                },
                type: {
                    type: "enum",
                    values: {
                        fill: {},
                        line: {},
                        symbol: {},
                        circle: {},
                        heatmap: {},
                        "fill-extrusion": {},
                        raster: {},
                        hillshade: {},
                        background: {}
                    },
                    required: !0
                },
                metadata: {
                    type: "*"
                },
                source: {
                    type: "string"
                },
                "source-layer": {
                    type: "string"
                },
                minzoom: {
                    type: "number",
                    minimum: 0,
                    maximum: 24
                },
                maxzoom: {
                    type: "number",
                    minimum: 0,
                    maximum: 24
                },
                filter: {
                    type: "filter"
                },
                layout: {
                    type: "layout"
                },
                paint: {
                    type: "paint"
                }
            },
            layout: ["layout_fill", "layout_line", "layout_circle", "layout_heatmap", "layout_fill-extrusion", "layout_symbol", "layout_raster", "layout_hillshade", "layout_background"],
            layout_background: {
                visibility: {
                    type: "enum",
                    values: {
                        visible: {},
                        none: {}
                    },
                    default: "visible",
                    "property-type": "constant"
                }
            },
            layout_fill: {
                visibility: {
                    type: "enum",
                    values: {
                        visible: {},
                        none: {}
                    },
                    default: "visible",
                    "property-type": "constant"
                }
            },
            layout_circle: {
                visibility: {
                    type: "enum",
                    values: {
                        visible: {},
                        none: {}
                    },
                    default: "visible",
                    "property-type": "constant"
                }
            },
            layout_heatmap: {
                visibility: {
                    type: "enum",
                    values: {
                        visible: {},
                        none: {}
                    },
                    default: "visible",
                    "property-type": "constant"
                }
            },
            layout_line: {
                "line-cap": {
                    type: "enum",
                    values: {
                        butt: {},
                        round: {},
                        square: {}
                    },
                    default: "butt",
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "line-join": {
                    type: "enum",
                    values: {
                        bevel: {},
                        round: {},
                        miter: {}
                    },
                    default: "miter",
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "line-miter-limit": {
                    type: "number",
                    default: 2,
                    requires: [{
                        "line-join": "miter"
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "line-round-limit": {
                    type: "number",
                    default: 1.05,
                    requires: [{
                        "line-join": "round"
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                visibility: {
                    type: "enum",
                    values: {
                        visible: {},
                        none: {}
                    },
                    default: "visible",
                    "property-type": "constant"
                }
            },
            layout_symbol: {
                "symbol-placement": {
                    type: "enum",
                    values: {
                        point: {},
                        line: {},
                        "line-center": {}
                    },
                    default: "point",
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "symbol-spacing": {
                    type: "number",
                    default: 250,
                    minimum: 1,
                    units: "pixels",
                    requires: [{
                        "symbol-placement": "line"
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "symbol-avoid-edges": {
                    type: "boolean",
                    default: !1,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "symbol-z-order": {
                    type: "enum",
                    values: {
                        "viewport-y": {},
                        source: {}
                    },
                    default: "viewport-y",
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-allow-overlap": {
                    type: "boolean",
                    default: !1,
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-ignore-placement": {
                    type: "boolean",
                    default: !1,
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-optional": {
                    type: "boolean",
                    default: !1,
                    requires: ["icon-image", "text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-rotation-alignment": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {},
                        auto: {}
                    },
                    default: "auto",
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-size": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    units: "factor of the original icon size",
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "icon-text-fit": {
                    type: "enum",
                    values: {
                        none: {},
                        width: {},
                        height: {},
                        both: {}
                    },
                    default: "none",
                    requires: ["icon-image", "text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-text-fit-padding": {
                    type: "array",
                    value: "number",
                    length: 4,
                    default: [0, 0, 0, 0],
                    units: "pixels",
                    requires: ["icon-image", "text-field", {
                        "icon-text-fit": ["both", "width", "height"]
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-image": {
                    type: "string",
                    tokens: !0,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "icon-rotate": {
                    type: "number",
                    default: 0,
                    period: 360,
                    units: "degrees",
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "icon-padding": {
                    type: "number",
                    default: 2,
                    minimum: 0,
                    units: "pixels",
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-keep-upright": {
                    type: "boolean",
                    default: !1,
                    requires: ["icon-image", {
                        "icon-rotation-alignment": "map"
                    }, {
                        "symbol-placement": ["line", "line-center"]
                    }],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-offset": {
                    type: "array",
                    value: "number",
                    length: 2,
                    default: [0, 0],
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "icon-anchor": {
                    type: "enum",
                    values: {
                        center: {},
                        left: {},
                        right: {},
                        top: {},
                        bottom: {},
                        "top-left": {},
                        "top-right": {},
                        "bottom-left": {},
                        "bottom-right": {}
                    },
                    default: "center",
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "icon-pitch-alignment": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {},
                        auto: {}
                    },
                    default: "auto",
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-pitch-alignment": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {},
                        auto: {}
                    },
                    default: "auto",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-rotation-alignment": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {},
                        auto: {}
                    },
                    default: "auto",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-field": {
                    type: "formatted",
                    default: "",
                    tokens: !0,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-font": {
                    type: "array",
                    value: "string",
                    default: ["Open Sans Regular", "Arial Unicode MS Regular"],
                    requires: ["text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-size": {
                    type: "number",
                    default: 16,
                    minimum: 0,
                    units: "pixels",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-max-width": {
                    type: "number",
                    default: 10,
                    minimum: 0,
                    units: "ems",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-line-height": {
                    type: "number",
                    default: 1.2,
                    units: "ems",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-letter-spacing": {
                    type: "number",
                    default: 0,
                    units: "ems",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-justify": {
                    type: "enum",
                    values: {
                        left: {},
                        center: {},
                        right: {}
                    },
                    default: "center",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-anchor": {
                    type: "enum",
                    values: {
                        center: {},
                        left: {},
                        right: {},
                        top: {},
                        bottom: {},
                        "top-left": {},
                        "top-right": {},
                        "bottom-left": {},
                        "bottom-right": {}
                    },
                    default: "center",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-max-angle": {
                    type: "number",
                    default: 45,
                    units: "degrees",
                    requires: ["text-field", {
                        "symbol-placement": ["line", "line-center"]
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-rotate": {
                    type: "number",
                    default: 0,
                    period: 360,
                    units: "degrees",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-padding": {
                    type: "number",
                    default: 2,
                    minimum: 0,
                    units: "pixels",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-keep-upright": {
                    type: "boolean",
                    default: !0,
                    requires: ["text-field", {
                        "text-rotation-alignment": "map"
                    }, {
                        "symbol-placement": ["line", "line-center"]
                    }],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-transform": {
                    type: "enum",
                    values: {
                        none: {},
                        uppercase: {},
                        lowercase: {}
                    },
                    default: "none",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-offset": {
                    type: "array",
                    value: "number",
                    units: "ems",
                    length: 2,
                    default: [0, 0],
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "data-driven"
                },
                "text-allow-overlap": {
                    type: "boolean",
                    default: !1,
                    requires: ["text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-ignore-placement": {
                    type: "boolean",
                    default: !1,
                    requires: ["text-field"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-optional": {
                    type: "boolean",
                    default: !1,
                    requires: ["text-field", "icon-image"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                visibility: {
                    type: "enum",
                    values: {
                        visible: {},
                        none: {}
                    },
                    default: "visible",
                    "property-type": "constant"
                }
            },
            layout_raster: {
                visibility: {
                    type: "enum",
                    values: {
                        visible: {},
                        none: {}
                    },
                    default: "visible",
                    "property-type": "constant"
                }
            },
            layout_hillshade: {
                visibility: {
                    type: "enum",
                    values: {
                        visible: {},
                        none: {}
                    },
                    default: "visible",
                    "property-type": "constant"
                }
            },
            filter: {
                type: "array",
                value: "*"
            },
            filter_operator: {
                type: "enum",
                values: {
                    "==": {},
                    "!=": {},
                    ">": {},
                    ">=": {},
                    "<": {},
                    "<=": {},
                    in: {},
                    "!in": {},
                    all: {},
                    any: {},
                    none: {},
                    has: {},
                    "!has": {}
                }
            },
            geometry_type: {
                type: "enum",
                values: {
                    Point: {},
                    LineString: {},
                    Polygon: {}
                }
            },
            function_stop: {
                type: "array",
                minimum: 0,
                maximum: 22,
                value: ["number", "color"],
                length: 2
            },
            expression: {
                type: "array",
                value: "*",
                minimum: 1
            },
            expression_name: {
                type: "enum",
                values: {
                    let: {
                        group: "Variable binding"
                    },
                    var: {
                        group: "Variable binding"
                    },
                    literal: {
                        group: "Types"
                    },
                    array: {
                        group: "Types"
                    },
                    at: {
                        group: "Lookup"
                    },
                    case: {
                        group: "Decision"
                    },
                    match: {
                        group: "Decision"
                    },
                    coalesce: {
                        group: "Decision"
                    },
                    step: {
                        group: "Ramps, scales, curves"
                    },
                    interpolate: {
                        group: "Ramps, scales, curves"
                    },
                    "interpolate-hcl": {
                        group: "Ramps, scales, curves"
                    },
                    "interpolate-lab": {
                        group: "Ramps, scales, curves"
                    },
                    ln2: {
                        group: "Math"
                    },
                    pi: {
                        group: "Math"
                    },
                    e: {
                        group: "Math"
                    },
                    typeof: {
                        group: "Types"
                    },
                    string: {
                        group: "Types"
                    },
                    number: {
                        group: "Types"
                    },
                    boolean: {
                        group: "Types"
                    },
                    object: {
                        group: "Types"
                    },
                    collator: {
                        group: "Types"
                    },
                    format: {
                        group: "Types"
                    },
                    "to-string": {
                        group: "Types"
                    },
                    "to-number": {
                        group: "Types"
                    },
                    "to-boolean": {
                        group: "Types"
                    },
                    "to-rgba": {
                        group: "Color"
                    },
                    "to-color": {
                        group: "Types"
                    },
                    rgb: {
                        group: "Color"
                    },
                    rgba: {
                        group: "Color"
                    },
                    get: {
                        group: "Lookup"
                    },
                    has: {
                        group: "Lookup"
                    },
                    length: {
                        group: "Lookup"
                    },
                    properties: {
                        group: "Feature data"
                    },
                    "feature-state": {
                        group: "Feature data"
                    },
                    "geometry-type": {
                        group: "Feature data"
                    },
                    id: {
                        group: "Feature data"
                    },
                    zoom: {
                        group: "Zoom"
                    },
                    "heatmap-density": {
                        group: "Heatmap"
                    },
                    "line-progress": {
                        group: "Heatmap"
                    },
                    "+": {
                        group: "Math"
                    },
                    "*": {
                        group: "Math"
                    },
                    "-": {
                        group: "Math"
                    },
                    "/": {
                        group: "Math"
                    },
                    "%": {
                        group: "Math"
                    },
                    "^": {
                        group: "Math"
                    },
                    sqrt: {
                        group: "Math"
                    },
                    log10: {
                        group: "Math"
                    },
                    ln: {
                        group: "Math"
                    },
                    log2: {
                        group: "Math"
                    },
                    sin: {
                        group: "Math"
                    },
                    cos: {
                        group: "Math"
                    },
                    tan: {
                        group: "Math"
                    },
                    asin: {
                        group: "Math"
                    },
                    acos: {
                        group: "Math"
                    },
                    atan: {
                        group: "Math"
                    },
                    min: {
                        group: "Math"
                    },
                    max: {
                        group: "Math"
                    },
                    round: {
                        group: "Math"
                    },
                    abs: {
                        group: "Math"
                    },
                    ceil: {
                        group: "Math"
                    },
                    floor: {
                        group: "Math"
                    },
                    "==": {
                        group: "Decision"
                    },
                    "!=": {
                        group: "Decision"
                    },
                    ">": {
                        group: "Decision"
                    },
                    "<": {
                        group: "Decision"
                    },
                    ">=": {
                        group: "Decision"
                    },
                    "<=": {
                        group: "Decision"
                    },
                    all: {
                        group: "Decision"
                    },
                    any: {
                        group: "Decision"
                    },
                    "!": {
                        group: "Decision"
                    },
                    "is-supported-script": {
                        group: "String"
                    },
                    upcase: {
                        group: "String"
                    },
                    downcase: {
                        group: "String"
                    },
                    concat: {
                        group: "String"
                    },
                    "resolved-locale": {
                        group: "String"
                    }
                }
            },
            light: {
                anchor: {
                    type: "enum",
                    default: "viewport",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    "property-type": "data-constant",
                    transition: !1,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    }
                },
                position: {
                    type: "array",
                    default: [1.15, 210, 30],
                    length: 3,
                    value: "number",
                    "property-type": "data-constant",
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    }
                },
                color: {
                    type: "color",
                    "property-type": "data-constant",
                    default: "#ffffff",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    transition: !0
                },
                intensity: {
                    type: "number",
                    "property-type": "data-constant",
                    default: .5,
                    minimum: 0,
                    maximum: 1,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    transition: !0
                }
            },
            paint: ["paint_fill", "paint_line", "paint_circle", "paint_heatmap", "paint_fill-extrusion", "paint_symbol", "paint_raster", "paint_hillshade", "paint_background"],
            paint_fill: {
                "fill-antialias": {
                    type: "boolean",
                    default: !0,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "fill-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "fill-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    requires: [{
                        "!": "fill-pattern"
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "fill-outline-color": {
                    type: "color",
                    transition: !0,
                    requires: [{
                        "!": "fill-pattern"
                    }, {
                        "fill-antialias": !0
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "fill-translate": {
                    type: "array",
                    value: "number",
                    length: 2,
                    default: [0, 0],
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "fill-translate-anchor": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    default: "map",
                    requires: ["fill-translate"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "fill-pattern": {
                    type: "string",
                    transition: !0,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "cross-faded-data-driven"
                }
            },
            paint_line: {
                "line-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "line-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    requires: [{
                        "!": "line-pattern"
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "line-translate": {
                    type: "array",
                    value: "number",
                    length: 2,
                    default: [0, 0],
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "line-translate-anchor": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    default: "map",
                    requires: ["line-translate"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "line-width": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "line-gap-width": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "line-offset": {
                    type: "number",
                    default: 0,
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "line-blur": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "line-dasharray": {
                    type: "array",
                    value: "number",
                    minimum: 0,
                    transition: !0,
                    units: "line widths",
                    requires: [{
                        "!": "line-pattern"
                    }],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "cross-faded"
                },
                "line-pattern": {
                    type: "string",
                    transition: !0,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "cross-faded-data-driven"
                },
                "line-gradient": {
                    type: "color",
                    transition: !1,
                    requires: [{
                        "!": "line-dasharray"
                    }, {
                        "!": "line-pattern"
                    }, {
                        source: "geojson",
                        has: {
                            lineMetrics: !0
                        }
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["line-progress"]
                    },
                    "property-type": "color-ramp"
                }
            },
            paint_circle: {
                "circle-radius": {
                    type: "number",
                    default: 5,
                    minimum: 0,
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "circle-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "circle-blur": {
                    type: "number",
                    default: 0,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "circle-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "circle-translate": {
                    type: "array",
                    value: "number",
                    length: 2,
                    default: [0, 0],
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "circle-translate-anchor": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    default: "map",
                    requires: ["circle-translate"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "circle-pitch-scale": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    default: "map",
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "circle-pitch-alignment": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    default: "viewport",
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "circle-stroke-width": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "circle-stroke-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "circle-stroke-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                }
            },
            paint_heatmap: {
                "heatmap-radius": {
                    type: "number",
                    default: 30,
                    minimum: 1,
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "heatmap-weight": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    transition: !1,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "heatmap-intensity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "heatmap-color": {
                    type: "color",
                    default: ["interpolate", ["linear"], ["heatmap-density"], 0, "rgba(0, 0, 255, 0)", .1, "royalblue", .3, "cyan", .5, "lime", .7, "yellow", 1, "red"],
                    transition: !1,
                    expression: {
                        interpolated: !0,
                        parameters: ["heatmap-density"]
                    },
                    "property-type": "color-ramp"
                },
                "heatmap-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                }
            },
            paint_symbol: {
                "icon-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "icon-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "icon-halo-color": {
                    type: "color",
                    default: "rgba(0, 0, 0, 0)",
                    transition: !0,
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "icon-halo-width": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    transition: !0,
                    units: "pixels",
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "icon-halo-blur": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    transition: !0,
                    units: "pixels",
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "icon-translate": {
                    type: "array",
                    value: "number",
                    length: 2,
                    default: [0, 0],
                    transition: !0,
                    units: "pixels",
                    requires: ["icon-image"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "icon-translate-anchor": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    default: "map",
                    requires: ["icon-image", "icon-translate"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "text-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "text-halo-color": {
                    type: "color",
                    default: "rgba(0, 0, 0, 0)",
                    transition: !0,
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "text-halo-width": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    transition: !0,
                    units: "pixels",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "text-halo-blur": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    transition: !0,
                    units: "pixels",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "text-translate": {
                    type: "array",
                    value: "number",
                    length: 2,
                    default: [0, 0],
                    transition: !0,
                    units: "pixels",
                    requires: ["text-field"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "text-translate-anchor": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    default: "map",
                    requires: ["text-field", "text-translate"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                }
            },
            paint_raster: {
                "raster-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "raster-hue-rotate": {
                    type: "number",
                    default: 0,
                    period: 360,
                    transition: !0,
                    units: "degrees",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "raster-brightness-min": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "raster-brightness-max": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "raster-saturation": {
                    type: "number",
                    default: 0,
                    minimum: -1,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "raster-contrast": {
                    type: "number",
                    default: 0,
                    minimum: -1,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "raster-resampling": {
                    type: "enum",
                    values: {
                        linear: {},
                        nearest: {}
                    },
                    default: "linear",
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "raster-fade-duration": {
                    type: "number",
                    default: 300,
                    minimum: 0,
                    transition: !1,
                    units: "milliseconds",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                }
            },
            paint_hillshade: {
                "hillshade-illumination-direction": {
                    type: "number",
                    default: 335,
                    minimum: 0,
                    maximum: 359,
                    transition: !1,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "hillshade-illumination-anchor": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    default: "viewport",
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "hillshade-exaggeration": {
                    type: "number",
                    default: .5,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "hillshade-shadow-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "hillshade-highlight-color": {
                    type: "color",
                    default: "#FFFFFF",
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "hillshade-accent-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                }
            },
            paint_background: {
                "background-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    requires: [{
                        "!": "background-pattern"
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "background-pattern": {
                    type: "string",
                    transition: !0,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "cross-faded"
                },
                "background-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                }
            },
            transition: {
                duration: {
                    type: "number",
                    default: 300,
                    minimum: 0,
                    units: "milliseconds"
                },
                delay: {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    units: "milliseconds"
                }
            },
            "layout_fill-extrusion": {
                visibility: {
                    type: "enum",
                    values: {
                        visible: {},
                        none: {}
                    },
                    default: "visible",
                    "property-type": "constant"
                }
            },
            function: {
                expression: {
                    type: "expression"
                },
                stops: {
                    type: "array",
                    value: "function_stop"
                },
                base: {
                    type: "number",
                    default: 1,
                    minimum: 0
                },
                property: {
                    type: "string",
                    default: "$zoom"
                },
                type: {
                    type: "enum",
                    values: {
                        identity: {},
                        exponential: {},
                        interval: {},
                        categorical: {}
                    },
                    default: "exponential"
                },
                colorSpace: {
                    type: "enum",
                    values: {
                        rgb: {},
                        lab: {},
                        hcl: {}
                    },
                    default: "rgb"
                },
                default: {
                    type: "*",
                    required: !1
                }
            },
            "paint_fill-extrusion": {
                "fill-extrusion-opacity": {
                    type: "number",
                    default: 1,
                    minimum: 0,
                    maximum: 1,
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "fill-extrusion-color": {
                    type: "color",
                    default: "#000000",
                    transition: !0,
                    requires: [{
                        "!": "fill-extrusion-pattern"
                    }],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "fill-extrusion-translate": {
                    type: "array",
                    value: "number",
                    length: 2,
                    default: [0, 0],
                    transition: !0,
                    units: "pixels",
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "fill-extrusion-translate-anchor": {
                    type: "enum",
                    values: {
                        map: {},
                        viewport: {}
                    },
                    default: "map",
                    requires: ["fill-extrusion-translate"],
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                },
                "fill-extrusion-pattern": {
                    type: "string",
                    transition: !0,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom", "feature"]
                    },
                    "property-type": "cross-faded-data-driven"
                },
                "fill-extrusion-height": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    units: "meters",
                    transition: !0,
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "fill-extrusion-base": {
                    type: "number",
                    default: 0,
                    minimum: 0,
                    units: "meters",
                    transition: !0,
                    requires: ["fill-extrusion-height"],
                    expression: {
                        interpolated: !0,
                        parameters: ["zoom", "feature", "feature-state"]
                    },
                    "property-type": "data-driven"
                },
                "fill-extrusion-vertical-gradient": {
                    type: "boolean",
                    default: !0,
                    transition: !1,
                    expression: {
                        interpolated: !1,
                        parameters: ["zoom"]
                    },
                    "property-type": "data-constant"
                }
            },
            "property-type": {
                "data-driven": {
                    type: "property-type"
                },
                "cross-faded": {
                    type: "property-type"
                },
                "cross-faded-data-driven": {
                    type: "property-type"
                },
                "color-ramp": {
                    type: "property-type"
                },
                "data-constant": {
                    type: "property-type"
                },
                constant: {
                    type: "property-type"
                }
            }
        }
          , lt = function(t, e, i, r) {
            this.message = (t ? t + ": " : "") + i,
            r && (this.identifier = r),
            null != e && e.__line__ && (this.line = e.__line__)
        };
        function ut(t) {
            var e = t.key
              , i = t.value;
            return i ? [new lt(e,i,"constants have been deprecated as of v8")] : []
        }
        function ct(t) {
            for (var e = [], i = arguments.length - 1; i-- > 0; )
                e[i] = arguments[i + 1];
            for (var r = 0, n = e; r < n.length; r += 1) {
                var o = n[r];
                for (var a in o)
                    t[a] = o[a]
            }
            return t
        }
        function pt(t) {
            return t instanceof Number || t instanceof String || t instanceof Boolean ? t.valueOf() : t
        }
        function ht(t) {
            return Array.isArray(t) ? t.map(ht) : pt(t)
        }
        var dt = function(t) {
            function e(e, i) {
                t.call(this, i),
                this.message = i,
                this.key = e
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e
        }(Error)
          , ft = function(t, e) {
            void 0 === e && (e = []),
            this.parent = t,
            this.bindings = {};
            for (var i = 0, r = e; i < r.length; i += 1) {
                var n = r[i]
                  , o = n[0]
                  , a = n[1];
                this.bindings[o] = a
            }
        };
        ft.prototype.concat = function(t) {
            return new ft(this,t)
        }
        ,
        ft.prototype.get = function(t) {
            if (this.bindings[t])
                return this.bindings[t];
            if (this.parent)
                return this.parent.get(t);
            throw new Error(t + " not found in scope.")
        }
        ,
        ft.prototype.has = function(t) {
            return !!this.bindings[t] || !!this.parent && this.parent.has(t)
        }
        ;
        var mt = {
            kind: "null"
        }
          , yt = {
            kind: "number"
        }
          , gt = {
            kind: "string"
        }
          , _t = {
            kind: "boolean"
        }
          , vt = {
            kind: "color"
        }
          , xt = {
            kind: "object"
        }
          , bt = {
            kind: "value"
        }
          , wt = {
            kind: "collator"
        }
          , Tt = {
            kind: "formatted"
        };
        function St(t, e) {
            return {
                kind: "array",
                itemType: t,
                N: e
            }
        }
        function At(t) {
            if ("array" === t.kind) {
                var e = At(t.itemType);
                return "number" == typeof t.N ? "array<" + e + ", " + t.N + ">" : "value" === t.itemType.kind ? "array" : "array<" + e + ">"
            }
            return t.kind
        }
        var kt = [mt, yt, gt, _t, vt, Tt, xt, St(bt)];
        function Et(t, e) {
            if ("error" === e.kind)
                return null;
            if ("array" === t.kind) {
                if ("array" === e.kind && (0 === e.N && "value" === e.itemType.kind || !Et(t.itemType, e.itemType)) && ("number" != typeof t.N || t.N === e.N))
                    return null
            } else {
                if (t.kind === e.kind)
                    return null;
                if ("value" === t.kind)
                    for (var i = 0, r = kt; i < r.length; i += 1)
                        if (!Et(r[i], e))
                            return null
            }
            return "Expected " + At(t) + " but found " + At(e) + " instead."
        }
        var Ct = e(function(t, e) {
            var i = {
                transparent: [0, 0, 0, 0],
                aliceblue: [240, 248, 255, 1],
                antiquewhite: [250, 235, 215, 1],
                aqua: [0, 255, 255, 1],
                aquamarine: [127, 255, 212, 1],
                azure: [240, 255, 255, 1],
                beige: [245, 245, 220, 1],
                bisque: [255, 228, 196, 1],
                black: [0, 0, 0, 1],
                blanchedalmond: [255, 235, 205, 1],
                blue: [0, 0, 255, 1],
                blueviolet: [138, 43, 226, 1],
                brown: [165, 42, 42, 1],
                burlywood: [222, 184, 135, 1],
                cadetblue: [95, 158, 160, 1],
                chartreuse: [127, 255, 0, 1],
                chocolate: [210, 105, 30, 1],
                coral: [255, 127, 80, 1],
                cornflowerblue: [100, 149, 237, 1],
                cornsilk: [255, 248, 220, 1],
                crimson: [220, 20, 60, 1],
                cyan: [0, 255, 255, 1],
                darkblue: [0, 0, 139, 1],
                darkcyan: [0, 139, 139, 1],
                darkgoldenrod: [184, 134, 11, 1],
                darkgray: [169, 169, 169, 1],
                darkgreen: [0, 100, 0, 1],
                darkgrey: [169, 169, 169, 1],
                darkkhaki: [189, 183, 107, 1],
                darkmagenta: [139, 0, 139, 1],
                darkolivegreen: [85, 107, 47, 1],
                darkorange: [255, 140, 0, 1],
                darkorchid: [153, 50, 204, 1],
                darkred: [139, 0, 0, 1],
                darksalmon: [233, 150, 122, 1],
                darkseagreen: [143, 188, 143, 1],
                darkslateblue: [72, 61, 139, 1],
                darkslategray: [47, 79, 79, 1],
                darkslategrey: [47, 79, 79, 1],
                darkturquoise: [0, 206, 209, 1],
                darkviolet: [148, 0, 211, 1],
                deeppink: [255, 20, 147, 1],
                deepskyblue: [0, 191, 255, 1],
                dimgray: [105, 105, 105, 1],
                dimgrey: [105, 105, 105, 1],
                dodgerblue: [30, 144, 255, 1],
                firebrick: [178, 34, 34, 1],
                floralwhite: [255, 250, 240, 1],
                forestgreen: [34, 139, 34, 1],
                fuchsia: [255, 0, 255, 1],
                gainsboro: [220, 220, 220, 1],
                ghostwhite: [248, 248, 255, 1],
                gold: [255, 215, 0, 1],
                goldenrod: [218, 165, 32, 1],
                gray: [128, 128, 128, 1],
                green: [0, 128, 0, 1],
                greenyellow: [173, 255, 47, 1],
                grey: [128, 128, 128, 1],
                honeydew: [240, 255, 240, 1],
                hotpink: [255, 105, 180, 1],
                indianred: [205, 92, 92, 1],
                indigo: [75, 0, 130, 1],
                ivory: [255, 255, 240, 1],
                khaki: [240, 230, 140, 1],
                lavender: [230, 230, 250, 1],
                lavenderblush: [255, 240, 245, 1],
                lawngreen: [124, 252, 0, 1],
                lemonchiffon: [255, 250, 205, 1],
                lightblue: [173, 216, 230, 1],
                lightcoral: [240, 128, 128, 1],
                lightcyan: [224, 255, 255, 1],
                lightgoldenrodyellow: [250, 250, 210, 1],
                lightgray: [211, 211, 211, 1],
                lightgreen: [144, 238, 144, 1],
                lightgrey: [211, 211, 211, 1],
                lightpink: [255, 182, 193, 1],
                lightsalmon: [255, 160, 122, 1],
                lightseagreen: [32, 178, 170, 1],
                lightskyblue: [135, 206, 250, 1],
                lightslategray: [119, 136, 153, 1],
                lightslategrey: [119, 136, 153, 1],
                lightsteelblue: [176, 196, 222, 1],
                lightyellow: [255, 255, 224, 1],
                lime: [0, 255, 0, 1],
                limegreen: [50, 205, 50, 1],
                linen: [250, 240, 230, 1],
                magenta: [255, 0, 255, 1],
                maroon: [128, 0, 0, 1],
                mediumaquamarine: [102, 205, 170, 1],
                mediumblue: [0, 0, 205, 1],
                mediumorchid: [186, 85, 211, 1],
                mediumpurple: [147, 112, 219, 1],
                mediumseagreen: [60, 179, 113, 1],
                mediumslateblue: [123, 104, 238, 1],
                mediumspringgreen: [0, 250, 154, 1],
                mediumturquoise: [72, 209, 204, 1],
                mediumvioletred: [199, 21, 133, 1],
                midnightblue: [25, 25, 112, 1],
                mintcream: [245, 255, 250, 1],
                mistyrose: [255, 228, 225, 1],
                moccasin: [255, 228, 181, 1],
                navajowhite: [255, 222, 173, 1],
                navy: [0, 0, 128, 1],
                oldlace: [253, 245, 230, 1],
                olive: [128, 128, 0, 1],
                olivedrab: [107, 142, 35, 1],
                orange: [255, 165, 0, 1],
                orangered: [255, 69, 0, 1],
                orchid: [218, 112, 214, 1],
                palegoldenrod: [238, 232, 170, 1],
                palegreen: [152, 251, 152, 1],
                paleturquoise: [175, 238, 238, 1],
                palevioletred: [219, 112, 147, 1],
                papayawhip: [255, 239, 213, 1],
                peachpuff: [255, 218, 185, 1],
                peru: [205, 133, 63, 1],
                pink: [255, 192, 203, 1],
                plum: [221, 160, 221, 1],
                powderblue: [176, 224, 230, 1],
                purple: [128, 0, 128, 1],
                rebeccapurple: [102, 51, 153, 1],
                red: [255, 0, 0, 1],
                rosybrown: [188, 143, 143, 1],
                royalblue: [65, 105, 225, 1],
                saddlebrown: [139, 69, 19, 1],
                salmon: [250, 128, 114, 1],
                sandybrown: [244, 164, 96, 1],
                seagreen: [46, 139, 87, 1],
                seashell: [255, 245, 238, 1],
                sienna: [160, 82, 45, 1],
                silver: [192, 192, 192, 1],
                skyblue: [135, 206, 235, 1],
                slateblue: [106, 90, 205, 1],
                slategray: [112, 128, 144, 1],
                slategrey: [112, 128, 144, 1],
                snow: [255, 250, 250, 1],
                springgreen: [0, 255, 127, 1],
                steelblue: [70, 130, 180, 1],
                tan: [210, 180, 140, 1],
                teal: [0, 128, 128, 1],
                thistle: [216, 191, 216, 1],
                tomato: [255, 99, 71, 1],
                turquoise: [64, 224, 208, 1],
                violet: [238, 130, 238, 1],
                wheat: [245, 222, 179, 1],
                white: [255, 255, 255, 1],
                whitesmoke: [245, 245, 245, 1],
                yellow: [255, 255, 0, 1],
                yellowgreen: [154, 205, 50, 1]
            };
            function r(t) {
                return (t = Math.round(t)) < 0 ? 0 : t > 255 ? 255 : t
            }
            function n(t) {
                return t < 0 ? 0 : t > 1 ? 1 : t
            }
            function o(t) {
                return "%" === t[t.length - 1] ? r(parseFloat(t) / 100 * 255) : r(parseInt(t))
            }
            function a(t) {
                return "%" === t[t.length - 1] ? n(parseFloat(t) / 100) : n(parseFloat(t))
            }
            function s(t, e, i) {
                return i < 0 ? i += 1 : i > 1 && (i -= 1),
                6 * i < 1 ? t + (e - t) * i * 6 : 2 * i < 1 ? e : 3 * i < 2 ? t + (e - t) * (2 / 3 - i) * 6 : t
            }
            try {
                e.parseCSSColor = function(t) {
                    var e, n = t.replace(/ /g, "").toLowerCase();
                    if (n in i)
                        return i[n].slice();
                    if ("#" === n[0])
                        return 4 === n.length ? (e = parseInt(n.substr(1), 16)) >= 0 && e <= 4095 ? [(3840 & e) >> 4 | (3840 & e) >> 8, 240 & e | (240 & e) >> 4, 15 & e | (15 & e) << 4, 1] : null : 7 === n.length && (e = parseInt(n.substr(1), 16)) >= 0 && e <= 16777215 ? [(16711680 & e) >> 16, (65280 & e) >> 8, 255 & e, 1] : null;
                    var l = n.indexOf("(")
                      , u = n.indexOf(")");
                    if (-1 !== l && u + 1 === n.length) {
                        var c = n.substr(0, l)
                          , p = n.substr(l + 1, u - (l + 1)).split(",")
                          , h = 1;
                        switch (c) {
                        case "rgba":
                            if (4 !== p.length)
                                return null;
                            h = a(p.pop());
                        case "rgb":
                            return 3 !== p.length ? null : [o(p[0]), o(p[1]), o(p[2]), h];
                        case "hsla":
                            if (4 !== p.length)
                                return null;
                            h = a(p.pop());
                        case "hsl":
                            if (3 !== p.length)
                                return null;
                            var d = (parseFloat(p[0]) % 360 + 360) % 360 / 360
                              , f = a(p[1])
                              , m = a(p[2])
                              , y = m <= .5 ? m * (f + 1) : m + f - m * f
                              , g = 2 * m - y;
                            return [r(255 * s(g, y, d + 1 / 3)), r(255 * s(g, y, d)), r(255 * s(g, y, d - 1 / 3)), h];
                        default:
                            return null
                        }
                    }
                    return null
                }
            } catch (t) {}
        }).parseCSSColor
          , Pt = function(t, e, i, r) {
            void 0 === r && (r = 1),
            this.r = t,
            this.g = e,
            this.b = i,
            this.a = r
        };
        Pt.parse = function(t) {
            if (t) {
                if (t instanceof Pt)
                    return t;
                if ("string" == typeof t) {
                    var e = Ct(t);
                    if (e)
                        return new Pt(e[0] / 255 * e[3],e[1] / 255 * e[3],e[2] / 255 * e[3],e[3])
                }
            }
        }
        ,
        Pt.prototype.toString = function() {
            var t = this.toArray()
              , e = t[0]
              , i = t[1]
              , r = t[2]
              , n = t[3];
            return "rgba(" + Math.round(e) + "," + Math.round(i) + "," + Math.round(r) + "," + n + ")"
        }
        ,
        Pt.prototype.toArray = function() {
            var t = this.r
              , e = this.g
              , i = this.b
              , r = this.a;
            return 0 === r ? [0, 0, 0, 0] : [255 * t / r, 255 * e / r, 255 * i / r, r]
        }
        ,
        Pt.black = new Pt(0,0,0,1),
        Pt.white = new Pt(1,1,1,1),
        Pt.transparent = new Pt(0,0,0,0),
        Pt.red = new Pt(1,0,0,1);
        var Mt = function(t, e, i) {
            this.sensitivity = t ? e ? "variant" : "case" : e ? "accent" : "base",
            this.locale = i,
            this.collator = new Intl.Collator(this.locale ? this.locale : [],{
                sensitivity: this.sensitivity,
                usage: "search"
            })
        };
        Mt.prototype.compare = function(t, e) {
            return this.collator.compare(t, e)
        }
        ,
        Mt.prototype.resolvedLocale = function() {
            return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale
        }
        ;
        var It = function(t, e, i) {
            this.text = t,
            this.scale = e,
            this.fontStack = i
        }
          , zt = function(t) {
            this.sections = t
        };
        function Lt(t, e, i, r) {
            return "number" == typeof t && t >= 0 && t <= 255 && "number" == typeof e && e >= 0 && e <= 255 && "number" == typeof i && i >= 0 && i <= 255 ? void 0 === r || "number" == typeof r && r >= 0 && r <= 1 ? null : "Invalid rgba value [" + [t, e, i, r].join(", ") + "]: 'a' must be between 0 and 1." : "Invalid rgba value [" + ("number" == typeof r ? [t, e, i, r] : [t, e, i]).join(", ") + "]: 'r', 'g', and 'b' must be between 0 and 255."
        }
        function Dt(t) {
            if (null === t)
                return mt;
            if ("string" == typeof t)
                return gt;
            if ("boolean" == typeof t)
                return _t;
            if ("number" == typeof t)
                return yt;
            if (t instanceof Pt)
                return vt;
            if (t instanceof Mt)
                return wt;
            if (t instanceof zt)
                return Tt;
            if (Array.isArray(t)) {
                for (var e, i = t.length, r = 0, n = t; r < n.length; r += 1) {
                    var o = Dt(n[r]);
                    if (e) {
                        if (e === o)
                            continue;
                        e = bt;
                        break
                    }
                    e = o
                }
                return St(e || bt, i)
            }
            return xt
        }
        function Ot(t) {
            var e = typeof t;
            return null === t ? "" : "string" === e || "number" === e || "boolean" === e ? String(t) : t instanceof Pt || t instanceof zt ? t.toString() : JSON.stringify(t)
        }
        zt.fromString = function(t) {
            return new zt([new It(t,null,null)])
        }
        ,
        zt.prototype.toString = function() {
            return this.sections.map(function(t) {
                return t.text
            }).join("")
        }
        ,
        zt.prototype.serialize = function() {
            for (var t = ["format"], e = 0, i = this.sections; e < i.length; e += 1) {
                var r = i[e];
                t.push(r.text);
                var n = {};
                r.fontStack && (n["text-font"] = ["literal", r.fontStack.split(",")]),
                r.scale && (n["font-scale"] = r.scale),
                t.push(n)
            }
            return t
        }
        ;
        var Rt = function(t, e) {
            this.type = t,
            this.value = e
        };
        Rt.parse = function(t, e) {
            if (2 !== t.length)
                return e.error("'literal' expression requires exactly one argument, but found " + (t.length - 1) + " instead.");
            if (!function t(e) {
                if (null === e)
                    return !0;
                if ("string" == typeof e)
                    return !0;
                if ("boolean" == typeof e)
                    return !0;
                if ("number" == typeof e)
                    return !0;
                if (e instanceof Pt)
                    return !0;
                if (e instanceof Mt)
                    return !0;
                if (e instanceof zt)
                    return !0;
                if (Array.isArray(e)) {
                    for (var i = 0, r = e; i < r.length; i += 1)
                        if (!t(r[i]))
                            return !1;
                    return !0
                }
                if ("object" == typeof e) {
                    for (var n in e)
                        if (!t(e[n]))
                            return !1;
                    return !0
                }
                return !1
            }(t[1]))
                return e.error("invalid value");
            var i = t[1]
              , r = Dt(i)
              , n = e.expectedType;
            return "array" !== r.kind || 0 !== r.N || !n || "array" !== n.kind || "number" == typeof n.N && 0 !== n.N || (r = n),
            new Rt(r,i)
        }
        ,
        Rt.prototype.evaluate = function() {
            return this.value
        }
        ,
        Rt.prototype.eachChild = function() {}
        ,
        Rt.prototype.possibleOutputs = function() {
            return [this.value]
        }
        ,
        Rt.prototype.serialize = function() {
            return "array" === this.type.kind || "object" === this.type.kind ? ["literal", this.value] : this.value instanceof Pt ? ["rgba"].concat(this.value.toArray()) : this.value instanceof zt ? this.value.serialize() : this.value
        }
        ;
        var Ft = function(t) {
            this.name = "ExpressionEvaluationError",
            this.message = t
        };
        Ft.prototype.toJSON = function() {
            return this.message
        }
        ;
        var Bt = {
            string: gt,
            number: yt,
            boolean: _t,
            object: xt
        }
          , Nt = function(t, e) {
            this.type = t,
            this.args = e
        };
        Nt.parse = function(t, e) {
            if (t.length < 2)
                return e.error("Expected at least one argument.");
            var i, r = 1, n = t[0];
            if ("array" === n) {
                var o, a;
                if (t.length > 2) {
                    var s = t[1];
                    if ("string" != typeof s || !(s in Bt) || "object" === s)
                        return e.error('The item type argument of "array" must be one of string, number, boolean', 1);
                    o = Bt[s],
                    r++
                } else
                    o = bt;
                if (t.length > 3) {
                    if (null !== t[2] && ("number" != typeof t[2] || t[2] < 0 || t[2] !== Math.floor(t[2])))
                        return e.error('The length argument to "array" must be a positive integer literal', 2);
                    a = t[2],
                    r++
                }
                i = St(o, a)
            } else
                i = Bt[n];
            for (var l = []; r < t.length; r++) {
                var u = e.parse(t[r], r, bt);
                if (!u)
                    return null;
                l.push(u)
            }
            return new Nt(i,l)
        }
        ,
        Nt.prototype.evaluate = function(t) {
            for (var e = 0; e < this.args.length; e++) {
                var i = this.args[e].evaluate(t);
                if (!Et(this.type, Dt(i)))
                    return i;
                if (e === this.args.length - 1)
                    throw new Ft("Expected value to be of type " + At(this.type) + ", but found " + At(Dt(i)) + " instead.")
            }
            return null
        }
        ,
        Nt.prototype.eachChild = function(t) {
            this.args.forEach(t)
        }
        ,
        Nt.prototype.possibleOutputs = function() {
            return (t = []).concat.apply(t, this.args.map(function(t) {
                return t.possibleOutputs()
            }));
            var t
        }
        ,
        Nt.prototype.serialize = function() {
            var t = this.type
              , e = [t.kind];
            if ("array" === t.kind) {
                var i = t.itemType;
                if ("string" === i.kind || "number" === i.kind || "boolean" === i.kind) {
                    e.push(i.kind);
                    var r = t.N;
                    ("number" == typeof r || this.args.length > 1) && e.push(r)
                }
            }
            return e.concat(this.args.map(function(t) {
                return t.serialize()
            }))
        }
        ;
        var Ut = function(t) {
            this.type = Tt,
            this.sections = t
        };
        Ut.parse = function(t, e) {
            if (t.length < 3)
                return e.error("Expected at least two arguments.");
            if ((t.length - 1) % 2 != 0)
                return e.error("Expected an even number of arguments.");
            for (var i = [], r = 1; r < t.length - 1; r += 2) {
                var n = e.parse(t[r], 1, bt);
                if (!n)
                    return null;
                var o = n.type.kind;
                if ("string" !== o && "value" !== o && "null" !== o)
                    return e.error("Formatted text type must be 'string', 'value', or 'null'.");
                var a = t[r + 1];
                if ("object" != typeof a || Array.isArray(a))
                    return e.error("Format options argument must be an object.");
                var s = null;
                if (a["font-scale"] && !(s = e.parse(a["font-scale"], 1, yt)))
                    return null;
                var l = null;
                if (a["text-font"] && !(l = e.parse(a["text-font"], 1, St(gt))))
                    return null;
                i.push({
                    text: n,
                    scale: s,
                    font: l
                })
            }
            return new Ut(i)
        }
        ,
        Ut.prototype.evaluate = function(t) {
            return new zt(this.sections.map(function(e) {
                return new It(Ot(e.text.evaluate(t)),e.scale ? e.scale.evaluate(t) : null,e.font ? e.font.evaluate(t).join(",") : null)
            }))
        }
        ,
        Ut.prototype.eachChild = function(t) {
            for (var e = 0, i = this.sections; e < i.length; e += 1) {
                var r = i[e];
                t(r.text),
                r.scale && t(r.scale),
                r.font && t(r.font)
            }
        }
        ,
        Ut.prototype.possibleOutputs = function() {
            return [void 0]
        }
        ,
        Ut.prototype.serialize = function() {
            for (var t = ["format"], e = 0, i = this.sections; e < i.length; e += 1) {
                var r = i[e];
                t.push(r.text.serialize());
                var n = {};
                r.scale && (n["font-scale"] = r.scale.serialize()),
                r.font && (n["text-font"] = r.font.serialize()),
                t.push(n)
            }
            return t
        }
        ;
        var Vt = {
            "to-boolean": _t,
            "to-color": vt,
            "to-number": yt,
            "to-string": gt
        }
          , jt = function(t, e) {
            this.type = t,
            this.args = e
        };
        jt.parse = function(t, e) {
            if (t.length < 2)
                return e.error("Expected at least one argument.");
            var i = t[0];
            if (("to-boolean" === i || "to-string" === i) && 2 !== t.length)
                return e.error("Expected one argument.");
            for (var r = Vt[i], n = [], o = 1; o < t.length; o++) {
                var a = e.parse(t[o], o, bt);
                if (!a)
                    return null;
                n.push(a)
            }
            return new jt(r,n)
        }
        ,
        jt.prototype.evaluate = function(t) {
            if ("boolean" === this.type.kind)
                return Boolean(this.args[0].evaluate(t));
            if ("color" === this.type.kind) {
                for (var e, i, r = 0, n = this.args; r < n.length; r += 1) {
                    if (i = null,
                    (e = n[r].evaluate(t))instanceof Pt)
                        return e;
                    if ("string" == typeof e) {
                        var o = t.parseColor(e);
                        if (o)
                            return o
                    } else if (Array.isArray(e) && !(i = e.length < 3 || e.length > 4 ? "Invalid rbga value " + JSON.stringify(e) + ": expected an array containing either three or four numeric values." : Lt(e[0], e[1], e[2], e[3])))
                        return new Pt(e[0] / 255,e[1] / 255,e[2] / 255,e[3])
                }
                throw new Ft(i || "Could not parse color from value '" + ("string" == typeof e ? e : JSON.stringify(e)) + "'")
            }
            if ("number" === this.type.kind) {
                for (var a = null, s = 0, l = this.args; s < l.length; s += 1) {
                    if (null === (a = l[s].evaluate(t)))
                        return 0;
                    var u = Number(a);
                    if (!isNaN(u))
                        return u
                }
                throw new Ft("Could not convert " + JSON.stringify(a) + " to number.")
            }
            return "formatted" === this.type.kind ? zt.fromString(Ot(this.args[0].evaluate(t))) : Ot(this.args[0].evaluate(t))
        }
        ,
        jt.prototype.eachChild = function(t) {
            this.args.forEach(t)
        }
        ,
        jt.prototype.possibleOutputs = function() {
            return (t = []).concat.apply(t, this.args.map(function(t) {
                return t.possibleOutputs()
            }));
            var t
        }
        ,
        jt.prototype.serialize = function() {
            if ("formatted" === this.type.kind)
                return new Ut([{
                    text: this.args[0],
                    scale: null,
                    font: null
                }]).serialize();
            var t = ["to-" + this.type.kind];
            return this.eachChild(function(e) {
                t.push(e.serialize())
            }),
            t
        }
        ;
        var $t = ["Unknown", "Point", "LineString", "Polygon"]
          , qt = function() {
            this.globals = null,
            this.feature = null,
            this.featureState = null,
            this._parseColorCache = {}
        };
        qt.prototype.id = function() {
            return this.feature && "id"in this.feature ? this.feature.id : null
        }
        ,
        qt.prototype.geometryType = function() {
            return this.feature ? "number" == typeof this.feature.type ? $t[this.feature.type] : this.feature.type : null
        }
        ,
        qt.prototype.properties = function() {
            return this.feature && this.feature.properties || {}
        }
        ,
        qt.prototype.parseColor = function(t) {
            var e = this._parseColorCache[t];
            return e || (e = this._parseColorCache[t] = Pt.parse(t)),
            e
        }
        ;
        var Wt = function(t, e, i, r) {
            this.name = t,
            this.type = e,
            this._evaluate = i,
            this.args = r
        };
        Wt.prototype.evaluate = function(t) {
            return this._evaluate(t, this.args)
        }
        ,
        Wt.prototype.eachChild = function(t) {
            this.args.forEach(t)
        }
        ,
        Wt.prototype.possibleOutputs = function() {
            return [void 0]
        }
        ,
        Wt.prototype.serialize = function() {
            return [this.name].concat(this.args.map(function(t) {
                return t.serialize()
            }))
        }
        ,
        Wt.parse = function(t, e) {
            var i = t[0]
              , r = Wt.definitions[i];
            if (!r)
                return e.error('Unknown expression "' + i + '". If you wanted a literal array, use ["literal", [...]].', 0);
            for (var n = Array.isArray(r) ? r[0] : r.type, o = Array.isArray(r) ? [[r[1], r[2]]] : r.overloads, a = o.filter(function(e) {
                var i = e[0];
                return !Array.isArray(i) || i.length === t.length - 1
            }), s = null, l = 0, u = a; l < u.length; l += 1) {
                var c = u[l]
                  , p = c[0]
                  , h = c[1];
                s = new Kt(e.registry,e.path,null,e.scope);
                for (var d = [], f = !1, m = 1; m < t.length; m++) {
                    var y = t[m]
                      , g = Array.isArray(p) ? p[m - 1] : p.type
                      , _ = s.parse(y, 1 + d.length, g);
                    if (!_) {
                        f = !0;
                        break
                    }
                    d.push(_)
                }
                if (!f)
                    if (Array.isArray(p) && p.length !== d.length)
                        s.error("Expected " + p.length + " arguments, but found " + d.length + " instead.");
                    else {
                        for (var v = 0; v < d.length; v++) {
                            var x = Array.isArray(p) ? p[v] : p.type
                              , b = d[v];
                            s.concat(v + 1).checkSubtype(x, b.type)
                        }
                        if (0 === s.errors.length)
                            return new Wt(i,n,h,d)
                    }
            }
            if (1 === a.length)
                e.errors.push.apply(e.errors, s.errors);
            else {
                for (var w = (a.length ? a : o).map(function(t) {
                    var e;
                    return e = t[0],
                    Array.isArray(e) ? "(" + e.map(At).join(", ") + ")" : "(" + At(e.type) + "...)"
                }).join(" | "), T = [], S = 1; S < t.length; S++) {
                    var A = e.parse(t[S], 1 + T.length);
                    if (!A)
                        return null;
                    T.push(At(A.type))
                }
                e.error("Expected arguments of type " + w + ", but found (" + T.join(", ") + ") instead.")
            }
            return null
        }
        ,
        Wt.register = function(t, e) {
            for (var i in Wt.definitions = e,
            e)
                t[i] = Wt
        }
        ;
        var Ht = function(t, e, i) {
            this.type = wt,
            this.locale = i,
            this.caseSensitive = t,
            this.diacriticSensitive = e
        };
        function Xt(t) {
            if (t instanceof Wt) {
                if ("get" === t.name && 1 === t.args.length)
                    return !1;
                if ("feature-state" === t.name)
                    return !1;
                if ("has" === t.name && 1 === t.args.length)
                    return !1;
                if ("properties" === t.name || "geometry-type" === t.name || "id" === t.name)
                    return !1;
                if (/^filter-/.test(t.name))
                    return !1
            }
            var e = !0;
            return t.eachChild(function(t) {
                e && !Xt(t) && (e = !1)
            }),
            e
        }
        function Zt(t) {
            if (t instanceof Wt && "feature-state" === t.name)
                return !1;
            var e = !0;
            return t.eachChild(function(t) {
                e && !Zt(t) && (e = !1)
            }),
            e
        }
        function Gt(t, e) {
            if (t instanceof Wt && e.indexOf(t.name) >= 0)
                return !1;
            var i = !0;
            return t.eachChild(function(t) {
                i && !Gt(t, e) && (i = !1)
            }),
            i
        }
        Ht.parse = function(t, e) {
            if (2 !== t.length)
                return e.error("Expected one argument.");
            var i = t[1];
            if ("object" != typeof i || Array.isArray(i))
                return e.error("Collator options argument must be an object.");
            var r = e.parse(void 0 !== i["case-sensitive"] && i["case-sensitive"], 1, _t);
            if (!r)
                return null;
            var n = e.parse(void 0 !== i["diacritic-sensitive"] && i["diacritic-sensitive"], 1, _t);
            if (!n)
                return null;
            var o = null;
            return i.locale && !(o = e.parse(i.locale, 1, gt)) ? null : new Ht(r,n,o)
        }
        ,
        Ht.prototype.evaluate = function(t) {
            return new Mt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale ? this.locale.evaluate(t) : null)
        }
        ,
        Ht.prototype.eachChild = function(t) {
            t(this.caseSensitive),
            t(this.diacriticSensitive),
            this.locale && t(this.locale)
        }
        ,
        Ht.prototype.possibleOutputs = function() {
            return [void 0]
        }
        ,
        Ht.prototype.serialize = function() {
            var t = {};
            return t["case-sensitive"] = this.caseSensitive.serialize(),
            t["diacritic-sensitive"] = this.diacriticSensitive.serialize(),
            this.locale && (t.locale = this.locale.serialize()),
            ["collator", t]
        }
        ;
        var Yt = function(t, e) {
            this.type = e.type,
            this.name = t,
            this.boundExpression = e
        };
        Yt.parse = function(t, e) {
            if (2 !== t.length || "string" != typeof t[1])
                return e.error("'var' expression requires exactly one string literal argument.");
            var i = t[1];
            return e.scope.has(i) ? new Yt(i,e.scope.get(i)) : e.error('Unknown variable "' + i + '". Make sure "' + i + '" has been bound in an enclosing "let" expression before using it.', 1)
        }
        ,
        Yt.prototype.evaluate = function(t) {
            return this.boundExpression.evaluate(t)
        }
        ,
        Yt.prototype.eachChild = function() {}
        ,
        Yt.prototype.possibleOutputs = function() {
            return [void 0]
        }
        ,
        Yt.prototype.serialize = function() {
            return ["var", this.name]
        }
        ;
        var Kt = function(t, e, i, r, n) {
            void 0 === e && (e = []),
            void 0 === r && (r = new ft),
            void 0 === n && (n = []),
            this.registry = t,
            this.path = e,
            this.key = e.map(function(t) {
                return "[" + t + "]"
            }).join(""),
            this.scope = r,
            this.errors = n,
            this.expectedType = i
        };
        function Jt(t, e) {
            for (var i, r, n = 0, o = t.length - 1, a = 0; n <= o; ) {
                if (i = t[a = Math.floor((n + o) / 2)],
                r = t[a + 1],
                e === i || e > i && e < r)
                    return a;
                if (i < e)
                    n = a + 1;
                else {
                    if (!(i > e))
                        throw new Ft("Input is not a number.");
                    o = a - 1
                }
            }
            return Math.max(a - 1, 0)
        }
        Kt.prototype.parse = function(t, e, i, r, n) {
            return void 0 === n && (n = {}),
            e ? this.concat(e, i, r)._parse(t, n) : this._parse(t, n)
        }
        ,
        Kt.prototype._parse = function(t, e) {
            function i(t, e, i) {
                return "assert" === i ? new Nt(e,[t]) : "coerce" === i ? new jt(e,[t]) : t
            }
            if (null !== t && "string" != typeof t && "boolean" != typeof t && "number" != typeof t || (t = ["literal", t]),
            Array.isArray(t)) {
                if (0 === t.length)
                    return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
                var r = t[0];
                if ("string" != typeof r)
                    return this.error("Expression name must be a string, but found " + typeof r + ' instead. If you wanted a literal array, use ["literal", [...]].', 0),
                    null;
                var n = this.registry[r];
                if (n) {
                    var o = n.parse(t, this);
                    if (!o)
                        return null;
                    if (this.expectedType) {
                        var a = this.expectedType
                          , s = o.type;
                        if ("string" !== a.kind && "number" !== a.kind && "boolean" !== a.kind && "object" !== a.kind && "array" !== a.kind || "value" !== s.kind)
                            if ("color" !== a.kind && "formatted" !== a.kind || "value" !== s.kind && "string" !== s.kind) {
                                if (this.checkSubtype(a, s))
                                    return null
                            } else
                                o = i(o, a, e.typeAnnotation || "coerce");
                        else
                            o = i(o, a, e.typeAnnotation || "assert")
                    }
                    if (!(o instanceof Rt) && function t(e) {
                        if (e instanceof Yt)
                            return t(e.boundExpression);
                        if (e instanceof Wt && "error" === e.name)
                            return !1;
                        if (e instanceof Ht)
                            return !1;
                        var i = e instanceof jt || e instanceof Nt
                          , r = !0;
                        return e.eachChild(function(e) {
                            r = i ? r && t(e) : r && e instanceof Rt
                        }),
                        !!r && (Xt(e) && Gt(e, ["zoom", "heatmap-density", "line-progress", "is-supported-script"]))
                    }(o)) {
                        var l = new qt;
                        try {
                            o = new Rt(o.type,o.evaluate(l))
                        } catch (t) {
                            return this.error(t.message),
                            null
                        }
                    }
                    return o
                }
                return this.error('Unknown expression "' + r + '". If you wanted a literal array, use ["literal", [...]].', 0)
            }
            return void 0 === t ? this.error("'undefined' value invalid. Use null instead.") : "object" == typeof t ? this.error('Bare objects invalid. Use ["literal", {...}] instead.') : this.error("Expected an array, but found " + typeof t + " instead.")
        }
        ,
        Kt.prototype.concat = function(t, e, i) {
            var r = "number" == typeof t ? this.path.concat(t) : this.path
              , n = i ? this.scope.concat(i) : this.scope;
            return new Kt(this.registry,r,e || null,n,this.errors)
        }
        ,
        Kt.prototype.error = function(t) {
            for (var e = [], i = arguments.length - 1; i-- > 0; )
                e[i] = arguments[i + 1];
            var r = "" + this.key + e.map(function(t) {
                return "[" + t + "]"
            }).join("");
            this.errors.push(new dt(r,t))
        }
        ,
        Kt.prototype.checkSubtype = function(t, e) {
            var i = Et(t, e);
            return i && this.error(i),
            i
        }
        ;
        var Qt = function(t, e, i) {
            this.type = t,
            this.input = e,
            this.labels = [],
            this.outputs = [];
            for (var r = 0, n = i; r < n.length; r += 1) {
                var o = n[r]
                  , a = o[0]
                  , s = o[1];
                this.labels.push(a),
                this.outputs.push(s)
            }
        };
        function te(t, e, i) {
            return t * (1 - i) + e * i
        }
        Qt.parse = function(t, e) {
            var i = t[1]
              , r = t.slice(2);
            if (t.length - 1 < 4)
                return e.error("Expected at least 4 arguments, but found only " + (t.length - 1) + ".");
            if ((t.length - 1) % 2 != 0)
                return e.error("Expected an even number of arguments.");
            if (!(i = e.parse(i, 1, yt)))
                return null;
            var n = []
              , o = null;
            e.expectedType && "value" !== e.expectedType.kind && (o = e.expectedType),
            r.unshift(-1 / 0);
            for (var a = 0; a < r.length; a += 2) {
                var s = r[a]
                  , l = r[a + 1]
                  , u = a + 1
                  , c = a + 2;
                if ("number" != typeof s)
                    return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.', u);
                if (n.length && n[n.length - 1][0] >= s)
                    return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.', u);
                var p = e.parse(l, c, o);
                if (!p)
                    return null;
                o = o || p.type,
                n.push([s, p])
            }
            return new Qt(o,i,n)
        }
        ,
        Qt.prototype.evaluate = function(t) {
            var e = this.labels
              , i = this.outputs;
            if (1 === e.length)
                return i[0].evaluate(t);
            var r = this.input.evaluate(t);
            if (r <= e[0])
                return i[0].evaluate(t);
            var n = e.length;
            return r >= e[n - 1] ? i[n - 1].evaluate(t) : i[Jt(e, r)].evaluate(t)
        }
        ,
        Qt.prototype.eachChild = function(t) {
            t(this.input);
            for (var e = 0, i = this.outputs; e < i.length; e += 1)
                t(i[e])
        }
        ,
        Qt.prototype.possibleOutputs = function() {
            return (t = []).concat.apply(t, this.outputs.map(function(t) {
                return t.possibleOutputs()
            }));
            var t
        }
        ,
        Qt.prototype.serialize = function() {
            for (var t = ["step", this.input.serialize()], e = 0; e < this.labels.length; e++)
                e > 0 && t.push(this.labels[e]),
                t.push(this.outputs[e].serialize());
            return t
        }
        ;
        var ee = Object.freeze({
            number: te,
            color: function(t, e, i) {
                return new Pt(te(t.r, e.r, i),te(t.g, e.g, i),te(t.b, e.b, i),te(t.a, e.a, i))
            },
            array: function(t, e, i) {
                return t.map(function(t, r) {
                    return te(t, e[r], i)
                })
            }
        })
          , ie = .95047
          , re = 1
          , ne = 1.08883
          , oe = 4 / 29
          , ae = 6 / 29
          , se = 3 * ae * ae
          , le = ae * ae * ae
          , ue = Math.PI / 180
          , ce = 180 / Math.PI;
        function pe(t) {
            return t > le ? Math.pow(t, 1 / 3) : t / se + oe
        }
        function he(t) {
            return t > ae ? t * t * t : se * (t - oe)
        }
        function de(t) {
            return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055)
        }
        function fe(t) {
            return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4)
        }
        function me(t) {
            var e = fe(t.r)
              , i = fe(t.g)
              , r = fe(t.b)
              , n = pe((.4124564 * e + .3575761 * i + .1804375 * r) / ie)
              , o = pe((.2126729 * e + .7151522 * i + .072175 * r) / re);
            return {
                l: 116 * o - 16,
                a: 500 * (n - o),
                b: 200 * (o - pe((.0193339 * e + .119192 * i + .9503041 * r) / ne)),
                alpha: t.a
            }
        }
        function ye(t) {
            var e = (t.l + 16) / 116
              , i = isNaN(t.a) ? e : e + t.a / 500
              , r = isNaN(t.b) ? e : e - t.b / 200;
            return e = re * he(e),
            i = ie * he(i),
            r = ne * he(r),
            new Pt(de(3.2404542 * i - 1.5371385 * e - .4985314 * r),de(-.969266 * i + 1.8760108 * e + .041556 * r),de(.0556434 * i - .2040259 * e + 1.0572252 * r),t.alpha)
        }
        var ge = {
            forward: me,
            reverse: ye,
            interpolate: function(t, e, i) {
                return {
                    l: te(t.l, e.l, i),
                    a: te(t.a, e.a, i),
                    b: te(t.b, e.b, i),
                    alpha: te(t.alpha, e.alpha, i)
                }
            }
        }
          , _e = {
            forward: function(t) {
                var e = me(t)
                  , i = e.l
                  , r = e.a
                  , n = e.b
                  , o = Math.atan2(n, r) * ce;
                return {
                    h: o < 0 ? o + 360 : o,
                    c: Math.sqrt(r * r + n * n),
                    l: i,
                    alpha: t.a
                }
            },
            reverse: function(t) {
                var e = t.h * ue
                  , i = t.c;
                return ye({
                    l: t.l,
                    a: Math.cos(e) * i,
                    b: Math.sin(e) * i,
                    alpha: t.alpha
                })
            },
            interpolate: function(t, e, i) {
                return {
                    h: function(t, e, i) {
                        var r = e - t;
                        return t + i * (r > 180 || r < -180 ? r - 360 * Math.round(r / 360) : r)
                    }(t.h, e.h, i),
                    c: te(t.c, e.c, i),
                    l: te(t.l, e.l, i),
                    alpha: te(t.alpha, e.alpha, i)
                }
            }
        }
          , ve = Object.freeze({
            lab: ge,
            hcl: _e
        })
          , xe = function(t, e, i, r, n) {
            this.type = t,
            this.operator = e,
            this.interpolation = i,
            this.input = r,
            this.labels = [],
            this.outputs = [];
            for (var o = 0, a = n; o < a.length; o += 1) {
                var s = a[o]
                  , l = s[0]
                  , u = s[1];
                this.labels.push(l),
                this.outputs.push(u)
            }
        };
        function be(t, e, i, r) {
            var n = r - i
              , o = t - i;
            return 0 === n ? 0 : 1 === e ? o / n : (Math.pow(e, o) - 1) / (Math.pow(e, n) - 1)
        }
        xe.interpolationFactor = function(t, e, r, n) {
            var o = 0;
            if ("exponential" === t.name)
                o = be(e, t.base, r, n);
            else if ("linear" === t.name)
                o = be(e, 1, r, n);
            else if ("cubic-bezier" === t.name) {
                var a = t.controlPoints;
                o = new i(a[0],a[1],a[2],a[3]).solve(be(e, 1, r, n))
            }
            return o
        }
        ,
        xe.parse = function(t, e) {
            var i = t[0]
              , r = t[1]
              , n = t[2]
              , o = t.slice(3);
            if (!Array.isArray(r) || 0 === r.length)
                return e.error("Expected an interpolation type expression.", 1);
            if ("linear" === r[0])
                r = {
                    name: "linear"
                };
            else if ("exponential" === r[0]) {
                var a = r[1];
                if ("number" != typeof a)
                    return e.error("Exponential interpolation requires a numeric base.", 1, 1);
                r = {
                    name: "exponential",
                    base: a
                }
            } else {
                if ("cubic-bezier" !== r[0])
                    return e.error("Unknown interpolation type " + String(r[0]), 1, 0);
                var s = r.slice(1);
                if (4 !== s.length || s.some(function(t) {
                    return "number" != typeof t || t < 0 || t > 1
                }))
                    return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.", 1);
                r = {
                    name: "cubic-bezier",
                    controlPoints: s
                }
            }
            if (t.length - 1 < 4)
                return e.error("Expected at least 4 arguments, but found only " + (t.length - 1) + ".");
            if ((t.length - 1) % 2 != 0)
                return e.error("Expected an even number of arguments.");
            if (!(n = e.parse(n, 2, yt)))
                return null;
            var l = []
              , u = null;
            "interpolate-hcl" === i || "interpolate-lab" === i ? u = vt : e.expectedType && "value" !== e.expectedType.kind && (u = e.expectedType);
            for (var c = 0; c < o.length; c += 2) {
                var p = o[c]
                  , h = o[c + 1]
                  , d = c + 3
                  , f = c + 4;
                if ("number" != typeof p)
                    return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.', d);
                if (l.length && l[l.length - 1][0] >= p)
                    return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.', d);
                var m = e.parse(h, f, u);
                if (!m)
                    return null;
                u = u || m.type,
                l.push([p, m])
            }
            return "number" === u.kind || "color" === u.kind || "array" === u.kind && "number" === u.itemType.kind && "number" == typeof u.N ? new xe(u,i,r,n,l) : e.error("Type " + At(u) + " is not interpolatable.")
        }
        ,
        xe.prototype.evaluate = function(t) {
            var e = this.labels
              , i = this.outputs;
            if (1 === e.length)
                return i[0].evaluate(t);
            var r = this.input.evaluate(t);
            if (r <= e[0])
                return i[0].evaluate(t);
            var n = e.length;
            if (r >= e[n - 1])
                return i[n - 1].evaluate(t);
            var o = Jt(e, r)
              , a = e[o]
              , s = e[o + 1]
              , l = xe.interpolationFactor(this.interpolation, r, a, s)
              , u = i[o].evaluate(t)
              , c = i[o + 1].evaluate(t);
            return "interpolate" === this.operator ? ee[this.type.kind.toLowerCase()](u, c, l) : "interpolate-hcl" === this.operator ? _e.reverse(_e.interpolate(_e.forward(u), _e.forward(c), l)) : ge.reverse(ge.interpolate(ge.forward(u), ge.forward(c), l))
        }
        ,
        xe.prototype.eachChild = function(t) {
            t(this.input);
            for (var e = 0, i = this.outputs; e < i.length; e += 1)
                t(i[e])
        }
        ,
        xe.prototype.possibleOutputs = function() {
            return (t = []).concat.apply(t, this.outputs.map(function(t) {
                return t.possibleOutputs()
            }));
            var t
        }
        ,
        xe.prototype.serialize = function() {
            var t;
            t = "linear" === this.interpolation.name ? ["linear"] : "exponential" === this.interpolation.name ? 1 === this.interpolation.base ? ["linear"] : ["exponential", this.interpolation.base] : ["cubic-bezier"].concat(this.interpolation.controlPoints);
            for (var e = [this.operator, t, this.input.serialize()], i = 0; i < this.labels.length; i++)
                e.push(this.labels[i], this.outputs[i].serialize());
            return e
        }
        ;
        var we = function(t, e) {
            this.type = t,
            this.args = e
        };
        we.parse = function(t, e) {
            if (t.length < 2)
                return e.error("Expectected at least one argument.");
            var i = null
              , r = e.expectedType;
            r && "value" !== r.kind && (i = r);
            for (var n = [], o = 0, a = t.slice(1); o < a.length; o += 1) {
                var s = a[o]
                  , l = e.parse(s, 1 + n.length, i, void 0, {
                    typeAnnotation: "omit"
                });
                if (!l)
                    return null;
                i = i || l.type,
                n.push(l)
            }
            var u = r && n.some(function(t) {
                return Et(r, t.type)
            });
            return new we(u ? bt : i,n)
        }
        ,
        we.prototype.evaluate = function(t) {
            for (var e = null, i = 0, r = this.args; i < r.length && null === (e = r[i].evaluate(t)); i += 1)
                ;
            return e
        }
        ,
        we.prototype.eachChild = function(t) {
            this.args.forEach(t)
        }
        ,
        we.prototype.possibleOutputs = function() {
            return (t = []).concat.apply(t, this.args.map(function(t) {
                return t.possibleOutputs()
            }));
            var t
        }
        ,
        we.prototype.serialize = function() {
            var t = ["coalesce"];
            return this.eachChild(function(e) {
                t.push(e.serialize())
            }),
            t
        }
        ;
        var Te = function(t, e) {
            this.type = e.type,
            this.bindings = [].concat(t),
            this.result = e
        };
        Te.prototype.evaluate = function(t) {
            return this.result.evaluate(t)
        }
        ,
        Te.prototype.eachChild = function(t) {
            for (var e = 0, i = this.bindings; e < i.length; e += 1)
                t(i[e][1]);
            t(this.result)
        }
        ,
        Te.parse = function(t, e) {
            if (t.length < 4)
                return e.error("Expected at least 3 arguments, but found " + (t.length - 1) + " instead.");
            for (var i = [], r = 1; r < t.length - 1; r += 2) {
                var n = t[r];
                if ("string" != typeof n)
                    return e.error("Expected string, but found " + typeof n + " instead.", r);
                if (/[^a-zA-Z0-9_]/.test(n))
                    return e.error("Variable names must contain only alphanumeric characters or '_'.", r);
                var o = e.parse(t[r + 1], r + 1);
                if (!o)
                    return null;
                i.push([n, o])
            }
            var a = e.parse(t[t.length - 1], t.length - 1, e.expectedType, i);
            return a ? new Te(i,a) : null
        }
        ,
        Te.prototype.possibleOutputs = function() {
            return this.result.possibleOutputs()
        }
        ,
        Te.prototype.serialize = function() {
            for (var t = ["let"], e = 0, i = this.bindings; e < i.length; e += 1) {
                var r = i[e]
                  , n = r[0]
                  , o = r[1];
                t.push(n, o.serialize())
            }
            return t.push(this.result.serialize()),
            t
        }
        ;
        var Se = function(t, e, i) {
            this.type = t,
            this.index = e,
            this.input = i
        };
        Se.parse = function(t, e) {
            if (3 !== t.length)
                return e.error("Expected 2 arguments, but found " + (t.length - 1) + " instead.");
            var i = e.parse(t[1], 1, yt)
              , r = e.parse(t[2], 2, St(e.expectedType || bt));
            if (!i || !r)
                return null;
            var n = r.type;
            return new Se(n.itemType,i,r)
        }
        ,
        Se.prototype.evaluate = function(t) {
            var e = this.index.evaluate(t)
              , i = this.input.evaluate(t);
            if (e < 0)
                throw new Ft("Array index out of bounds: " + e + " < 0.");
            if (e >= i.length)
                throw new Ft("Array index out of bounds: " + e + " > " + (i.length - 1) + ".");
            if (e !== Math.floor(e))
                throw new Ft("Array index must be an integer, but found " + e + " instead.");
            return i[e]
        }
        ,
        Se.prototype.eachChild = function(t) {
            t(this.index),
            t(this.input)
        }
        ,
        Se.prototype.possibleOutputs = function() {
            return [void 0]
        }
        ,
        Se.prototype.serialize = function() {
            return ["at", this.index.serialize(), this.input.serialize()]
        }
        ;
        var Ae = function(t, e, i, r, n, o) {
            this.inputType = t,
            this.type = e,
            this.input = i,
            this.cases = r,
            this.outputs = n,
            this.otherwise = o
        };
        Ae.parse = function(t, e) {
            if (t.length < 5)
                return e.error("Expected at least 4 arguments, but found only " + (t.length - 1) + ".");
            if (t.length % 2 != 1)
                return e.error("Expected an even number of arguments.");
            var i, r;
            e.expectedType && "value" !== e.expectedType.kind && (r = e.expectedType);
            for (var n = {}, o = [], a = 2; a < t.length - 1; a += 2) {
                var s = t[a]
                  , l = t[a + 1];
                Array.isArray(s) || (s = [s]);
                var u = e.concat(a);
                if (0 === s.length)
                    return u.error("Expected at least one branch label.");
                for (var c = 0, p = s; c < p.length; c += 1) {
                    var h = p[c];
                    if ("number" != typeof h && "string" != typeof h)
                        return u.error("Branch labels must be numbers or strings.");
                    if ("number" == typeof h && Math.abs(h) > Number.MAX_SAFE_INTEGER)
                        return u.error("Branch labels must be integers no larger than " + Number.MAX_SAFE_INTEGER + ".");
                    if ("number" == typeof h && Math.floor(h) !== h)
                        return u.error("Numeric branch labels must be integer values.");
                    if (i) {
                        if (u.checkSubtype(i, Dt(h)))
                            return null
                    } else
                        i = Dt(h);
                    if (void 0 !== n[String(h)])
                        return u.error("Branch labels must be unique.");
                    n[String(h)] = o.length
                }
                var d = e.parse(l, a, r);
                if (!d)
                    return null;
                r = r || d.type,
                o.push(d)
            }
            var f = e.parse(t[1], 1, bt);
            if (!f)
                return null;
            var m = e.parse(t[t.length - 1], t.length - 1, r);
            return m ? "value" !== f.type.kind && e.concat(1).checkSubtype(i, f.type) ? null : new Ae(i,r,f,n,o,m) : null
        }
        ,
        Ae.prototype.evaluate = function(t) {
            var e = this.input.evaluate(t);
            return (Dt(e) === this.inputType && this.outputs[this.cases[e]] || this.otherwise).evaluate(t)
        }
        ,
        Ae.prototype.eachChild = function(t) {
            t(this.input),
            this.outputs.forEach(t),
            t(this.otherwise)
        }
        ,
        Ae.prototype.possibleOutputs = function() {
            return (t = []).concat.apply(t, this.outputs.map(function(t) {
                return t.possibleOutputs()
            })).concat(this.otherwise.possibleOutputs());
            var t
        }
        ,
        Ae.prototype.serialize = function() {
            for (var t = this, e = ["match", this.input.serialize()], i = [], r = {}, n = 0, o = Object.keys(this.cases).sort(); n < o.length; n += 1) {
                var a = o[n]
                  , s = r[t.cases[a]];
                void 0 === s ? (r[t.cases[a]] = i.length,
                i.push([t.cases[a], [a]])) : i[s][1].push(a)
            }
            for (var l = function(e) {
                return "number" === t.inputType.kind ? Number(e) : e
            }, u = 0, c = i; u < c.length; u += 1) {
                var p = c[u]
                  , h = p[0]
                  , d = p[1];
                1 === d.length ? e.push(l(d[0])) : e.push(d.map(l)),
                e.push(t.outputs[h].serialize())
            }
            return e.push(this.otherwise.serialize()),
            e
        }
        ;
        var ke = function(t, e, i) {
            this.type = t,
            this.branches = e,
            this.otherwise = i
        };
        function Ee(t, e) {
            return "==" === t || "!=" === t ? "boolean" === e.kind || "string" === e.kind || "number" === e.kind || "null" === e.kind || "value" === e.kind : "string" === e.kind || "number" === e.kind || "value" === e.kind
        }
        function Ce(t, e, i, r) {
            return 0 === r.compare(e, i)
        }
        function Pe(t, e, i) {
            var r = "==" !== t && "!=" !== t;
            return function() {
                function n(t, e, i) {
                    this.type = _t,
                    this.lhs = t,
                    this.rhs = e,
                    this.collator = i,
                    this.hasUntypedArgument = "value" === t.type.kind || "value" === e.type.kind
                }
                return n.parse = function(t, e) {
                    if (3 !== t.length && 4 !== t.length)
                        return e.error("Expected two or three arguments.");
                    var i = t[0]
                      , o = e.parse(t[1], 1, bt);
                    if (!o)
                        return null;
                    if (!Ee(i, o.type))
                        return e.concat(1).error('"' + i + "\" comparisons are not supported for type '" + At(o.type) + "'.");
                    var a = e.parse(t[2], 2, bt);
                    if (!a)
                        return null;
                    if (!Ee(i, a.type))
                        return e.concat(2).error('"' + i + "\" comparisons are not supported for type '" + At(a.type) + "'.");
                    if (o.type.kind !== a.type.kind && "value" !== o.type.kind && "value" !== a.type.kind)
                        return e.error("Cannot compare types '" + At(o.type) + "' and '" + At(a.type) + "'.");
                    r && ("value" === o.type.kind && "value" !== a.type.kind ? o = new Nt(a.type,[o]) : "value" !== o.type.kind && "value" === a.type.kind && (a = new Nt(o.type,[a])));
                    var s = null;
                    if (4 === t.length) {
                        if ("string" !== o.type.kind && "string" !== a.type.kind && "value" !== o.type.kind && "value" !== a.type.kind)
                            return e.error("Cannot use collator to compare non-string types.");
                        if (!(s = e.parse(t[3], 3, wt)))
                            return null
                    }
                    return new n(o,a,s)
                }
                ,
                n.prototype.evaluate = function(n) {
                    var o = this.lhs.evaluate(n)
                      , a = this.rhs.evaluate(n);
                    if (r && this.hasUntypedArgument) {
                        var s = Dt(o)
                          , l = Dt(a);
                        if (s.kind !== l.kind || "string" !== s.kind && "number" !== s.kind)
                            throw new Ft('Expected arguments for "' + t + '" to be (string, string) or (number, number), but found (' + s.kind + ", " + l.kind + ") instead.")
                    }
                    if (this.collator && !r && this.hasUntypedArgument) {
                        var u = Dt(o)
                          , c = Dt(a);
                        if ("string" !== u.kind || "string" !== c.kind)
                            return e(n, o, a)
                    }
                    return this.collator ? i(n, o, a, this.collator.evaluate(n)) : e(n, o, a)
                }
                ,
                n.prototype.eachChild = function(t) {
                    t(this.lhs),
                    t(this.rhs),
                    this.collator && t(this.collator)
                }
                ,
                n.prototype.possibleOutputs = function() {
                    return [!0, !1]
                }
                ,
                n.prototype.serialize = function() {
                    var e = [t];
                    return this.eachChild(function(t) {
                        e.push(t.serialize())
                    }),
                    e
                }
                ,
                n
            }()
        }
        ke.parse = function(t, e) {
            if (t.length < 4)
                return e.error("Expected at least 3 arguments, but found only " + (t.length - 1) + ".");
            if (t.length % 2 != 0)
                return e.error("Expected an odd number of arguments.");
            var i;
            e.expectedType && "value" !== e.expectedType.kind && (i = e.expectedType);
            for (var r = [], n = 1; n < t.length - 1; n += 2) {
                var o = e.parse(t[n], n, _t);
                if (!o)
                    return null;
                var a = e.parse(t[n + 1], n + 1, i);
                if (!a)
                    return null;
                r.push([o, a]),
                i = i || a.type
            }
            var s = e.parse(t[t.length - 1], t.length - 1, i);
            return s ? new ke(i,r,s) : null
        }
        ,
        ke.prototype.evaluate = function(t) {
            for (var e = 0, i = this.branches; e < i.length; e += 1) {
                var r = i[e]
                  , n = r[0]
                  , o = r[1];
                if (n.evaluate(t))
                    return o.evaluate(t)
            }
            return this.otherwise.evaluate(t)
        }
        ,
        ke.prototype.eachChild = function(t) {
            for (var e = 0, i = this.branches; e < i.length; e += 1) {
                var r = i[e]
                  , n = r[0]
                  , o = r[1];
                t(n),
                t(o)
            }
            t(this.otherwise)
        }
        ,
        ke.prototype.possibleOutputs = function() {
            return (t = []).concat.apply(t, this.branches.map(function(t) {
                return t[0],
                t[1].possibleOutputs()
            })).concat(this.otherwise.possibleOutputs());
            var t
        }
        ,
        ke.prototype.serialize = function() {
            var t = ["case"];
            return this.eachChild(function(e) {
                t.push(e.serialize())
            }),
            t
        }
        ;
        var Me = Pe("==", function(t, e, i) {
            return e === i
        }, Ce)
          , Ie = Pe("!=", function(t, e, i) {
            return e !== i
        }, function(t, e, i, r) {
            return !Ce(0, e, i, r)
        })
          , ze = Pe("<", function(t, e, i) {
            return e < i
        }, function(t, e, i, r) {
            return r.compare(e, i) < 0
        })
          , Le = Pe(">", function(t, e, i) {
            return e > i
        }, function(t, e, i, r) {
            return r.compare(e, i) > 0
        })
          , De = Pe("<=", function(t, e, i) {
            return e <= i
        }, function(t, e, i, r) {
            return r.compare(e, i) <= 0
        })
          , Oe = Pe(">=", function(t, e, i) {
            return e >= i
        }, function(t, e, i, r) {
            return r.compare(e, i) >= 0
        })
          , Re = function(t) {
            this.type = yt,
            this.input = t
        };
        Re.parse = function(t, e) {
            if (2 !== t.length)
                return e.error("Expected 1 argument, but found " + (t.length - 1) + " instead.");
            var i = e.parse(t[1], 1);
            return i ? "array" !== i.type.kind && "string" !== i.type.kind && "value" !== i.type.kind ? e.error("Expected argument of type string or array, but found " + At(i.type) + " instead.") : new Re(i) : null
        }
        ,
        Re.prototype.evaluate = function(t) {
            var e = this.input.evaluate(t);
            if ("string" == typeof e)
                return e.length;
            if (Array.isArray(e))
                return e.length;
            throw new Ft("Expected value to be of type string or array, but found " + At(Dt(e)) + " instead.")
        }
        ,
        Re.prototype.eachChild = function(t) {
            t(this.input)
        }
        ,
        Re.prototype.possibleOutputs = function() {
            return [void 0]
        }
        ,
        Re.prototype.serialize = function() {
            var t = ["length"];
            return this.eachChild(function(e) {
                t.push(e.serialize())
            }),
            t
        }
        ;
        var Fe = {
            "==": Me,
            "!=": Ie,
            ">": Le,
            "<": ze,
            ">=": Oe,
            "<=": De,
            array: Nt,
            at: Se,
            boolean: Nt,
            case: ke,
            coalesce: we,
            collator: Ht,
            format: Ut,
            interpolate: xe,
            "interpolate-hcl": xe,
            "interpolate-lab": xe,
            length: Re,
            let: Te,
            literal: Rt,
            match: Ae,
            number: Nt,
            object: Nt,
            step: Qt,
            string: Nt,
            "to-boolean": jt,
            "to-color": jt,
            "to-number": jt,
            "to-string": jt,
            var: Yt
        };
        function Be(t, e) {
            var i = e[0]
              , r = e[1]
              , n = e[2]
              , o = e[3];
            i = i.evaluate(t),
            r = r.evaluate(t),
            n = n.evaluate(t);
            var a = o ? o.evaluate(t) : 1
              , s = Lt(i, r, n, a);
            if (s)
                throw new Ft(s);
            return new Pt(i / 255 * a,r / 255 * a,n / 255 * a,a)
        }
        function Ne(t, e) {
            return t in e
        }
        function Ue(t, e) {
            var i = e[t];
            return void 0 === i ? null : i
        }
        function Ve(t) {
            return {
                type: t
            }
        }
        function je(t) {
            return {
                result: "success",
                value: t
            }
        }
        function $e(t) {
            return {
                result: "error",
                value: t
            }
        }
        function qe(t) {
            return "data-driven" === t["property-type"] || "cross-faded-data-driven" === t["property-type"]
        }
        function We(t) {
            return !!t.expression && t.expression.parameters.indexOf("zoom") > -1
        }
        function He(t) {
            return !!t.expression && t.expression.interpolated
        }
        function Xe(t) {
            return t instanceof Number ? "number" : t instanceof String ? "string" : t instanceof Boolean ? "boolean" : Array.isArray(t) ? "array" : null === t ? "null" : typeof t
        }
        function Ze(t) {
            return "object" == typeof t && null !== t && !Array.isArray(t)
        }
        function Ge(t) {
            return t
        }
        function Ye(t, e, i) {
            return void 0 !== t ? t : void 0 !== e ? e : void 0 !== i ? i : void 0
        }
        function Ke(t, e, i, r, n) {
            return Ye(typeof i === n ? r[i] : void 0, t.default, e.default)
        }
        function Je(t, e, i) {
            if ("number" !== Xe(i))
                return Ye(t.default, e.default);
            var r = t.stops.length;
            if (1 === r)
                return t.stops[0][1];
            if (i <= t.stops[0][0])
                return t.stops[0][1];
            if (i >= t.stops[r - 1][0])
                return t.stops[r - 1][1];
            var n = ei(t.stops, i);
            return t.stops[n][1]
        }
        function Qe(t, e, i) {
            var r = void 0 !== t.base ? t.base : 1;
            if ("number" !== Xe(i))
                return Ye(t.default, e.default);
            var n = t.stops.length;
            if (1 === n)
                return t.stops[0][1];
            if (i <= t.stops[0][0])
                return t.stops[0][1];
            if (i >= t.stops[n - 1][0])
                return t.stops[n - 1][1];
            var o = ei(t.stops, i)
              , a = function(t, e, i, r) {
                var n = r - i
                  , o = t - i;
                return 0 === n ? 0 : 1 === e ? o / n : (Math.pow(e, o) - 1) / (Math.pow(e, n) - 1)
            }(i, r, t.stops[o][0], t.stops[o + 1][0])
              , s = t.stops[o][1]
              , l = t.stops[o + 1][1]
              , u = ee[e.type] || Ge;
            if (t.colorSpace && "rgb" !== t.colorSpace) {
                var c = ve[t.colorSpace];
                u = function(t, e) {
                    return c.reverse(c.interpolate(c.forward(t), c.forward(e), a))
                }
            }
            return "function" == typeof s.evaluate ? {
                evaluate: function() {
                    for (var t = [], e = arguments.length; e--; )
                        t[e] = arguments[e];
                    var i = s.evaluate.apply(void 0, t)
                      , r = l.evaluate.apply(void 0, t);
                    if (void 0 !== i && void 0 !== r)
                        return u(i, r, a)
                }
            } : u(s, l, a)
        }
        function ti(t, e, i) {
            return "color" === e.type ? i = Pt.parse(i) : "formatted" === e.type ? i = zt.fromString(i.toString()) : Xe(i) === e.type || "enum" === e.type && e.values[i] || (i = void 0),
            Ye(i, t.default, e.default)
        }
        function ei(t, e) {
            for (var i, r, n = 0, o = t.length - 1, a = 0; n <= o; ) {
                if (i = t[a = Math.floor((n + o) / 2)][0],
                r = t[a + 1][0],
                e === i || e > i && e < r)
                    return a;
                i < e ? n = a + 1 : i > e && (o = a - 1)
            }
            return Math.max(a - 1, 0)
        }
        Wt.register(Fe, {
            error: [{
                kind: "error"
            }, [gt], function(t, e) {
                var i = e[0];
                throw new Ft(i.evaluate(t))
            }
            ],
            typeof: [gt, [bt], function(t, e) {
                return At(Dt(e[0].evaluate(t)))
            }
            ],
            "to-rgba": [St(yt, 4), [vt], function(t, e) {
                return e[0].evaluate(t).toArray()
            }
            ],
            rgb: [vt, [yt, yt, yt], Be],
            rgba: [vt, [yt, yt, yt, yt], Be],
            has: {
                type: _t,
                overloads: [[[gt], function(t, e) {
                    return Ne(e[0].evaluate(t), t.properties())
                }
                ], [[gt, xt], function(t, e) {
                    var i = e[0]
                      , r = e[1];
                    return Ne(i.evaluate(t), r.evaluate(t))
                }
                ]]
            },
            get: {
                type: bt,
                overloads: [[[gt], function(t, e) {
                    return Ue(e[0].evaluate(t), t.properties())
                }
                ], [[gt, xt], function(t, e) {
                    var i = e[0]
                      , r = e[1];
                    return Ue(i.evaluate(t), r.evaluate(t))
                }
                ]]
            },
            "feature-state": [bt, [gt], function(t, e) {
                return Ue(e[0].evaluate(t), t.featureState || {})
            }
            ],
            properties: [xt, [], function(t) {
                return t.properties()
            }
            ],
            "geometry-type": [gt, [], function(t) {
                return t.geometryType()
            }
            ],
            id: [bt, [], function(t) {
                return t.id()
            }
            ],
            zoom: [yt, [], function(t) {
                return t.globals.zoom
            }
            ],
            "heatmap-density": [yt, [], function(t) {
                return t.globals.heatmapDensity || 0
            }
            ],
            "line-progress": [yt, [], function(t) {
                return t.globals.lineProgress || 0
            }
            ],
            "+": [yt, Ve(yt), function(t, e) {
                for (var i = 0, r = 0, n = e; r < n.length; r += 1)
                    i += n[r].evaluate(t);
                return i
            }
            ],
            "*": [yt, Ve(yt), function(t, e) {
                for (var i = 1, r = 0, n = e; r < n.length; r += 1)
                    i *= n[r].evaluate(t);
                return i
            }
            ],
            "-": {
                type: yt,
                overloads: [[[yt, yt], function(t, e) {
                    var i = e[0]
                      , r = e[1];
                    return i.evaluate(t) - r.evaluate(t)
                }
                ], [[yt], function(t, e) {
                    return -e[0].evaluate(t)
                }
                ]]
            },
            "/": [yt, [yt, yt], function(t, e) {
                var i = e[0]
                  , r = e[1];
                return i.evaluate(t) / r.evaluate(t)
            }
            ],
            "%": [yt, [yt, yt], function(t, e) {
                var i = e[0]
                  , r = e[1];
                return i.evaluate(t) % r.evaluate(t)
            }
            ],
            ln2: [yt, [], function() {
                return Math.LN2
            }
            ],
            pi: [yt, [], function() {
                return Math.PI
            }
            ],
            e: [yt, [], function() {
                return Math.E
            }
            ],
            "^": [yt, [yt, yt], function(t, e) {
                var i = e[0]
                  , r = e[1];
                return Math.pow(i.evaluate(t), r.evaluate(t))
            }
            ],
            sqrt: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.sqrt(i.evaluate(t))
            }
            ],
            log10: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.log(i.evaluate(t)) / Math.LN10
            }
            ],
            ln: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.log(i.evaluate(t))
            }
            ],
            log2: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.log(i.evaluate(t)) / Math.LN2
            }
            ],
            sin: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.sin(i.evaluate(t))
            }
            ],
            cos: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.cos(i.evaluate(t))
            }
            ],
            tan: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.tan(i.evaluate(t))
            }
            ],
            asin: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.asin(i.evaluate(t))
            }
            ],
            acos: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.acos(i.evaluate(t))
            }
            ],
            atan: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.atan(i.evaluate(t))
            }
            ],
            min: [yt, Ve(yt), function(t, e) {
                return Math.min.apply(Math, e.map(function(e) {
                    return e.evaluate(t)
                }))
            }
            ],
            max: [yt, Ve(yt), function(t, e) {
                return Math.max.apply(Math, e.map(function(e) {
                    return e.evaluate(t)
                }))
            }
            ],
            abs: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.abs(i.evaluate(t))
            }
            ],
            round: [yt, [yt], function(t, e) {
                var i = e[0].evaluate(t);
                return i < 0 ? -Math.round(-i) : Math.round(i)
            }
            ],
            floor: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.floor(i.evaluate(t))
            }
            ],
            ceil: [yt, [yt], function(t, e) {
                var i = e[0];
                return Math.ceil(i.evaluate(t))
            }
            ],
            "filter-==": [_t, [gt, bt], function(t, e) {
                var i = e[0]
                  , r = e[1];
                return t.properties()[i.value] === r.value
            }
            ],
            "filter-id-==": [_t, [bt], function(t, e) {
                var i = e[0];
                return t.id() === i.value
            }
            ],
            "filter-type-==": [_t, [gt], function(t, e) {
                var i = e[0];
                return t.geometryType() === i.value
            }
            ],
            "filter-<": [_t, [gt, bt], function(t, e) {
                var i = e[0]
                  , r = e[1]
                  , n = t.properties()[i.value]
                  , o = r.value;
                return typeof n == typeof o && n < o
            }
            ],
            "filter-id-<": [_t, [bt], function(t, e) {
                var i = e[0]
                  , r = t.id()
                  , n = i.value;
                return typeof r == typeof n && r < n
            }
            ],
            "filter->": [_t, [gt, bt], function(t, e) {
                var i = e[0]
                  , r = e[1]
                  , n = t.properties()[i.value]
                  , o = r.value;
                return typeof n == typeof o && n > o
            }
            ],
            "filter-id->": [_t, [bt], function(t, e) {
                var i = e[0]
                  , r = t.id()
                  , n = i.value;
                return typeof r == typeof n && r > n
            }
            ],
            "filter-<=": [_t, [gt, bt], function(t, e) {
                var i = e[0]
                  , r = e[1]
                  , n = t.properties()[i.value]
                  , o = r.value;
                return typeof n == typeof o && n <= o
            }
            ],
            "filter-id-<=": [_t, [bt], function(t, e) {
                var i = e[0]
                  , r = t.id()
                  , n = i.value;
                return typeof r == typeof n && r <= n
            }
            ],
            "filter->=": [_t, [gt, bt], function(t, e) {
                var i = e[0]
                  , r = e[1]
                  , n = t.properties()[i.value]
                  , o = r.value;
                return typeof n == typeof o && n >= o
            }
            ],
            "filter-id->=": [_t, [bt], function(t, e) {
                var i = e[0]
                  , r = t.id()
                  , n = i.value;
                return typeof r == typeof n && r >= n
            }
            ],
            "filter-has": [_t, [bt], function(t, e) {
                return e[0].value in t.properties()
            }
            ],
            "filter-has-id": [_t, [], function(t) {
                return null !== t.id()
            }
            ],
            "filter-type-in": [_t, [St(gt)], function(t, e) {
                return e[0].value.indexOf(t.geometryType()) >= 0
            }
            ],
            "filter-id-in": [_t, [St(bt)], function(t, e) {
                return e[0].value.indexOf(t.id()) >= 0
            }
            ],
            "filter-in-small": [_t, [gt, St(bt)], function(t, e) {
                var i = e[0];
                return e[1].value.indexOf(t.properties()[i.value]) >= 0
            }
            ],
            "filter-in-large": [_t, [gt, St(bt)], function(t, e) {
                var i = e[0]
                  , r = e[1];
                return function(t, e, i, r) {
                    for (; i <= r; ) {
                        var n = i + r >> 1;
                        if (e[n] === t)
                            return !0;
                        e[n] > t ? r = n - 1 : i = n + 1
                    }
                    return !1
                }(t.properties()[i.value], r.value, 0, r.value.length - 1)
            }
            ],
            all: {
                type: _t,
                overloads: [[[_t, _t], function(t, e) {
                    var i = e[0]
                      , r = e[1];
                    return i.evaluate(t) && r.evaluate(t)
                }
                ], [Ve(_t), function(t, e) {
                    for (var i = 0, r = e; i < r.length; i += 1)
                        if (!r[i].evaluate(t))
                            return !1;
                    return !0
                }
                ]]
            },
            any: {
                type: _t,
                overloads: [[[_t, _t], function(t, e) {
                    var i = e[0]
                      , r = e[1];
                    return i.evaluate(t) || r.evaluate(t)
                }
                ], [Ve(_t), function(t, e) {
                    for (var i = 0, r = e; i < r.length; i += 1)
                        if (r[i].evaluate(t))
                            return !0;
                    return !1
                }
                ]]
            },
            "!": [_t, [_t], function(t, e) {
                return !e[0].evaluate(t)
            }
            ],
            "is-supported-script": [_t, [gt], function(t, e) {
                var i = e[0]
                  , r = t.globals && t.globals.isSupportedScript;
                return !r || r(i.evaluate(t))
            }
            ],
            upcase: [gt, [gt], function(t, e) {
                return e[0].evaluate(t).toUpperCase()
            }
            ],
            downcase: [gt, [gt], function(t, e) {
                return e[0].evaluate(t).toLowerCase()
            }
            ],
            concat: [gt, Ve(bt), function(t, e) {
                return e.map(function(e) {
                    return Ot(e.evaluate(t))
                }).join("")
            }
            ],
            "resolved-locale": [gt, [wt], function(t, e) {
                return e[0].evaluate(t).resolvedLocale()
            }
            ]
        });
        var ii = function(t, e) {
            var i;
            this.expression = t,
            this._warningHistory = {},
            this._evaluator = new qt,
            this._defaultValue = "color" === (i = e).type && Ze(i.default) ? new Pt(0,0,0,0) : "color" === i.type ? Pt.parse(i.default) || null : void 0 === i.default ? null : i.default,
            this._enumValues = "enum" === e.type ? e.values : null
        };
        function ri(t) {
            return Array.isArray(t) && t.length > 0 && "string" == typeof t[0] && t[0]in Fe
        }
        function ni(t, e) {
            var i = new Kt(Fe,[],function(t) {
                var e = {
                    color: vt,
                    string: gt,
                    number: yt,
                    enum: gt,
                    boolean: _t,
                    formatted: Tt
                };
                return "array" === t.type ? St(e[t.value] || bt, t.length) : e[t.type]
            }(e))
              , r = i.parse(t, void 0, void 0, void 0, "string" === e.type ? {
                typeAnnotation: "coerce"
            } : void 0);
            return r ? je(new ii(r,e)) : $e(i.errors)
        }
        ii.prototype.evaluateWithoutErrorHandling = function(t, e, i) {
            return this._evaluator.globals = t,
            this._evaluator.feature = e,
            this._evaluator.featureState = i,
            this.expression.evaluate(this._evaluator)
        }
        ,
        ii.prototype.evaluate = function(t, e, i) {
            this._evaluator.globals = t,
            this._evaluator.feature = e || null,
            this._evaluator.featureState = i || null;
            try {
                var r = this.expression.evaluate(this._evaluator);
                if (null == r)
                    return this._defaultValue;
                if (this._enumValues && !(r in this._enumValues))
                    throw new Ft("Expected value to be one of " + Object.keys(this._enumValues).map(function(t) {
                        return JSON.stringify(t)
                    }).join(", ") + ", but found " + JSON.stringify(r) + " instead.");
                return r
            } catch (t) {
                return this._warningHistory[t.message] || (this._warningHistory[t.message] = !0,
                "undefined" != typeof console && console.warn(t.message)),
                this._defaultValue
            }
        }
        ;
        var oi = function(t, e) {
            this.kind = t,
            this._styleExpression = e,
            this.isStateDependent = "constant" !== t && !Zt(e.expression)
        };
        oi.prototype.evaluateWithoutErrorHandling = function(t, e, i) {
            return this._styleExpression.evaluateWithoutErrorHandling(t, e, i)
        }
        ,
        oi.prototype.evaluate = function(t, e, i) {
            return this._styleExpression.evaluate(t, e, i)
        }
        ;
        var ai = function(t, e, i) {
            this.kind = t,
            this.zoomStops = i.labels,
            this._styleExpression = e,
            this.isStateDependent = "camera" !== t && !Zt(e.expression),
            i instanceof xe && (this._interpolationType = i.interpolation)
        };
        function si(t, e) {
            if ("error" === (t = ni(t, e)).result)
                return t;
            var i = t.value.expression
              , r = Xt(i);
            if (!r && !qe(e))
                return $e([new dt("","data expressions not supported")]);
            var n = Gt(i, ["zoom"]);
            if (!n && !We(e))
                return $e([new dt("","zoom expressions not supported")]);
            var o = function t(e) {
                var i = null;
                if (e instanceof Te)
                    i = t(e.result);
                else if (e instanceof we)
                    for (var r = 0, n = e.args; r < n.length; r += 1) {
                        var o = n[r];
                        if (i = t(o))
                            break
                    }
                else
                    (e instanceof Qt || e instanceof xe) && e.input instanceof Wt && "zoom" === e.input.name && (i = e);
                return i instanceof dt ? i : (e.eachChild(function(e) {
                    var r = t(e);
                    r instanceof dt ? i = r : !i && r ? i = new dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.') : i && r && i !== r && (i = new dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))
                }),
                i)
            }(i);
            return o || n ? o instanceof dt ? $e([o]) : o instanceof xe && !He(e) ? $e([new dt("",'"interpolate" expressions cannot be used with this property')]) : je(o ? new ai(r ? "camera" : "composite",t.value,o) : new oi(r ? "constant" : "source",t.value)) : $e([new dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])
        }
        ai.prototype.evaluateWithoutErrorHandling = function(t, e, i) {
            return this._styleExpression.evaluateWithoutErrorHandling(t, e, i)
        }
        ,
        ai.prototype.evaluate = function(t, e, i) {
            return this._styleExpression.evaluate(t, e, i)
        }
        ,
        ai.prototype.interpolationFactor = function(t, e, i) {
            return this._interpolationType ? xe.interpolationFactor(this._interpolationType, t, e, i) : 0
        }
        ;
        var li = function(t, e) {
            this._parameters = t,
            this._specification = e,
            ct(this, function t(e, i) {
                var r, n, o, a = "color" === i.type, s = e.stops && "object" == typeof e.stops[0][0], l = s || void 0 !== e.property, u = s || !l, c = e.type || (He(i) ? "exponential" : "interval");
                if (a && ((e = ct({}, e)).stops && (e.stops = e.stops.map(function(t) {
                    return [t[0], Pt.parse(t[1])]
                })),
                e.default ? e.default = Pt.parse(e.default) : e.default = Pt.parse(i.default)),
                e.colorSpace && "rgb" !== e.colorSpace && !ve[e.colorSpace])
                    throw new Error("Unknown color space: " + e.colorSpace);
                if ("exponential" === c)
                    r = Qe;
                else if ("interval" === c)
                    r = Je;
                else if ("categorical" === c) {
                    r = Ke,
                    n = Object.create(null);
                    for (var p = 0, h = e.stops; p < h.length; p += 1) {
                        var d = h[p];
                        n[d[0]] = d[1]
                    }
                    o = typeof e.stops[0][0]
                } else {
                    if ("identity" !== c)
                        throw new Error('Unknown function type "' + c + '"');
                    r = ti
                }
                if (s) {
                    for (var f = {}, m = [], y = 0; y < e.stops.length; y++) {
                        var g = e.stops[y]
                          , _ = g[0].zoom;
                        void 0 === f[_] && (f[_] = {
                            zoom: _,
                            type: e.type,
                            property: e.property,
                            default: e.default,
                            stops: []
                        },
                        m.push(_)),
                        f[_].stops.push([g[0].value, g[1]])
                    }
                    for (var v = [], x = 0, b = m; x < b.length; x += 1) {
                        var w = b[x];
                        v.push([f[w].zoom, t(f[w], i)])
                    }
                    return {
                        kind: "composite",
                        interpolationFactor: xe.interpolationFactor.bind(void 0, {
                            name: "linear"
                        }),
                        zoomStops: v.map(function(t) {
                            return t[0]
                        }),
                        evaluate: function(t, r) {
                            var n = t.zoom;
                            return Qe({
                                stops: v,
                                base: e.base
                            }, i, n).evaluate(n, r)
                        }
                    }
                }
                return u ? {
                    kind: "camera",
                    interpolationFactor: "exponential" === c ? xe.interpolationFactor.bind(void 0, {
                        name: "exponential",
                        base: void 0 !== e.base ? e.base : 1
                    }) : function() {
                        return 0
                    }
                    ,
                    zoomStops: e.stops.map(function(t) {
                        return t[0]
                    }),
                    evaluate: function(t) {
                        var a = t.zoom;
                        return r(e, i, a, n, o)
                    }
                } : {
                    kind: "source",
                    evaluate: function(t, a) {
                        var s = a && a.properties ? a.properties[e.property] : void 0;
                        return void 0 === s ? Ye(e.default, i.default) : r(e, i, s, n, o)
                    }
                }
            }(this._parameters, this._specification))
        };
        function ui(t, e) {
            if (Ze(t))
                return new li(t,e);
            if (ri(t)) {
                var i = si(t, e);
                if ("error" === i.result)
                    throw new Error(i.value.map(function(t) {
                        return t.key + ": " + t.message
                    }).join(", "));
                return i.value
            }
            var r = t;
            return "string" == typeof t && "color" === e.type && (r = Pt.parse(t)),
            {
                kind: "constant",
                evaluate: function() {
                    return r
                }
            }
        }
        function ci(t) {
            var e = t.key
              , i = t.value
              , r = t.valueSpec || {}
              , n = t.objectElementValidators || {}
              , o = t.style
              , a = t.styleSpec
              , s = []
              , l = Xe(i);
            if ("object" !== l)
                return [new lt(e,i,"object expected, " + l + " found")];
            for (var u in i) {
                var c = u.split(".")[0]
                  , p = r[c] || r["*"]
                  , h = void 0;
                if (n[c])
                    h = n[c];
                else if (r[c])
                    h = Di;
                else if (n["*"])
                    h = n["*"];
                else {
                    if (!r["*"]) {
                        s.push(new lt(e,i[u],'unknown property "' + u + '"'));
                        continue
                    }
                    h = Di
                }
                s = s.concat(h({
                    key: (e ? e + "." : e) + u,
                    value: i[u],
                    valueSpec: p,
                    style: o,
                    styleSpec: a,
                    object: i,
                    objectKey: u
                }, i))
            }
            for (var d in r)
                n[d] || r[d].required && void 0 === r[d].default && void 0 === i[d] && s.push(new lt(e,i,'missing required property "' + d + '"'));
            return s
        }
        function pi(t) {
            var e = t.value
              , i = t.valueSpec
              , r = t.style
              , n = t.styleSpec
              , o = t.key
              , a = t.arrayElementValidator || Di;
            if ("array" !== Xe(e))
                return [new lt(o,e,"array expected, " + Xe(e) + " found")];
            if (i.length && e.length !== i.length)
                return [new lt(o,e,"array length " + i.length + " expected, length " + e.length + " found")];
            if (i["min-length"] && e.length < i["min-length"])
                return [new lt(o,e,"array length at least " + i["min-length"] + " expected, length " + e.length + " found")];
            var s = {
                type: i.value
            };
            n.$version < 7 && (s.function = i.function),
            "object" === Xe(i.value) && (s = i.value);
            for (var l = [], u = 0; u < e.length; u++)
                l = l.concat(a({
                    array: e,
                    arrayIndex: u,
                    value: e[u],
                    valueSpec: s,
                    style: r,
                    styleSpec: n,
                    key: o + "[" + u + "]"
                }));
            return l
        }
        function hi(t) {
            var e = t.key
              , i = t.value
              , r = t.valueSpec
              , n = Xe(i);
            return "number" !== n ? [new lt(e,i,"number expected, " + n + " found")] : "minimum"in r && i < r.minimum ? [new lt(e,i,i + " is less than the minimum value " + r.minimum)] : "maximum"in r && i > r.maximum ? [new lt(e,i,i + " is greater than the maximum value " + r.maximum)] : []
        }
        function di(t) {
            var e, i, r, n = t.valueSpec, o = pt(t.value.type), a = {}, s = "categorical" !== o && void 0 === t.value.property, l = !s, u = "array" === Xe(t.value.stops) && "array" === Xe(t.value.stops[0]) && "object" === Xe(t.value.stops[0][0]), c = ci({
                key: t.key,
                value: t.value,
                valueSpec: t.styleSpec.function,
                style: t.style,
                styleSpec: t.styleSpec,
                objectElementValidators: {
                    stops: function(t) {
                        if ("identity" === o)
                            return [new lt(t.key,t.value,'identity function may not have a "stops" property')];
                        var e = []
                          , i = t.value;
                        return e = e.concat(pi({
                            key: t.key,
                            value: i,
                            valueSpec: t.valueSpec,
                            style: t.style,
                            styleSpec: t.styleSpec,
                            arrayElementValidator: p
                        })),
                        "array" === Xe(i) && 0 === i.length && e.push(new lt(t.key,i,"array must have at least one stop")),
                        e
                    },
                    default: function(t) {
                        return Di({
                            key: t.key,
                            value: t.value,
                            valueSpec: n,
                            style: t.style,
                            styleSpec: t.styleSpec
                        })
                    }
                }
            });
            return "identity" === o && s && c.push(new lt(t.key,t.value,'missing required property "property"')),
            "identity" === o || t.value.stops || c.push(new lt(t.key,t.value,'missing required property "stops"')),
            "exponential" === o && t.valueSpec.expression && !He(t.valueSpec) && c.push(new lt(t.key,t.value,"exponential functions not supported")),
            t.styleSpec.$version >= 8 && (l && !qe(t.valueSpec) ? c.push(new lt(t.key,t.value,"property functions not supported")) : s && !We(t.valueSpec) && c.push(new lt(t.key,t.value,"zoom functions not supported"))),
            "categorical" !== o && !u || void 0 !== t.value.property || c.push(new lt(t.key,t.value,'"property" property is required')),
            c;
            function p(t) {
                var e = []
                  , o = t.value
                  , s = t.key;
                if ("array" !== Xe(o))
                    return [new lt(s,o,"array expected, " + Xe(o) + " found")];
                if (2 !== o.length)
                    return [new lt(s,o,"array length 2 expected, length " + o.length + " found")];
                if (u) {
                    if ("object" !== Xe(o[0]))
                        return [new lt(s,o,"object expected, " + Xe(o[0]) + " found")];
                    if (void 0 === o[0].zoom)
                        return [new lt(s,o,"object stop key must have zoom")];
                    if (void 0 === o[0].value)
                        return [new lt(s,o,"object stop key must have value")];
                    if (r && r > pt(o[0].zoom))
                        return [new lt(s,o[0].zoom,"stop zoom values must appear in ascending order")];
                    pt(o[0].zoom) !== r && (r = pt(o[0].zoom),
                    i = void 0,
                    a = {}),
                    e = e.concat(ci({
                        key: s + "[0]",
                        value: o[0],
                        valueSpec: {
                            zoom: {}
                        },
                        style: t.style,
                        styleSpec: t.styleSpec,
                        objectElementValidators: {
                            zoom: hi,
                            value: h
                        }
                    }))
                } else
                    e = e.concat(h({
                        key: s + "[0]",
                        value: o[0],
                        valueSpec: {},
                        style: t.style,
                        styleSpec: t.styleSpec
                    }, o));
                return ri(ht(o[1])) ? e.concat([new lt(s + "[1]",o[1],"expressions are not allowed in function stops.")]) : e.concat(Di({
                    key: s + "[1]",
                    value: o[1],
                    valueSpec: n,
                    style: t.style,
                    styleSpec: t.styleSpec
                }))
            }
            function h(t, r) {
                var s = Xe(t.value)
                  , l = pt(t.value)
                  , u = null !== t.value ? t.value : r;
                if (e) {
                    if (s !== e)
                        return [new lt(t.key,u,s + " stop domain type must match previous stop domain type " + e)]
                } else
                    e = s;
                if ("number" !== s && "string" !== s && "boolean" !== s)
                    return [new lt(t.key,u,"stop domain value must be a number, string, or boolean")];
                if ("number" !== s && "categorical" !== o) {
                    var c = "number expected, " + s + " found";
                    return qe(n) && void 0 === o && (c += '\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),
                    [new lt(t.key,u,c)]
                }
                return "categorical" !== o || "number" !== s || isFinite(l) && Math.floor(l) === l ? "categorical" !== o && "number" === s && void 0 !== i && l < i ? [new lt(t.key,u,"stop domain values must appear in ascending order")] : (i = l,
                "categorical" === o && l in a ? [new lt(t.key,u,"stop domain values must be unique")] : (a[l] = !0,
                [])) : [new lt(t.key,u,"integer expected, found " + l)]
            }
        }
        function fi(t) {
            var e = ("property" === t.expressionContext ? si : ni)(ht(t.value), t.valueSpec);
            return "error" === e.result ? e.value.map(function(e) {
                return new lt("" + t.key + e.key,t.value,e.message)
            }) : "property" === t.expressionContext && "text-font" === t.propertyKey && -1 !== e.value._styleExpression.expression.possibleOutputs().indexOf(void 0) ? [new lt(t.key,t.value,'Invalid data expression for "' + t.propertyKey + '". Output values must be contained as literals within the expression.')] : "property" !== t.expressionContext || "layout" !== t.propertyType || Zt(e.value._styleExpression.expression) ? "filter" !== t.expressionContext || Zt(e.value.expression) ? [] : [new lt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')] : [new lt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')]
        }
        function mi(t) {
            var e = t.key
              , i = t.value
              , r = t.valueSpec
              , n = [];
            return Array.isArray(r.values) ? -1 === r.values.indexOf(pt(i)) && n.push(new lt(e,i,"expected one of [" + r.values.join(", ") + "], " + JSON.stringify(i) + " found")) : -1 === Object.keys(r.values).indexOf(pt(i)) && n.push(new lt(e,i,"expected one of [" + Object.keys(r.values).join(", ") + "], " + JSON.stringify(i) + " found")),
            n
        }
        function yi(t) {
            if (!0 === t || !1 === t)
                return !0;
            if (!Array.isArray(t) || 0 === t.length)
                return !1;
            switch (t[0]) {
            case "has":
                return t.length >= 2 && "$id" !== t[1] && "$type" !== t[1];
            case "in":
            case "!in":
            case "!has":
            case "none":
                return !1;
            case "==":
            case "!=":
            case ">":
            case ">=":
            case "<":
            case "<=":
                return 3 !== t.length || Array.isArray(t[1]) || Array.isArray(t[2]);
            case "any":
            case "all":
                for (var e = 0, i = t.slice(1); e < i.length; e += 1) {
                    var r = i[e];
                    if (!yi(r) && "boolean" != typeof r)
                        return !1
                }
                return !0;
            default:
                return !0
            }
        }
        li.deserialize = function(t) {
            return new li(t._parameters,t._specification)
        }
        ,
        li.serialize = function(t) {
            return {
                _parameters: t._parameters,
                _specification: t._specification
            }
        }
        ;
        var gi = {
            type: "boolean",
            default: !1,
            transition: !1,
            "property-type": "data-driven",
            expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
            }
        };
        function _i(t) {
            if (null == t)
                return function() {
                    return !0
                }
                ;
            yi(t) || (t = xi(t));
            var e = ni(t, gi);
            if ("error" === e.result)
                throw new Error(e.value.map(function(t) {
                    return t.key + ": " + t.message
                }).join(", "));
            return function(t, i) {
                return e.value.evaluate(t, i)
            }
        }
        function vi(t, e) {
            return t < e ? -1 : t > e ? 1 : 0
        }
        function xi(t) {
            if (!t)
                return !0;
            var e, i = t[0];
            return t.length <= 1 ? "any" !== i : "==" === i ? bi(t[1], t[2], "==") : "!=" === i ? Si(bi(t[1], t[2], "==")) : "<" === i || ">" === i || "<=" === i || ">=" === i ? bi(t[1], t[2], i) : "any" === i ? (e = t.slice(1),
            ["any"].concat(e.map(xi))) : "all" === i ? ["all"].concat(t.slice(1).map(xi)) : "none" === i ? ["all"].concat(t.slice(1).map(xi).map(Si)) : "in" === i ? wi(t[1], t.slice(2)) : "!in" === i ? Si(wi(t[1], t.slice(2))) : "has" === i ? Ti(t[1]) : "!has" !== i || Si(Ti(t[1]))
        }
        function bi(t, e, i) {
            switch (t) {
            case "$type":
                return ["filter-type-" + i, e];
            case "$id":
                return ["filter-id-" + i, e];
            default:
                return ["filter-" + i, t, e]
            }
        }
        function wi(t, e) {
            if (0 === e.length)
                return !1;
            switch (t) {
            case "$type":
                return ["filter-type-in", ["literal", e]];
            case "$id":
                return ["filter-id-in", ["literal", e]];
            default:
                return e.length > 200 && !e.some(function(t) {
                    return typeof t != typeof e[0]
                }) ? ["filter-in-large", t, ["literal", e.sort(vi)]] : ["filter-in-small", t, ["literal", e]]
            }
        }
        function Ti(t) {
            switch (t) {
            case "$type":
                return !0;
            case "$id":
                return ["filter-has-id"];
            default:
                return ["filter-has", t]
            }
        }
        function Si(t) {
            return ["!", t]
        }
        function Ai(t) {
            return yi(ht(t.value)) ? fi(ct({}, t, {
                expressionContext: "filter",
                valueSpec: {
                    value: "boolean"
                }
            })) : function t(e) {
                var i = e.value
                  , r = e.key;
                if ("array" !== Xe(i))
                    return [new lt(r,i,"array expected, " + Xe(i) + " found")];
                var n, o = e.styleSpec, a = [];
                if (i.length < 1)
                    return [new lt(r,i,"filter array must have at least 1 element")];
                switch (a = a.concat(mi({
                    key: r + "[0]",
                    value: i[0],
                    valueSpec: o.filter_operator,
                    style: e.style,
                    styleSpec: e.styleSpec
                })),
                pt(i[0])) {
                case "<":
                case "<=":
                case ">":
                case ">=":
                    i.length >= 2 && "$type" === pt(i[1]) && a.push(new lt(r,i,'"$type" cannot be use with operator "' + i[0] + '"'));
                case "==":
                case "!=":
                    3 !== i.length && a.push(new lt(r,i,'filter array for operator "' + i[0] + '" must have 3 elements'));
                case "in":
                case "!in":
                    i.length >= 2 && "string" !== (n = Xe(i[1])) && a.push(new lt(r + "[1]",i[1],"string expected, " + n + " found"));
                    for (var s = 2; s < i.length; s++)
                        n = Xe(i[s]),
                        "$type" === pt(i[1]) ? a = a.concat(mi({
                            key: r + "[" + s + "]",
                            value: i[s],
                            valueSpec: o.geometry_type,
                            style: e.style,
                            styleSpec: e.styleSpec
                        })) : "string" !== n && "number" !== n && "boolean" !== n && a.push(new lt(r + "[" + s + "]",i[s],"string, number, or boolean expected, " + n + " found"));
                    break;
                case "any":
                case "all":
                case "none":
                    for (var l = 1; l < i.length; l++)
                        a = a.concat(t({
                            key: r + "[" + l + "]",
                            value: i[l],
                            style: e.style,
                            styleSpec: e.styleSpec
                        }));
                    break;
                case "has":
                case "!has":
                    n = Xe(i[1]),
                    2 !== i.length ? a.push(new lt(r,i,'filter array for "' + i[0] + '" operator must have 2 elements')) : "string" !== n && a.push(new lt(r + "[1]",i[1],"string expected, " + n + " found"))
                }
                return a
            }(t)
        }
        function ki(t, e) {
            var i = t.key
              , r = t.style
              , n = t.styleSpec
              , o = t.value
              , a = t.objectKey
              , s = n[e + "_" + t.layerType];
            if (!s)
                return [];
            var l = a.match(/^(.*)-transition$/);
            if ("paint" === e && l && s[l[1]] && s[l[1]].transition)
                return Di({
                    key: i,
                    value: o,
                    valueSpec: n.transition,
                    style: r,
                    styleSpec: n
                });
            var u, c = t.valueSpec || s[a];
            if (!c)
                return [new lt(i,o,'unknown property "' + a + '"')];
            if ("string" === Xe(o) && qe(c) && !c.tokens && (u = /^{([^}]+)}$/.exec(o)))
                return [new lt(i,o,'"' + a + '" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ' + JSON.stringify(u[1]) + " }`.")];
            var p = [];
            return "symbol" === t.layerType && ("text-field" === a && r && !r.glyphs && p.push(new lt(i,o,'use of "text-field" requires a style "glyphs" property')),
            "text-font" === a && Ze(ht(o)) && "identity" === pt(o.type) && p.push(new lt(i,o,'"text-font" does not support identity functions'))),
            p.concat(Di({
                key: t.key,
                value: o,
                valueSpec: c,
                style: r,
                styleSpec: n,
                expressionContext: "property",
                propertyType: e,
                propertyKey: a
            }))
        }
        function Ei(t) {
            return ki(t, "paint")
        }
        function Ci(t) {
            return ki(t, "layout")
        }
        function Pi(t) {
            var e = []
              , i = t.value
              , r = t.key
              , n = t.style
              , o = t.styleSpec;
            i.type || i.ref || e.push(new lt(r,i,'either "type" or "ref" is required'));
            var a, s = pt(i.type), l = pt(i.ref);
            if (i.id)
                for (var u = pt(i.id), c = 0; c < t.arrayIndex; c++) {
                    var p = n.layers[c];
                    pt(p.id) === u && e.push(new lt(r,i.id,'duplicate layer id "' + i.id + '", previously used at line ' + p.id.__line__))
                }
            if ("ref"in i)
                ["type", "source", "source-layer", "filter", "layout"].forEach(function(t) {
                    t in i && e.push(new lt(r,i[t],'"' + t + '" is prohibited for ref layers'))
                }),
                n.layers.forEach(function(t) {
                    pt(t.id) === l && (a = t)
                }),
                a ? a.ref ? e.push(new lt(r,i.ref,"ref cannot reference another ref layer")) : s = pt(a.type) : e.push(new lt(r,i.ref,'ref layer "' + l + '" not found'));
            else if ("background" !== s)
                if (i.source) {
                    var h = n.sources && n.sources[i.source]
                      , d = h && pt(h.type);
                    h ? "vector" === d && "raster" === s ? e.push(new lt(r,i.source,'layer "' + i.id + '" requires a raster source')) : "raster" === d && "raster" !== s ? e.push(new lt(r,i.source,'layer "' + i.id + '" requires a vector source')) : "vector" !== d || i["source-layer"] ? "raster-dem" === d && "hillshade" !== s ? e.push(new lt(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")) : "line" !== s || !i.paint || !i.paint["line-gradient"] || "geojson" === d && h.lineMetrics || e.push(new lt(r,i,'layer "' + i.id + '" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')) : e.push(new lt(r,i,'layer "' + i.id + '" must specify a "source-layer"')) : e.push(new lt(r,i.source,'source "' + i.source + '" not found'))
                } else
                    e.push(new lt(r,i,'missing required property "source"'));
            return e = e.concat(ci({
                key: r,
                value: i,
                valueSpec: o.layer,
                style: t.style,
                styleSpec: t.styleSpec,
                objectElementValidators: {
                    "*": function() {
                        return []
                    },
                    type: function() {
                        return Di({
                            key: r + ".type",
                            value: i.type,
                            valueSpec: o.layer.type,
                            style: t.style,
                            styleSpec: t.styleSpec,
                            object: i,
                            objectKey: "type"
                        })
                    },
                    filter: Ai,
                    layout: function(t) {
                        return ci({
                            layer: i,
                            key: t.key,
                            value: t.value,
                            style: t.style,
                            styleSpec: t.styleSpec,
                            objectElementValidators: {
                                "*": function(t) {
                                    return Ci(ct({
                                        layerType: s
                                    }, t))
                                }
                            }
                        })
                    },
                    paint: function(t) {
                        return ci({
                            layer: i,
                            key: t.key,
                            value: t.value,
                            style: t.style,
                            styleSpec: t.styleSpec,
                            objectElementValidators: {
                                "*": function(t) {
                                    return Ei(ct({
                                        layerType: s
                                    }, t))
                                }
                            }
                        })
                    }
                }
            }))
        }
        function Mi(t) {
            var e = t.value
              , i = t.key
              , r = t.styleSpec
              , n = t.style;
            if (!e.type)
                return [new lt(i,e,'"type" is required')];
            var o = pt(e.type)
              , a = [];
            switch (o) {
            case "vector":
            case "raster":
            case "raster-dem":
                if (a = a.concat(ci({
                    key: i,
                    value: e,
                    valueSpec: r["source_" + o.replace("-", "_")],
                    style: t.style,
                    styleSpec: r
                })),
                "url"in e)
                    for (var s in e)
                        ["type", "url", "tileSize"].indexOf(s) < 0 && a.push(new lt(i + "." + s,e[s],'a source with a "url" property may not include a "' + s + '" property'));
                return a;
            case "geojson":
                return ci({
                    key: i,
                    value: e,
                    valueSpec: r.source_geojson,
                    style: n,
                    styleSpec: r
                });
            case "video":
                return ci({
                    key: i,
                    value: e,
                    valueSpec: r.source_video,
                    style: n,
                    styleSpec: r
                });
            case "image":
                return ci({
                    key: i,
                    value: e,
                    valueSpec: r.source_image,
                    style: n,
                    styleSpec: r
                });
            case "canvas":
                return a.push(new lt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),
                a;
            default:
                return mi({
                    key: i + ".type",
                    value: e.type,
                    valueSpec: {
                        values: ["vector", "raster", "raster-dem", "geojson", "video", "image"]
                    },
                    style: n,
                    styleSpec: r
                })
            }
        }
        function Ii(t) {
            var e = t.value
              , i = t.styleSpec
              , r = i.light
              , n = t.style
              , o = []
              , a = Xe(e);
            if (void 0 === e)
                return o;
            if ("object" !== a)
                return o.concat([new lt("light",e,"object expected, " + a + " found")]);
            for (var s in e) {
                var l = s.match(/^(.*)-transition$/);
                o = l && r[l[1]] && r[l[1]].transition ? o.concat(Di({
                    key: s,
                    value: e[s],
                    valueSpec: i.transition,
                    style: n,
                    styleSpec: i
                })) : r[s] ? o.concat(Di({
                    key: s,
                    value: e[s],
                    valueSpec: r[s],
                    style: n,
                    styleSpec: i
                })) : o.concat([new lt(s,e[s],'unknown property "' + s + '"')])
            }
            return o
        }
        function zi(t) {
            var e = t.value
              , i = t.key
              , r = Xe(e);
            return "string" !== r ? [new lt(i,e,"string expected, " + r + " found")] : []
        }
        var Li = {
            "*": function() {
                return []
            },
            array: pi,
            boolean: function(t) {
                var e = t.value
                  , i = t.key
                  , r = Xe(e);
                return "boolean" !== r ? [new lt(i,e,"boolean expected, " + r + " found")] : []
            },
            number: hi,
            color: function(t) {
                var e = t.key
                  , i = t.value
                  , r = Xe(i);
                return "string" !== r ? [new lt(e,i,"color expected, " + r + " found")] : null === Ct(i) ? [new lt(e,i,'color expected, "' + i + '" found')] : []
            },
            constants: ut,
            enum: mi,
            filter: Ai,
            function: di,
            layer: Pi,
            object: ci,
            source: Mi,
            light: Ii,
            string: zi,
            formatted: function(t) {
                return 0 === zi(t).length ? [] : fi(t)
            }
        };
        function Di(t) {
            var e = t.value
              , i = t.valueSpec
              , r = t.styleSpec;
            return i.expression && Ze(pt(e)) ? di(t) : i.expression && ri(ht(e)) ? fi(t) : i.type && Li[i.type] ? Li[i.type](t) : ci(ct({}, t, {
                valueSpec: i.type ? r[i.type] : i
            }))
        }
        function Oi(t) {
            var e = t.value
              , i = t.key
              , r = zi(t);
            return r.length ? r : (-1 === e.indexOf("{fontstack}") && r.push(new lt(i,e,'"glyphs" url must include a "{fontstack}" token')),
            -1 === e.indexOf("{range}") && r.push(new lt(i,e,'"glyphs" url must include a "{range}" token')),
            r)
        }
        function Ri(t, e) {
            e = e || st;
            var i = [];
            return i = i.concat(Di({
                key: "",
                value: t,
                valueSpec: e.$root,
                styleSpec: e,
                style: t,
                objectElementValidators: {
                    glyphs: Oi,
                    "*": function() {
                        return []
                    }
                }
            })),
            t.constants && (i = i.concat(ut({
                key: "constants",
                value: t.constants,
                style: t,
                styleSpec: e
            }))),
            Fi(i)
        }
        function Fi(t) {
            return [].concat(t).sort(function(t, e) {
                return t.line - e.line
            })
        }
        function Bi(t) {
            return function() {
                return Fi(t.apply(this, arguments))
            }
        }
        Ri.source = Bi(Mi),
        Ri.light = Bi(Ii),
        Ri.layer = Bi(Pi),
        Ri.filter = Bi(Ai),
        Ri.paintProperty = Bi(Ei),
        Ri.layoutProperty = Bi(Ci);
        var Ni = Ri
          , Ui = Ri.light
          , Vi = Ri.paintProperty
          , ji = Ri.layoutProperty;
        function $i(t, e) {
            var i = !1;
            if (e && e.length)
                for (var r = 0, n = e; r < n.length; r += 1) {
                    var o = n[r];
                    t.fire(new ot(new Error(o.message))),
                    i = !0
                }
            return i
        }
        var qi = Hi
          , Wi = 3;
        function Hi(t, e, i) {
            var r = this.cells = [];
            if (t instanceof ArrayBuffer) {
                this.arrayBuffer = t;
                var n = new Int32Array(this.arrayBuffer);
                t = n[0],
                e = n[1],
                i = n[2],
                this.d = e + 2 * i;
                for (var o = 0; o < this.d * this.d; o++) {
                    var a = n[Wi + o]
                      , s = n[Wi + o + 1];
                    r.push(a === s ? null : n.subarray(a, s))
                }
                var l = n[Wi + r.length]
                  , u = n[Wi + r.length + 1];
                this.keys = n.subarray(l, u),
                this.bboxes = n.subarray(u),
                this.insert = this._insertReadonly
            } else {
                this.d = e + 2 * i;
                for (var c = 0; c < this.d * this.d; c++)
                    r.push([]);
                this.keys = [],
                this.bboxes = []
            }
            this.n = e,
            this.extent = t,
            this.padding = i,
            this.scale = e / t,
            this.uid = 0;
            var p = i / e * t;
            this.min = -p,
            this.max = t + p
        }
        Hi.prototype.insert = function(t, e, i, r, n) {
            this._forEachCell(e, i, r, n, this._insertCell, this.uid++),
            this.keys.push(t),
            this.bboxes.push(e),
            this.bboxes.push(i),
            this.bboxes.push(r),
            this.bboxes.push(n)
        }
        ,
        Hi.prototype._insertReadonly = function() {
            throw "Cannot insert into a GridIndex created from an ArrayBuffer."
        }
        ,
        Hi.prototype._insertCell = function(t, e, i, r, n, o) {
            this.cells[n].push(o)
        }
        ,
        Hi.prototype.query = function(t, e, i, r) {
            var n = this.min
              , o = this.max;
            if (t <= n && e <= n && o <= i && o <= r)
                return Array.prototype.slice.call(this.keys);
            var a = [];
            return this._forEachCell(t, e, i, r, this._queryCell, a, {}),
            a
        }
        ,
        Hi.prototype._queryCell = function(t, e, i, r, n, o, a) {
            var s = this.cells[n];
            if (null !== s)
                for (var l = this.keys, u = this.bboxes, c = 0; c < s.length; c++) {
                    var p = s[c];
                    if (void 0 === a[p]) {
                        var h = 4 * p;
                        t <= u[h + 2] && e <= u[h + 3] && i >= u[h + 0] && r >= u[h + 1] ? (a[p] = !0,
                        o.push(l[p])) : a[p] = !1
                    }
                }
        }
        ,
        Hi.prototype._forEachCell = function(t, e, i, r, n, o, a) {
            for (var s = this._convertToCellCoord(t), l = this._convertToCellCoord(e), u = this._convertToCellCoord(i), c = this._convertToCellCoord(r), p = s; p <= u; p++)
                for (var h = l; h <= c; h++) {
                    var d = this.d * h + p;
                    if (n.call(this, t, e, i, r, d, o, a))
                        return
                }
        }
        ,
        Hi.prototype._convertToCellCoord = function(t) {
            return Math.max(0, Math.min(this.d - 1, Math.floor(t * this.scale) + this.padding))
        }
        ,
        Hi.prototype.toArrayBuffer = function() {
            if (this.arrayBuffer)
                return this.arrayBuffer;
            for (var t = this.cells, e = Wi + this.cells.length + 1 + 1, i = 0, r = 0; r < this.cells.length; r++)
                i += this.cells[r].length;
            var n = new Int32Array(e + i + this.keys.length + this.bboxes.length);
            n[0] = this.extent,
            n[1] = this.n,
            n[2] = this.padding;
            for (var o = e, a = 0; a < t.length; a++) {
                var s = t[a];
                n[Wi + a] = o,
                n.set(s, o),
                o += s.length
            }
            return n[Wi + t.length] = o,
            n.set(this.keys, o),
            o += this.keys.length,
            n[Wi + t.length + 1] = o,
            n.set(this.bboxes, o),
            o += this.bboxes.length,
            n.buffer
        }
        ;
        var Xi = self.ImageData
          , Zi = {};
        function Gi(t, e, i) {
            void 0 === i && (i = {}),
            Object.defineProperty(e, "_classRegistryKey", {
                value: t,
                writeable: !1
            }),
            Zi[t] = {
                klass: e,
                omit: i.omit || [],
                shallow: i.shallow || []
            }
        }
        for (var Yi in Gi("Object", Object),
        qi.serialize = function(t, e) {
            var i = t.toArrayBuffer();
            return e && e.push(i),
            {
                buffer: i
            }
        }
        ,
        qi.deserialize = function(t) {
            return new qi(t.buffer)
        }
        ,
        Gi("Grid", qi),
        Gi("Color", Pt),
        Gi("Error", Error),
        Gi("StylePropertyFunction", li),
        Gi("StyleExpression", ii, {
            omit: ["_evaluator"]
        }),
        Gi("ZoomDependentExpression", ai),
        Gi("ZoomConstantExpression", oi),
        Gi("CompoundExpression", Wt, {
            omit: ["_evaluate"]
        }),
        Fe)
            Fe[Yi]._classRegistryKey || Gi("Expression_" + Yi, Fe[Yi]);
        function Ki(t, e) {
            if (null == t || "boolean" == typeof t || "number" == typeof t || "string" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp)
                return t;
            if (t instanceof ArrayBuffer)
                return e && e.push(t),
                t;
            if (ArrayBuffer.isView(t)) {
                var i = t;
                return e && e.push(i.buffer),
                i
            }
            if (t instanceof Xi)
                return e && e.push(t.data.buffer),
                t;
            if (Array.isArray(t)) {
                for (var r = [], n = 0, o = t; n < o.length; n += 1) {
                    var a = o[n];
                    r.push(Ki(a, e))
                }
                return r
            }
            if ("object" == typeof t) {
                var s = t.constructor
                  , l = s._classRegistryKey;
                if (!l)
                    throw new Error("can't serialize object of unregistered class");
                var u = s.serialize ? s.serialize(t, e) : {};
                if (!s.serialize) {
                    for (var c in t)
                        if (t.hasOwnProperty(c) && !(Zi[l].omit.indexOf(c) >= 0)) {
                            var p = t[c];
                            u[c] = Zi[l].shallow.indexOf(c) >= 0 ? p : Ki(p, e)
                        }
                    t instanceof Error && (u.message = t.message)
                }
                if (u.$name)
                    throw new Error("$name property is reserved for worker serialization logic.");
                return "Object" !== l && (u.$name = l),
                u
            }
            throw new Error("can't serialize object of type " + typeof t)
        }
        function Ji(t) {
            if (null == t || "boolean" == typeof t || "number" == typeof t || "string" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp || t instanceof ArrayBuffer || ArrayBuffer.isView(t) || t instanceof Xi)
                return t;
            if (Array.isArray(t))
                return t.map(Ji);
            if ("object" == typeof t) {
                var e = t.$name || "Object"
                  , i = Zi[e].klass;
                if (!i)
                    throw new Error("can't deserialize unregistered class " + e);
                if (i.deserialize)
                    return i.deserialize(t);
                for (var r = Object.create(i.prototype), n = 0, o = Object.keys(t); n < o.length; n += 1) {
                    var a = o[n];
                    if ("$name" !== a) {
                        var s = t[a];
                        r[a] = Zi[e].shallow.indexOf(a) >= 0 ? s : Ji(s)
                    }
                }
                return r
            }
            throw new Error("can't deserialize object of type " + typeof t)
        }
        var Qi = function() {
            this.first = !0
        };
        Qi.prototype.update = function(t, e) {
            var i = Math.floor(t);
            return this.first ? (this.first = !1,
            this.lastIntegerZoom = i,
            this.lastIntegerZoomTime = 0,
            this.lastZoom = t,
            this.lastFloorZoom = i,
            !0) : (this.lastFloorZoom > i ? (this.lastIntegerZoom = i + 1,
            this.lastIntegerZoomTime = e) : this.lastFloorZoom < i && (this.lastIntegerZoom = i,
            this.lastIntegerZoomTime = e),
            t !== this.lastZoom && (this.lastZoom = t,
            this.lastFloorZoom = i,
            !0))
        }
        ;
        var tr = {
            "Latin-1 Supplement": function(t) {
                return t >= 128 && t <= 255
            },
            Arabic: function(t) {
                return t >= 1536 && t <= 1791
            },
            "Arabic Supplement": function(t) {
                return t >= 1872 && t <= 1919
            },
            "Arabic Extended-A": function(t) {
                return t >= 2208 && t <= 2303
            },
            "Hangul Jamo": function(t) {
                return t >= 4352 && t <= 4607
            },
            "Unified Canadian Aboriginal Syllabics": function(t) {
                return t >= 5120 && t <= 5759
            },
            Khmer: function(t) {
                return t >= 6016 && t <= 6143
            },
            "Unified Canadian Aboriginal Syllabics Extended": function(t) {
                return t >= 6320 && t <= 6399
            },
            "General Punctuation": function(t) {
                return t >= 8192 && t <= 8303
            },
            "Letterlike Symbols": function(t) {
                return t >= 8448 && t <= 8527
            },
            "Number Forms": function(t) {
                return t >= 8528 && t <= 8591
            },
            "Miscellaneous Technical": function(t) {
                return t >= 8960 && t <= 9215
            },
            "Control Pictures": function(t) {
                return t >= 9216 && t <= 9279
            },
            "Optical Character Recognition": function(t) {
                return t >= 9280 && t <= 9311
            },
            "Enclosed Alphanumerics": function(t) {
                return t >= 9312 && t <= 9471
            },
            "Geometric Shapes": function(t) {
                return t >= 9632 && t <= 9727
            },
            "Miscellaneous Symbols": function(t) {
                return t >= 9728 && t <= 9983
            },
            "Miscellaneous Symbols and Arrows": function(t) {
                return t >= 11008 && t <= 11263
            },
            "CJK Radicals Supplement": function(t) {
                return t >= 11904 && t <= 12031
            },
            "Kangxi Radicals": function(t) {
                return t >= 12032 && t <= 12255
            },
            "Ideographic Description Characters": function(t) {
                return t >= 12272 && t <= 12287
            },
            "CJK Symbols and Punctuation": function(t) {
                return t >= 12288 && t <= 12351
            },
            Hiragana: function(t) {
                return t >= 12352 && t <= 12447
            },
            Katakana: function(t) {
                return t >= 12448 && t <= 12543
            },
            Bopomofo: function(t) {
                return t >= 12544 && t <= 12591
            },
            "Hangul Compatibility Jamo": function(t) {
                return t >= 12592 && t <= 12687
            },
            Kanbun: function(t) {
                return t >= 12688 && t <= 12703
            },
            "Bopomofo Extended": function(t) {
                return t >= 12704 && t <= 12735
            },
            "CJK Strokes": function(t) {
                return t >= 12736 && t <= 12783
            },
            "Katakana Phonetic Extensions": function(t) {
                return t >= 12784 && t <= 12799
            },
            "Enclosed CJK Letters and Months": function(t) {
                return t >= 12800 && t <= 13055
            },
            "CJK Compatibility": function(t) {
                return t >= 13056 && t <= 13311
            },
            "CJK Unified Ideographs Extension A": function(t) {
                return t >= 13312 && t <= 19903
            },
            "Yijing Hexagram Symbols": function(t) {
                return t >= 19904 && t <= 19967
            },
            "CJK Unified Ideographs": function(t) {
                return t >= 19968 && t <= 40959
            },
            "Yi Syllables": function(t) {
                return t >= 40960 && t <= 42127
            },
            "Yi Radicals": function(t) {
                return t >= 42128 && t <= 42191
            },
            "Hangul Jamo Extended-A": function(t) {
                return t >= 43360 && t <= 43391
            },
            "Hangul Syllables": function(t) {
                return t >= 44032 && t <= 55215
            },
            "Hangul Jamo Extended-B": function(t) {
                return t >= 55216 && t <= 55295
            },
            "Private Use Area": function(t) {
                return t >= 57344 && t <= 63743
            },
            "CJK Compatibility Ideographs": function(t) {
                return t >= 63744 && t <= 64255
            },
            "Arabic Presentation Forms-A": function(t) {
                return t >= 64336 && t <= 65023
            },
            "Vertical Forms": function(t) {
                return t >= 65040 && t <= 65055
            },
            "CJK Compatibility Forms": function(t) {
                return t >= 65072 && t <= 65103
            },
            "Small Form Variants": function(t) {
                return t >= 65104 && t <= 65135
            },
            "Arabic Presentation Forms-B": function(t) {
                return t >= 65136 && t <= 65279
            },
            "Halfwidth and Fullwidth Forms": function(t) {
                return t >= 65280 && t <= 65519
            }
        };
        function er(t) {
            for (var e = 0, i = t; e < i.length; e += 1)
                if (rr(i[e].charCodeAt(0)))
                    return !0;
            return !1
        }
        function ir(t) {
            return !(tr.Arabic(t) || tr["Arabic Supplement"](t) || tr["Arabic Extended-A"](t) || tr["Arabic Presentation Forms-A"](t) || tr["Arabic Presentation Forms-B"](t))
        }
        function rr(t) {
            return !!(746 === t || 747 === t || !(t < 4352) && (tr["Bopomofo Extended"](t) || tr.Bopomofo(t) || tr["CJK Compatibility Forms"](t) && !(t >= 65097 && t <= 65103) || tr["CJK Compatibility Ideographs"](t) || tr["CJK Compatibility"](t) || tr["CJK Radicals Supplement"](t) || tr["CJK Strokes"](t) || !(!tr["CJK Symbols and Punctuation"](t) || t >= 12296 && t <= 12305 || t >= 12308 && t <= 12319 || 12336 === t) || tr["CJK Unified Ideographs Extension A"](t) || tr["CJK Unified Ideographs"](t) || tr["Enclosed CJK Letters and Months"](t) || tr["Hangul Compatibility Jamo"](t) || tr["Hangul Jamo Extended-A"](t) || tr["Hangul Jamo Extended-B"](t) || tr["Hangul Jamo"](t) || tr["Hangul Syllables"](t) || tr.Hiragana(t) || tr["Ideographic Description Characters"](t) || tr.Kanbun(t) || tr["Kangxi Radicals"](t) || tr["Katakana Phonetic Extensions"](t) || tr.Katakana(t) && 12540 !== t || !(!tr["Halfwidth and Fullwidth Forms"](t) || 65288 === t || 65289 === t || 65293 === t || t >= 65306 && t <= 65310 || 65339 === t || 65341 === t || 65343 === t || t >= 65371 && t <= 65503 || 65507 === t || t >= 65512 && t <= 65519) || !(!tr["Small Form Variants"](t) || t >= 65112 && t <= 65118 || t >= 65123 && t <= 65126) || tr["Unified Canadian Aboriginal Syllabics"](t) || tr["Unified Canadian Aboriginal Syllabics Extended"](t) || tr["Vertical Forms"](t) || tr["Yijing Hexagram Symbols"](t) || tr["Yi Syllables"](t) || tr["Yi Radicals"](t)))
        }
        function nr(t) {
            return !(rr(t) || function(t) {
                return !!(tr["Latin-1 Supplement"](t) && (167 === t || 169 === t || 174 === t || 177 === t || 188 === t || 189 === t || 190 === t || 215 === t || 247 === t) || tr["General Punctuation"](t) && (8214 === t || 8224 === t || 8225 === t || 8240 === t || 8241 === t || 8251 === t || 8252 === t || 8258 === t || 8263 === t || 8264 === t || 8265 === t || 8273 === t) || tr["Letterlike Symbols"](t) || tr["Number Forms"](t) || tr["Miscellaneous Technical"](t) && (t >= 8960 && t <= 8967 || t >= 8972 && t <= 8991 || t >= 8996 && t <= 9e3 || 9003 === t || t >= 9085 && t <= 9114 || t >= 9150 && t <= 9165 || 9167 === t || t >= 9169 && t <= 9179 || t >= 9186 && t <= 9215) || tr["Control Pictures"](t) && 9251 !== t || tr["Optical Character Recognition"](t) || tr["Enclosed Alphanumerics"](t) || tr["Geometric Shapes"](t) || tr["Miscellaneous Symbols"](t) && !(t >= 9754 && t <= 9759) || tr["Miscellaneous Symbols and Arrows"](t) && (t >= 11026 && t <= 11055 || t >= 11088 && t <= 11097 || t >= 11192 && t <= 11243) || tr["CJK Symbols and Punctuation"](t) || tr.Katakana(t) || tr["Private Use Area"](t) || tr["CJK Compatibility Forms"](t) || tr["Small Form Variants"](t) || tr["Halfwidth and Fullwidth Forms"](t) || 8734 === t || 8756 === t || 8757 === t || t >= 9984 && t <= 10087 || t >= 10102 && t <= 10131 || 65532 === t || 65533 === t)
            }(t))
        }
        function or(t, e) {
            return !(!e && (t >= 1424 && t <= 2303 || tr["Arabic Presentation Forms-A"](t) || tr["Arabic Presentation Forms-B"](t)) || t >= 2304 && t <= 3583 || t >= 3840 && t <= 4255 || tr.Khmer(t))
        }
        var ar, sr = !1, lr = null, ur = !1, cr = new at, pr = {
            applyArabicShaping: null,
            processBidirectionalText: null,
            processStyledBidirectionalText: null,
            isLoaded: function() {
                return ur || null != pr.applyArabicShaping
            }
        }, hr = function(t, e) {
            this.zoom = t,
            e ? (this.now = e.now,
            this.fadeDuration = e.fadeDuration,
            this.zoomHistory = e.zoomHistory,
            this.transition = e.transition) : (this.now = 0,
            this.fadeDuration = 0,
            this.zoomHistory = new Qi,
            this.transition = {})
        };
        hr.prototype.isSupportedScript = function(t) {
            return function(t, e) {
                for (var i = 0, r = t; i < r.length; i += 1)
                    if (!or(r[i].charCodeAt(0), e))
                        return !1;
                return !0
            }(t, pr.isLoaded())
        }
        ,
        hr.prototype.crossFadingFactor = function() {
            return 0 === this.fadeDuration ? 1 : Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1)
        }
        ,
        hr.prototype.getCrossfadeParameters = function() {
            var t = this.zoom
              , e = t - Math.floor(t)
              , i = this.crossFadingFactor();
            return t > this.zoomHistory.lastIntegerZoom ? {
                fromScale: 2,
                toScale: 1,
                t: e + (1 - e) * i
            } : {
                fromScale: .5,
                toScale: 1,
                t: 1 - (1 - i) * e
            }
        }
        ;
        var dr = function(t, e) {
            this.property = t,
            this.value = e,
            this.expression = ui(void 0 === e ? t.specification.default : e, t.specification)
        };
        dr.prototype.isDataDriven = function() {
            return "source" === this.expression.kind || "composite" === this.expression.kind
        }
        ,
        dr.prototype.possiblyEvaluate = function(t) {
            return this.property.possiblyEvaluate(this, t)
        }
        ;
        var fr = function(t) {
            this.property = t,
            this.value = new dr(t,void 0)
        };
        fr.prototype.transitioned = function(t, e) {
            return new yr(this.property,this.value,e,p({}, t.transition, this.transition),t.now)
        }
        ,
        fr.prototype.untransitioned = function() {
            return new yr(this.property,this.value,null,{},0)
        }
        ;
        var mr = function(t) {
            this._properties = t,
            this._values = Object.create(t.defaultTransitionablePropertyValues)
        };
        mr.prototype.getValue = function(t) {
            return x(this._values[t].value.value)
        }
        ,
        mr.prototype.setValue = function(t, e) {
            this._values.hasOwnProperty(t) || (this._values[t] = new fr(this._values[t].property)),
            this._values[t].value = new dr(this._values[t].property,null === e ? void 0 : x(e))
        }
        ,
        mr.prototype.getTransition = function(t) {
            return x(this._values[t].transition)
        }
        ,
        mr.prototype.setTransition = function(t, e) {
            this._values.hasOwnProperty(t) || (this._values[t] = new fr(this._values[t].property)),
            this._values[t].transition = x(e) || void 0
        }
        ,
        mr.prototype.serialize = function() {
            for (var t = {}, e = 0, i = Object.keys(this._values); e < i.length; e += 1) {
                var r = i[e]
                  , n = this.getValue(r);
                void 0 !== n && (t[r] = n);
                var o = this.getTransition(r);
                void 0 !== o && (t[r + "-transition"] = o)
            }
            return t
        }
        ,
        mr.prototype.transitioned = function(t, e) {
            for (var i = new gr(this._properties), r = 0, n = Object.keys(this._values); r < n.length; r += 1) {
                var o = n[r];
                i._values[o] = this._values[o].transitioned(t, e._values[o])
            }
            return i
        }
        ,
        mr.prototype.untransitioned = function() {
            for (var t = new gr(this._properties), e = 0, i = Object.keys(this._values); e < i.length; e += 1) {
                var r = i[e];
                t._values[r] = this._values[r].untransitioned()
            }
            return t
        }
        ;
        var yr = function(t, e, i, r, n) {
            this.property = t,
            this.value = e,
            this.begin = n + r.delay || 0,
            this.end = this.begin + r.duration || 0,
            t.specification.transition && (r.delay || r.duration) && (this.prior = i)
        };
        yr.prototype.possiblyEvaluate = function(t) {
            var e = t.now || 0
              , i = this.value.possiblyEvaluate(t)
              , r = this.prior;
            if (r) {
                if (e > this.end)
                    return this.prior = null,
                    i;
                if (this.value.isDataDriven())
                    return this.prior = null,
                    i;
                if (e < this.begin)
                    return r.possiblyEvaluate(t);
                var n = (e - this.begin) / (this.end - this.begin);
                return this.property.interpolate(r.possiblyEvaluate(t), i, function(t) {
                    if (n <= 0)
                        return 0;
                    if (n >= 1)
                        return 1;
                    var e = n * n
                      , i = e * n;
                    return 4 * (n < .5 ? i : 3 * (n - e) + i - .75)
                }())
            }
            return i
        }
        ;
        var gr = function(t) {
            this._properties = t,
            this._values = Object.create(t.defaultTransitioningPropertyValues)
        };
        gr.prototype.possiblyEvaluate = function(t) {
            for (var e = new xr(this._properties), i = 0, r = Object.keys(this._values); i < r.length; i += 1) {
                var n = r[i];
                e._values[n] = this._values[n].possiblyEvaluate(t)
            }
            return e
        }
        ,
        gr.prototype.hasTransition = function() {
            for (var t = 0, e = Object.keys(this._values); t < e.length; t += 1) {
                var i = e[t];
                if (this._values[i].prior)
                    return !0
            }
            return !1
        }
        ;
        var _r = function(t) {
            this._properties = t,
            this._values = Object.create(t.defaultPropertyValues)
        };
        _r.prototype.getValue = function(t) {
            return x(this._values[t].value)
        }
        ,
        _r.prototype.setValue = function(t, e) {
            this._values[t] = new dr(this._values[t].property,null === e ? void 0 : x(e))
        }
        ,
        _r.prototype.serialize = function() {
            for (var t = {}, e = 0, i = Object.keys(this._values); e < i.length; e += 1) {
                var r = i[e]
                  , n = this.getValue(r);
                void 0 !== n && (t[r] = n)
            }
            return t
        }
        ,
        _r.prototype.possiblyEvaluate = function(t) {
            for (var e = new xr(this._properties), i = 0, r = Object.keys(this._values); i < r.length; i += 1) {
                var n = r[i];
                e._values[n] = this._values[n].possiblyEvaluate(t)
            }
            return e
        }
        ;
        var vr = function(t, e, i) {
            this.property = t,
            this.value = e,
            this.parameters = i
        };
        vr.prototype.isConstant = function() {
            return "constant" === this.value.kind
        }
        ,
        vr.prototype.constantOr = function(t) {
            return "constant" === this.value.kind ? this.value.value : t
        }
        ,
        vr.prototype.evaluate = function(t, e) {
            return this.property.evaluate(this.value, this.parameters, t, e)
        }
        ;
        var xr = function(t) {
            this._properties = t,
            this._values = Object.create(t.defaultPossiblyEvaluatedValues)
        };
        xr.prototype.get = function(t) {
            return this._values[t]
        }
        ;
        var br = function(t) {
            this.specification = t
        };
        br.prototype.possiblyEvaluate = function(t, e) {
            return t.expression.evaluate(e)
        }
        ,
        br.prototype.interpolate = function(t, e, i) {
            var r = ee[this.specification.type];
            return r ? r(t, e, i) : t
        }
        ;
        var wr = function(t) {
            this.specification = t
        };
        wr.prototype.possiblyEvaluate = function(t, e) {
            return "constant" === t.expression.kind || "camera" === t.expression.kind ? new vr(this,{
                kind: "constant",
                value: t.expression.evaluate(e)
            },e) : new vr(this,t.expression,e)
        }
        ,
        wr.prototype.interpolate = function(t, e, i) {
            if ("constant" !== t.value.kind || "constant" !== e.value.kind)
                return t;
            if (void 0 === t.value.value || void 0 === e.value.value)
                return new vr(this,{
                    kind: "constant",
                    value: void 0
                },t.parameters);
            var r = ee[this.specification.type];
            return r ? new vr(this,{
                kind: "constant",
                value: r(t.value.value, e.value.value, i)
            },t.parameters) : t
        }
        ,
        wr.prototype.evaluate = function(t, e, i, r) {
            return "constant" === t.kind ? t.value : t.evaluate(e, i, r)
        }
        ;
        var Tr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.possiblyEvaluate = function(t, e) {
                if (void 0 === t.value)
                    return new vr(this,{
                        kind: "constant",
                        value: void 0
                    },e);
                if ("constant" === t.expression.kind) {
                    var i = t.expression.evaluate(e)
                      , r = this._calculate(i, i, i, e);
                    return new vr(this,{
                        kind: "constant",
                        value: r
                    },e)
                }
                if ("camera" === t.expression.kind) {
                    var n = this._calculate(t.expression.evaluate({
                        zoom: e.zoom - 1
                    }), t.expression.evaluate({
                        zoom: e.zoom
                    }), t.expression.evaluate({
                        zoom: e.zoom + 1
                    }), e);
                    return new vr(this,{
                        kind: "constant",
                        value: n
                    },e)
                }
                return new vr(this,t.expression,e)
            }
            ,
            e.prototype.evaluate = function(t, e, i, r) {
                if ("source" === t.kind) {
                    var n = t.evaluate(e, i, r);
                    return this._calculate(n, n, n, e)
                }
                return "composite" === t.kind ? this._calculate(t.evaluate({
                    zoom: Math.floor(e.zoom) - 1
                }, i, r), t.evaluate({
                    zoom: Math.floor(e.zoom)
                }, i, r), t.evaluate({
                    zoom: Math.floor(e.zoom) + 1
                }, i, r), e) : t.value
            }
            ,
            e.prototype._calculate = function(t, e, i, r) {
                return r.zoom > r.zoomHistory.lastIntegerZoom ? {
                    from: t,
                    to: e
                } : {
                    from: i,
                    to: e
                }
            }
            ,
            e.prototype.interpolate = function(t) {
                return t
            }
            ,
            e
        }(wr)
          , Sr = function(t) {
            this.specification = t
        };
        Sr.prototype.possiblyEvaluate = function(t, e) {
            if (void 0 !== t.value) {
                if ("constant" === t.expression.kind) {
                    var i = t.expression.evaluate(e);
                    return this._calculate(i, i, i, e)
                }
                return this._calculate(t.expression.evaluate(new hr(Math.floor(e.zoom - 1),e)), t.expression.evaluate(new hr(Math.floor(e.zoom),e)), t.expression.evaluate(new hr(Math.floor(e.zoom + 1),e)), e)
            }
        }
        ,
        Sr.prototype._calculate = function(t, e, i, r) {
            return r.zoom > r.zoomHistory.lastIntegerZoom ? {
                from: t,
                to: e
            } : {
                from: i,
                to: e
            }
        }
        ,
        Sr.prototype.interpolate = function(t) {
            return t
        }
        ;
        var Ar = function(t) {
            this.specification = t
        };
        Ar.prototype.possiblyEvaluate = function(t, e) {
            return !!t.expression.evaluate(e)
        }
        ,
        Ar.prototype.interpolate = function() {
            return !1
        }
        ;
        var kr = function(t) {
            for (var e in this.properties = t,
            this.defaultPropertyValues = {},
            this.defaultTransitionablePropertyValues = {},
            this.defaultTransitioningPropertyValues = {},
            this.defaultPossiblyEvaluatedValues = {},
            t) {
                var i = t[e]
                  , r = this.defaultPropertyValues[e] = new dr(i,void 0)
                  , n = this.defaultTransitionablePropertyValues[e] = new fr(i);
                this.defaultTransitioningPropertyValues[e] = n.untransitioned(),
                this.defaultPossiblyEvaluatedValues[e] = r.possiblyEvaluate({})
            }
        };
        Gi("DataDrivenProperty", wr),
        Gi("DataConstantProperty", br),
        Gi("CrossFadedDataDrivenProperty", Tr),
        Gi("CrossFadedProperty", Sr),
        Gi("ColorRampProperty", Ar);
        var Er = function(t) {
            function e(e, i) {
                if (t.call(this),
                this.id = e.id,
                this.type = e.type,
                this.visibility = "visible",
                this._featureFilter = function() {
                    return !0
                }
                ,
                "custom" !== e.type && (e = e,
                this.metadata = e.metadata,
                this.minzoom = e.minzoom,
                this.maxzoom = e.maxzoom,
                "background" !== e.type && (this.source = e.source,
                this.sourceLayer = e["source-layer"],
                this.filter = e.filter),
                i.layout && (this._unevaluatedLayout = new _r(i.layout)),
                i.paint)) {
                    for (var r in this._transitionablePaint = new mr(i.paint),
                    e.paint)
                        this.setPaintProperty(r, e.paint[r], {
                            validate: !1
                        });
                    for (var n in e.layout)
                        this.setLayoutProperty(n, e.layout[n], {
                            validate: !1
                        });
                    this._transitioningPaint = this._transitionablePaint.untransitioned()
                }
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getCrossfadeParameters = function() {
                return this._crossfadeParameters
            }
            ,
            e.prototype.getLayoutProperty = function(t) {
                return "visibility" === t ? this.visibility : this._unevaluatedLayout.getValue(t)
            }
            ,
            e.prototype.setLayoutProperty = function(t, e, i) {
                if (null != e) {
                    var r = "layers." + this.id + ".layout." + t;
                    if (this._validate(ji, r, t, e, i))
                        return
                }
                "visibility" !== t ? this._unevaluatedLayout.setValue(t, e) : this.visibility = "none" === e ? e : "visible"
            }
            ,
            e.prototype.getPaintProperty = function(t) {
                return g(t, "-transition") ? this._transitionablePaint.getTransition(t.slice(0, -"-transition".length)) : this._transitionablePaint.getValue(t)
            }
            ,
            e.prototype.setPaintProperty = function(t, e, i) {
                if (null != e) {
                    var r = "layers." + this.id + ".paint." + t;
                    if (this._validate(Vi, r, t, e, i))
                        return !1
                }
                if (g(t, "-transition"))
                    return this._transitionablePaint.setTransition(t.slice(0, -"-transition".length), e || void 0),
                    !1;
                var n = this._transitionablePaint._values[t]
                  , o = "cross-faded-data-driven" === n.property.specification["property-type"] && !n.value.value && e
                  , a = this._transitionablePaint._values[t].value.isDataDriven();
                this._transitionablePaint.setValue(t, e);
                var s = this._transitionablePaint._values[t].value.isDataDriven();
                return this._handleSpecialPaintPropertyUpdate(t),
                s || a || o
            }
            ,
            e.prototype._handleSpecialPaintPropertyUpdate = function(t) {}
            ,
            e.prototype.isHidden = function(t) {
                return !!(this.minzoom && t < this.minzoom) || !!(this.maxzoom && t >= this.maxzoom) || "none" === this.visibility
            }
            ,
            e.prototype.updateTransitions = function(t) {
                this._transitioningPaint = this._transitionablePaint.transitioned(t, this._transitioningPaint)
            }
            ,
            e.prototype.hasTransition = function() {
                return this._transitioningPaint.hasTransition()
            }
            ,
            e.prototype.recalculate = function(t) {
                t.getCrossfadeParameters && (this._crossfadeParameters = t.getCrossfadeParameters()),
                this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t)),
                this.paint = this._transitioningPaint.possiblyEvaluate(t)
            }
            ,
            e.prototype.serialize = function() {
                var t = {
                    id: this.id,
                    type: this.type,
                    source: this.source,
                    "source-layer": this.sourceLayer,
                    metadata: this.metadata,
                    minzoom: this.minzoom,
                    maxzoom: this.maxzoom,
                    filter: this.filter,
                    layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(),
                    paint: this._transitionablePaint && this._transitionablePaint.serialize()
                };
                return "none" === this.visibility && (t.layout = t.layout || {},
                t.layout.visibility = "none"),
                v(t, function(t, e) {
                    return !(void 0 === t || "layout" === e && !Object.keys(t).length || "paint" === e && !Object.keys(t).length)
                })
            }
            ,
            e.prototype._validate = function(t, e, i, r, n) {
                return (!n || !1 !== n.validate) && $i(this, t.call(Ni, {
                    key: e,
                    layerType: this.type,
                    objectKey: i,
                    value: r,
                    styleSpec: st,
                    style: {
                        glyphs: !0,
                        sprite: !0
                    }
                }))
            }
            ,
            e.prototype.hasOffscreenPass = function() {
                return !1
            }
            ,
            e.prototype.resize = function() {}
            ,
            e.prototype.isStateDependent = function() {
                for (var t in this.paint._values) {
                    var e = this.paint.get(t);
                    if (e instanceof vr && qe(e.property.specification) && ("source" === e.value.kind || "composite" === e.value.kind) && e.value.isStateDependent)
                        return !0
                }
                return !1
            }
            ,
            e
        }(at)
          , Cr = {
            Int8: Int8Array,
            Uint8: Uint8Array,
            Int16: Int16Array,
            Uint16: Uint16Array,
            Int32: Int32Array,
            Uint32: Uint32Array,
            Float32: Float32Array
        }
          , Pr = function(t, e) {
            this._structArray = t,
            this._pos1 = e * this.size,
            this._pos2 = this._pos1 / 2,
            this._pos4 = this._pos1 / 4,
            this._pos8 = this._pos1 / 8
        }
          , Mr = function() {
            this.isTransferred = !1,
            this.capacity = -1,
            this.resize(0)
        };
        function Ir(t, e) {
            void 0 === e && (e = 1);
            var i = 0
              , r = 0;
            return {
                members: t.map(function(t) {
                    var n, o = (n = t.type,
                    Cr[n].BYTES_PER_ELEMENT), a = i = zr(i, Math.max(e, o)), s = t.components || 1;
                    return r = Math.max(r, o),
                    i += o * s,
                    {
                        name: t.name,
                        type: t.type,
                        components: s,
                        offset: a
                    }
                }),
                size: zr(i, Math.max(r, e)),
                alignment: e
            }
        }
        function zr(t, e) {
            return Math.ceil(t / e) * e
        }
        Mr.serialize = function(t, e) {
            return t._trim(),
            e && (t.isTransferred = !0,
            e.push(t.arrayBuffer)),
            {
                length: t.length,
                arrayBuffer: t.arrayBuffer
            }
        }
        ,
        Mr.deserialize = function(t) {
            var e = Object.create(this.prototype);
            return e.arrayBuffer = t.arrayBuffer,
            e.length = t.length,
            e.capacity = t.arrayBuffer.byteLength / e.bytesPerElement,
            e._refreshViews(),
            e
        }
        ,
        Mr.prototype._trim = function() {
            this.length !== this.capacity && (this.capacity = this.length,
            this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement),
            this._refreshViews())
        }
        ,
        Mr.prototype.clear = function() {
            this.length = 0
        }
        ,
        Mr.prototype.resize = function(t) {
            this.reserve(t),
            this.length = t
        }
        ,
        Mr.prototype.reserve = function(t) {
            if (t > this.capacity) {
                this.capacity = Math.max(t, Math.floor(5 * this.capacity), 128),
                this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);
                var e = this.uint8;
                this._refreshViews(),
                e && this.uint8.set(e)
            }
        }
        ,
        Mr.prototype._refreshViews = function() {
            throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")
        }
        ;
        var Lr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e) {
                var i = this.length;
                return this.resize(i + 1),
                this.emplace(i, t, e)
            }
            ,
            e.prototype.emplace = function(t, e, i) {
                var r = 2 * t;
                return this.int16[r + 0] = e,
                this.int16[r + 1] = i,
                t
            }
            ,
            e
        }(Mr);
        Lr.prototype.bytesPerElement = 4,
        Gi("StructArrayLayout2i4", Lr);
        var Dr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r) {
                var n = this.length;
                return this.resize(n + 1),
                this.emplace(n, t, e, i, r)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n) {
                var o = 4 * t;
                return this.int16[o + 0] = e,
                this.int16[o + 1] = i,
                this.int16[o + 2] = r,
                this.int16[o + 3] = n,
                t
            }
            ,
            e
        }(Mr);
        Dr.prototype.bytesPerElement = 8,
        Gi("StructArrayLayout4i8", Dr);
        var Or = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r, n, o) {
                var a = this.length;
                return this.resize(a + 1),
                this.emplace(a, t, e, i, r, n, o)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n, o, a) {
                var s = 6 * t;
                return this.int16[s + 0] = e,
                this.int16[s + 1] = i,
                this.int16[s + 2] = r,
                this.int16[s + 3] = n,
                this.int16[s + 4] = o,
                this.int16[s + 5] = a,
                t
            }
            ,
            e
        }(Mr);
        Or.prototype.bytesPerElement = 12,
        Gi("StructArrayLayout2i4i12", Or);
        var Rr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r, n, o, a, s) {
                var l = this.length;
                return this.resize(l + 1),
                this.emplace(l, t, e, i, r, n, o, a, s)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n, o, a, s, l) {
                var u = 6 * t
                  , c = 12 * t;
                return this.int16[u + 0] = e,
                this.int16[u + 1] = i,
                this.int16[u + 2] = r,
                this.int16[u + 3] = n,
                this.uint8[c + 8] = o,
                this.uint8[c + 9] = a,
                this.uint8[c + 10] = s,
                this.uint8[c + 11] = l,
                t
            }
            ,
            e
        }(Mr);
        Rr.prototype.bytesPerElement = 12,
        Gi("StructArrayLayout4i4ub12", Rr);
        var Fr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.uint16 = new Uint16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r, n, o, a, s) {
                var l = this.length;
                return this.resize(l + 1),
                this.emplace(l, t, e, i, r, n, o, a, s)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n, o, a, s, l) {
                var u = 8 * t;
                return this.uint16[u + 0] = e,
                this.uint16[u + 1] = i,
                this.uint16[u + 2] = r,
                this.uint16[u + 3] = n,
                this.uint16[u + 4] = o,
                this.uint16[u + 5] = a,
                this.uint16[u + 6] = s,
                this.uint16[u + 7] = l,
                t
            }
            ,
            e
        }(Mr);
        Fr.prototype.bytesPerElement = 16,
        Gi("StructArrayLayout8ui16", Fr);
        var Br = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer),
                this.uint16 = new Uint16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r, n, o, a, s) {
                var l = this.length;
                return this.resize(l + 1),
                this.emplace(l, t, e, i, r, n, o, a, s)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n, o, a, s, l) {
                var u = 8 * t;
                return this.int16[u + 0] = e,
                this.int16[u + 1] = i,
                this.int16[u + 2] = r,
                this.int16[u + 3] = n,
                this.uint16[u + 4] = o,
                this.uint16[u + 5] = a,
                this.uint16[u + 6] = s,
                this.uint16[u + 7] = l,
                t
            }
            ,
            e
        }(Mr);
        Br.prototype.bytesPerElement = 16,
        Gi("StructArrayLayout4i4ui16", Br);
        var Nr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.float32 = new Float32Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i) {
                var r = this.length;
                return this.resize(r + 1),
                this.emplace(r, t, e, i)
            }
            ,
            e.prototype.emplace = function(t, e, i, r) {
                var n = 3 * t;
                return this.float32[n + 0] = e,
                this.float32[n + 1] = i,
                this.float32[n + 2] = r,
                t
            }
            ,
            e
        }(Mr);
        Nr.prototype.bytesPerElement = 12,
        Gi("StructArrayLayout3f12", Nr);
        var Ur = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.uint32 = new Uint32Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t) {
                var e = this.length;
                return this.resize(e + 1),
                this.emplace(e, t)
            }
            ,
            e.prototype.emplace = function(t, e) {
                var i = 1 * t;
                return this.uint32[i + 0] = e,
                t
            }
            ,
            e
        }(Mr);
        Ur.prototype.bytesPerElement = 4,
        Gi("StructArrayLayout1ul4", Ur);
        var Vr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer),
                this.uint32 = new Uint32Array(this.arrayBuffer),
                this.uint16 = new Uint16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r, n, o, a, s, l, u, c) {
                var p = this.length;
                return this.resize(p + 1),
                this.emplace(p, t, e, i, r, n, o, a, s, l, u, c)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n, o, a, s, l, u, c, p) {
                var h = 12 * t
                  , d = 6 * t;
                return this.int16[h + 0] = e,
                this.int16[h + 1] = i,
                this.int16[h + 2] = r,
                this.int16[h + 3] = n,
                this.int16[h + 4] = o,
                this.int16[h + 5] = a,
                this.uint32[d + 3] = s,
                this.uint16[h + 8] = l,
                this.uint16[h + 9] = u,
                this.int16[h + 10] = c,
                this.int16[h + 11] = p,
                t
            }
            ,
            e
        }(Mr);
        Vr.prototype.bytesPerElement = 24,
        Gi("StructArrayLayout6i1ul2ui2i24", Vr);
        var jr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r, n, o) {
                var a = this.length;
                return this.resize(a + 1),
                this.emplace(a, t, e, i, r, n, o)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n, o, a) {
                var s = 6 * t;
                return this.int16[s + 0] = e,
                this.int16[s + 1] = i,
                this.int16[s + 2] = r,
                this.int16[s + 3] = n,
                this.int16[s + 4] = o,
                this.int16[s + 5] = a,
                t
            }
            ,
            e
        }(Mr);
        jr.prototype.bytesPerElement = 12,
        Gi("StructArrayLayout2i2i2i12", jr);
        var $r = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e) {
                var i = this.length;
                return this.resize(i + 1),
                this.emplace(i, t, e)
            }
            ,
            e.prototype.emplace = function(t, e, i) {
                var r = 4 * t;
                return this.uint8[r + 0] = e,
                this.uint8[r + 1] = i,
                t
            }
            ,
            e
        }(Mr);
        $r.prototype.bytesPerElement = 4,
        Gi("StructArrayLayout2ub4", $r);
        var qr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer),
                this.uint16 = new Uint16Array(this.arrayBuffer),
                this.uint32 = new Uint32Array(this.arrayBuffer),
                this.float32 = new Float32Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r, n, o, a, s, l, u, c, p, h, d) {
                var f = this.length;
                return this.resize(f + 1),
                this.emplace(f, t, e, i, r, n, o, a, s, l, u, c, p, h, d)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n, o, a, s, l, u, c, p, h, d, f) {
                var m = 20 * t
                  , y = 10 * t
                  , g = 40 * t;
                return this.int16[m + 0] = e,
                this.int16[m + 1] = i,
                this.uint16[m + 2] = r,
                this.uint16[m + 3] = n,
                this.uint32[y + 2] = o,
                this.uint32[y + 3] = a,
                this.uint32[y + 4] = s,
                this.uint16[m + 10] = l,
                this.uint16[m + 11] = u,
                this.uint16[m + 12] = c,
                this.float32[y + 7] = p,
                this.float32[y + 8] = h,
                this.uint8[g + 36] = d,
                this.uint8[g + 37] = f,
                t
            }
            ,
            e
        }(Mr);
        qr.prototype.bytesPerElement = 40,
        Gi("StructArrayLayout2i2ui3ul3ui2f2ub40", qr);
        var Wr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer),
                this.uint16 = new Uint16Array(this.arrayBuffer),
                this.uint32 = new Uint32Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r, n, o, a, s, l, u, c, p, h, d) {
                var f = this.length;
                return this.resize(f + 1),
                this.emplace(f, t, e, i, r, n, o, a, s, l, u, c, p, h, d)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n, o, a, s, l, u, c, p, h, d, f) {
                var m = 16 * t
                  , y = 8 * t;
                return this.int16[m + 0] = e,
                this.int16[m + 1] = i,
                this.int16[m + 2] = r,
                this.int16[m + 3] = n,
                this.uint16[m + 4] = o,
                this.uint16[m + 5] = a,
                this.uint16[m + 6] = s,
                this.uint16[m + 7] = l,
                this.uint16[m + 8] = u,
                this.uint16[m + 9] = c,
                this.uint16[m + 10] = p,
                this.uint16[m + 11] = h,
                this.uint16[m + 12] = d,
                this.uint32[y + 7] = f,
                t
            }
            ,
            e
        }(Mr);
        Wr.prototype.bytesPerElement = 32,
        Gi("StructArrayLayout4i9ui1ul32", Wr);
        var Hr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.float32 = new Float32Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t) {
                var e = this.length;
                return this.resize(e + 1),
                this.emplace(e, t)
            }
            ,
            e.prototype.emplace = function(t, e) {
                var i = 1 * t;
                return this.float32[i + 0] = e,
                t
            }
            ,
            e
        }(Mr);
        Hr.prototype.bytesPerElement = 4,
        Gi("StructArrayLayout1f4", Hr);
        var Xr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.int16 = new Int16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i) {
                var r = this.length;
                return this.resize(r + 1),
                this.emplace(r, t, e, i)
            }
            ,
            e.prototype.emplace = function(t, e, i, r) {
                var n = 3 * t;
                return this.int16[n + 0] = e,
                this.int16[n + 1] = i,
                this.int16[n + 2] = r,
                t
            }
            ,
            e
        }(Mr);
        Xr.prototype.bytesPerElement = 6,
        Gi("StructArrayLayout3i6", Xr);
        var Zr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.uint32 = new Uint32Array(this.arrayBuffer),
                this.uint16 = new Uint16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i) {
                var r = this.length;
                return this.resize(r + 1),
                this.emplace(r, t, e, i)
            }
            ,
            e.prototype.emplace = function(t, e, i, r) {
                var n = 2 * t
                  , o = 4 * t;
                return this.uint32[n + 0] = e,
                this.uint16[o + 2] = i,
                this.uint16[o + 3] = r,
                t
            }
            ,
            e
        }(Mr);
        Zr.prototype.bytesPerElement = 8,
        Gi("StructArrayLayout1ul2ui8", Zr);
        var Gr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.uint16 = new Uint16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i) {
                var r = this.length;
                return this.resize(r + 1),
                this.emplace(r, t, e, i)
            }
            ,
            e.prototype.emplace = function(t, e, i, r) {
                var n = 3 * t;
                return this.uint16[n + 0] = e,
                this.uint16[n + 1] = i,
                this.uint16[n + 2] = r,
                t
            }
            ,
            e
        }(Mr);
        Gr.prototype.bytesPerElement = 6,
        Gi("StructArrayLayout3ui6", Gr);
        var Yr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.uint16 = new Uint16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e) {
                var i = this.length;
                return this.resize(i + 1),
                this.emplace(i, t, e)
            }
            ,
            e.prototype.emplace = function(t, e, i) {
                var r = 2 * t;
                return this.uint16[r + 0] = e,
                this.uint16[r + 1] = i,
                t
            }
            ,
            e
        }(Mr);
        Yr.prototype.bytesPerElement = 4,
        Gi("StructArrayLayout2ui4", Yr);
        var Kr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.uint16 = new Uint16Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t) {
                var e = this.length;
                return this.resize(e + 1),
                this.emplace(e, t)
            }
            ,
            e.prototype.emplace = function(t, e) {
                var i = 1 * t;
                return this.uint16[i + 0] = e,
                t
            }
            ,
            e
        }(Mr);
        Kr.prototype.bytesPerElement = 2,
        Gi("StructArrayLayout1ui2", Kr);
        var Jr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.float32 = new Float32Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e) {
                var i = this.length;
                return this.resize(i + 1),
                this.emplace(i, t, e)
            }
            ,
            e.prototype.emplace = function(t, e, i) {
                var r = 2 * t;
                return this.float32[r + 0] = e,
                this.float32[r + 1] = i,
                t
            }
            ,
            e
        }(Mr);
        Jr.prototype.bytesPerElement = 8,
        Gi("StructArrayLayout2f8", Jr);
        var Qr = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._refreshViews = function() {
                this.uint8 = new Uint8Array(this.arrayBuffer),
                this.float32 = new Float32Array(this.arrayBuffer)
            }
            ,
            e.prototype.emplaceBack = function(t, e, i, r) {
                var n = this.length;
                return this.resize(n + 1),
                this.emplace(n, t, e, i, r)
            }
            ,
            e.prototype.emplace = function(t, e, i, r, n) {
                var o = 4 * t;
                return this.float32[o + 0] = e,
                this.float32[o + 1] = i,
                this.float32[o + 2] = r,
                this.float32[o + 3] = n,
                t
            }
            ,
            e
        }(Mr);
        Qr.prototype.bytesPerElement = 16,
        Gi("StructArrayLayout4f16", Qr);
        var tn = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e;
            var i = {
                anchorPointX: {
                    configurable: !0
                },
                anchorPointY: {
                    configurable: !0
                },
                x1: {
                    configurable: !0
                },
                y1: {
                    configurable: !0
                },
                x2: {
                    configurable: !0
                },
                y2: {
                    configurable: !0
                },
                featureIndex: {
                    configurable: !0
                },
                sourceLayerIndex: {
                    configurable: !0
                },
                bucketIndex: {
                    configurable: !0
                },
                radius: {
                    configurable: !0
                },
                signedDistanceFromAnchor: {
                    configurable: !0
                },
                anchorPoint: {
                    configurable: !0
                }
            };
            return i.anchorPointX.get = function() {
                return this._structArray.int16[this._pos2 + 0]
            }
            ,
            i.anchorPointX.set = function(t) {
                this._structArray.int16[this._pos2 + 0] = t
            }
            ,
            i.anchorPointY.get = function() {
                return this._structArray.int16[this._pos2 + 1]
            }
            ,
            i.anchorPointY.set = function(t) {
                this._structArray.int16[this._pos2 + 1] = t
            }
            ,
            i.x1.get = function() {
                return this._structArray.int16[this._pos2 + 2]
            }
            ,
            i.x1.set = function(t) {
                this._structArray.int16[this._pos2 + 2] = t
            }
            ,
            i.y1.get = function() {
                return this._structArray.int16[this._pos2 + 3]
            }
            ,
            i.y1.set = function(t) {
                this._structArray.int16[this._pos2 + 3] = t
            }
            ,
            i.x2.get = function() {
                return this._structArray.int16[this._pos2 + 4]
            }
            ,
            i.x2.set = function(t) {
                this._structArray.int16[this._pos2 + 4] = t
            }
            ,
            i.y2.get = function() {
                return this._structArray.int16[this._pos2 + 5]
            }
            ,
            i.y2.set = function(t) {
                this._structArray.int16[this._pos2 + 5] = t
            }
            ,
            i.featureIndex.get = function() {
                return this._structArray.uint32[this._pos4 + 3]
            }
            ,
            i.featureIndex.set = function(t) {
                this._structArray.uint32[this._pos4 + 3] = t
            }
            ,
            i.sourceLayerIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 8]
            }
            ,
            i.sourceLayerIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 8] = t
            }
            ,
            i.bucketIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 9]
            }
            ,
            i.bucketIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 9] = t
            }
            ,
            i.radius.get = function() {
                return this._structArray.int16[this._pos2 + 10]
            }
            ,
            i.radius.set = function(t) {
                this._structArray.int16[this._pos2 + 10] = t
            }
            ,
            i.signedDistanceFromAnchor.get = function() {
                return this._structArray.int16[this._pos2 + 11]
            }
            ,
            i.signedDistanceFromAnchor.set = function(t) {
                this._structArray.int16[this._pos2 + 11] = t
            }
            ,
            i.anchorPoint.get = function() {
                return new n(this.anchorPointX,this.anchorPointY)
            }
            ,
            Object.defineProperties(e.prototype, i),
            e
        }(Pr);
        tn.prototype.size = 24;
        var en = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.get = function(t) {
                return new tn(this,t)
            }
            ,
            e
        }(Vr);
        Gi("CollisionBoxArray", en);
        var rn = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e;
            var i = {
                anchorX: {
                    configurable: !0
                },
                anchorY: {
                    configurable: !0
                },
                glyphStartIndex: {
                    configurable: !0
                },
                numGlyphs: {
                    configurable: !0
                },
                vertexStartIndex: {
                    configurable: !0
                },
                lineStartIndex: {
                    configurable: !0
                },
                lineLength: {
                    configurable: !0
                },
                segment: {
                    configurable: !0
                },
                lowerSize: {
                    configurable: !0
                },
                upperSize: {
                    configurable: !0
                },
                lineOffsetX: {
                    configurable: !0
                },
                lineOffsetY: {
                    configurable: !0
                },
                writingMode: {
                    configurable: !0
                },
                hidden: {
                    configurable: !0
                }
            };
            return i.anchorX.get = function() {
                return this._structArray.int16[this._pos2 + 0]
            }
            ,
            i.anchorX.set = function(t) {
                this._structArray.int16[this._pos2 + 0] = t
            }
            ,
            i.anchorY.get = function() {
                return this._structArray.int16[this._pos2 + 1]
            }
            ,
            i.anchorY.set = function(t) {
                this._structArray.int16[this._pos2 + 1] = t
            }
            ,
            i.glyphStartIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 2]
            }
            ,
            i.glyphStartIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 2] = t
            }
            ,
            i.numGlyphs.get = function() {
                return this._structArray.uint16[this._pos2 + 3]
            }
            ,
            i.numGlyphs.set = function(t) {
                this._structArray.uint16[this._pos2 + 3] = t
            }
            ,
            i.vertexStartIndex.get = function() {
                return this._structArray.uint32[this._pos4 + 2]
            }
            ,
            i.vertexStartIndex.set = function(t) {
                this._structArray.uint32[this._pos4 + 2] = t
            }
            ,
            i.lineStartIndex.get = function() {
                return this._structArray.uint32[this._pos4 + 3]
            }
            ,
            i.lineStartIndex.set = function(t) {
                this._structArray.uint32[this._pos4 + 3] = t
            }
            ,
            i.lineLength.get = function() {
                return this._structArray.uint32[this._pos4 + 4]
            }
            ,
            i.lineLength.set = function(t) {
                this._structArray.uint32[this._pos4 + 4] = t
            }
            ,
            i.segment.get = function() {
                return this._structArray.uint16[this._pos2 + 10]
            }
            ,
            i.segment.set = function(t) {
                this._structArray.uint16[this._pos2 + 10] = t
            }
            ,
            i.lowerSize.get = function() {
                return this._structArray.uint16[this._pos2 + 11]
            }
            ,
            i.lowerSize.set = function(t) {
                this._structArray.uint16[this._pos2 + 11] = t
            }
            ,
            i.upperSize.get = function() {
                return this._structArray.uint16[this._pos2 + 12]
            }
            ,
            i.upperSize.set = function(t) {
                this._structArray.uint16[this._pos2 + 12] = t
            }
            ,
            i.lineOffsetX.get = function() {
                return this._structArray.float32[this._pos4 + 7]
            }
            ,
            i.lineOffsetX.set = function(t) {
                this._structArray.float32[this._pos4 + 7] = t
            }
            ,
            i.lineOffsetY.get = function() {
                return this._structArray.float32[this._pos4 + 8]
            }
            ,
            i.lineOffsetY.set = function(t) {
                this._structArray.float32[this._pos4 + 8] = t
            }
            ,
            i.writingMode.get = function() {
                return this._structArray.uint8[this._pos1 + 36]
            }
            ,
            i.writingMode.set = function(t) {
                this._structArray.uint8[this._pos1 + 36] = t
            }
            ,
            i.hidden.get = function() {
                return this._structArray.uint8[this._pos1 + 37]
            }
            ,
            i.hidden.set = function(t) {
                this._structArray.uint8[this._pos1 + 37] = t
            }
            ,
            Object.defineProperties(e.prototype, i),
            e
        }(Pr);
        rn.prototype.size = 40;
        var nn = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.get = function(t) {
                return new rn(this,t)
            }
            ,
            e
        }(qr);
        Gi("PlacedSymbolArray", nn);
        var on = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e;
            var i = {
                anchorX: {
                    configurable: !0
                },
                anchorY: {
                    configurable: !0
                },
                horizontalPlacedTextSymbolIndex: {
                    configurable: !0
                },
                verticalPlacedTextSymbolIndex: {
                    configurable: !0
                },
                key: {
                    configurable: !0
                },
                textBoxStartIndex: {
                    configurable: !0
                },
                textBoxEndIndex: {
                    configurable: !0
                },
                iconBoxStartIndex: {
                    configurable: !0
                },
                iconBoxEndIndex: {
                    configurable: !0
                },
                featureIndex: {
                    configurable: !0
                },
                numGlyphVertices: {
                    configurable: !0
                },
                numVerticalGlyphVertices: {
                    configurable: !0
                },
                numIconVertices: {
                    configurable: !0
                },
                crossTileID: {
                    configurable: !0
                }
            };
            return i.anchorX.get = function() {
                return this._structArray.int16[this._pos2 + 0]
            }
            ,
            i.anchorX.set = function(t) {
                this._structArray.int16[this._pos2 + 0] = t
            }
            ,
            i.anchorY.get = function() {
                return this._structArray.int16[this._pos2 + 1]
            }
            ,
            i.anchorY.set = function(t) {
                this._structArray.int16[this._pos2 + 1] = t
            }
            ,
            i.horizontalPlacedTextSymbolIndex.get = function() {
                return this._structArray.int16[this._pos2 + 2]
            }
            ,
            i.horizontalPlacedTextSymbolIndex.set = function(t) {
                this._structArray.int16[this._pos2 + 2] = t
            }
            ,
            i.verticalPlacedTextSymbolIndex.get = function() {
                return this._structArray.int16[this._pos2 + 3]
            }
            ,
            i.verticalPlacedTextSymbolIndex.set = function(t) {
                this._structArray.int16[this._pos2 + 3] = t
            }
            ,
            i.key.get = function() {
                return this._structArray.uint16[this._pos2 + 4]
            }
            ,
            i.key.set = function(t) {
                this._structArray.uint16[this._pos2 + 4] = t
            }
            ,
            i.textBoxStartIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 5]
            }
            ,
            i.textBoxStartIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 5] = t
            }
            ,
            i.textBoxEndIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 6]
            }
            ,
            i.textBoxEndIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 6] = t
            }
            ,
            i.iconBoxStartIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 7]
            }
            ,
            i.iconBoxStartIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 7] = t
            }
            ,
            i.iconBoxEndIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 8]
            }
            ,
            i.iconBoxEndIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 8] = t
            }
            ,
            i.featureIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 9]
            }
            ,
            i.featureIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 9] = t
            }
            ,
            i.numGlyphVertices.get = function() {
                return this._structArray.uint16[this._pos2 + 10]
            }
            ,
            i.numGlyphVertices.set = function(t) {
                this._structArray.uint16[this._pos2 + 10] = t
            }
            ,
            i.numVerticalGlyphVertices.get = function() {
                return this._structArray.uint16[this._pos2 + 11]
            }
            ,
            i.numVerticalGlyphVertices.set = function(t) {
                this._structArray.uint16[this._pos2 + 11] = t
            }
            ,
            i.numIconVertices.get = function() {
                return this._structArray.uint16[this._pos2 + 12]
            }
            ,
            i.numIconVertices.set = function(t) {
                this._structArray.uint16[this._pos2 + 12] = t
            }
            ,
            i.crossTileID.get = function() {
                return this._structArray.uint32[this._pos4 + 7]
            }
            ,
            i.crossTileID.set = function(t) {
                this._structArray.uint32[this._pos4 + 7] = t
            }
            ,
            Object.defineProperties(e.prototype, i),
            e
        }(Pr);
        on.prototype.size = 32;
        var an = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.get = function(t) {
                return new on(this,t)
            }
            ,
            e
        }(Wr);
        Gi("SymbolInstanceArray", an);
        var sn = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e;
            var i = {
                offsetX: {
                    configurable: !0
                }
            };
            return i.offsetX.get = function() {
                return this._structArray.float32[this._pos4 + 0]
            }
            ,
            i.offsetX.set = function(t) {
                this._structArray.float32[this._pos4 + 0] = t
            }
            ,
            Object.defineProperties(e.prototype, i),
            e
        }(Pr);
        sn.prototype.size = 4;
        var ln = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getoffsetX = function(t) {
                return this.float32[1 * t + 0]
            }
            ,
            e.prototype.get = function(t) {
                return new sn(this,t)
            }
            ,
            e
        }(Hr);
        Gi("GlyphOffsetArray", ln);
        var un = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e;
            var i = {
                x: {
                    configurable: !0
                },
                y: {
                    configurable: !0
                },
                tileUnitDistanceFromAnchor: {
                    configurable: !0
                }
            };
            return i.x.get = function() {
                return this._structArray.int16[this._pos2 + 0]
            }
            ,
            i.x.set = function(t) {
                this._structArray.int16[this._pos2 + 0] = t
            }
            ,
            i.y.get = function() {
                return this._structArray.int16[this._pos2 + 1]
            }
            ,
            i.y.set = function(t) {
                this._structArray.int16[this._pos2 + 1] = t
            }
            ,
            i.tileUnitDistanceFromAnchor.get = function() {
                return this._structArray.int16[this._pos2 + 2]
            }
            ,
            i.tileUnitDistanceFromAnchor.set = function(t) {
                this._structArray.int16[this._pos2 + 2] = t
            }
            ,
            Object.defineProperties(e.prototype, i),
            e
        }(Pr);
        un.prototype.size = 6;
        var cn = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getx = function(t) {
                return this.int16[3 * t + 0]
            }
            ,
            e.prototype.gety = function(t) {
                return this.int16[3 * t + 1]
            }
            ,
            e.prototype.gettileUnitDistanceFromAnchor = function(t) {
                return this.int16[3 * t + 2]
            }
            ,
            e.prototype.get = function(t) {
                return new un(this,t)
            }
            ,
            e
        }(Xr);
        Gi("SymbolLineVertexArray", cn);
        var pn = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e;
            var i = {
                featureIndex: {
                    configurable: !0
                },
                sourceLayerIndex: {
                    configurable: !0
                },
                bucketIndex: {
                    configurable: !0
                }
            };
            return i.featureIndex.get = function() {
                return this._structArray.uint32[this._pos4 + 0]
            }
            ,
            i.featureIndex.set = function(t) {
                this._structArray.uint32[this._pos4 + 0] = t
            }
            ,
            i.sourceLayerIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 2]
            }
            ,
            i.sourceLayerIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 2] = t
            }
            ,
            i.bucketIndex.get = function() {
                return this._structArray.uint16[this._pos2 + 3]
            }
            ,
            i.bucketIndex.set = function(t) {
                this._structArray.uint16[this._pos2 + 3] = t
            }
            ,
            Object.defineProperties(e.prototype, i),
            e
        }(Pr);
        pn.prototype.size = 8;
        var hn = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.get = function(t) {
                return new pn(this,t)
            }
            ,
            e
        }(Zr);
        Gi("FeatureIndexArray", hn);
        var dn = Ir([{
            name: "a_pos",
            components: 2,
            type: "Int16"
        }], 4)
          , fn = dn.members
          , mn = (dn.size,
        dn.alignment,
        function(t) {
            void 0 === t && (t = []),
            this.segments = t
        }
        );
        mn.prototype.prepareSegment = function(t, e, i) {
            var r = this.segments[this.segments.length - 1];
            return t > mn.MAX_VERTEX_ARRAY_LENGTH && w("Max vertices per segment is " + mn.MAX_VERTEX_ARRAY_LENGTH + ": bucket requested " + t),
            (!r || r.vertexLength + t > mn.MAX_VERTEX_ARRAY_LENGTH) && (r = {
                vertexOffset: e.length,
                primitiveOffset: i.length,
                vertexLength: 0,
                primitiveLength: 0
            },
            this.segments.push(r)),
            r
        }
        ,
        mn.prototype.get = function() {
            return this.segments
        }
        ,
        mn.prototype.destroy = function() {
            for (var t = 0, e = this.segments; t < e.length; t += 1) {
                var i = e[t];
                for (var r in i.vaos)
                    i.vaos[r].destroy()
            }
        }
        ,
        mn.simpleSegment = function(t, e, i, r) {
            return new mn([{
                vertexOffset: t,
                primitiveOffset: e,
                vertexLength: i,
                primitiveLength: r,
                vaos: {}
            }])
        }
        ,
        mn.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1,
        Gi("SegmentVector", mn);
        var yn = function(t, e) {
            return 256 * (t = u(Math.floor(t), 0, 255)) + u(Math.floor(e), 0, 255)
        }
          , gn = function() {
            this.ids = [],
            this.positions = [],
            this.indexed = !1
        };
        function _n(t, e, i) {
            var r = t[e];
            t[e] = t[i],
            t[i] = r
        }
        gn.prototype.add = function(t, e, i, r) {
            this.ids.push(t),
            this.positions.push(e, i, r)
        }
        ,
        gn.prototype.getPositions = function(t) {
            for (var e = 0, i = this.ids.length - 1; e < i; ) {
                var r = e + i >> 1;
                this.ids[r] >= t ? i = r : e = r + 1
            }
            for (var n = []; this.ids[e] === t; ) {
                var o = this.positions[3 * e]
                  , a = this.positions[3 * e + 1]
                  , s = this.positions[3 * e + 2];
                n.push({
                    index: o,
                    start: a,
                    end: s
                }),
                e++
            }
            return n
        }
        ,
        gn.serialize = function(t, e) {
            var i = new Float64Array(t.ids)
              , r = new Uint32Array(t.positions);
            return function t(e, i, r, n) {
                if (!(r >= n)) {
                    for (var o = e[r + n >> 1], a = r - 1, s = n + 1; ; ) {
                        do {
                            a++
                        } while (e[a] < o);
                        do {
                            s--
                        } while (e[s] > o);
                        if (a >= s)
                            break;
                        _n(e, a, s),
                        _n(i, 3 * a, 3 * s),
                        _n(i, 3 * a + 1, 3 * s + 1),
                        _n(i, 3 * a + 2, 3 * s + 2)
                    }
                    t(e, i, r, s),
                    t(e, i, s + 1, n)
                }
            }(i, r, 0, i.length - 1),
            e.push(i.buffer, r.buffer),
            {
                ids: i,
                positions: r
            }
        }
        ,
        gn.deserialize = function(t) {
            var e = new gn;
            return e.ids = t.ids,
            e.positions = t.positions,
            e.indexed = !0,
            e
        }
        ,
        Gi("FeaturePositionMap", gn);
        var vn = function(t, e) {
            this.gl = t.gl,
            this.location = e
        }
          , xn = function(t) {
            function e(e, i) {
                t.call(this, e, i),
                this.current = 0
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.set = function(t) {
                this.current !== t && (this.current = t,
                this.gl.uniform1i(this.location, t))
            }
            ,
            e
        }(vn)
          , bn = function(t) {
            function e(e, i) {
                t.call(this, e, i),
                this.current = 0
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.set = function(t) {
                this.current !== t && (this.current = t,
                this.gl.uniform1f(this.location, t))
            }
            ,
            e
        }(vn)
          , wn = function(t) {
            function e(e, i) {
                t.call(this, e, i),
                this.current = [0, 0]
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.set = function(t) {
                t[0] === this.current[0] && t[1] === this.current[1] || (this.current = t,
                this.gl.uniform2f(this.location, t[0], t[1]))
            }
            ,
            e
        }(vn)
          , Tn = function(t) {
            function e(e, i) {
                t.call(this, e, i),
                this.current = [0, 0, 0]
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.set = function(t) {
                t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] || (this.current = t,
                this.gl.uniform3f(this.location, t[0], t[1], t[2]))
            }
            ,
            e
        }(vn)
          , Sn = function(t) {
            function e(e, i) {
                t.call(this, e, i),
                this.current = [0, 0, 0, 0]
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.set = function(t) {
                t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] && t[3] === this.current[3] || (this.current = t,
                this.gl.uniform4f(this.location, t[0], t[1], t[2], t[3]))
            }
            ,
            e
        }(vn)
          , An = function(t) {
            function e(e, i) {
                t.call(this, e, i),
                this.current = Pt.transparent
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.set = function(t) {
                t.r === this.current.r && t.g === this.current.g && t.b === this.current.b && t.a === this.current.a || (this.current = t,
                this.gl.uniform4f(this.location, t.r, t.g, t.b, t.a))
            }
            ,
            e
        }(vn)
          , kn = new Float32Array(16)
          , En = function(t) {
            function e(e, i) {
                t.call(this, e, i),
                this.current = kn
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.set = function(t) {
                if (t[12] !== this.current[12] || t[0] !== this.current[0])
                    return this.current = t,
                    void this.gl.uniformMatrix4fv(this.location, !1, t);
                for (var e = 1; e < 16; e++)
                    if (t[e] !== this.current[e]) {
                        this.current = t,
                        this.gl.uniformMatrix4fv(this.location, !1, t);
                        break
                    }
            }
            ,
            e
        }(vn);
        function Cn(t) {
            return [yn(255 * t.r, 255 * t.g), yn(255 * t.b, 255 * t.a)]
        }
        var Pn = function(t, e, i) {
            this.value = t,
            this.names = e,
            this.uniformNames = this.names.map(function(t) {
                return "u_" + t
            }),
            this.type = i,
            this.maxValue = -1 / 0
        };
        Pn.prototype.defines = function() {
            return this.names.map(function(t) {
                return "#define HAS_UNIFORM_u_" + t
            })
        }
        ,
        Pn.prototype.setConstantPatternPositions = function() {}
        ,
        Pn.prototype.populatePaintArray = function() {}
        ,
        Pn.prototype.updatePaintArray = function() {}
        ,
        Pn.prototype.upload = function() {}
        ,
        Pn.prototype.destroy = function() {}
        ,
        Pn.prototype.setUniforms = function(t, e, i, r) {
            e.set(r.constantOr(this.value))
        }
        ,
        Pn.prototype.getBinding = function(t, e) {
            return "color" === this.type ? new An(t,e) : new bn(t,e)
        }
        ,
        Pn.serialize = function(t) {
            var e = t.value
              , i = t.names
              , r = t.type;
            return {
                value: Ki(e),
                names: i,
                type: r
            }
        }
        ,
        Pn.deserialize = function(t) {
            var e = t.value
              , i = t.names
              , r = t.type;
            return new Pn(Ji(e),i,r)
        }
        ;
        var Mn = function(t, e, i) {
            this.value = t,
            this.names = e,
            this.uniformNames = this.names.map(function(t) {
                return "u_" + t
            }),
            this.type = i,
            this.maxValue = -1 / 0,
            this.patternPositions = {
                patternTo: null,
                patternFrom: null
            }
        };
        Mn.prototype.defines = function() {
            return this.names.map(function(t) {
                return "#define HAS_UNIFORM_u_" + t
            })
        }
        ,
        Mn.prototype.populatePaintArray = function() {}
        ,
        Mn.prototype.updatePaintArray = function() {}
        ,
        Mn.prototype.upload = function() {}
        ,
        Mn.prototype.destroy = function() {}
        ,
        Mn.prototype.setConstantPatternPositions = function(t, e) {
            this.patternPositions.patternTo = t.tlbr,
            this.patternPositions.patternFrom = e.tlbr
        }
        ,
        Mn.prototype.setUniforms = function(t, e, i, r, n) {
            var o = this.patternPositions;
            "u_pattern_to" === n && o.patternTo && e.set(o.patternTo),
            "u_pattern_from" === n && o.patternFrom && e.set(o.patternFrom)
        }
        ,
        Mn.prototype.getBinding = function(t, e) {
            return new Sn(t,e)
        }
        ;
        var In = function(t, e, i, r) {
            this.expression = t,
            this.names = e,
            this.type = i,
            this.uniformNames = this.names.map(function(t) {
                return "a_" + t
            }),
            this.maxValue = -1 / 0,
            this.paintVertexAttributes = e.map(function(t) {
                return {
                    name: "a_" + t,
                    type: "Float32",
                    components: "color" === i ? 2 : 1,
                    offset: 0
                }
            }),
            this.paintVertexArray = new r
        };
        In.prototype.defines = function() {
            return []
        }
        ,
        In.prototype.setConstantPatternPositions = function() {}
        ,
        In.prototype.populatePaintArray = function(t, e) {
            var i = this.paintVertexArray
              , r = i.length;
            i.reserve(t);
            var n = this.expression.evaluate(new hr(0), e, {});
            if ("color" === this.type)
                for (var o = Cn(n), a = r; a < t; a++)
                    i.emplaceBack(o[0], o[1]);
            else {
                for (var s = r; s < t; s++)
                    i.emplaceBack(n);
                this.maxValue = Math.max(this.maxValue, n)
            }
        }
        ,
        In.prototype.updatePaintArray = function(t, e, i, r) {
            var n = this.paintVertexArray
              , o = this.expression.evaluate({
                zoom: 0
            }, i, r);
            if ("color" === this.type)
                for (var a = Cn(o), s = t; s < e; s++)
                    n.emplace(s, a[0], a[1]);
            else {
                for (var l = t; l < e; l++)
                    n.emplace(l, o);
                this.maxValue = Math.max(this.maxValue, o)
            }
        }
        ,
        In.prototype.upload = function(t) {
            this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent))
        }
        ,
        In.prototype.destroy = function() {
            this.paintVertexBuffer && this.paintVertexBuffer.destroy()
        }
        ,
        In.prototype.setUniforms = function(t, e) {
            e.set(0)
        }
        ,
        In.prototype.getBinding = function(t, e) {
            return new bn(t,e)
        }
        ;
        var zn = function(t, e, i, r, n, o) {
            this.expression = t,
            this.names = e,
            this.uniformNames = this.names.map(function(t) {
                return "a_" + t + "_t"
            }),
            this.type = i,
            this.useIntegerZoom = r,
            this.zoom = n,
            this.maxValue = -1 / 0;
            var a = o;
            this.paintVertexAttributes = e.map(function(t) {
                return {
                    name: "a_" + t,
                    type: "Float32",
                    components: "color" === i ? 4 : 2,
                    offset: 0
                }
            }),
            this.paintVertexArray = new a
        };
        zn.prototype.defines = function() {
            return []
        }
        ,
        zn.prototype.setConstantPatternPositions = function() {}
        ,
        zn.prototype.populatePaintArray = function(t, e) {
            var i = this.paintVertexArray
              , r = i.length;
            i.reserve(t);
            var n = this.expression.evaluate(new hr(this.zoom), e, {})
              , o = this.expression.evaluate(new hr(this.zoom + 1), e, {});
            if ("color" === this.type)
                for (var a = Cn(n), s = Cn(o), l = r; l < t; l++)
                    i.emplaceBack(a[0], a[1], s[0], s[1]);
            else {
                for (var u = r; u < t; u++)
                    i.emplaceBack(n, o);
                this.maxValue = Math.max(this.maxValue, n, o)
            }
        }
        ,
        zn.prototype.updatePaintArray = function(t, e, i, r) {
            var n = this.paintVertexArray
              , o = this.expression.evaluate({
                zoom: this.zoom
            }, i, r)
              , a = this.expression.evaluate({
                zoom: this.zoom + 1
            }, i, r);
            if ("color" === this.type)
                for (var s = Cn(o), l = Cn(a), u = t; u < e; u++)
                    n.emplace(u, s[0], s[1], l[0], l[1]);
            else {
                for (var c = t; c < e; c++)
                    n.emplace(c, o, a);
                this.maxValue = Math.max(this.maxValue, o, a)
            }
        }
        ,
        zn.prototype.upload = function(t) {
            this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent))
        }
        ,
        zn.prototype.destroy = function() {
            this.paintVertexBuffer && this.paintVertexBuffer.destroy()
        }
        ,
        zn.prototype.interpolationFactor = function(t) {
            return this.useIntegerZoom ? this.expression.interpolationFactor(Math.floor(t), this.zoom, this.zoom + 1) : this.expression.interpolationFactor(t, this.zoom, this.zoom + 1)
        }
        ,
        zn.prototype.setUniforms = function(t, e, i) {
            e.set(this.interpolationFactor(i.zoom))
        }
        ,
        zn.prototype.getBinding = function(t, e) {
            return new bn(t,e)
        }
        ;
        var Ln = function(t, e, i, r, n, o, a) {
            this.expression = t,
            this.names = e,
            this.type = i,
            this.uniformNames = this.names.map(function(t) {
                return "a_" + t + "_t"
            }),
            this.useIntegerZoom = r,
            this.zoom = n,
            this.maxValue = -1 / 0,
            this.layerId = a,
            this.paintVertexAttributes = e.map(function(t) {
                return {
                    name: "a_" + t,
                    type: "Uint16",
                    components: 4,
                    offset: 0
                }
            }),
            this.zoomInPaintVertexArray = new o,
            this.zoomOutPaintVertexArray = new o
        };
        Ln.prototype.defines = function() {
            return []
        }
        ,
        Ln.prototype.setConstantPatternPositions = function() {}
        ,
        Ln.prototype.populatePaintArray = function(t, e, i) {
            var r = this.zoomInPaintVertexArray
              , n = this.zoomOutPaintVertexArray
              , o = this.layerId
              , a = r.length;
            if (r.reserve(t),
            n.reserve(t),
            i && e.patterns && e.patterns[o]) {
                var s = e.patterns[o]
                  , l = s.min
                  , u = s.mid
                  , c = s.max
                  , p = i[l]
                  , h = i[u]
                  , d = i[c];
                if (!p || !h || !d)
                    return;
                for (var f = a; f < t; f++)
                    r.emplaceBack(h.tl[0], h.tl[1], h.br[0], h.br[1], p.tl[0], p.tl[1], p.br[0], p.br[1]),
                    n.emplaceBack(h.tl[0], h.tl[1], h.br[0], h.br[1], d.tl[0], d.tl[1], d.br[0], d.br[1])
            }
        }
        ,
        Ln.prototype.updatePaintArray = function(t, e, i, r, n) {
            var o = this.zoomInPaintVertexArray
              , a = this.zoomOutPaintVertexArray
              , s = this.layerId;
            if (n && i.patterns && i.patterns[s]) {
                var l = i.patterns[s]
                  , u = l.min
                  , c = l.mid
                  , p = l.max
                  , h = n[u]
                  , d = n[c]
                  , f = n[p];
                if (!h || !d || !f)
                    return;
                for (var m = t; m < e; m++)
                    o.emplace(m, d.tl[0], d.tl[1], d.br[0], d.br[1], h.tl[0], h.tl[1], h.br[0], h.br[1]),
                    a.emplace(m, d.tl[0], d.tl[1], d.br[0], d.br[1], f.tl[0], f.tl[1], f.br[0], f.br[1])
            }
        }
        ,
        Ln.prototype.upload = function(t) {
            this.zoomInPaintVertexArray && this.zoomInPaintVertexArray.arrayBuffer && this.zoomOutPaintVertexArray && this.zoomOutPaintVertexArray.arrayBuffer && (this.zoomInPaintVertexBuffer = t.createVertexBuffer(this.zoomInPaintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent),
            this.zoomOutPaintVertexBuffer = t.createVertexBuffer(this.zoomOutPaintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent))
        }
        ,
        Ln.prototype.destroy = function() {
            this.zoomOutPaintVertexBuffer && this.zoomOutPaintVertexBuffer.destroy(),
            this.zoomInPaintVertexBuffer && this.zoomInPaintVertexBuffer.destroy()
        }
        ,
        Ln.prototype.setUniforms = function(t, e) {
            e.set(0)
        }
        ,
        Ln.prototype.getBinding = function(t, e) {
            return new bn(t,e)
        }
        ;
        var Dn = function() {
            this.binders = {},
            this.cacheKey = "",
            this._buffers = [],
            this._featureMap = new gn,
            this._bufferOffset = 0
        };
        Dn.createDynamic = function(t, e, i) {
            var r = new Dn
              , n = [];
            for (var o in t.paint._values)
                if (i(o)) {
                    var a = t.paint.get(o);
                    if (a instanceof vr && qe(a.property.specification)) {
                        var s = Rn(o, t.type)
                          , l = a.property.specification.type
                          , u = a.property.useIntegerZoom;
                        if ("cross-faded" === a.property.specification["property-type"] || "cross-faded-data-driven" === a.property.specification["property-type"])
                            if ("constant" === a.value.kind)
                                r.binders[o] = new Mn(a.value.value,s,l),
                                n.push("/u_" + o);
                            else {
                                var c = Fn(o, l, "source");
                                r.binders[o] = new Ln(a.value,s,l,u,e,c,t.id),
                                n.push("/a_" + o)
                            }
                        else if ("constant" === a.value.kind)
                            r.binders[o] = new Pn(a.value.value,s,l),
                            n.push("/u_" + o);
                        else if ("source" === a.value.kind) {
                            var p = Fn(o, l, "source");
                            r.binders[o] = new In(a.value,s,l,p),
                            n.push("/a_" + o)
                        } else {
                            var h = Fn(o, l, "composite");
                            r.binders[o] = new zn(a.value,s,l,u,e,h),
                            n.push("/z_" + o)
                        }
                    }
                }
            return r.cacheKey = n.sort().join(""),
            r
        }
        ,
        Dn.prototype.populatePaintArrays = function(t, e, i, r) {
            for (var n in this.binders)
                this.binders[n].populatePaintArray(t, e, r);
            void 0 !== e.id && this._featureMap.add(+e.id, i, this._bufferOffset, t),
            this._bufferOffset = t
        }
        ,
        Dn.prototype.setConstantPatternPositions = function(t, e) {
            for (var i in this.binders)
                this.binders[i].setConstantPatternPositions(t, e)
        }
        ,
        Dn.prototype.updatePaintArrays = function(t, e, i, r) {
            var n = !1;
            for (var o in t)
                for (var a = 0, s = this._featureMap.getPositions(+o); a < s.length; a += 1) {
                    var l = s[a]
                      , u = e.feature(l.index);
                    for (var c in this.binders) {
                        var p = this.binders[c];
                        if (!(p instanceof Pn || p instanceof Mn) && !0 === p.expression.isStateDependent) {
                            var h = i.paint.get(c);
                            p.expression = h.value,
                            p.updatePaintArray(l.start, l.end, u, t[o], r),
                            n = !0
                        }
                    }
                }
            return n
        }
        ,
        Dn.prototype.defines = function() {
            var t = [];
            for (var e in this.binders)
                t.push.apply(t, this.binders[e].defines());
            return t
        }
        ,
        Dn.prototype.getPaintVertexBuffers = function() {
            return this._buffers
        }
        ,
        Dn.prototype.getUniforms = function(t, e) {
            var i = {};
            for (var r in this.binders)
                for (var n = this.binders[r], o = 0, a = n.uniformNames; o < a.length; o += 1) {
                    var s = a[o];
                    i[s] = n.getBinding(t, e[s])
                }
            return i
        }
        ,
        Dn.prototype.setUniforms = function(t, e, i, r) {
            for (var n in this.binders)
                for (var o = this.binders[n], a = 0, s = o.uniformNames; a < s.length; a += 1) {
                    var l = s[a];
                    o.setUniforms(t, e[l], r, i.get(n), l)
                }
        }
        ,
        Dn.prototype.updatePatternPaintBuffers = function(t) {
            var e = [];
            for (var i in this.binders) {
                var r = this.binders[i];
                if (r instanceof Ln) {
                    var n = 2 === t.fromScale ? r.zoomInPaintVertexBuffer : r.zoomOutPaintVertexBuffer;
                    n && e.push(n)
                } else
                    (r instanceof In || r instanceof zn) && r.paintVertexBuffer && e.push(r.paintVertexBuffer)
            }
            this._buffers = e
        }
        ,
        Dn.prototype.upload = function(t) {
            for (var e in this.binders)
                this.binders[e].upload(t);
            var i = [];
            for (var r in this.binders) {
                var n = this.binders[r];
                (n instanceof In || n instanceof zn) && n.paintVertexBuffer && i.push(n.paintVertexBuffer)
            }
            this._buffers = i
        }
        ,
        Dn.prototype.destroy = function() {
            for (var t in this.binders)
                this.binders[t].destroy()
        }
        ;
        var On = function(t, e, i, r) {
            void 0 === r && (r = function() {
                return !0
            }
            ),
            this.programConfigurations = {};
            for (var n = 0, o = e; n < o.length; n += 1) {
                var a = o[n];
                this.programConfigurations[a.id] = Dn.createDynamic(a, i, r),
                this.programConfigurations[a.id].layoutAttributes = t
            }
            this.needsUpload = !1
        };
        function Rn(t, e) {
            return {
                "text-opacity": ["opacity"],
                "icon-opacity": ["opacity"],
                "text-color": ["fill_color"],
                "icon-color": ["fill_color"],
                "text-halo-color": ["halo_color"],
                "icon-halo-color": ["halo_color"],
                "text-halo-blur": ["halo_blur"],
                "icon-halo-blur": ["halo_blur"],
                "text-halo-width": ["halo_width"],
                "icon-halo-width": ["halo_width"],
                "line-gap-width": ["gapwidth"],
                "line-pattern": ["pattern_to", "pattern_from"],
                "fill-pattern": ["pattern_to", "pattern_from"],
                "fill-extrusion-pattern": ["pattern_to", "pattern_from"]
            }[t] || [t.replace(e + "-", "").replace(/-/g, "_")]
        }
        function Fn(t, e, i) {
            var r = {
                color: {
                    source: Jr,
                    composite: Qr
                },
                number: {
                    source: Hr,
                    composite: Jr
                }
            }
              , n = function(t) {
                return {
                    "line-pattern": {
                        source: Fr,
                        composite: Fr
                    },
                    "fill-pattern": {
                        source: Fr,
                        composite: Fr
                    },
                    "fill-extrusion-pattern": {
                        source: Fr,
                        composite: Fr
                    }
                }[t]
            }(t);
            return n && n[i] || r[e][i]
        }
        On.prototype.populatePaintArrays = function(t, e, i, r) {
            for (var n in this.programConfigurations)
                this.programConfigurations[n].populatePaintArrays(t, e, i, r);
            this.needsUpload = !0
        }
        ,
        On.prototype.updatePaintArrays = function(t, e, i, r) {
            for (var n = 0, o = i; n < o.length; n += 1) {
                var a = o[n];
                this.needsUpload = this.programConfigurations[a.id].updatePaintArrays(t, e, a, r) || this.needsUpload
            }
        }
        ,
        On.prototype.get = function(t) {
            return this.programConfigurations[t]
        }
        ,
        On.prototype.upload = function(t) {
            if (this.needsUpload) {
                for (var e in this.programConfigurations)
                    this.programConfigurations[e].upload(t);
                this.needsUpload = !1
            }
        }
        ,
        On.prototype.destroy = function() {
            for (var t in this.programConfigurations)
                this.programConfigurations[t].destroy()
        }
        ,
        Gi("ConstantBinder", Pn),
        Gi("CrossFadedConstantBinder", Mn),
        Gi("SourceExpressionBinder", In),
        Gi("CrossFadedCompositeBinder", Ln),
        Gi("CompositeExpressionBinder", zn),
        Gi("ProgramConfiguration", Dn, {
            omit: ["_buffers"]
        }),
        Gi("ProgramConfigurationSet", On);
        var Bn = 8192
          , Nn = (16,
        {
            min: -1 * Math.pow(2, 15),
            max: Math.pow(2, 15) - 1
        });
        function Un(t) {
            for (var e = Bn / t.extent, i = t.loadGeometry(), r = 0; r < i.length; r++)
                for (var n = i[r], o = 0; o < n.length; o++) {
                    var a = n[o];
                    a.x = Math.round(a.x * e),
                    a.y = Math.round(a.y * e),
                    (a.x < Nn.min || a.x > Nn.max || a.y < Nn.min || a.y > Nn.max) && w("Geometry exceeds allowed extent, reduce your vector tile buffer size")
                }
            return i
        }
        function Vn(t, e, i, r, n) {
            t.emplaceBack(2 * e + (r + 1) / 2, 2 * i + (n + 1) / 2)
        }
        var jn = function(t) {
            this.zoom = t.zoom,
            this.overscaling = t.overscaling,
            this.layers = t.layers,
            this.layerIds = this.layers.map(function(t) {
                return t.id
            }),
            this.index = t.index,
            this.hasPattern = !1,
            this.layoutVertexArray = new Lr,
            this.indexArray = new Gr,
            this.segments = new mn,
            this.programConfigurations = new On(fn,t.layers,t.zoom)
        };
        function $n(t, e, i) {
            for (var r = 0; r < t.length; r++) {
                var n = t[r];
                if (Jn(n, e))
                    return !0;
                if (Gn(e, n, i))
                    return !0
            }
            return !1
        }
        function qn(t, e) {
            if (1 === t.length && 1 === t[0].length)
                return Kn(e, t[0][0]);
            for (var i = 0; i < e.length; i++)
                for (var r = e[i], n = 0; n < r.length; n++)
                    if (Kn(t, r[n]))
                        return !0;
            for (var o = 0; o < t.length; o++) {
                for (var a = t[o], s = 0; s < a.length; s++)
                    if (Kn(e, a[s]))
                        return !0;
                for (var l = 0; l < e.length; l++)
                    if (Xn(a, e[l]))
                        return !0
            }
            return !1
        }
        function Wn(t, e, i) {
            for (var r = 0; r < e.length; r++)
                for (var n = e[r], o = 0; o < t.length; o++) {
                    var a = t[o];
                    if (a.length >= 3)
                        for (var s = 0; s < n.length; s++)
                            if (Jn(a, n[s]))
                                return !0;
                    if (Hn(a, n, i))
                        return !0
                }
            return !1
        }
        function Hn(t, e, i) {
            if (t.length > 1) {
                if (Xn(t, e))
                    return !0;
                for (var r = 0; r < e.length; r++)
                    if (Gn(e[r], t, i))
                        return !0
            }
            for (var n = 0; n < t.length; n++)
                if (Gn(t[n], e, i))
                    return !0;
            return !1
        }
        function Xn(t, e) {
            if (0 === t.length || 0 === e.length)
                return !1;
            for (var i = 0; i < t.length - 1; i++)
                for (var r = t[i], n = t[i + 1], o = 0; o < e.length - 1; o++)
                    if (Zn(r, n, e[o], e[o + 1]))
                        return !0;
            return !1
        }
        function Zn(t, e, i, r) {
            return T(t, i, r) !== T(e, i, r) && T(t, e, i) !== T(t, e, r)
        }
        function Gn(t, e, i) {
            var r = i * i;
            if (1 === e.length)
                return t.distSqr(e[0]) < r;
            for (var n = 1; n < e.length; n++)
                if (Yn(t, e[n - 1], e[n]) < r)
                    return !0;
            return !1
        }
        function Yn(t, e, i) {
            var r = e.distSqr(i);
            if (0 === r)
                return t.distSqr(e);
            var n = ((t.x - e.x) * (i.x - e.x) + (t.y - e.y) * (i.y - e.y)) / r;
            return n < 0 ? t.distSqr(e) : n > 1 ? t.distSqr(i) : t.distSqr(i.sub(e)._mult(n)._add(e))
        }
        function Kn(t, e) {
            for (var i, r, n, o = !1, a = 0; a < t.length; a++)
                for (var s = 0, l = (i = t[a]).length - 1; s < i.length; l = s++)
                    r = i[s],
                    n = i[l],
                    r.y > e.y != n.y > e.y && e.x < (n.x - r.x) * (e.y - r.y) / (n.y - r.y) + r.x && (o = !o);
            return o
        }
        function Jn(t, e) {
            for (var i = !1, r = 0, n = t.length - 1; r < t.length; n = r++) {
                var o = t[r]
                  , a = t[n];
                o.y > e.y != a.y > e.y && e.x < (a.x - o.x) * (e.y - o.y) / (a.y - o.y) + o.x && (i = !i)
            }
            return i
        }
        function Qn(t, e, i) {
            var r = e.paint.get(t).value;
            return "constant" === r.kind ? r.value : i.programConfigurations.get(e.id).binders[t].maxValue
        }
        function to(t) {
            return Math.sqrt(t[0] * t[0] + t[1] * t[1])
        }
        function eo(t, e, i, r, o) {
            if (!e[0] && !e[1])
                return t;
            var a = n.convert(e);
            "viewport" === i && a._rotate(-r);
            for (var s = [], l = 0; l < t.length; l++) {
                for (var u = t[l], c = [], p = 0; p < u.length; p++)
                    c.push(u[p].sub(a._mult(o)));
                s.push(c)
            }
            return s
        }
        jn.prototype.populate = function(t, e) {
            for (var i = 0, r = t; i < r.length; i += 1) {
                var n = r[i]
                  , o = n.feature
                  , a = n.index
                  , s = n.sourceLayerIndex;
                if (this.layers[0]._featureFilter(new hr(this.zoom), o)) {
                    var l = Un(o);
                    this.addFeature(o, l, a),
                    e.featureIndex.insert(o, l, a, s, this.index)
                }
            }
        }
        ,
        jn.prototype.update = function(t, e, i) {
            this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, i)
        }
        ,
        jn.prototype.isEmpty = function() {
            return 0 === this.layoutVertexArray.length
        }
        ,
        jn.prototype.uploadPending = function() {
            return !this.uploaded || this.programConfigurations.needsUpload
        }
        ,
        jn.prototype.upload = function(t) {
            this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, fn),
            this.indexBuffer = t.createIndexBuffer(this.indexArray)),
            this.programConfigurations.upload(t),
            this.uploaded = !0
        }
        ,
        jn.prototype.destroy = function() {
            this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy())
        }
        ,
        jn.prototype.addFeature = function(t, e, i) {
            for (var r = 0, n = e; r < n.length; r += 1)
                for (var o = 0, a = n[r]; o < a.length; o += 1) {
                    var s = a[o]
                      , l = s.x
                      , u = s.y;
                    if (!(l < 0 || l >= Bn || u < 0 || u >= Bn)) {
                        var c = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray)
                          , p = c.vertexLength;
                        Vn(this.layoutVertexArray, l, u, -1, -1),
                        Vn(this.layoutVertexArray, l, u, 1, -1),
                        Vn(this.layoutVertexArray, l, u, 1, 1),
                        Vn(this.layoutVertexArray, l, u, -1, 1),
                        this.indexArray.emplaceBack(p, p + 1, p + 2),
                        this.indexArray.emplaceBack(p, p + 3, p + 2),
                        c.vertexLength += 4,
                        c.primitiveLength += 2
                    }
                }
            this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, i, {})
        }
        ,
        Gi("CircleBucket", jn, {
            omit: ["layers"]
        });
        var io = {
            paint: new kr({
                "circle-radius": new wr(st.paint_circle["circle-radius"]),
                "circle-color": new wr(st.paint_circle["circle-color"]),
                "circle-blur": new wr(st.paint_circle["circle-blur"]),
                "circle-opacity": new wr(st.paint_circle["circle-opacity"]),
                "circle-translate": new br(st.paint_circle["circle-translate"]),
                "circle-translate-anchor": new br(st.paint_circle["circle-translate-anchor"]),
                "circle-pitch-scale": new br(st.paint_circle["circle-pitch-scale"]),
                "circle-pitch-alignment": new br(st.paint_circle["circle-pitch-alignment"]),
                "circle-stroke-width": new wr(st.paint_circle["circle-stroke-width"]),
                "circle-stroke-color": new wr(st.paint_circle["circle-stroke-color"]),
                "circle-stroke-opacity": new wr(st.paint_circle["circle-stroke-opacity"])
            })
        }
          , ro = "undefined" != typeof Float32Array ? Float32Array : Array;
        function no() {
            var t = new ro(9);
            return t[0] = 1,
            t[1] = 0,
            t[2] = 0,
            t[3] = 0,
            t[4] = 1,
            t[5] = 0,
            t[6] = 0,
            t[7] = 0,
            t[8] = 1,
            t
        }
        function oo() {
            var t = new ro(3);
            return t[0] = 0,
            t[1] = 0,
            t[2] = 0,
            t
        }
        function ao(t) {
            var e = t[0]
              , i = t[1]
              , r = t[2];
            return Math.sqrt(e * e + i * i + r * r)
        }
        function so(t, e, i) {
            var r = new ro(3);
            return r[0] = t,
            r[1] = e,
            r[2] = i,
            r
        }
        Math.PI;
        var lo, uo = ao, co = (lo = oo(),
        function(t, e, i, r, n, o) {
            var a, s;
            for (e || (e = 3),
            i || (i = 0),
            s = r ? Math.min(r * e + i, t.length) : t.length,
            a = i; a < s; a += e)
                lo[0] = t[a],
                lo[1] = t[a + 1],
                lo[2] = t[a + 2],
                n(lo, lo, o),
                t[a] = lo[0],
                t[a + 1] = lo[1],
                t[a + 2] = lo[2];
            return t
        }
        );
        function po() {
            var t = new ro(4);
            return t[0] = 0,
            t[1] = 0,
            t[2] = 0,
            t[3] = 0,
            t
        }
        function ho(t, e) {
            var i = e[0]
              , r = e[1]
              , n = e[2]
              , o = e[3]
              , a = i * i + r * r + n * n + o * o;
            return a > 0 && (a = 1 / Math.sqrt(a),
            t[0] = i * a,
            t[1] = r * a,
            t[2] = n * a,
            t[3] = o * a),
            t
        }
        function fo(t, e, i) {
            var r = e[0]
              , n = e[1]
              , o = e[2]
              , a = e[3];
            return t[0] = i[0] * r + i[4] * n + i[8] * o + i[12] * a,
            t[1] = i[1] * r + i[5] * n + i[9] * o + i[13] * a,
            t[2] = i[2] * r + i[6] * n + i[10] * o + i[14] * a,
            t[3] = i[3] * r + i[7] * n + i[11] * o + i[15] * a,
            t
        }
        var mo = function() {
            var t = po();
            return function(e, i, r, n, o, a) {
                var s, l;
                for (i || (i = 4),
                r || (r = 0),
                l = n ? Math.min(n * i + r, e.length) : e.length,
                s = r; s < l; s += i)
                    t[0] = e[s],
                    t[1] = e[s + 1],
                    t[2] = e[s + 2],
                    t[3] = e[s + 3],
                    o(t, t, a),
                    e[s] = t[0],
                    e[s + 1] = t[1],
                    e[s + 2] = t[2],
                    e[s + 3] = t[3];
                return e
            }
        }();
        function yo() {
            var t = new ro(4);
            return t[0] = 0,
            t[1] = 0,
            t[2] = 0,
            t[3] = 1,
            t
        }
        oo(),
        so(1, 0, 0),
        so(0, 1, 0),
        yo(),
        yo(),
        no(),
        function() {
            var t;
            (t = new ro(2))[0] = 0,
            t[1] = 0
        }();
        var go = function(t) {
            function e(e) {
                t.call(this, e, io)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.createBucket = function(t) {
                return new jn(t)
            }
            ,
            e.prototype.queryRadius = function(t) {
                var e = t;
                return Qn("circle-radius", this, e) + Qn("circle-stroke-width", this, e) + to(this.paint.get("circle-translate"))
            }
            ,
            e.prototype.queryIntersectsFeature = function(t, e, i, r, n, o, a, s) {
                for (var l = eo(t, this.paint.get("circle-translate"), this.paint.get("circle-translate-anchor"), o.angle, a), u = this.paint.get("circle-radius").evaluate(e, i) + this.paint.get("circle-stroke-width").evaluate(e, i), c = "map" === this.paint.get("circle-pitch-alignment"), p = c ? l : function(t, e, i) {
                    return l.map(function(t) {
                        return t.map(function(t) {
                            return _o(t, e, i)
                        })
                    })
                }(0, s, o), h = c ? u * a : u, d = 0, f = r; d < f.length; d += 1)
                    for (var m = 0, y = f[d]; m < y.length; m += 1) {
                        var g = y[m]
                          , _ = c ? g : _o(g, s, o)
                          , v = h
                          , x = fo([], [g.x, g.y, 0, 1], s);
                        if ("viewport" === this.paint.get("circle-pitch-scale") && "map" === this.paint.get("circle-pitch-alignment") ? v *= x[3] / o.cameraToCenterDistance : "map" === this.paint.get("circle-pitch-scale") && "viewport" === this.paint.get("circle-pitch-alignment") && (v *= o.cameraToCenterDistance / x[3]),
                        $n(p, _, v))
                            return !0
                    }
                return !1
            }
            ,
            e
        }(Er);
        function _o(t, e, i) {
            var r = fo([], [t.x, t.y, 0, 1], e);
            return new n((r[0] / r[3] + 1) * i.width * .5,(r[1] / r[3] + 1) * i.height * .5)
        }
        var vo = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e
        }(jn);
        function xo(t, e, i, r) {
            var n = e.width
              , o = e.height;
            if (r) {
                if (r.length !== n * o * i)
                    throw new RangeError("mismatched image size")
            } else
                r = new Uint8Array(n * o * i);
            return t.width = n,
            t.height = o,
            t.data = r,
            t
        }
        function bo(t, e, i) {
            var r = e.width
              , n = e.height;
            if (r !== t.width || n !== t.height) {
                var o = xo({}, {
                    width: r,
                    height: n
                }, i);
                wo(t, o, {
                    x: 0,
                    y: 0
                }, {
                    x: 0,
                    y: 0
                }, {
                    width: Math.min(t.width, r),
                    height: Math.min(t.height, n)
                }, i),
                t.width = r,
                t.height = n,
                t.data = o.data
            }
        }
        function wo(t, e, i, r, n, o) {
            if (0 === n.width || 0 === n.height)
                return e;
            if (n.width > t.width || n.height > t.height || i.x > t.width - n.width || i.y > t.height - n.height)
                throw new RangeError("out of range source coordinates for image copy");
            if (n.width > e.width || n.height > e.height || r.x > e.width - n.width || r.y > e.height - n.height)
                throw new RangeError("out of range destination coordinates for image copy");
            for (var a = t.data, s = e.data, l = 0; l < n.height; l++)
                for (var u = ((i.y + l) * t.width + i.x) * o, c = ((r.y + l) * e.width + r.x) * o, p = 0; p < n.width * o; p++)
                    s[c + p] = a[u + p];
            return e
        }
        Gi("HeatmapBucket", vo, {
            omit: ["layers"]
        });
        var To = function(t, e) {
            xo(this, t, 1, e)
        };
        To.prototype.resize = function(t) {
            bo(this, t, 1)
        }
        ,
        To.prototype.clone = function() {
            return new To({
                width: this.width,
                height: this.height
            },new Uint8Array(this.data))
        }
        ,
        To.copy = function(t, e, i, r, n) {
            wo(t, e, i, r, n, 1)
        }
        ;
        var So = function(t, e) {
            xo(this, t, 4, e)
        };
        So.prototype.resize = function(t) {
            bo(this, t, 4)
        }
        ,
        So.prototype.clone = function() {
            return new So({
                width: this.width,
                height: this.height
            },new Uint8Array(this.data))
        }
        ,
        So.copy = function(t, e, i, r, n) {
            wo(t, e, i, r, n, 4)
        }
        ,
        Gi("AlphaImage", To),
        Gi("RGBAImage", So);
        var Ao = {
            paint: new kr({
                "heatmap-radius": new wr(st.paint_heatmap["heatmap-radius"]),
                "heatmap-weight": new wr(st.paint_heatmap["heatmap-weight"]),
                "heatmap-intensity": new br(st.paint_heatmap["heatmap-intensity"]),
                "heatmap-color": new Ar(st.paint_heatmap["heatmap-color"]),
                "heatmap-opacity": new br(st.paint_heatmap["heatmap-opacity"])
            })
        };
        function ko(t, e) {
            for (var i = new Uint8Array(1024), r = {}, n = 0, o = 0; n < 256; n++,
            o += 4) {
                r[e] = n / 255;
                var a = t.evaluate(r);
                i[o + 0] = Math.floor(255 * a.r / a.a),
                i[o + 1] = Math.floor(255 * a.g / a.a),
                i[o + 2] = Math.floor(255 * a.b / a.a),
                i[o + 3] = Math.floor(255 * a.a)
            }
            return new So({
                width: 256,
                height: 1
            },i)
        }
        var Eo = function(t) {
            function e(e) {
                t.call(this, e, Ao),
                this._updateColorRamp()
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.createBucket = function(t) {
                return new vo(t)
            }
            ,
            e.prototype._handleSpecialPaintPropertyUpdate = function(t) {
                "heatmap-color" === t && this._updateColorRamp()
            }
            ,
            e.prototype._updateColorRamp = function() {
                var t = this._transitionablePaint._values["heatmap-color"].value.expression;
                this.colorRamp = ko(t, "heatmapDensity"),
                this.colorRampTexture = null
            }
            ,
            e.prototype.resize = function() {
                this.heatmapFbo && (this.heatmapFbo.destroy(),
                this.heatmapFbo = null)
            }
            ,
            e.prototype.queryRadius = function() {
                return 0
            }
            ,
            e.prototype.queryIntersectsFeature = function() {
                return !1
            }
            ,
            e.prototype.hasOffscreenPass = function() {
                return 0 !== this.paint.get("heatmap-opacity") && "none" !== this.visibility
            }
            ,
            e
        }(Er)
          , Co = {
            paint: new kr({
                "hillshade-illumination-direction": new br(st.paint_hillshade["hillshade-illumination-direction"]),
                "hillshade-illumination-anchor": new br(st.paint_hillshade["hillshade-illumination-anchor"]),
                "hillshade-exaggeration": new br(st.paint_hillshade["hillshade-exaggeration"]),
                "hillshade-shadow-color": new br(st.paint_hillshade["hillshade-shadow-color"]),
                "hillshade-highlight-color": new br(st.paint_hillshade["hillshade-highlight-color"]),
                "hillshade-accent-color": new br(st.paint_hillshade["hillshade-accent-color"])
            })
        }
          , Po = function(t) {
            function e(e) {
                t.call(this, e, Co)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.hasOffscreenPass = function() {
                return 0 !== this.paint.get("hillshade-exaggeration") && "none" !== this.visibility
            }
            ,
            e
        }(Er)
          , Mo = Ir([{
            name: "a_pos",
            components: 2,
            type: "Int16"
        }], 4)
          , Io = Mo.members
          , zo = (Mo.size,
        Mo.alignment,
        Do)
          , Lo = Do;
        function Do(t, e, i) {
            i = i || 2;
            var r, n, o, a, s, l, u, c = e && e.length, p = c ? e[0] * i : t.length, h = Oo(t, 0, p, i, !0), d = [];
            if (!h)
                return d;
            if (c && (h = function(t, e, i, r) {
                var n, o, a, s = [];
                for (n = 0,
                o = e.length; n < o; n++)
                    (a = Oo(t, e[n] * r, n < o - 1 ? e[n + 1] * r : t.length, r, !1)) === a.next && (a.steiner = !0),
                    s.push(Wo(a));
                for (s.sort(jo),
                n = 0; n < s.length; n++)
                    $o(s[n], i),
                    i = Ro(i, i.next);
                return i
            }(t, e, h, i)),
            t.length > 80 * i) {
                r = o = t[0],
                n = a = t[1];
                for (var f = i; f < p; f += i)
                    (s = t[f]) < r && (r = s),
                    (l = t[f + 1]) < n && (n = l),
                    s > o && (o = s),
                    l > a && (a = l);
                u = 0 !== (u = Math.max(o - r, a - n)) ? 1 / u : 0
            }
            return Fo(h, d, i, r, n, u),
            d
        }
        function Oo(t, e, i, r, n) {
            var o, a;
            if (n === ia(t, e, i, r) > 0)
                for (o = e; o < i; o += r)
                    a = Qo(o, t[o], t[o + 1], a);
            else
                for (o = i - r; o >= e; o -= r)
                    a = Qo(o, t[o], t[o + 1], a);
            return a && Go(a, a.next) && (ta(a),
            a = a.next),
            a
        }
        function Ro(t, e) {
            if (!t)
                return t;
            e || (e = t);
            var i, r = t;
            do {
                if (i = !1,
                r.steiner || !Go(r, r.next) && 0 !== Zo(r.prev, r, r.next))
                    r = r.next;
                else {
                    if (ta(r),
                    (r = e = r.prev) === r.next)
                        break;
                    i = !0
                }
            } while (i || r !== e);
            return e
        }
        function Fo(t, e, i, r, n, o, a) {
            if (t) {
                !a && o && function(t, e, i, r) {
                    var n = t;
                    do {
                        null === n.z && (n.z = qo(n.x, n.y, e, i, r)),
                        n.prevZ = n.prev,
                        n.nextZ = n.next,
                        n = n.next
                    } while (n !== t);
                    n.prevZ.nextZ = null,
                    n.prevZ = null,
                    function(t) {
                        var e, i, r, n, o, a, s, l, u = 1;
                        do {
                            for (i = t,
                            t = null,
                            o = null,
                            a = 0; i; ) {
                                for (a++,
                                r = i,
                                s = 0,
                                e = 0; e < u && (s++,
                                r = r.nextZ); e++)
                                    ;
                                for (l = u; s > 0 || l > 0 && r; )
                                    0 !== s && (0 === l || !r || i.z <= r.z) ? (n = i,
                                    i = i.nextZ,
                                    s--) : (n = r,
                                    r = r.nextZ,
                                    l--),
                                    o ? o.nextZ = n : t = n,
                                    n.prevZ = o,
                                    o = n;
                                i = r
                            }
                            o.nextZ = null,
                            u *= 2
                        } while (a > 1)
                    }(n)
                }(t, r, n, o);
                for (var s, l, u = t; t.prev !== t.next; )
                    if (s = t.prev,
                    l = t.next,
                    o ? No(t, r, n, o) : Bo(t))
                        e.push(s.i / i),
                        e.push(t.i / i),
                        e.push(l.i / i),
                        ta(t),
                        t = l.next,
                        u = l.next;
                    else if ((t = l) === u) {
                        a ? 1 === a ? Fo(t = Uo(t, e, i), e, i, r, n, o, 2) : 2 === a && Vo(t, e, i, r, n, o) : Fo(Ro(t), e, i, r, n, o, 1);
                        break
                    }
            }
        }
        function Bo(t) {
            var e = t.prev
              , i = t
              , r = t.next;
            if (Zo(e, i, r) >= 0)
                return !1;
            for (var n = t.next.next; n !== t.prev; ) {
                if (Ho(e.x, e.y, i.x, i.y, r.x, r.y, n.x, n.y) && Zo(n.prev, n, n.next) >= 0)
                    return !1;
                n = n.next
            }
            return !0
        }
        function No(t, e, i, r) {
            var n = t.prev
              , o = t
              , a = t.next;
            if (Zo(n, o, a) >= 0)
                return !1;
            for (var s = n.x < o.x ? n.x < a.x ? n.x : a.x : o.x < a.x ? o.x : a.x, l = n.y < o.y ? n.y < a.y ? n.y : a.y : o.y < a.y ? o.y : a.y, u = n.x > o.x ? n.x > a.x ? n.x : a.x : o.x > a.x ? o.x : a.x, c = n.y > o.y ? n.y > a.y ? n.y : a.y : o.y > a.y ? o.y : a.y, p = qo(s, l, e, i, r), h = qo(u, c, e, i, r), d = t.prevZ, f = t.nextZ; d && d.z >= p && f && f.z <= h; ) {
                if (d !== t.prev && d !== t.next && Ho(n.x, n.y, o.x, o.y, a.x, a.y, d.x, d.y) && Zo(d.prev, d, d.next) >= 0)
                    return !1;
                if (d = d.prevZ,
                f !== t.prev && f !== t.next && Ho(n.x, n.y, o.x, o.y, a.x, a.y, f.x, f.y) && Zo(f.prev, f, f.next) >= 0)
                    return !1;
                f = f.nextZ
            }
            for (; d && d.z >= p; ) {
                if (d !== t.prev && d !== t.next && Ho(n.x, n.y, o.x, o.y, a.x, a.y, d.x, d.y) && Zo(d.prev, d, d.next) >= 0)
                    return !1;
                d = d.prevZ
            }
            for (; f && f.z <= h; ) {
                if (f !== t.prev && f !== t.next && Ho(n.x, n.y, o.x, o.y, a.x, a.y, f.x, f.y) && Zo(f.prev, f, f.next) >= 0)
                    return !1;
                f = f.nextZ
            }
            return !0
        }
        function Uo(t, e, i) {
            var r = t;
            do {
                var n = r.prev
                  , o = r.next.next;
                !Go(n, o) && Yo(n, r, r.next, o) && Ko(n, o) && Ko(o, n) && (e.push(n.i / i),
                e.push(r.i / i),
                e.push(o.i / i),
                ta(r),
                ta(r.next),
                r = t = o),
                r = r.next
            } while (r !== t);
            return r
        }
        function Vo(t, e, i, r, n, o) {
            var a = t;
            do {
                for (var s = a.next.next; s !== a.prev; ) {
                    if (a.i !== s.i && Xo(a, s)) {
                        var l = Jo(a, s);
                        return a = Ro(a, a.next),
                        l = Ro(l, l.next),
                        Fo(a, e, i, r, n, o),
                        void Fo(l, e, i, r, n, o)
                    }
                    s = s.next
                }
                a = a.next
            } while (a !== t)
        }
        function jo(t, e) {
            return t.x - e.x
        }
        function $o(t, e) {
            if (e = function(t, e) {
                var i, r = e, n = t.x, o = t.y, a = -1 / 0;
                do {
                    if (o <= r.y && o >= r.next.y && r.next.y !== r.y) {
                        var s = r.x + (o - r.y) * (r.next.x - r.x) / (r.next.y - r.y);
                        if (s <= n && s > a) {
                            if (a = s,
                            s === n) {
                                if (o === r.y)
                                    return r;
                                if (o === r.next.y)
                                    return r.next
                            }
                            i = r.x < r.next.x ? r : r.next
                        }
                    }
                    r = r.next
                } while (r !== e);
                if (!i)
                    return null;
                if (n === a)
                    return i.prev;
                var l, u = i, c = i.x, p = i.y, h = 1 / 0;
                for (r = i.next; r !== u; )
                    n >= r.x && r.x >= c && n !== r.x && Ho(o < p ? n : a, o, c, p, o < p ? a : n, o, r.x, r.y) && ((l = Math.abs(o - r.y) / (n - r.x)) < h || l === h && r.x > i.x) && Ko(r, t) && (i = r,
                    h = l),
                    r = r.next;
                return i
            }(t, e)) {
                var i = Jo(e, t);
                Ro(i, i.next)
            }
        }
        function qo(t, e, i, r, n) {
            return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - i) * n) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - r) * n) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1
        }
        function Wo(t) {
            var e = t
              , i = t;
            do {
                e.x < i.x && (i = e),
                e = e.next
            } while (e !== t);
            return i
        }
        function Ho(t, e, i, r, n, o, a, s) {
            return (n - a) * (e - s) - (t - a) * (o - s) >= 0 && (t - a) * (r - s) - (i - a) * (e - s) >= 0 && (i - a) * (o - s) - (n - a) * (r - s) >= 0
        }
        function Xo(t, e) {
            return t.next.i !== e.i && t.prev.i !== e.i && !function(t, e) {
                var i = t;
                do {
                    if (i.i !== t.i && i.next.i !== t.i && i.i !== e.i && i.next.i !== e.i && Yo(i, i.next, t, e))
                        return !0;
                    i = i.next
                } while (i !== t);
                return !1
            }(t, e) && Ko(t, e) && Ko(e, t) && function(t, e) {
                var i = t
                  , r = !1
                  , n = (t.x + e.x) / 2
                  , o = (t.y + e.y) / 2;
                do {
                    i.y > o != i.next.y > o && i.next.y !== i.y && n < (i.next.x - i.x) * (o - i.y) / (i.next.y - i.y) + i.x && (r = !r),
                    i = i.next
                } while (i !== t);
                return r
            }(t, e)
        }
        function Zo(t, e, i) {
            return (e.y - t.y) * (i.x - e.x) - (e.x - t.x) * (i.y - e.y)
        }
        function Go(t, e) {
            return t.x === e.x && t.y === e.y
        }
        function Yo(t, e, i, r) {
            return !!(Go(t, e) && Go(i, r) || Go(t, r) && Go(i, e)) || Zo(t, e, i) > 0 != Zo(t, e, r) > 0 && Zo(i, r, t) > 0 != Zo(i, r, e) > 0
        }
        function Ko(t, e) {
            return Zo(t.prev, t, t.next) < 0 ? Zo(t, e, t.next) >= 0 && Zo(t, t.prev, e) >= 0 : Zo(t, e, t.prev) < 0 || Zo(t, t.next, e) < 0
        }
        function Jo(t, e) {
            var i = new ea(t.i,t.x,t.y)
              , r = new ea(e.i,e.x,e.y)
              , n = t.next
              , o = e.prev;
            return t.next = e,
            e.prev = t,
            i.next = n,
            n.prev = i,
            r.next = i,
            i.prev = r,
            o.next = r,
            r.prev = o,
            r
        }
        function Qo(t, e, i, r) {
            var n = new ea(t,e,i);
            return r ? (n.next = r.next,
            n.prev = r,
            r.next.prev = n,
            r.next = n) : (n.prev = n,
            n.next = n),
            n
        }
        function ta(t) {
            t.next.prev = t.prev,
            t.prev.next = t.next,
            t.prevZ && (t.prevZ.nextZ = t.nextZ),
            t.nextZ && (t.nextZ.prevZ = t.prevZ)
        }
        function ea(t, e, i) {
            this.i = t,
            this.x = e,
            this.y = i,
            this.prev = null,
            this.next = null,
            this.z = null,
            this.prevZ = null,
            this.nextZ = null,
            this.steiner = !1
        }
        function ia(t, e, i, r) {
            for (var n = 0, o = e, a = i - r; o < i; o += r)
                n += (t[a] - t[o]) * (t[o + 1] + t[a + 1]),
                a = o;
            return n
        }
        Do.deviation = function(t, e, i, r) {
            var n = e && e.length
              , o = n ? e[0] * i : t.length
              , a = Math.abs(ia(t, 0, o, i));
            if (n)
                for (var s = 0, l = e.length; s < l; s++) {
                    var u = e[s] * i
                      , c = s < l - 1 ? e[s + 1] * i : t.length;
                    a -= Math.abs(ia(t, u, c, i))
                }
            var p = 0;
            for (s = 0; s < r.length; s += 3) {
                var h = r[s] * i
                  , d = r[s + 1] * i
                  , f = r[s + 2] * i;
                p += Math.abs((t[h] - t[f]) * (t[d + 1] - t[h + 1]) - (t[h] - t[d]) * (t[f + 1] - t[h + 1]))
            }
            return 0 === a && 0 === p ? 0 : Math.abs((p - a) / a)
        }
        ,
        Do.flatten = function(t) {
            for (var e = t[0][0].length, i = {
                vertices: [],
                holes: [],
                dimensions: e
            }, r = 0, n = 0; n < t.length; n++) {
                for (var o = 0; o < t[n].length; o++)
                    for (var a = 0; a < e; a++)
                        i.vertices.push(t[n][o][a]);
                n > 0 && (r += t[n - 1].length,
                i.holes.push(r))
            }
            return i
        }
        ,
        zo.default = Lo;
        var ra = oa
          , na = oa;
        function oa(t, e, i, r, n) {
            !function t(e, i, r, n, o) {
                for (; n > r; ) {
                    if (n - r > 600) {
                        var a = n - r + 1
                          , s = i - r + 1
                          , l = Math.log(a)
                          , u = .5 * Math.exp(2 * l / 3)
                          , c = .5 * Math.sqrt(l * u * (a - u) / a) * (s - a / 2 < 0 ? -1 : 1);
                        t(e, i, Math.max(r, Math.floor(i - s * u / a + c)), Math.min(n, Math.floor(i + (a - s) * u / a + c)), o)
                    }
                    var p = e[i]
                      , h = r
                      , d = n;
                    for (aa(e, r, i),
                    o(e[n], p) > 0 && aa(e, r, n); h < d; ) {
                        for (aa(e, h, d),
                        h++,
                        d--; o(e[h], p) < 0; )
                            h++;
                        for (; o(e[d], p) > 0; )
                            d--
                    }
                    0 === o(e[r], p) ? aa(e, r, d) : aa(e, ++d, n),
                    d <= i && (r = d + 1),
                    i <= d && (n = d - 1)
                }
            }(t, e, i || 0, r || t.length - 1, n || sa)
        }
        function aa(t, e, i) {
            var r = t[e];
            t[e] = t[i],
            t[i] = r
        }
        function sa(t, e) {
            return t < e ? -1 : t > e ? 1 : 0
        }
        function la(t, e) {
            var i = t.length;
            if (i <= 1)
                return [t];
            for (var r, n, o = [], a = 0; a < i; a++) {
                var s = S(t[a]);
                0 !== s && (t[a].area = Math.abs(s),
                void 0 === n && (n = s < 0),
                n === s < 0 ? (r && o.push(r),
                r = [t[a]]) : r.push(t[a]))
            }
            if (r && o.push(r),
            e > 1)
                for (var l = 0; l < o.length; l++)
                    o[l].length <= e || (ra(o[l], e, 1, o[l].length - 1, ua),
                    o[l] = o[l].slice(0, e));
            return o
        }
        function ua(t, e) {
            return e.area - t.area
        }
        function ca(t, e, i) {
            for (var r = i.patternDependencies, n = !1, o = 0, a = e; o < a.length; o += 1) {
                var s = a[o].paint.get(t + "-pattern");
                s.isConstant() || (n = !0);
                var l = s.constantOr(null);
                l && (n = !0,
                r[l.to] = !0,
                r[l.from] = !0)
            }
            return n
        }
        function pa(t, e, i, r, n) {
            for (var o = n.patternDependencies, a = 0, s = e; a < s.length; a += 1) {
                var l = s[a]
                  , u = l.paint.get(t + "-pattern").value;
                if ("constant" !== u.kind) {
                    var c = u.evaluate({
                        zoom: r - 1
                    }, i, {})
                      , p = u.evaluate({
                        zoom: r
                    }, i, {})
                      , h = u.evaluate({
                        zoom: r + 1
                    }, i, {});
                    o[c] = !0,
                    o[p] = !0,
                    o[h] = !0,
                    i.patterns[l.id] = {
                        min: c,
                        mid: p,
                        max: h
                    }
                }
            }
            return i
        }
        ra.default = na;
        var ha = function(t) {
            this.zoom = t.zoom,
            this.overscaling = t.overscaling,
            this.layers = t.layers,
            this.layerIds = this.layers.map(function(t) {
                return t.id
            }),
            this.index = t.index,
            this.hasPattern = !1,
            this.layoutVertexArray = new Lr,
            this.indexArray = new Gr,
            this.indexArray2 = new Yr,
            this.programConfigurations = new On(Io,t.layers,t.zoom),
            this.segments = new mn,
            this.segments2 = new mn
        };
        ha.prototype.populate = function(t, e) {
            this.features = [],
            this.hasPattern = ca("fill", this.layers, e);
            for (var i = 0, r = t; i < r.length; i += 1) {
                var n = r[i]
                  , o = n.feature
                  , a = n.index
                  , s = n.sourceLayerIndex;
                if (this.layers[0]._featureFilter(new hr(this.zoom), o)) {
                    var l = Un(o)
                      , u = {
                        sourceLayerIndex: s,
                        index: a,
                        geometry: l,
                        properties: o.properties,
                        type: o.type,
                        patterns: {}
                    };
                    void 0 !== o.id && (u.id = o.id),
                    this.hasPattern ? this.features.push(pa("fill", this.layers, u, this.zoom, e)) : this.addFeature(u, l, a, {}),
                    e.featureIndex.insert(o, l, a, s, this.index)
                }
            }
        }
        ,
        ha.prototype.update = function(t, e, i) {
            this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, i)
        }
        ,
        ha.prototype.addFeatures = function(t, e) {
            for (var i = 0, r = this.features; i < r.length; i += 1) {
                var n = r[i]
                  , o = n.geometry;
                this.addFeature(n, o, n.index, e)
            }
        }
        ,
        ha.prototype.isEmpty = function() {
            return 0 === this.layoutVertexArray.length
        }
        ,
        ha.prototype.uploadPending = function() {
            return !this.uploaded || this.programConfigurations.needsUpload
        }
        ,
        ha.prototype.upload = function(t) {
            this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Io),
            this.indexBuffer = t.createIndexBuffer(this.indexArray),
            this.indexBuffer2 = t.createIndexBuffer(this.indexArray2)),
            this.programConfigurations.upload(t),
            this.uploaded = !0
        }
        ,
        ha.prototype.destroy = function() {
            this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.indexBuffer2.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy(),
            this.segments2.destroy())
        }
        ,
        ha.prototype.addFeature = function(t, e, i, r) {
            for (var n = 0, o = la(e, 500); n < o.length; n += 1) {
                for (var a = o[n], s = 0, l = 0, u = a; l < u.length; l += 1)
                    s += u[l].length;
                for (var c = this.segments.prepareSegment(s, this.layoutVertexArray, this.indexArray), p = c.vertexLength, h = [], d = [], f = 0, m = a; f < m.length; f += 1) {
                    var y = m[f];
                    if (0 !== y.length) {
                        y !== a[0] && d.push(h.length / 2);
                        var g = this.segments2.prepareSegment(y.length, this.layoutVertexArray, this.indexArray2)
                          , _ = g.vertexLength;
                        this.layoutVertexArray.emplaceBack(y[0].x, y[0].y),
                        this.indexArray2.emplaceBack(_ + y.length - 1, _),
                        h.push(y[0].x),
                        h.push(y[0].y);
                        for (var v = 1; v < y.length; v++)
                            this.layoutVertexArray.emplaceBack(y[v].x, y[v].y),
                            this.indexArray2.emplaceBack(_ + v - 1, _ + v),
                            h.push(y[v].x),
                            h.push(y[v].y);
                        g.vertexLength += y.length,
                        g.primitiveLength += y.length
                    }
                }
                for (var x = zo(h, d), b = 0; b < x.length; b += 3)
                    this.indexArray.emplaceBack(p + x[b], p + x[b + 1], p + x[b + 2]);
                c.vertexLength += s,
                c.primitiveLength += x.length / 3
            }
            this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, i, r)
        }
        ,
        Gi("FillBucket", ha, {
            omit: ["layers", "features"]
        });
        var da = {
            paint: new kr({
                "fill-antialias": new br(st.paint_fill["fill-antialias"]),
                "fill-opacity": new wr(st.paint_fill["fill-opacity"]),
                "fill-color": new wr(st.paint_fill["fill-color"]),
                "fill-outline-color": new wr(st.paint_fill["fill-outline-color"]),
                "fill-translate": new br(st.paint_fill["fill-translate"]),
                "fill-translate-anchor": new br(st.paint_fill["fill-translate-anchor"]),
                "fill-pattern": new Tr(st.paint_fill["fill-pattern"])
            })
        }
          , fa = function(t) {
            function e(e) {
                t.call(this, e, da)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.recalculate = function(e) {
                t.prototype.recalculate.call(this, e);
                var i = this.paint._values["fill-outline-color"];
                "constant" === i.value.kind && void 0 === i.value.value && (this.paint._values["fill-outline-color"] = this.paint._values["fill-color"])
            }
            ,
            e.prototype.createBucket = function(t) {
                return new ha(t)
            }
            ,
            e.prototype.queryRadius = function() {
                return to(this.paint.get("fill-translate"))
            }
            ,
            e.prototype.queryIntersectsFeature = function(t, e, i, r, n, o, a) {
                return qn(eo(t, this.paint.get("fill-translate"), this.paint.get("fill-translate-anchor"), o.angle, a), r)
            }
            ,
            e
        }(Er)
          , ma = Ir([{
            name: "a_pos",
            components: 2,
            type: "Int16"
        }, {
            name: "a_normal_ed",
            components: 4,
            type: "Int16"
        }], 4)
          , ya = ma.members
          , ga = (ma.size,
        ma.alignment,
        Math.pow(2, 13));
        function _a(t, e, i, r, n, o, a, s) {
            t.emplaceBack(e, i, 2 * Math.floor(r * ga) + a, n * ga * 2, o * ga * 2, Math.round(s))
        }
        var va = function(t) {
            this.zoom = t.zoom,
            this.overscaling = t.overscaling,
            this.layers = t.layers,
            this.layerIds = this.layers.map(function(t) {
                return t.id
            }),
            this.index = t.index,
            this.hasPattern = !1,
            this.layoutVertexArray = new Or,
            this.indexArray = new Gr,
            this.programConfigurations = new On(ya,t.layers,t.zoom),
            this.segments = new mn
        };
        function xa(t, e) {
            return t.x === e.x && (t.x < 0 || t.x > Bn) || t.y === e.y && (t.y < 0 || t.y > Bn)
        }
        function ba(t) {
            return t.every(function(t) {
                return t.x < 0
            }) || t.every(function(t) {
                return t.x > Bn
            }) || t.every(function(t) {
                return t.y < 0
            }) || t.every(function(t) {
                return t.y > Bn
            })
        }
        va.prototype.populate = function(t, e) {
            this.features = [],
            this.hasPattern = ca("fill-extrusion", this.layers, e);
            for (var i = 0, r = t; i < r.length; i += 1) {
                var n = r[i]
                  , o = n.feature
                  , a = n.index
                  , s = n.sourceLayerIndex;
                if (this.layers[0]._featureFilter(new hr(this.zoom), o)) {
                    var l = Un(o)
                      , u = {
                        sourceLayerIndex: s,
                        index: a,
                        geometry: l,
                        properties: o.properties,
                        type: o.type,
                        patterns: {}
                    };
                    void 0 !== o.id && (u.id = o.id),
                    this.hasPattern ? this.features.push(pa("fill-extrusion", this.layers, u, this.zoom, e)) : this.addFeature(u, l, a, {}),
                    e.featureIndex.insert(o, l, a, s, this.index)
                }
            }
        }
        ,
        va.prototype.addFeatures = function(t, e) {
            for (var i = 0, r = this.features; i < r.length; i += 1) {
                var n = r[i]
                  , o = n.geometry;
                this.addFeature(n, o, n.index, e)
            }
        }
        ,
        va.prototype.update = function(t, e, i) {
            this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, i)
        }
        ,
        va.prototype.isEmpty = function() {
            return 0 === this.layoutVertexArray.length
        }
        ,
        va.prototype.uploadPending = function() {
            return !this.uploaded || this.programConfigurations.needsUpload
        }
        ,
        va.prototype.upload = function(t) {
            this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, ya),
            this.indexBuffer = t.createIndexBuffer(this.indexArray)),
            this.programConfigurations.upload(t),
            this.uploaded = !0
        }
        ,
        va.prototype.destroy = function() {
            this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy())
        }
        ,
        va.prototype.addFeature = function(t, e, i, r) {
            for (var n = 0, o = la(e, 500); n < o.length; n += 1) {
                for (var a = o[n], s = 0, l = 0, u = a; l < u.length; l += 1)
                    s += u[l].length;
                for (var c = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray), p = 0, h = a; p < h.length; p += 1) {
                    var d = h[p];
                    if (0 !== d.length && !ba(d))
                        for (var f = 0, m = 0; m < d.length; m++) {
                            var y = d[m];
                            if (m >= 1) {
                                var g = d[m - 1];
                                if (!xa(y, g)) {
                                    c.vertexLength + 4 > mn.MAX_VERTEX_ARRAY_LENGTH && (c = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray));
                                    var _ = y.sub(g)._perp()._unit()
                                      , v = g.dist(y);
                                    f + v > 32768 && (f = 0),
                                    _a(this.layoutVertexArray, y.x, y.y, _.x, _.y, 0, 0, f),
                                    _a(this.layoutVertexArray, y.x, y.y, _.x, _.y, 0, 1, f),
                                    f += v,
                                    _a(this.layoutVertexArray, g.x, g.y, _.x, _.y, 0, 0, f),
                                    _a(this.layoutVertexArray, g.x, g.y, _.x, _.y, 0, 1, f);
                                    var x = c.vertexLength;
                                    this.indexArray.emplaceBack(x, x + 2, x + 1),
                                    this.indexArray.emplaceBack(x + 1, x + 2, x + 3),
                                    c.vertexLength += 4,
                                    c.primitiveLength += 2
                                }
                            }
                        }
                }
                c.vertexLength + s > mn.MAX_VERTEX_ARRAY_LENGTH && (c = this.segments.prepareSegment(s, this.layoutVertexArray, this.indexArray));
                for (var b = [], w = [], T = c.vertexLength, S = 0, A = a; S < A.length; S += 1) {
                    var k = A[S];
                    if (0 !== k.length) {
                        k !== a[0] && w.push(b.length / 2);
                        for (var E = 0; E < k.length; E++) {
                            var C = k[E];
                            _a(this.layoutVertexArray, C.x, C.y, 0, 0, 1, 1, 0),
                            b.push(C.x),
                            b.push(C.y)
                        }
                    }
                }
                for (var P = zo(b, w), M = 0; M < P.length; M += 3)
                    this.indexArray.emplaceBack(T + P[M], T + P[M + 2], T + P[M + 1]);
                c.primitiveLength += P.length / 3,
                c.vertexLength += s
            }
            this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, i, r)
        }
        ,
        Gi("FillExtrusionBucket", va, {
            omit: ["layers", "features"]
        });
        var wa = {
            paint: new kr({
                "fill-extrusion-opacity": new br(st["paint_fill-extrusion"]["fill-extrusion-opacity"]),
                "fill-extrusion-color": new wr(st["paint_fill-extrusion"]["fill-extrusion-color"]),
                "fill-extrusion-translate": new br(st["paint_fill-extrusion"]["fill-extrusion-translate"]),
                "fill-extrusion-translate-anchor": new br(st["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
                "fill-extrusion-pattern": new Tr(st["paint_fill-extrusion"]["fill-extrusion-pattern"]),
                "fill-extrusion-height": new wr(st["paint_fill-extrusion"]["fill-extrusion-height"]),
                "fill-extrusion-base": new wr(st["paint_fill-extrusion"]["fill-extrusion-base"]),
                "fill-extrusion-vertical-gradient": new br(st["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])
            })
        }
          , Ta = function(t) {
            function e(e) {
                t.call(this, e, wa)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.createBucket = function(t) {
                return new va(t)
            }
            ,
            e.prototype.queryRadius = function() {
                return to(this.paint.get("fill-extrusion-translate"))
            }
            ,
            e.prototype.queryIntersectsFeature = function(t, e, i, r, n, o, a) {
                return qn(eo(t, this.paint.get("fill-extrusion-translate"), this.paint.get("fill-extrusion-translate-anchor"), o.angle, a), r)
            }
            ,
            e.prototype.hasOffscreenPass = function() {
                return 0 !== this.paint.get("fill-extrusion-opacity") && "none" !== this.visibility
            }
            ,
            e.prototype.resize = function() {
                this.viewportFrame && (this.viewportFrame.destroy(),
                this.viewportFrame = null)
            }
            ,
            e
        }(Er)
          , Sa = Ir([{
            name: "a_pos_normal",
            components: 4,
            type: "Int16"
        }, {
            name: "a_data",
            components: 4,
            type: "Uint8"
        }], 4)
          , Aa = Sa.members
          , ka = (Sa.size,
        Sa.alignment,
        Ea);
        function Ea(t, e, i, r, n) {
            this.properties = {},
            this.extent = i,
            this.type = 0,
            this._pbf = t,
            this._geometry = -1,
            this._keys = r,
            this._values = n,
            t.readFields(Ca, this, e)
        }
        function Ca(t, e, i) {
            1 == t ? e.id = i.readVarint() : 2 == t ? function(t, e) {
                for (var i = t.readVarint() + t.pos; t.pos < i; ) {
                    var r = e._keys[t.readVarint()]
                      , n = e._values[t.readVarint()];
                    e.properties[r] = n
                }
            }(i, e) : 3 == t ? e.type = i.readVarint() : 4 == t && (e._geometry = i.pos)
        }
        function Pa(t) {
            for (var e, i, r = 0, n = 0, o = t.length, a = o - 1; n < o; a = n++)
                e = t[n],
                r += ((i = t[a]).x - e.x) * (e.y + i.y);
            return r
        }
        Ea.types = ["Unknown", "Point", "LineString", "Polygon"],
        Ea.prototype.loadGeometry = function() {
            var t = this._pbf;
            t.pos = this._geometry;
            for (var e, i = t.readVarint() + t.pos, r = 1, o = 0, a = 0, s = 0, l = []; t.pos < i; ) {
                if (o <= 0) {
                    var u = t.readVarint();
                    r = 7 & u,
                    o = u >> 3
                }
                if (o--,
                1 === r || 2 === r)
                    a += t.readSVarint(),
                    s += t.readSVarint(),
                    1 === r && (e && l.push(e),
                    e = []),
                    e.push(new n(a,s));
                else {
                    if (7 !== r)
                        throw new Error("unknown command " + r);
                    e && e.push(e[0].clone())
                }
            }
            return e && l.push(e),
            l
        }
        ,
        Ea.prototype.bbox = function() {
            var t = this._pbf;
            t.pos = this._geometry;
            for (var e = t.readVarint() + t.pos, i = 1, r = 0, n = 0, o = 0, a = 1 / 0, s = -1 / 0, l = 1 / 0, u = -1 / 0; t.pos < e; ) {
                if (r <= 0) {
                    var c = t.readVarint();
                    i = 7 & c,
                    r = c >> 3
                }
                if (r--,
                1 === i || 2 === i)
                    (n += t.readSVarint()) < a && (a = n),
                    n > s && (s = n),
                    (o += t.readSVarint()) < l && (l = o),
                    o > u && (u = o);
                else if (7 !== i)
                    throw new Error("unknown command " + i)
            }
            return [a, l, s, u]
        }
        ,
        Ea.prototype.toGeoJSON = function(t, e, i) {
            var r, n, o = this.extent * Math.pow(2, i), a = this.extent * t, s = this.extent * e, l = this.loadGeometry(), u = Ea.types[this.type];
            function c(t) {
                for (var e = 0; e < t.length; e++) {
                    var i = t[e]
                      , r = 180 - 360 * (i.y + s) / o;
                    t[e] = [360 * (i.x + a) / o - 180, 360 / Math.PI * Math.atan(Math.exp(r * Math.PI / 180)) - 90]
                }
            }
            switch (this.type) {
            case 1:
                var p = [];
                for (r = 0; r < l.length; r++)
                    p[r] = l[r][0];
                c(l = p);
                break;
            case 2:
                for (r = 0; r < l.length; r++)
                    c(l[r]);
                break;
            case 3:
                for (l = function(t) {
                    var e = t.length;
                    if (e <= 1)
                        return [t];
                    for (var i, r, n = [], o = 0; o < e; o++) {
                        var a = Pa(t[o]);
                        0 !== a && (void 0 === r && (r = a < 0),
                        r === a < 0 ? (i && n.push(i),
                        i = [t[o]]) : i.push(t[o]))
                    }
                    return i && n.push(i),
                    n
                }(l),
                r = 0; r < l.length; r++)
                    for (n = 0; n < l[r].length; n++)
                        c(l[r][n])
            }
            1 === l.length ? l = l[0] : u = "Multi" + u;
            var h = {
                type: "Feature",
                geometry: {
                    type: u,
                    coordinates: l
                },
                properties: this.properties
            };
            return "id"in this && (h.id = this.id),
            h
        }
        ;
        var Ma = Ia;
        function Ia(t, e) {
            this.version = 1,
            this.name = null,
            this.extent = 4096,
            this.length = 0,
            this._pbf = t,
            this._keys = [],
            this._values = [],
            this._features = [],
            t.readFields(za, this, e),
            this.length = this._features.length
        }
        function za(t, e, i) {
            15 === t ? e.version = i.readVarint() : 1 === t ? e.name = i.readString() : 5 === t ? e.extent = i.readVarint() : 2 === t ? e._features.push(i.pos) : 3 === t ? e._keys.push(i.readString()) : 4 === t && e._values.push(function(t) {
                for (var e = null, i = t.readVarint() + t.pos; t.pos < i; ) {
                    var r = t.readVarint() >> 3;
                    e = 1 === r ? t.readString() : 2 === r ? t.readFloat() : 3 === r ? t.readDouble() : 4 === r ? t.readVarint64() : 5 === r ? t.readVarint() : 6 === r ? t.readSVarint() : 7 === r ? t.readBoolean() : null
                }
                return e
            }(i))
        }
        function La(t, e, i) {
            if (3 === t) {
                var r = new Ma(i,i.readVarint() + i.pos);
                r.length && (e[r.name] = r)
            }
        }
        Ia.prototype.feature = function(t) {
            if (t < 0 || t >= this._features.length)
                throw new Error("feature index out of bounds");
            this._pbf.pos = this._features[t];
            var e = this._pbf.readVarint() + this._pbf.pos;
            return new ka(this._pbf,e,this.extent,this._keys,this._values)
        }
        ;
        var Da = {
            VectorTile: function(t, e) {
                this.layers = t.readFields(La, {}, e)
            },
            VectorTileFeature: ka,
            VectorTileLayer: Ma
        }
          , Oa = Da.VectorTileFeature.types
          , Ra = 63
          , Fa = Math.cos(Math.PI / 180 * 37.5)
          , Ba = .5
          , Na = Math.pow(2, 14) / Ba;
        function Ua(t, e, i, r, n, o, a) {
            t.emplaceBack(e.x, e.y, r ? 1 : 0, n ? 1 : -1, Math.round(Ra * i.x) + 128, Math.round(Ra * i.y) + 128, 1 + (0 === o ? 0 : o < 0 ? -1 : 1) | (a * Ba & 63) << 2, a * Ba >> 6)
        }
        var Va = function(t) {
            this.zoom = t.zoom,
            this.overscaling = t.overscaling,
            this.layers = t.layers,
            this.layerIds = this.layers.map(function(t) {
                return t.id
            }),
            this.index = t.index,
            this.features = [],
            this.hasPattern = !1,
            this.layoutVertexArray = new Rr,
            this.indexArray = new Gr,
            this.programConfigurations = new On(Aa,t.layers,t.zoom),
            this.segments = new mn
        };
        function ja(t, e) {
            return (t / e.tileTotal * (e.end - e.start) + e.start) * (Na - 1)
        }
        Va.prototype.populate = function(t, e) {
            this.features = [],
            this.hasPattern = ca("line", this.layers, e);
            for (var i = 0, r = t; i < r.length; i += 1) {
                var n = r[i]
                  , o = n.feature
                  , a = n.index
                  , s = n.sourceLayerIndex;
                if (this.layers[0]._featureFilter(new hr(this.zoom), o)) {
                    var l = Un(o)
                      , u = {
                        sourceLayerIndex: s,
                        index: a,
                        geometry: l,
                        properties: o.properties,
                        type: o.type,
                        patterns: {}
                    };
                    void 0 !== o.id && (u.id = o.id),
                    this.hasPattern ? this.features.push(pa("line", this.layers, u, this.zoom, e)) : this.addFeature(u, l, a, {}),
                    e.featureIndex.insert(o, l, a, s, this.index)
                }
            }
        }
        ,
        Va.prototype.update = function(t, e, i) {
            this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, i)
        }
        ,
        Va.prototype.addFeatures = function(t, e) {
            for (var i = 0, r = this.features; i < r.length; i += 1) {
                var n = r[i]
                  , o = n.geometry;
                this.addFeature(n, o, n.index, e)
            }
        }
        ,
        Va.prototype.isEmpty = function() {
            return 0 === this.layoutVertexArray.length
        }
        ,
        Va.prototype.uploadPending = function() {
            return !this.uploaded || this.programConfigurations.needsUpload
        }
        ,
        Va.prototype.upload = function(t) {
            this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Aa),
            this.indexBuffer = t.createIndexBuffer(this.indexArray)),
            this.programConfigurations.upload(t),
            this.uploaded = !0
        }
        ,
        Va.prototype.destroy = function() {
            this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy())
        }
        ,
        Va.prototype.addFeature = function(t, e, i, r) {
            for (var n = this.layers[0].layout, o = n.get("line-join").evaluate(t, {}), a = n.get("line-cap"), s = n.get("line-miter-limit"), l = n.get("line-round-limit"), u = 0, c = e; u < c.length; u += 1) {
                var p = c[u];
                this.addLine(p, t, o, a, s, l, i, r)
            }
        }
        ,
        Va.prototype.addLine = function(t, e, i, r, n, o, a, s) {
            var l = null;
            e.properties && e.properties.hasOwnProperty("mapbox_clip_start") && e.properties.hasOwnProperty("mapbox_clip_end") && (l = {
                start: e.properties.mapbox_clip_start,
                end: e.properties.mapbox_clip_end,
                tileTotal: void 0
            });
            for (var u = "Polygon" === Oa[e.type], c = t.length; c >= 2 && t[c - 1].equals(t[c - 2]); )
                c--;
            for (var p = 0; p < c - 1 && t[p].equals(t[p + 1]); )
                p++;
            if (!(c < (u ? 3 : 2))) {
                l && (l.tileTotal = function(t, e, i) {
                    for (var r, n, o = 0, a = p; a < i - 1; a++)
                        r = t[a],
                        n = t[a + 1],
                        o += r.dist(n);
                    return o
                }(t, 0, c)),
                "bevel" === i && (n = 1.05);
                var h = Bn / (512 * this.overscaling) * 15
                  , d = t[p]
                  , f = this.segments.prepareSegment(10 * c, this.layoutVertexArray, this.indexArray);
                this.distance = 0;
                var m, y, g, _ = r, v = u ? "butt" : r, x = !0, b = void 0, w = void 0, T = void 0, S = void 0;
                this.e1 = this.e2 = this.e3 = -1,
                u && (m = t[c - 2],
                S = d.sub(m)._unit()._perp());
                for (var A = p; A < c; A++)
                    if (!(w = u && A === c - 1 ? t[p + 1] : t[A + 1]) || !t[A].equals(w)) {
                        S && (T = S),
                        m && (b = m),
                        m = t[A],
                        S = w ? w.sub(m)._unit()._perp() : T;
                        var k = (T = T || S).add(S);
                        0 === k.x && 0 === k.y || k._unit();
                        var E = k.x * S.x + k.y * S.y
                          , C = 0 !== E ? 1 / E : 1 / 0
                          , P = E < Fa && b && w;
                        if (P && A > p) {
                            var M = m.dist(b);
                            if (M > 2 * h) {
                                var I = m.sub(m.sub(b)._mult(h / M)._round());
                                this.distance += I.dist(b),
                                this.addCurrentVertex(I, this.distance, T.mult(1), 0, 0, !1, f, l),
                                b = I
                            }
                        }
                        var z = b && w
                          , L = z ? i : w ? _ : v;
                        if (z && "round" === L && (C < o ? L = "miter" : C <= 2 && (L = "fakeround")),
                        "miter" === L && C > n && (L = "bevel"),
                        "bevel" === L && (C > 2 && (L = "flipbevel"),
                        C < n && (L = "miter")),
                        b && (this.distance += m.dist(b)),
                        "miter" === L)
                            k._mult(C),
                            this.addCurrentVertex(m, this.distance, k, 0, 0, !1, f, l);
                        else if ("flipbevel" === L) {
                            if (C > 100)
                                k = S.clone().mult(-1);
                            else {
                                var D = T.x * S.y - T.y * S.x > 0 ? -1 : 1
                                  , O = C * T.add(S).mag() / T.sub(S).mag();
                                k._perp()._mult(O * D)
                            }
                            this.addCurrentVertex(m, this.distance, k, 0, 0, !1, f, l),
                            this.addCurrentVertex(m, this.distance, k.mult(-1), 0, 0, !1, f, l)
                        } else if ("bevel" === L || "fakeround" === L) {
                            var R = T.x * S.y - T.y * S.x > 0
                              , F = -Math.sqrt(C * C - 1);
                            if (R ? (g = 0,
                            y = F) : (y = 0,
                            g = F),
                            x || this.addCurrentVertex(m, this.distance, T, y, g, !1, f, l),
                            "fakeround" === L) {
                                for (var B = Math.floor(8 * (.5 - (E - .5))), N = void 0, U = 0; U < B; U++)
                                    N = S.mult((U + 1) / (B + 1))._add(T)._unit(),
                                    this.addPieSliceVertex(m, this.distance, N, R, f, l);
                                this.addPieSliceVertex(m, this.distance, k, R, f, l);
                                for (var V = B - 1; V >= 0; V--)
                                    N = T.mult((V + 1) / (B + 1))._add(S)._unit(),
                                    this.addPieSliceVertex(m, this.distance, N, R, f, l)
                            }
                            w && this.addCurrentVertex(m, this.distance, S, -y, -g, !1, f, l)
                        } else
                            "butt" === L ? (x || this.addCurrentVertex(m, this.distance, T, 0, 0, !1, f, l),
                            w && this.addCurrentVertex(m, this.distance, S, 0, 0, !1, f, l)) : "square" === L ? (x || (this.addCurrentVertex(m, this.distance, T, 1, 1, !1, f, l),
                            this.e1 = this.e2 = -1),
                            w && this.addCurrentVertex(m, this.distance, S, -1, -1, !1, f, l)) : "round" === L && (x || (this.addCurrentVertex(m, this.distance, T, 0, 0, !1, f, l),
                            this.addCurrentVertex(m, this.distance, T, 1, 1, !0, f, l),
                            this.e1 = this.e2 = -1),
                            w && (this.addCurrentVertex(m, this.distance, S, -1, -1, !0, f, l),
                            this.addCurrentVertex(m, this.distance, S, 0, 0, !1, f, l)));
                        if (P && A < c - 1) {
                            var j = m.dist(w);
                            if (j > 2 * h) {
                                var $ = m.add(w.sub(m)._mult(h / j)._round());
                                this.distance += $.dist(m),
                                this.addCurrentVertex($, this.distance, S.mult(1), 0, 0, !1, f, l),
                                m = $
                            }
                        }
                        x = !1
                    }
                this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, e, a, s)
            }
        }
        ,
        Va.prototype.addCurrentVertex = function(t, e, i, r, n, o, a, s) {
            var l, u = this.layoutVertexArray, c = this.indexArray;
            s && (e = ja(e, s)),
            l = i.clone(),
            r && l._sub(i.perp()._mult(r)),
            Ua(u, t, l, o, !1, r, e),
            this.e3 = a.vertexLength++,
            this.e1 >= 0 && this.e2 >= 0 && (c.emplaceBack(this.e1, this.e2, this.e3),
            a.primitiveLength++),
            this.e1 = this.e2,
            this.e2 = this.e3,
            l = i.mult(-1),
            n && l._sub(i.perp()._mult(n)),
            Ua(u, t, l, o, !0, -n, e),
            this.e3 = a.vertexLength++,
            this.e1 >= 0 && this.e2 >= 0 && (c.emplaceBack(this.e1, this.e2, this.e3),
            a.primitiveLength++),
            this.e1 = this.e2,
            this.e2 = this.e3,
            e > Na / 2 && !s && (this.distance = 0,
            this.addCurrentVertex(t, this.distance, i, r, n, o, a))
        }
        ,
        Va.prototype.addPieSliceVertex = function(t, e, i, r, n, o) {
            i = i.mult(r ? -1 : 1);
            var a = this.layoutVertexArray
              , s = this.indexArray;
            o && (e = ja(e, o)),
            Ua(a, t, i, !1, r, 0, e),
            this.e3 = n.vertexLength++,
            this.e1 >= 0 && this.e2 >= 0 && (s.emplaceBack(this.e1, this.e2, this.e3),
            n.primitiveLength++),
            r ? this.e2 = this.e3 : this.e1 = this.e3
        }
        ,
        Gi("LineBucket", Va, {
            omit: ["layers", "features"]
        });
        var $a = new kr({
            "line-cap": new br(st.layout_line["line-cap"]),
            "line-join": new wr(st.layout_line["line-join"]),
            "line-miter-limit": new br(st.layout_line["line-miter-limit"]),
            "line-round-limit": new br(st.layout_line["line-round-limit"])
        })
          , qa = {
            paint: new kr({
                "line-opacity": new wr(st.paint_line["line-opacity"]),
                "line-color": new wr(st.paint_line["line-color"]),
                "line-translate": new br(st.paint_line["line-translate"]),
                "line-translate-anchor": new br(st.paint_line["line-translate-anchor"]),
                "line-width": new wr(st.paint_line["line-width"]),
                "line-gap-width": new wr(st.paint_line["line-gap-width"]),
                "line-offset": new wr(st.paint_line["line-offset"]),
                "line-blur": new wr(st.paint_line["line-blur"]),
                "line-dasharray": new Sr(st.paint_line["line-dasharray"]),
                "line-pattern": new Tr(st.paint_line["line-pattern"]),
                "line-gradient": new Ar(st.paint_line["line-gradient"])
            }),
            layout: $a
        }
          , Wa = new (function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.possiblyEvaluate = function(e, i) {
                return i = new hr(Math.floor(i.zoom),{
                    now: i.now,
                    fadeDuration: i.fadeDuration,
                    zoomHistory: i.zoomHistory,
                    transition: i.transition
                }),
                t.prototype.possiblyEvaluate.call(this, e, i)
            }
            ,
            e.prototype.evaluate = function(e, i, r, n) {
                return i = p({}, i, {
                    zoom: Math.floor(i.zoom)
                }),
                t.prototype.evaluate.call(this, e, i, r, n)
            }
            ,
            e
        }(wr))(qa.paint.properties["line-width"].specification);
        Wa.useIntegerZoom = !0;
        var Ha = function(t) {
            function e(e) {
                t.call(this, e, qa)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype._handleSpecialPaintPropertyUpdate = function(t) {
                "line-gradient" === t && this._updateGradient()
            }
            ,
            e.prototype._updateGradient = function() {
                var t = this._transitionablePaint._values["line-gradient"].value.expression;
                this.gradient = ko(t, "lineProgress"),
                this.gradientTexture = null
            }
            ,
            e.prototype.recalculate = function(e) {
                t.prototype.recalculate.call(this, e),
                this.paint._values["line-floorwidth"] = Wa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value, e)
            }
            ,
            e.prototype.createBucket = function(t) {
                return new Va(t)
            }
            ,
            e.prototype.queryRadius = function(t) {
                var e = t
                  , i = Xa(Qn("line-width", this, e), Qn("line-gap-width", this, e))
                  , r = Qn("line-offset", this, e);
                return i / 2 + Math.abs(r) + to(this.paint.get("line-translate"))
            }
            ,
            e.prototype.queryIntersectsFeature = function(t, e, i, r, o, a, s) {
                var l = eo(t, this.paint.get("line-translate"), this.paint.get("line-translate-anchor"), a.angle, s)
                  , u = s / 2 * Xa(this.paint.get("line-width").evaluate(e, i), this.paint.get("line-gap-width").evaluate(e, i))
                  , c = this.paint.get("line-offset").evaluate(e, i);
                return c && (r = function(t, e) {
                    for (var i = [], r = new n(0,0), o = 0; o < t.length; o++) {
                        for (var a = t[o], s = [], l = 0; l < a.length; l++) {
                            var u = a[l - 1]
                              , c = a[l]
                              , p = a[l + 1]
                              , h = 0 === l ? r : c.sub(u)._unit()._perp()
                              , d = l === a.length - 1 ? r : p.sub(c)._unit()._perp()
                              , f = h._add(d)._unit()
                              , m = f.x * d.x + f.y * d.y;
                            f._mult(1 / m),
                            s.push(f._mult(e)._add(c))
                        }
                        i.push(s)
                    }
                    return i
                }(r, c * s)),
                Wn(l, r, u)
            }
            ,
            e
        }(Er);
        function Xa(t, e) {
            return e > 0 ? e + 2 * t : t
        }
        var Za = Ir([{
            name: "a_pos_offset",
            components: 4,
            type: "Int16"
        }, {
            name: "a_data",
            components: 4,
            type: "Uint16"
        }])
          , Ga = Ir([{
            name: "a_projected_pos",
            components: 3,
            type: "Float32"
        }], 4)
          , Ya = (Ir([{
            name: "a_fade_opacity",
            components: 1,
            type: "Uint32"
        }], 4),
        Ir([{
            name: "a_placed",
            components: 2,
            type: "Uint8"
        }], 4))
          , Ka = (Ir([{
            type: "Int16",
            name: "anchorPointX"
        }, {
            type: "Int16",
            name: "anchorPointY"
        }, {
            type: "Int16",
            name: "x1"
        }, {
            type: "Int16",
            name: "y1"
        }, {
            type: "Int16",
            name: "x2"
        }, {
            type: "Int16",
            name: "y2"
        }, {
            type: "Uint32",
            name: "featureIndex"
        }, {
            type: "Uint16",
            name: "sourceLayerIndex"
        }, {
            type: "Uint16",
            name: "bucketIndex"
        }, {
            type: "Int16",
            name: "radius"
        }, {
            type: "Int16",
            name: "signedDistanceFromAnchor"
        }]),
        Ir([{
            name: "a_pos",
            components: 2,
            type: "Int16"
        }, {
            name: "a_anchor_pos",
            components: 2,
            type: "Int16"
        }, {
            name: "a_extrude",
            components: 2,
            type: "Int16"
        }], 4))
          , Ja = Ir([{
            name: "a_pos",
            components: 2,
            type: "Int16"
        }, {
            name: "a_anchor_pos",
            components: 2,
            type: "Int16"
        }, {
            name: "a_extrude",
            components: 2,
            type: "Int16"
        }], 4);
        function Qa(t, e, i) {
            return t.sections.forEach(function(t) {
                t.text = function(t, e, i) {
                    var r = e.layout.get("text-transform").evaluate(i, {});
                    return "uppercase" === r ? t = t.toLocaleUpperCase() : "lowercase" === r && (t = t.toLocaleLowerCase()),
                    pr.applyArabicShaping && (t = pr.applyArabicShaping(t)),
                    t
                }(t.text, e, i)
            }),
            t
        }
        Ir([{
            type: "Int16",
            name: "anchorX"
        }, {
            type: "Int16",
            name: "anchorY"
        }, {
            type: "Uint16",
            name: "glyphStartIndex"
        }, {
            type: "Uint16",
            name: "numGlyphs"
        }, {
            type: "Uint32",
            name: "vertexStartIndex"
        }, {
            type: "Uint32",
            name: "lineStartIndex"
        }, {
            type: "Uint32",
            name: "lineLength"
        }, {
            type: "Uint16",
            name: "segment"
        }, {
            type: "Uint16",
            name: "lowerSize"
        }, {
            type: "Uint16",
            name: "upperSize"
        }, {
            type: "Float32",
            name: "lineOffsetX"
        }, {
            type: "Float32",
            name: "lineOffsetY"
        }, {
            type: "Uint8",
            name: "writingMode"
        }, {
            type: "Uint8",
            name: "hidden"
        }]),
        Ir([{
            type: "Int16",
            name: "anchorX"
        }, {
            type: "Int16",
            name: "anchorY"
        }, {
            type: "Int16",
            name: "horizontalPlacedTextSymbolIndex"
        }, {
            type: "Int16",
            name: "verticalPlacedTextSymbolIndex"
        }, {
            type: "Uint16",
            name: "key"
        }, {
            type: "Uint16",
            name: "textBoxStartIndex"
        }, {
            type: "Uint16",
            name: "textBoxEndIndex"
        }, {
            type: "Uint16",
            name: "iconBoxStartIndex"
        }, {
            type: "Uint16",
            name: "iconBoxEndIndex"
        }, {
            type: "Uint16",
            name: "featureIndex"
        }, {
            type: "Uint16",
            name: "numGlyphVertices"
        }, {
            type: "Uint16",
            name: "numVerticalGlyphVertices"
        }, {
            type: "Uint16",
            name: "numIconVertices"
        }, {
            type: "Uint32",
            name: "crossTileID"
        }]),
        Ir([{
            type: "Float32",
            name: "offsetX"
        }]),
        Ir([{
            type: "Int16",
            name: "x"
        }, {
            type: "Int16",
            name: "y"
        }, {
            type: "Int16",
            name: "tileUnitDistanceFromAnchor"
        }]);
        var ts = {
            "!": "︕",
            "#": "＃",
            $: "＄",
            "%": "％",
            "&": "＆",
            "(": "︵",
            ")": "︶",
            "*": "＊",
            "+": "＋",
            ",": "︐",
            "-": "︲",
            ".": "・",
            "/": "／",
            ":": "︓",
            ";": "︔",
            "<": "︿",
            "=": "＝",
            ">": "﹀",
            "?": "︖",
            "@": "＠",
            "[": "﹇",
            "\\": "＼",
            "]": "﹈",
            "^": "＾",
            _: "︳",
            "`": "｀",
            "{": "︷",
            "|": "―",
            "}": "︸",
            "~": "～",
            "¢": "￠",
            "£": "￡",
            "¥": "￥",
            "¦": "￤",
            "¬": "￢",
            "¯": "￣",
            "–": "︲",
            "—": "︱",
            "‘": "﹃",
            "’": "﹄",
            "“": "﹁",
            "”": "﹂",
            "…": "︙",
            "‧": "・",
            "₩": "￦",
            "、": "︑",
            "。": "︒",
            "〈": "︿",
            "〉": "﹀",
            "《": "︽",
            "》": "︾",
            "「": "﹁",
            "」": "﹂",
            "『": "﹃",
            "』": "﹄",
            "【": "︻",
            "】": "︼",
            "〔": "︹",
            "〕": "︺",
            "〖": "︗",
            "〗": "︘",
            "！": "︕",
            "（": "︵",
            "）": "︶",
            "，": "︐",
            "－": "︲",
            "．": "・",
            "：": "︓",
            "；": "︔",
            "＜": "︿",
            "＞": "﹀",
            "？": "︖",
            "［": "﹇",
            "］": "﹈",
            "＿": "︳",
            "｛": "︷",
            "｜": "―",
            "｝": "︸",
            "｟": "︵",
            "｠": "︶",
            "｡": "︒",
            "｢": "﹁",
            "｣": "﹂"
        }
          , es = function(t) {
            function e(e, i, r, n) {
                t.call(this, e, i),
                this.angle = r,
                void 0 !== n && (this.segment = n)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.clone = function() {
                return new e(this.x,this.y,this.angle,this.segment)
            }
            ,
            e
        }(n);
        Gi("Anchor", es);
        function is(t, e) {
            var i = e.expression;
            if ("constant" === i.kind)
                return {
                    functionType: "constant",
                    layoutSize: i.evaluate(new hr(t + 1))
                };
            if ("source" === i.kind)
                return {
                    functionType: "source"
                };
            for (var r = i.zoomStops, n = 0; n < r.length && r[n] <= t; )
                n++;
            for (var o = n = Math.max(0, n - 1); o < r.length && r[o] < t + 1; )
                o++;
            o = Math.min(r.length - 1, o);
            var a = {
                min: r[n],
                max: r[o]
            };
            return "composite" === i.kind ? {
                functionType: "composite",
                zoomRange: a,
                propertyValue: e.value
            } : {
                functionType: "camera",
                layoutSize: i.evaluate(new hr(t + 1)),
                zoomRange: a,
                sizeRange: {
                    min: i.evaluate(new hr(a.min)),
                    max: i.evaluate(new hr(a.max))
                },
                propertyValue: e.value
            }
        }
        var rs = Da.VectorTileFeature.types
          , ns = [{
            name: "a_fade_opacity",
            components: 1,
            type: "Uint8",
            offset: 0
        }];
        function os(t, e, i, r, n, o, a, s) {
            t.emplaceBack(e, i, Math.round(32 * r), Math.round(32 * n), o, a, s ? s[0] : 0, s ? s[1] : 0)
        }
        function as(t, e, i) {
            t.emplaceBack(e.x, e.y, i),
            t.emplaceBack(e.x, e.y, i),
            t.emplaceBack(e.x, e.y, i),
            t.emplaceBack(e.x, e.y, i)
        }
        var ss = function(t) {
            this.layoutVertexArray = new Br,
            this.indexArray = new Gr,
            this.programConfigurations = t,
            this.segments = new mn,
            this.dynamicLayoutVertexArray = new Nr,
            this.opacityVertexArray = new Ur,
            this.placedSymbolArray = new nn
        };
        ss.prototype.upload = function(t, e, i, r) {
            i && (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Za.members),
            this.indexBuffer = t.createIndexBuffer(this.indexArray, e),
            this.dynamicLayoutVertexBuffer = t.createVertexBuffer(this.dynamicLayoutVertexArray, Ga.members, !0),
            this.opacityVertexBuffer = t.createVertexBuffer(this.opacityVertexArray, ns, !0),
            this.opacityVertexBuffer.itemSize = 1),
            (i || r) && this.programConfigurations.upload(t)
        }
        ,
        ss.prototype.destroy = function() {
            this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy(),
            this.dynamicLayoutVertexBuffer.destroy(),
            this.opacityVertexBuffer.destroy())
        }
        ,
        Gi("SymbolBuffers", ss);
        var ls = function(t, e, i) {
            this.layoutVertexArray = new t,
            this.layoutAttributes = e,
            this.indexArray = new i,
            this.segments = new mn,
            this.collisionVertexArray = new $r
        };
        ls.prototype.upload = function(t) {
            this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes),
            this.indexBuffer = t.createIndexBuffer(this.indexArray),
            this.collisionVertexBuffer = t.createVertexBuffer(this.collisionVertexArray, Ya.members, !0)
        }
        ,
        ls.prototype.destroy = function() {
            this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.segments.destroy(),
            this.collisionVertexBuffer.destroy())
        }
        ,
        Gi("CollisionBuffers", ls);
        var us = function(t) {
            this.collisionBoxArray = t.collisionBoxArray,
            this.zoom = t.zoom,
            this.overscaling = t.overscaling,
            this.layers = t.layers,
            this.layerIds = this.layers.map(function(t) {
                return t.id
            }),
            this.index = t.index,
            this.pixelRatio = t.pixelRatio,
            this.sourceLayerIndex = t.sourceLayerIndex,
            this.hasPattern = !1;
            var e = this.layers[0]._unevaluatedLayout._values;
            this.textSizeData = is(this.zoom, e["text-size"]),
            this.iconSizeData = is(this.zoom, e["icon-size"]);
            var i = this.layers[0].layout
              , r = "viewport-y" === i.get("symbol-z-order");
            this.sortFeaturesByY = r && (i.get("text-allow-overlap") || i.get("icon-allow-overlap") || i.get("text-ignore-placement") || i.get("icon-ignore-placement")),
            this.sourceID = t.sourceID
        };
        us.prototype.createArrays = function() {
            this.text = new ss(new On(Za.members,this.layers,this.zoom,function(t) {
                return /^text/.test(t)
            }
            )),
            this.icon = new ss(new On(Za.members,this.layers,this.zoom,function(t) {
                return /^icon/.test(t)
            }
            )),
            this.collisionBox = new ls(jr,Ka.members,Yr),
            this.collisionCircle = new ls(jr,Ja.members,Gr),
            this.glyphOffsetArray = new ln,
            this.lineVertexArray = new cn,
            this.symbolInstances = new an
        }
        ,
        us.prototype.calculateGlyphDependencies = function(t, e, i, r) {
            for (var n = 0; n < t.length; n++)
                if (e[t.charCodeAt(n)] = !0,
                i && r) {
                    var o = ts[t.charAt(n)];
                    o && (e[o.charCodeAt(0)] = !0)
                }
        }
        ,
        us.prototype.populate = function(t, e) {
            var i = this.layers[0]
              , r = i.layout
              , n = r.get("text-font")
              , o = r.get("text-field")
              , a = r.get("icon-image")
              , s = ("constant" !== o.value.kind || o.value.value.toString().length > 0) && ("constant" !== n.value.kind || n.value.value.length > 0)
              , l = "constant" !== a.value.kind || a.value.value && a.value.value.length > 0;
            if (this.features = [],
            s || l) {
                for (var u = e.iconDependencies, c = e.glyphDependencies, p = new hr(this.zoom), h = 0, d = t; h < d.length; h += 1) {
                    var f = d[h]
                      , m = f.feature
                      , y = f.index
                      , g = f.sourceLayerIndex;
                    if (i._featureFilter(p, m)) {
                        var _ = void 0;
                        if (s) {
                            var v = i.getValueAndResolveTokens("text-field", m);
                            _ = Qa(v instanceof zt ? v : zt.fromString(v), i, m)
                        }
                        var x = void 0;
                        if (l && (x = i.getValueAndResolveTokens("icon-image", m)),
                        _ || x) {
                            var b = {
                                text: _,
                                icon: x,
                                index: y,
                                sourceLayerIndex: g,
                                geometry: Un(m),
                                properties: m.properties,
                                type: rs[m.type]
                            };
                            if (void 0 !== m.id && (b.id = m.id),
                            this.features.push(b),
                            x && (u[x] = !0),
                            _)
                                for (var w = n.evaluate(m, {}).join(","), T = "map" === r.get("text-rotation-alignment") && "point" !== r.get("symbol-placement"), S = 0, A = _.sections; S < A.length; S += 1) {
                                    var k = A[S]
                                      , E = er(_.toString())
                                      , C = k.fontStack || w
                                      , P = c[C] = c[C] || {};
                                    this.calculateGlyphDependencies(k.text, P, T, E)
                                }
                        }
                    }
                }
                "line" === r.get("symbol-placement") && (this.features = function(t) {
                    var e = {}
                      , i = {}
                      , r = []
                      , n = 0;
                    function o(e) {
                        r.push(t[e]),
                        n++
                    }
                    function a(t, e, n) {
                        var o = i[t];
                        return delete i[t],
                        i[e] = o,
                        r[o].geometry[0].pop(),
                        r[o].geometry[0] = r[o].geometry[0].concat(n[0]),
                        o
                    }
                    function s(t, i, n) {
                        var o = e[i];
                        return delete e[i],
                        e[t] = o,
                        r[o].geometry[0].shift(),
                        r[o].geometry[0] = n[0].concat(r[o].geometry[0]),
                        o
                    }
                    function l(t, e, i) {
                        var r = i ? e[0][e[0].length - 1] : e[0][0];
                        return t + ":" + r.x + ":" + r.y
                    }
                    for (var u = 0; u < t.length; u++) {
                        var c = t[u]
                          , p = c.geometry
                          , h = c.text ? c.text.toString() : null;
                        if (h) {
                            var d = l(h, p)
                              , f = l(h, p, !0);
                            if (d in i && f in e && i[d] !== e[f]) {
                                var m = s(d, f, p)
                                  , y = a(d, f, r[m].geometry);
                                delete e[d],
                                delete i[f],
                                i[l(h, r[y].geometry, !0)] = y,
                                r[m].geometry = null
                            } else
                                d in i ? a(d, f, p) : f in e ? s(d, f, p) : (o(u),
                                e[d] = n - 1,
                                i[f] = n - 1)
                        } else
                            o(u)
                    }
                    return r.filter(function(t) {
                        return t.geometry
                    })
                }(this.features))
            }
        }
        ,
        us.prototype.update = function(t, e, i) {
            this.stateDependentLayers.length && (this.text.programConfigurations.updatePaintArrays(t, e, this.layers, i),
            this.icon.programConfigurations.updatePaintArrays(t, e, this.layers, i))
        }
        ,
        us.prototype.isEmpty = function() {
            return 0 === this.symbolInstances.length
        }
        ,
        us.prototype.uploadPending = function() {
            return !this.uploaded || this.text.programConfigurations.needsUpload || this.icon.programConfigurations.needsUpload
        }
        ,
        us.prototype.upload = function(t) {
            this.uploaded || (this.collisionBox.upload(t),
            this.collisionCircle.upload(t)),
            this.text.upload(t, this.sortFeaturesByY, !this.uploaded, this.text.programConfigurations.needsUpload),
            this.icon.upload(t, this.sortFeaturesByY, !this.uploaded, this.icon.programConfigurations.needsUpload),
            this.uploaded = !0
        }
        ,
        us.prototype.destroy = function() {
            this.text.destroy(),
            this.icon.destroy(),
            this.collisionBox.destroy(),
            this.collisionCircle.destroy()
        }
        ,
        us.prototype.addToLineVertexArray = function(t, e) {
            var i = this.lineVertexArray.length;
            if (void 0 !== t.segment) {
                for (var r = t.dist(e[t.segment + 1]), n = t.dist(e[t.segment]), o = {}, a = t.segment + 1; a < e.length; a++)
                    o[a] = {
                        x: e[a].x,
                        y: e[a].y,
                        tileUnitDistanceFromAnchor: r
                    },
                    a < e.length - 1 && (r += e[a + 1].dist(e[a]));
                for (var s = t.segment || 0; s >= 0; s--)
                    o[s] = {
                        x: e[s].x,
                        y: e[s].y,
                        tileUnitDistanceFromAnchor: n
                    },
                    s > 0 && (n += e[s - 1].dist(e[s]));
                for (var l = 0; l < e.length; l++) {
                    var u = o[l];
                    this.lineVertexArray.emplaceBack(u.x, u.y, u.tileUnitDistanceFromAnchor)
                }
            }
            return {
                lineStartIndex: i,
                lineLength: this.lineVertexArray.length - i
            }
        }
        ,
        us.prototype.addSymbols = function(t, e, i, r, n, o, a, s, l, u) {
            for (var c = t.indexArray, p = t.layoutVertexArray, h = t.dynamicLayoutVertexArray, d = t.segments.prepareSegment(4 * e.length, t.layoutVertexArray, t.indexArray), f = this.glyphOffsetArray.length, m = d.vertexLength, y = 0, g = e; y < g.length; y += 1) {
                var _ = g[y]
                  , v = _.tl
                  , x = _.tr
                  , b = _.bl
                  , w = _.br
                  , T = _.tex
                  , S = d.vertexLength
                  , A = _.glyphOffset[1];
                os(p, s.x, s.y, v.x, A + v.y, T.x, T.y, i),
                os(p, s.x, s.y, x.x, A + x.y, T.x + T.w, T.y, i),
                os(p, s.x, s.y, b.x, A + b.y, T.x, T.y + T.h, i),
                os(p, s.x, s.y, w.x, A + w.y, T.x + T.w, T.y + T.h, i),
                as(h, s, 0),
                c.emplaceBack(S, S + 1, S + 2),
                c.emplaceBack(S + 1, S + 2, S + 3),
                d.vertexLength += 4,
                d.primitiveLength += 2,
                this.glyphOffsetArray.emplaceBack(_.glyphOffset[0])
            }
            t.placedSymbolArray.emplaceBack(s.x, s.y, f, this.glyphOffsetArray.length - f, m, l, u, s.segment, i ? i[0] : 0, i ? i[1] : 0, r[0], r[1], a, !1),
            t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length, o, o.index, {})
        }
        ,
        us.prototype._addCollisionDebugVertex = function(t, e, i, r, n, o) {
            return e.emplaceBack(0, 0),
            t.emplaceBack(i.x, i.y, r, n, Math.round(o.x), Math.round(o.y))
        }
        ,
        us.prototype.addCollisionDebugVertices = function(t, e, i, r, o, a, s, l) {
            var u = o.segments.prepareSegment(4, o.layoutVertexArray, o.indexArray)
              , c = u.vertexLength
              , p = o.layoutVertexArray
              , h = o.collisionVertexArray
              , d = s.anchorX
              , f = s.anchorY;
            if (this._addCollisionDebugVertex(p, h, a, d, f, new n(t,e)),
            this._addCollisionDebugVertex(p, h, a, d, f, new n(i,e)),
            this._addCollisionDebugVertex(p, h, a, d, f, new n(i,r)),
            this._addCollisionDebugVertex(p, h, a, d, f, new n(t,r)),
            u.vertexLength += 4,
            l) {
                var m = o.indexArray;
                m.emplaceBack(c, c + 1, c + 2),
                m.emplaceBack(c, c + 2, c + 3),
                u.primitiveLength += 2
            } else {
                var y = o.indexArray;
                y.emplaceBack(c, c + 1),
                y.emplaceBack(c + 1, c + 2),
                y.emplaceBack(c + 2, c + 3),
                y.emplaceBack(c + 3, c),
                u.primitiveLength += 4
            }
        }
        ,
        us.prototype.addDebugCollisionBoxes = function(t, e, i) {
            for (var r = t; r < e; r++) {
                var n = this.collisionBoxArray.get(r)
                  , o = n.x1
                  , a = n.y1
                  , s = n.x2
                  , l = n.y2
                  , u = n.radius > 0;
                this.addCollisionDebugVertices(o, a, s, l, u ? this.collisionCircle : this.collisionBox, n.anchorPoint, i, u)
            }
        }
        ,
        us.prototype.generateCollisionDebugBuffers = function() {
            for (var t = 0; t < this.symbolInstances.length; t++) {
                var e = this.symbolInstances.get(t);
                this.addDebugCollisionBoxes(e.textBoxStartIndex, e.textBoxEndIndex, e),
                this.addDebugCollisionBoxes(e.iconBoxStartIndex, e.iconBoxEndIndex, e)
            }
        }
        ,
        us.prototype._deserializeCollisionBoxesForSymbol = function(t, e, i, r, n) {
            for (var o = {}, a = e; a < i; a++) {
                var s = t.get(a);
                if (0 === s.radius) {
                    o.textBox = {
                        x1: s.x1,
                        y1: s.y1,
                        x2: s.x2,
                        y2: s.y2,
                        anchorPointX: s.anchorPointX,
                        anchorPointY: s.anchorPointY
                    },
                    o.textFeatureIndex = s.featureIndex;
                    break
                }
                o.textCircles || (o.textCircles = [],
                o.textFeatureIndex = s.featureIndex),
                o.textCircles.push(s.anchorPointX, s.anchorPointY, s.radius, s.signedDistanceFromAnchor, 1)
            }
            for (var l = r; l < n; l++) {
                var u = t.get(l);
                if (0 === u.radius) {
                    o.iconBox = {
                        x1: u.x1,
                        y1: u.y1,
                        x2: u.x2,
                        y2: u.y2,
                        anchorPointX: u.anchorPointX,
                        anchorPointY: u.anchorPointY
                    },
                    o.iconFeatureIndex = u.featureIndex;
                    break
                }
            }
            return o
        }
        ,
        us.prototype.deserializeCollisionBoxes = function(t) {
            this.collisionArrays = [];
            for (var e = 0; e < this.symbolInstances.length; e++) {
                var i = this.symbolInstances.get(e);
                this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t, i.textBoxStartIndex, i.textBoxEndIndex, i.iconBoxStartIndex, i.iconBoxEndIndex))
            }
        }
        ,
        us.prototype.hasTextData = function() {
            return this.text.segments.get().length > 0
        }
        ,
        us.prototype.hasIconData = function() {
            return this.icon.segments.get().length > 0
        }
        ,
        us.prototype.hasCollisionBoxData = function() {
            return this.collisionBox.segments.get().length > 0
        }
        ,
        us.prototype.hasCollisionCircleData = function() {
            return this.collisionCircle.segments.get().length > 0
        }
        ,
        us.prototype.addIndicesForPlacedTextSymbol = function(t) {
            for (var e = this.text.placedSymbolArray.get(t), i = e.vertexStartIndex + 4 * e.numGlyphs, r = e.vertexStartIndex; r < i; r += 4)
                this.text.indexArray.emplaceBack(r, r + 1, r + 2),
                this.text.indexArray.emplaceBack(r + 1, r + 2, r + 3)
        }
        ,
        us.prototype.sortFeatures = function(t) {
            if (this.sortFeaturesByY && this.sortedAngle !== t && (this.sortedAngle = t,
            !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1))) {
                for (var e = [], i = 0; i < this.symbolInstances.length; i++)
                    e.push(i);
                for (var r = Math.sin(t), n = Math.cos(t), o = [], a = [], s = 0; s < this.symbolInstances.length; s++) {
                    var l = this.symbolInstances.get(s);
                    o.push(0 | Math.round(r * l.anchorX + n * l.anchorY)),
                    a.push(l.featureIndex)
                }
                e.sort(function(t, e) {
                    return o[t] - o[e] || a[e] - a[t]
                }),
                this.text.indexArray.clear(),
                this.icon.indexArray.clear(),
                this.featureSortOrder = [];
                for (var u = 0, c = e; u < c.length; u += 1) {
                    var p = c[u]
                      , h = this.symbolInstances.get(p);
                    this.featureSortOrder.push(h.featureIndex),
                    h.horizontalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),
                    h.verticalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);
                    var d = this.icon.placedSymbolArray.get(p);
                    if (d.numGlyphs) {
                        var f = d.vertexStartIndex;
                        this.icon.indexArray.emplaceBack(f, f + 1, f + 2),
                        this.icon.indexArray.emplaceBack(f + 1, f + 2, f + 3)
                    }
                }
                this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray),
                this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray)
            }
        }
        ,
        Gi("SymbolBucket", us, {
            omit: ["layers", "collisionBoxArray", "features", "compareText"]
        }),
        us.MAX_GLYPHS = 65535,
        us.addDynamicAttributes = as;
        var cs = new kr({
            "symbol-placement": new br(st.layout_symbol["symbol-placement"]),
            "symbol-spacing": new br(st.layout_symbol["symbol-spacing"]),
            "symbol-avoid-edges": new br(st.layout_symbol["symbol-avoid-edges"]),
            "symbol-z-order": new br(st.layout_symbol["symbol-z-order"]),
            "icon-allow-overlap": new br(st.layout_symbol["icon-allow-overlap"]),
            "icon-ignore-placement": new br(st.layout_symbol["icon-ignore-placement"]),
            "icon-optional": new br(st.layout_symbol["icon-optional"]),
            "icon-rotation-alignment": new br(st.layout_symbol["icon-rotation-alignment"]),
            "icon-size": new wr(st.layout_symbol["icon-size"]),
            "icon-text-fit": new br(st.layout_symbol["icon-text-fit"]),
            "icon-text-fit-padding": new br(st.layout_symbol["icon-text-fit-padding"]),
            "icon-image": new wr(st.layout_symbol["icon-image"]),
            "icon-rotate": new wr(st.layout_symbol["icon-rotate"]),
            "icon-padding": new br(st.layout_symbol["icon-padding"]),
            "icon-keep-upright": new br(st.layout_symbol["icon-keep-upright"]),
            "icon-offset": new wr(st.layout_symbol["icon-offset"]),
            "icon-anchor": new wr(st.layout_symbol["icon-anchor"]),
            "icon-pitch-alignment": new br(st.layout_symbol["icon-pitch-alignment"]),
            "text-pitch-alignment": new br(st.layout_symbol["text-pitch-alignment"]),
            "text-rotation-alignment": new br(st.layout_symbol["text-rotation-alignment"]),
            "text-field": new wr(st.layout_symbol["text-field"]),
            "text-font": new wr(st.layout_symbol["text-font"]),
            "text-size": new wr(st.layout_symbol["text-size"]),
            "text-max-width": new wr(st.layout_symbol["text-max-width"]),
            "text-line-height": new br(st.layout_symbol["text-line-height"]),
            "text-letter-spacing": new wr(st.layout_symbol["text-letter-spacing"]),
            "text-justify": new wr(st.layout_symbol["text-justify"]),
            "text-anchor": new wr(st.layout_symbol["text-anchor"]),
            "text-max-angle": new br(st.layout_symbol["text-max-angle"]),
            "text-rotate": new wr(st.layout_symbol["text-rotate"]),
            "text-padding": new br(st.layout_symbol["text-padding"]),
            "text-keep-upright": new br(st.layout_symbol["text-keep-upright"]),
            "text-transform": new wr(st.layout_symbol["text-transform"]),
            "text-offset": new wr(st.layout_symbol["text-offset"]),
            "text-allow-overlap": new br(st.layout_symbol["text-allow-overlap"]),
            "text-ignore-placement": new br(st.layout_symbol["text-ignore-placement"]),
            "text-optional": new br(st.layout_symbol["text-optional"])
        })
          , ps = {
            paint: new kr({
                "icon-opacity": new wr(st.paint_symbol["icon-opacity"]),
                "icon-color": new wr(st.paint_symbol["icon-color"]),
                "icon-halo-color": new wr(st.paint_symbol["icon-halo-color"]),
                "icon-halo-width": new wr(st.paint_symbol["icon-halo-width"]),
                "icon-halo-blur": new wr(st.paint_symbol["icon-halo-blur"]),
                "icon-translate": new br(st.paint_symbol["icon-translate"]),
                "icon-translate-anchor": new br(st.paint_symbol["icon-translate-anchor"]),
                "text-opacity": new wr(st.paint_symbol["text-opacity"]),
                "text-color": new wr(st.paint_symbol["text-color"]),
                "text-halo-color": new wr(st.paint_symbol["text-halo-color"]),
                "text-halo-width": new wr(st.paint_symbol["text-halo-width"]),
                "text-halo-blur": new wr(st.paint_symbol["text-halo-blur"]),
                "text-translate": new br(st.paint_symbol["text-translate"]),
                "text-translate-anchor": new br(st.paint_symbol["text-translate-anchor"])
            }),
            layout: cs
        }
          , hs = function(t) {
            function e(e) {
                t.call(this, e, ps)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.recalculate = function(e) {
                t.prototype.recalculate.call(this, e),
                "auto" === this.layout.get("icon-rotation-alignment") && ("point" !== this.layout.get("symbol-placement") ? this.layout._values["icon-rotation-alignment"] = "map" : this.layout._values["icon-rotation-alignment"] = "viewport"),
                "auto" === this.layout.get("text-rotation-alignment") && ("point" !== this.layout.get("symbol-placement") ? this.layout._values["text-rotation-alignment"] = "map" : this.layout._values["text-rotation-alignment"] = "viewport"),
                "auto" === this.layout.get("text-pitch-alignment") && (this.layout._values["text-pitch-alignment"] = this.layout.get("text-rotation-alignment")),
                "auto" === this.layout.get("icon-pitch-alignment") && (this.layout._values["icon-pitch-alignment"] = this.layout.get("icon-rotation-alignment"))
            }
            ,
            e.prototype.getValueAndResolveTokens = function(t, e) {
                var i, r = this.layout.get(t).evaluate(e, {}), n = this._unevaluatedLayout._values[t];
                return n.isDataDriven() || ri(n.value) ? r : (i = e.properties,
                r.replace(/{([^{}]+)}/g, function(t, e) {
                    return e in i ? String(i[e]) : ""
                }))
            }
            ,
            e.prototype.createBucket = function(t) {
                return new us(t)
            }
            ,
            e.prototype.queryRadius = function() {
                return 0
            }
            ,
            e.prototype.queryIntersectsFeature = function() {
                return !1
            }
            ,
            e
        }(Er)
          , ds = {
            paint: new kr({
                "background-color": new br(st.paint_background["background-color"]),
                "background-pattern": new Sr(st.paint_background["background-pattern"]),
                "background-opacity": new br(st.paint_background["background-opacity"])
            })
        }
          , fs = function(t) {
            function e(e) {
                t.call(this, e, ds)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e
        }(Er)
          , ms = {
            paint: new kr({
                "raster-opacity": new br(st.paint_raster["raster-opacity"]),
                "raster-hue-rotate": new br(st.paint_raster["raster-hue-rotate"]),
                "raster-brightness-min": new br(st.paint_raster["raster-brightness-min"]),
                "raster-brightness-max": new br(st.paint_raster["raster-brightness-max"]),
                "raster-saturation": new br(st.paint_raster["raster-saturation"]),
                "raster-contrast": new br(st.paint_raster["raster-contrast"]),
                "raster-resampling": new br(st.paint_raster["raster-resampling"]),
                "raster-fade-duration": new br(st.paint_raster["raster-fade-duration"])
            })
        }
          , ys = function(t) {
            function e(e) {
                t.call(this, e, ms)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e
        }(Er)
          , gs = function(t) {
            function e(e) {
                t.call(this, e, {}),
                this.implementation = e
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.hasOffscreenPass = function() {
                return void 0 !== this.implementation.prerender || "3d" === this.implementation.renderingMode
            }
            ,
            e.prototype.recalculate = function() {}
            ,
            e.prototype.updateTransitions = function() {}
            ,
            e.prototype.hasTransition = function() {}
            ,
            e.prototype.serialize = function() {}
            ,
            e.prototype.resize = function() {
                this.viewportFrame && (this.viewportFrame.destroy(),
                this.viewportFrame = null)
            }
            ,
            e.prototype.onAdd = function(t) {
                this.implementation.onAdd && this.implementation.onAdd(t, t.painter.context.gl)
            }
            ,
            e.prototype.onRemove = function(t) {
                this.implementation.onRemove && this.implementation.onRemove(t)
            }
            ,
            e
        }(Er)
          , _s = {
            circle: go,
            heatmap: Eo,
            hillshade: Po,
            fill: fa,
            "fill-extrusion": Ta,
            line: Ha,
            symbol: hs,
            background: fs,
            raster: ys
        };
        function vs(t) {
            for (var e = 0, i = 0, r = 0, n = t; r < n.length; r += 1) {
                var o = n[r];
                e += o.w * o.h,
                i = Math.max(i, o.w)
            }
            t.sort(function(t, e) {
                return e.h - t.h
            });
            for (var a = [{
                x: 0,
                y: 0,
                w: Math.max(Math.ceil(Math.sqrt(e / .95)), i),
                h: 1 / 0
            }], s = 0, l = 0, u = 0, c = t; u < c.length; u += 1)
                for (var p = c[u], h = a.length - 1; h >= 0; h--) {
                    var d = a[h];
                    if (!(p.w > d.w || p.h > d.h)) {
                        if (p.x = d.x,
                        p.y = d.y,
                        l = Math.max(l, p.y + p.h),
                        s = Math.max(s, p.x + p.w),
                        p.w === d.w && p.h === d.h) {
                            var f = a.pop();
                            h < a.length && (a[h] = f)
                        } else
                            p.h === d.h ? (d.x += p.w,
                            d.w -= p.w) : p.w === d.w ? (d.y += p.h,
                            d.h -= p.h) : (a.push({
                                x: d.x + p.w,
                                y: d.y,
                                w: d.w - p.w,
                                h: p.h
                            }),
                            d.y += p.h,
                            d.h -= p.h);
                        break
                    }
                }
            return {
                w: s,
                h: l,
                fill: e / (s * l) || 0
            }
        }
        var xs = function(t, e) {
            var i = e.pixelRatio;
            this.paddedRect = t,
            this.pixelRatio = i
        }
          , bs = {
            tl: {
                configurable: !0
            },
            br: {
                configurable: !0
            },
            tlbr: {
                configurable: !0
            },
            displaySize: {
                configurable: !0
            }
        };
        bs.tl.get = function() {
            return [this.paddedRect.x + 1, this.paddedRect.y + 1]
        }
        ,
        bs.br.get = function() {
            return [this.paddedRect.x + this.paddedRect.w - 1, this.paddedRect.y + this.paddedRect.h - 1]
        }
        ,
        bs.tlbr.get = function() {
            return this.tl.concat(this.br)
        }
        ,
        bs.displaySize.get = function() {
            return [(this.paddedRect.w - 2) / this.pixelRatio, (this.paddedRect.h - 2) / this.pixelRatio]
        }
        ,
        Object.defineProperties(xs.prototype, bs);
        var ws = function(t, e) {
            var i = {}
              , r = {}
              , n = [];
            for (var o in t) {
                var a = t[o]
                  , s = {
                    x: 0,
                    y: 0,
                    w: a.data.width + 2,
                    h: a.data.height + 2
                };
                n.push(s),
                i[o] = new xs(s,a)
            }
            for (var l in e) {
                var u = e[l]
                  , c = {
                    x: 0,
                    y: 0,
                    w: u.data.width + 2,
                    h: u.data.height + 2
                };
                n.push(c),
                r[l] = new xs(c,u)
            }
            var p = vs(n)
              , h = p.w
              , d = p.h
              , f = new So({
                width: h || 1,
                height: d || 1
            });
            for (var m in t) {
                var y = t[m]
                  , g = i[m].paddedRect;
                So.copy(y.data, f, {
                    x: 0,
                    y: 0
                }, {
                    x: g.x + 1,
                    y: g.y + 1
                }, y.data)
            }
            for (var _ in e) {
                var v = e[_]
                  , x = r[_].paddedRect
                  , b = x.x + 1
                  , w = x.y + 1
                  , T = v.data.width
                  , S = v.data.height;
                So.copy(v.data, f, {
                    x: 0,
                    y: 0
                }, {
                    x: b,
                    y: w
                }, v.data),
                So.copy(v.data, f, {
                    x: 0,
                    y: S - 1
                }, {
                    x: b,
                    y: w - 1
                }, {
                    width: T,
                    height: 1
                }),
                So.copy(v.data, f, {
                    x: 0,
                    y: 0
                }, {
                    x: b,
                    y: w + S
                }, {
                    width: T,
                    height: 1
                }),
                So.copy(v.data, f, {
                    x: T - 1,
                    y: 0
                }, {
                    x: b - 1,
                    y: w
                }, {
                    width: 1,
                    height: S
                }),
                So.copy(v.data, f, {
                    x: 0,
                    y: 0
                }, {
                    x: b + T,
                    y: w
                }, {
                    width: 1,
                    height: S
                })
            }
            this.image = f,
            this.iconPositions = i,
            this.patternPositions = r
        };
        Gi("ImagePosition", xs),
        Gi("ImageAtlas", ws);
        var Ts = self.HTMLImageElement
          , Ss = self.HTMLCanvasElement
          , As = self.HTMLVideoElement
          , ks = self.ImageData
          , Es = function(t, e, i, r) {
            this.context = t,
            this.format = i,
            this.texture = t.gl.createTexture(),
            this.update(e, r)
        };
        Es.prototype.update = function(t, e) {
            var i = t.width
              , r = t.height
              , n = !this.size || this.size[0] !== i || this.size[1] !== r
              , o = this.context
              , a = o.gl;
            this.useMipmap = Boolean(e && e.useMipmap),
            a.bindTexture(a.TEXTURE_2D, this.texture),
            o.pixelStoreUnpackFlipY.set(!1),
            o.pixelStoreUnpack.set(1),
            o.pixelStoreUnpackPremultiplyAlpha.set(this.format === a.RGBA && (!e || !1 !== e.premultiply)),
            n ? (this.size = [i, r],
            t instanceof Ts || t instanceof Ss || t instanceof As || t instanceof ks ? a.texImage2D(a.TEXTURE_2D, 0, this.format, this.format, a.UNSIGNED_BYTE, t) : a.texImage2D(a.TEXTURE_2D, 0, this.format, i, r, 0, this.format, a.UNSIGNED_BYTE, t.data)) : t instanceof Ts || t instanceof Ss || t instanceof As || t instanceof ks ? a.texSubImage2D(a.TEXTURE_2D, 0, 0, 0, a.RGBA, a.UNSIGNED_BYTE, t) : a.texSubImage2D(a.TEXTURE_2D, 0, 0, 0, i, r, a.RGBA, a.UNSIGNED_BYTE, t.data),
            this.useMipmap && this.isSizePowerOfTwo() && a.generateMipmap(a.TEXTURE_2D)
        }
        ,
        Es.prototype.bind = function(t, e, i) {
            var r = this.context.gl;
            r.bindTexture(r.TEXTURE_2D, this.texture),
            i !== r.LINEAR_MIPMAP_NEAREST || this.isSizePowerOfTwo() || (i = r.LINEAR),
            t !== this.filter && (r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, t),
            r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, i || t),
            this.filter = t),
            e !== this.wrap && (r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, e),
            r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, e),
            this.wrap = e)
        }
        ,
        Es.prototype.isSizePowerOfTwo = function() {
            return this.size[0] === this.size[1] && Math.log(this.size[0]) / Math.LN2 % 1 == 0
        }
        ,
        Es.prototype.destroy = function() {
            this.context.gl.deleteTexture(this.texture),
            this.texture = null
        }
        ;
        var Cs = function(t, e, i, r, n) {
            var o, a, s = 8 * n - r - 1, l = (1 << s) - 1, u = l >> 1, c = -7, p = i ? n - 1 : 0, h = i ? -1 : 1, d = t[e + p];
            for (p += h,
            o = d & (1 << -c) - 1,
            d >>= -c,
            c += s; c > 0; o = 256 * o + t[e + p],
            p += h,
            c -= 8)
                ;
            for (a = o & (1 << -c) - 1,
            o >>= -c,
            c += r; c > 0; a = 256 * a + t[e + p],
            p += h,
            c -= 8)
                ;
            if (0 === o)
                o = 1 - u;
            else {
                if (o === l)
                    return a ? NaN : 1 / 0 * (d ? -1 : 1);
                a += Math.pow(2, r),
                o -= u
            }
            return (d ? -1 : 1) * a * Math.pow(2, o - r)
        }
          , Ps = function(t, e, i, r, n, o) {
            var a, s, l, u = 8 * o - n - 1, c = (1 << u) - 1, p = c >> 1, h = 23 === n ? Math.pow(2, -24) - Math.pow(2, -77) : 0, d = r ? 0 : o - 1, f = r ? 1 : -1, m = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;
            for (e = Math.abs(e),
            isNaN(e) || e === 1 / 0 ? (s = isNaN(e) ? 1 : 0,
            a = c) : (a = Math.floor(Math.log(e) / Math.LN2),
            e * (l = Math.pow(2, -a)) < 1 && (a--,
            l *= 2),
            (e += a + p >= 1 ? h / l : h * Math.pow(2, 1 - p)) * l >= 2 && (a++,
            l /= 2),
            a + p >= c ? (s = 0,
            a = c) : a + p >= 1 ? (s = (e * l - 1) * Math.pow(2, n),
            a += p) : (s = e * Math.pow(2, p - 1) * Math.pow(2, n),
            a = 0)); n >= 8; t[i + d] = 255 & s,
            d += f,
            s /= 256,
            n -= 8)
                ;
            for (a = a << n | s,
            u += n; u > 0; t[i + d] = 255 & a,
            d += f,
            a /= 256,
            u -= 8)
                ;
            t[i + d - f] |= 128 * m
        }
          , Ms = Is;
        function Is(t) {
            this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0),
            this.pos = 0,
            this.type = 0,
            this.length = this.buf.length
        }
        function zs(t) {
            return t.type === Is.Bytes ? t.readVarint() + t.pos : t.pos + 1
        }
        function Ls(t, e, i) {
            return i ? 4294967296 * e + (t >>> 0) : 4294967296 * (e >>> 0) + (t >>> 0)
        }
        function Ds(t, e, i) {
            var r = e <= 16383 ? 1 : e <= 2097151 ? 2 : e <= 268435455 ? 3 : Math.ceil(Math.log(e) / (7 * Math.LN2));
            i.realloc(r);
            for (var n = i.pos - 1; n >= t; n--)
                i.buf[n + r] = i.buf[n]
        }
        function Os(t, e) {
            for (var i = 0; i < t.length; i++)
                e.writeVarint(t[i])
        }
        function Rs(t, e) {
            for (var i = 0; i < t.length; i++)
                e.writeSVarint(t[i])
        }
        function Fs(t, e) {
            for (var i = 0; i < t.length; i++)
                e.writeFloat(t[i])
        }
        function Bs(t, e) {
            for (var i = 0; i < t.length; i++)
                e.writeDouble(t[i])
        }
        function Ns(t, e) {
            for (var i = 0; i < t.length; i++)
                e.writeBoolean(t[i])
        }
        function Us(t, e) {
            for (var i = 0; i < t.length; i++)
                e.writeFixed32(t[i])
        }
        function Vs(t, e) {
            for (var i = 0; i < t.length; i++)
                e.writeSFixed32(t[i])
        }
        function js(t, e) {
            for (var i = 0; i < t.length; i++)
                e.writeFixed64(t[i])
        }
        function $s(t, e) {
            for (var i = 0; i < t.length; i++)
                e.writeSFixed64(t[i])
        }
        function qs(t, e) {
            return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + 16777216 * t[e + 3]
        }
        function Ws(t, e, i) {
            t[i] = e,
            t[i + 1] = e >>> 8,
            t[i + 2] = e >>> 16,
            t[i + 3] = e >>> 24
        }
        function Hs(t, e) {
            return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + (t[e + 3] << 24)
        }
        Is.Varint = 0,
        Is.Fixed64 = 1,
        Is.Bytes = 2,
        Is.Fixed32 = 5,
        Is.prototype = {
            destroy: function() {
                this.buf = null
            },
            readFields: function(t, e, i) {
                for (i = i || this.length; this.pos < i; ) {
                    var r = this.readVarint()
                      , n = r >> 3
                      , o = this.pos;
                    this.type = 7 & r,
                    t(n, e, this),
                    this.pos === o && this.skip(r)
                }
                return e
            },
            readMessage: function(t, e) {
                return this.readFields(t, e, this.readVarint() + this.pos)
            },
            readFixed32: function() {
                var t = qs(this.buf, this.pos);
                return this.pos += 4,
                t
            },
            readSFixed32: function() {
                var t = Hs(this.buf, this.pos);
                return this.pos += 4,
                t
            },
            readFixed64: function() {
                var t = qs(this.buf, this.pos) + 4294967296 * qs(this.buf, this.pos + 4);
                return this.pos += 8,
                t
            },
            readSFixed64: function() {
                var t = qs(this.buf, this.pos) + 4294967296 * Hs(this.buf, this.pos + 4);
                return this.pos += 8,
                t
            },
            readFloat: function() {
                var t = Cs(this.buf, this.pos, !0, 23, 4);
                return this.pos += 4,
                t
            },
            readDouble: function() {
                var t = Cs(this.buf, this.pos, !0, 52, 8);
                return this.pos += 8,
                t
            },
            readVarint: function(t) {
                var e, i, r = this.buf;
                return e = 127 & (i = r[this.pos++]),
                i < 128 ? e : (e |= (127 & (i = r[this.pos++])) << 7,
                i < 128 ? e : (e |= (127 & (i = r[this.pos++])) << 14,
                i < 128 ? e : (e |= (127 & (i = r[this.pos++])) << 21,
                i < 128 ? e : function(t, e, i) {
                    var r, n, o = i.buf;
                    if (r = (112 & (n = o[i.pos++])) >> 4,
                    n < 128)
                        return Ls(t, r, e);
                    if (r |= (127 & (n = o[i.pos++])) << 3,
                    n < 128)
                        return Ls(t, r, e);
                    if (r |= (127 & (n = o[i.pos++])) << 10,
                    n < 128)
                        return Ls(t, r, e);
                    if (r |= (127 & (n = o[i.pos++])) << 17,
                    n < 128)
                        return Ls(t, r, e);
                    if (r |= (127 & (n = o[i.pos++])) << 24,
                    n < 128)
                        return Ls(t, r, e);
                    if (r |= (1 & (n = o[i.pos++])) << 31,
                    n < 128)
                        return Ls(t, r, e);
                    throw new Error("Expected varint not more than 10 bytes")
                }(e |= (15 & (i = r[this.pos])) << 28, t, this))))
            },
            readVarint64: function() {
                return this.readVarint(!0)
            },
            readSVarint: function() {
                var t = this.readVarint();
                return t % 2 == 1 ? (t + 1) / -2 : t / 2
            },
            readBoolean: function() {
                return Boolean(this.readVarint())
            },
            readString: function() {
                var t = this.readVarint() + this.pos
                  , e = function(t, e, i) {
                    for (var r = "", n = e; n < i; ) {
                        var o, a, s, l = t[n], u = null, c = l > 239 ? 4 : l > 223 ? 3 : l > 191 ? 2 : 1;
                        if (n + c > i)
                            break;
                        1 === c ? l < 128 && (u = l) : 2 === c ? 128 == (192 & (o = t[n + 1])) && (u = (31 & l) << 6 | 63 & o) <= 127 && (u = null) : 3 === c ? (o = t[n + 1],
                        a = t[n + 2],
                        128 == (192 & o) && 128 == (192 & a) && ((u = (15 & l) << 12 | (63 & o) << 6 | 63 & a) <= 2047 || u >= 55296 && u <= 57343) && (u = null)) : 4 === c && (o = t[n + 1],
                        a = t[n + 2],
                        s = t[n + 3],
                        128 == (192 & o) && 128 == (192 & a) && 128 == (192 & s) && ((u = (15 & l) << 18 | (63 & o) << 12 | (63 & a) << 6 | 63 & s) <= 65535 || u >= 1114112) && (u = null)),
                        null === u ? (u = 65533,
                        c = 1) : u > 65535 && (u -= 65536,
                        r += String.fromCharCode(u >>> 10 & 1023 | 55296),
                        u = 56320 | 1023 & u),
                        r += String.fromCharCode(u),
                        n += c
                    }
                    return r
                }(this.buf, this.pos, t);
                return this.pos = t,
                e
            },
            readBytes: function() {
                var t = this.readVarint() + this.pos
                  , e = this.buf.subarray(this.pos, t);
                return this.pos = t,
                e
            },
            readPackedVarint: function(t, e) {
                var i = zs(this);
                for (t = t || []; this.pos < i; )
                    t.push(this.readVarint(e));
                return t
            },
            readPackedSVarint: function(t) {
                var e = zs(this);
                for (t = t || []; this.pos < e; )
                    t.push(this.readSVarint());
                return t
            },
            readPackedBoolean: function(t) {
                var e = zs(this);
                for (t = t || []; this.pos < e; )
                    t.push(this.readBoolean());
                return t
            },
            readPackedFloat: function(t) {
                var e = zs(this);
                for (t = t || []; this.pos < e; )
                    t.push(this.readFloat());
                return t
            },
            readPackedDouble: function(t) {
                var e = zs(this);
                for (t = t || []; this.pos < e; )
                    t.push(this.readDouble());
                return t
            },
            readPackedFixed32: function(t) {
                var e = zs(this);
                for (t = t || []; this.pos < e; )
                    t.push(this.readFixed32());
                return t
            },
            readPackedSFixed32: function(t) {
                var e = zs(this);
                for (t = t || []; this.pos < e; )
                    t.push(this.readSFixed32());
                return t
            },
            readPackedFixed64: function(t) {
                var e = zs(this);
                for (t = t || []; this.pos < e; )
                    t.push(this.readFixed64());
                return t
            },
            readPackedSFixed64: function(t) {
                var e = zs(this);
                for (t = t || []; this.pos < e; )
                    t.push(this.readSFixed64());
                return t
            },
            skip: function(t) {
                var e = 7 & t;
                if (e === Is.Varint)
                    for (; this.buf[this.pos++] > 127; )
                        ;
                else if (e === Is.Bytes)
                    this.pos = this.readVarint() + this.pos;
                else if (e === Is.Fixed32)
                    this.pos += 4;
                else {
                    if (e !== Is.Fixed64)
                        throw new Error("Unimplemented type: " + e);
                    this.pos += 8
                }
            },
            writeTag: function(t, e) {
                this.writeVarint(t << 3 | e)
            },
            realloc: function(t) {
                for (var e = this.length || 16; e < this.pos + t; )
                    e *= 2;
                if (e !== this.length) {
                    var i = new Uint8Array(e);
                    i.set(this.buf),
                    this.buf = i,
                    this.length = e
                }
            },
            finish: function() {
                return this.length = this.pos,
                this.pos = 0,
                this.buf.subarray(0, this.length)
            },
            writeFixed32: function(t) {
                this.realloc(4),
                Ws(this.buf, t, this.pos),
                this.pos += 4
            },
            writeSFixed32: function(t) {
                this.realloc(4),
                Ws(this.buf, t, this.pos),
                this.pos += 4
            },
            writeFixed64: function(t) {
                this.realloc(8),
                Ws(this.buf, -1 & t, this.pos),
                Ws(this.buf, Math.floor(t * (1 / 4294967296)), this.pos + 4),
                this.pos += 8
            },
            writeSFixed64: function(t) {
                this.realloc(8),
                Ws(this.buf, -1 & t, this.pos),
                Ws(this.buf, Math.floor(t * (1 / 4294967296)), this.pos + 4),
                this.pos += 8
            },
            writeVarint: function(t) {
                (t = +t || 0) > 268435455 || t < 0 ? function(t, e) {
                    var i, r;
                    if (t >= 0 ? (i = t % 4294967296 | 0,
                    r = t / 4294967296 | 0) : (r = ~(-t / 4294967296),
                    4294967295 ^ (i = ~(-t % 4294967296)) ? i = i + 1 | 0 : (i = 0,
                    r = r + 1 | 0)),
                    t >= 0x10000000000000000 || t < -0x10000000000000000)
                        throw new Error("Given varint doesn't fit into 10 bytes");
                    e.realloc(10),
                    function(t, e, i) {
                        i.buf[i.pos++] = 127 & t | 128,
                        t >>>= 7,
                        i.buf[i.pos++] = 127 & t | 128,
                        t >>>= 7,
                        i.buf[i.pos++] = 127 & t | 128,
                        t >>>= 7,
                        i.buf[i.pos++] = 127 & t | 128,
                        t >>>= 7,
                        i.buf[i.pos] = 127 & t
                    }(i, 0, e),
                    function(t, e) {
                        var i = (7 & t) << 4;
                        e.buf[e.pos++] |= i | ((t >>>= 3) ? 128 : 0),
                        t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                        t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                        t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                        t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                        t && (e.buf[e.pos++] = 127 & t)))))
                    }(r, e)
                }(t, this) : (this.realloc(4),
                this.buf[this.pos++] = 127 & t | (t > 127 ? 128 : 0),
                t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0),
                t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0),
                t <= 127 || (this.buf[this.pos++] = t >>> 7 & 127))))
            },
            writeSVarint: function(t) {
                this.writeVarint(t < 0 ? 2 * -t - 1 : 2 * t)
            },
            writeBoolean: function(t) {
                this.writeVarint(Boolean(t))
            },
            writeString: function(t) {
                t = String(t),
                this.realloc(4 * t.length),
                this.pos++;
                var e = this.pos;
                this.pos = function(t, e, i) {
                    for (var r, n, o = 0; o < e.length; o++) {
                        if ((r = e.charCodeAt(o)) > 55295 && r < 57344) {
                            if (!n) {
                                r > 56319 || o + 1 === e.length ? (t[i++] = 239,
                                t[i++] = 191,
                                t[i++] = 189) : n = r;
                                continue
                            }
                            if (r < 56320) {
                                t[i++] = 239,
                                t[i++] = 191,
                                t[i++] = 189,
                                n = r;
                                continue
                            }
                            r = n - 55296 << 10 | r - 56320 | 65536,
                            n = null
                        } else
                            n && (t[i++] = 239,
                            t[i++] = 191,
                            t[i++] = 189,
                            n = null);
                        r < 128 ? t[i++] = r : (r < 2048 ? t[i++] = r >> 6 | 192 : (r < 65536 ? t[i++] = r >> 12 | 224 : (t[i++] = r >> 18 | 240,
                        t[i++] = r >> 12 & 63 | 128),
                        t[i++] = r >> 6 & 63 | 128),
                        t[i++] = 63 & r | 128)
                    }
                    return i
                }(this.buf, t, this.pos);
                var i = this.pos - e;
                i >= 128 && Ds(e, i, this),
                this.pos = e - 1,
                this.writeVarint(i),
                this.pos += i
            },
            writeFloat: function(t) {
                this.realloc(4),
                Ps(this.buf, t, this.pos, !0, 23, 4),
                this.pos += 4
            },
            writeDouble: function(t) {
                this.realloc(8),
                Ps(this.buf, t, this.pos, !0, 52, 8),
                this.pos += 8
            },
            writeBytes: function(t) {
                var e = t.length;
                this.writeVarint(e),
                this.realloc(e);
                for (var i = 0; i < e; i++)
                    this.buf[this.pos++] = t[i]
            },
            writeRawMessage: function(t, e) {
                this.pos++;
                var i = this.pos;
                t(e, this);
                var r = this.pos - i;
                r >= 128 && Ds(i, r, this),
                this.pos = i - 1,
                this.writeVarint(r),
                this.pos += r
            },
            writeMessage: function(t, e, i) {
                this.writeTag(t, Is.Bytes),
                this.writeRawMessage(e, i)
            },
            writePackedVarint: function(t, e) {
                this.writeMessage(t, Os, e)
            },
            writePackedSVarint: function(t, e) {
                this.writeMessage(t, Rs, e)
            },
            writePackedBoolean: function(t, e) {
                this.writeMessage(t, Ns, e)
            },
            writePackedFloat: function(t, e) {
                this.writeMessage(t, Fs, e)
            },
            writePackedDouble: function(t, e) {
                this.writeMessage(t, Bs, e)
            },
            writePackedFixed32: function(t, e) {
                this.writeMessage(t, Us, e)
            },
            writePackedSFixed32: function(t, e) {
                this.writeMessage(t, Vs, e)
            },
            writePackedFixed64: function(t, e) {
                this.writeMessage(t, js, e)
            },
            writePackedSFixed64: function(t, e) {
                this.writeMessage(t, $s, e)
            },
            writeBytesField: function(t, e) {
                this.writeTag(t, Is.Bytes),
                this.writeBytes(e)
            },
            writeFixed32Field: function(t, e) {
                this.writeTag(t, Is.Fixed32),
                this.writeFixed32(e)
            },
            writeSFixed32Field: function(t, e) {
                this.writeTag(t, Is.Fixed32),
                this.writeSFixed32(e)
            },
            writeFixed64Field: function(t, e) {
                this.writeTag(t, Is.Fixed64),
                this.writeFixed64(e)
            },
            writeSFixed64Field: function(t, e) {
                this.writeTag(t, Is.Fixed64),
                this.writeSFixed64(e)
            },
            writeVarintField: function(t, e) {
                this.writeTag(t, Is.Varint),
                this.writeVarint(e)
            },
            writeSVarintField: function(t, e) {
                this.writeTag(t, Is.Varint),
                this.writeSVarint(e)
            },
            writeStringField: function(t, e) {
                this.writeTag(t, Is.Bytes),
                this.writeString(e)
            },
            writeFloatField: function(t, e) {
                this.writeTag(t, Is.Fixed32),
                this.writeFloat(e)
            },
            writeDoubleField: function(t, e) {
                this.writeTag(t, Is.Fixed64),
                this.writeDouble(e)
            },
            writeBooleanField: function(t, e) {
                this.writeVarintField(t, Boolean(e))
            }
        };
        var Xs = 3;
        function Zs(t, e, i) {
            1 === t && i.readMessage(Gs, e)
        }
        function Gs(t, e, i) {
            if (3 === t) {
                var r = i.readMessage(Ys, {})
                  , n = r.id
                  , o = r.bitmap
                  , a = r.width
                  , s = r.height
                  , l = r.left
                  , u = r.top
                  , c = r.advance;
                e.push({
                    id: n,
                    bitmap: new To({
                        width: a + 2 * Xs,
                        height: s + 2 * Xs
                    },o),
                    metrics: {
                        width: a,
                        height: s,
                        left: l,
                        top: u,
                        advance: c
                    }
                })
            }
        }
        function Ys(t, e, i) {
            1 === t ? e.id = i.readVarint() : 2 === t ? e.bitmap = i.readBytes() : 3 === t ? e.width = i.readVarint() : 4 === t ? e.height = i.readVarint() : 5 === t ? e.left = i.readSVarint() : 6 === t ? e.top = i.readSVarint() : 7 === t && (e.advance = i.readVarint())
        }
        var Ks = Xs
          , Js = function(t, e, i) {
            this.target = t,
            this.parent = e,
            this.mapId = i,
            this.callbacks = {},
            this.callbackID = 0,
            y(["receive"], this),
            this.target.addEventListener("message", this.receive, !1)
        };
        function Qs(t, e, i) {
            var r = 2 * Math.PI * 6378137 / 256 / Math.pow(2, i);
            return [t * r - 2 * Math.PI * 6378137 / 2, e * r - 2 * Math.PI * 6378137 / 2]
        }
        Js.prototype.send = function(t, e, i, r) {
            var n = i ? this.mapId + ":" + this.callbackID++ : null;
            i && (this.callbacks[n] = i);
            var o = [];
            this.target.postMessage({
                targetMapId: r,
                sourceMapId: this.mapId,
                type: t,
                id: String(n),
                data: Ki(e, o)
            }, o)
        }
        ,
        Js.prototype.receive = function(t) {
            var e, i = this, r = t.data, n = r.id;
            if (!r.targetMapId || this.mapId === r.targetMapId) {
                var o = function(t, e) {
                    var r = [];
                    i.target.postMessage({
                        sourceMapId: i.mapId,
                        type: "<response>",
                        id: String(n),
                        error: t ? Ki(t) : null,
                        data: Ki(e, r)
                    }, r)
                };
                if ("<response>" === r.type)
                    e = this.callbacks[r.id],
                    delete this.callbacks[r.id],
                    e && r.error ? e(Ji(r.error)) : e && e(null, Ji(r.data));
                else if (void 0 !== r.id && this.parent[r.type])
                    this.parent[r.type](r.sourceMapId, Ji(r.data), o);
                else if (void 0 !== r.id && this.parent.getWorkerSource) {
                    var a = r.type.split(".")
                      , s = Ji(r.data);
                    this.parent.getWorkerSource(r.sourceMapId, a[0], s.source)[a[1]](s, o)
                } else
                    this.parent[r.type](Ji(r.data))
            }
        }
        ,
        Js.prototype.remove = function() {
            this.target.removeEventListener("message", this.receive, !1)
        }
        ;
        var tl = function(t, e) {
            t && (e ? this.setSouthWest(t).setNorthEast(e) : 4 === t.length ? this.setSouthWest([t[0], t[1]]).setNorthEast([t[2], t[3]]) : this.setSouthWest(t[0]).setNorthEast(t[1]))
        };
        tl.prototype.setNorthEast = function(t) {
            return this._ne = t instanceof el ? new el(t.lng,t.lat) : el.convert(t),
            this
        }
        ,
        tl.prototype.setSouthWest = function(t) {
            return this._sw = t instanceof el ? new el(t.lng,t.lat) : el.convert(t),
            this
        }
        ,
        tl.prototype.extend = function(t) {
            var e, i, r = this._sw, n = this._ne;
            if (t instanceof el)
                e = t,
                i = t;
            else {
                if (!(t instanceof tl))
                    return Array.isArray(t) ? t.every(Array.isArray) ? this.extend(tl.convert(t)) : this.extend(el.convert(t)) : this;
                if (e = t._sw,
                i = t._ne,
                !e || !i)
                    return this
            }
            return r || n ? (r.lng = Math.min(e.lng, r.lng),
            r.lat = Math.min(e.lat, r.lat),
            n.lng = Math.max(i.lng, n.lng),
            n.lat = Math.max(i.lat, n.lat)) : (this._sw = new el(e.lng,e.lat),
            this._ne = new el(i.lng,i.lat)),
            this
        }
        ,
        tl.prototype.getCenter = function() {
            return new el((this._sw.lng + this._ne.lng) / 2,(this._sw.lat + this._ne.lat) / 2)
        }
        ,
        tl.prototype.getSouthWest = function() {
            return this._sw
        }
        ,
        tl.prototype.getNorthEast = function() {
            return this._ne
        }
        ,
        tl.prototype.getNorthWest = function() {
            return new el(this.getWest(),this.getNorth())
        }
        ,
        tl.prototype.getSouthEast = function() {
            return new el(this.getEast(),this.getSouth())
        }
        ,
        tl.prototype.getWest = function() {
            return this._sw.lng
        }
        ,
        tl.prototype.getSouth = function() {
            return this._sw.lat
        }
        ,
        tl.prototype.getEast = function() {
            return this._ne.lng
        }
        ,
        tl.prototype.getNorth = function() {
            return this._ne.lat
        }
        ,
        tl.prototype.toArray = function() {
            return [this._sw.toArray(), this._ne.toArray()]
        }
        ,
        tl.prototype.toString = function() {
            return "LngLatBounds(" + this._sw.toString() + ", " + this._ne.toString() + ")"
        }
        ,
        tl.prototype.isEmpty = function() {
            return !(this._sw && this._ne)
        }
        ,
        tl.convert = function(t) {
            return !t || t instanceof tl ? t : new tl(t)
        }
        ;
        var el = function(t, e) {
            if (isNaN(t) || isNaN(e))
                throw new Error("Invalid LngLat object: (" + t + ", " + e + ")");
            if (this.lng = +t,
            this.lat = +e,
            this.lat > 90 || this.lat < -90)
                throw new Error("Invalid LngLat latitude value: must be between -90 and 90")
        };
        function il(t) {
            return 2 * Math.PI * 6378137 * Math.cos(t * Math.PI / 180)
        }
        function rl(t) {
            return (180 + t) / 360
        }
        function nl(t) {
            return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t * Math.PI / 360))) / 360
        }
        function ol(t, e) {
            return t / il(e)
        }
        function al(t) {
            var e = 180 - 360 * t;
            return 360 / Math.PI * Math.atan(Math.exp(e * Math.PI / 180)) - 90
        }
        el.prototype.wrap = function() {
            return new el(c(this.lng, -180, 180),this.lat)
        }
        ,
        el.prototype.toArray = function() {
            return [this.lng, this.lat]
        }
        ,
        el.prototype.toString = function() {
            return "LngLat(" + this.lng + ", " + this.lat + ")"
        }
        ,
        el.prototype.toBounds = function(t) {
            var e = 360 * t / 40075017
              , i = e / Math.cos(Math.PI / 180 * this.lat);
            return new tl(new el(this.lng - i,this.lat - e),new el(this.lng + i,this.lat + e))
        }
        ,
        el.convert = function(t) {
            if (t instanceof el)
                return t;
            if (Array.isArray(t) && (2 === t.length || 3 === t.length))
                return new el(Number(t[0]),Number(t[1]));
            if (!Array.isArray(t) && "object" == typeof t && null !== t)
                return new el(Number("lng"in t ? t.lng : t.lon),Number(t.lat));
            throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")
        }
        ;
        var sl = function(t, e, i) {
            void 0 === i && (i = 0),
            this.x = +t,
            this.y = +e,
            this.z = +i
        };
        sl.fromLngLat = function(t, e) {
            void 0 === e && (e = 0);
            var i = el.convert(t);
            return new sl(rl(i.lng),nl(i.lat),ol(e, i.lat))
        }
        ,
        sl.prototype.toLngLat = function() {
            return new el(360 * this.x - 180,al(this.y))
        }
        ,
        sl.prototype.toAltitude = function() {
            return this.z * il(al(this.y))
        }
        ;
        var ll = function(t, e, i) {
            this.z = t,
            this.x = e,
            this.y = i,
            this.key = pl(0, t, e, i)
        };
        ll.prototype.equals = function(t) {
            return this.z === t.z && this.x === t.x && this.y === t.y
        }
        ,
        ll.prototype.url = function(t, e) {
            var i, r, n, o, a, s = (i = this.x,
            r = this.y,
            n = this.z,
            o = Qs(256 * i, 256 * (r = Math.pow(2, n) - r - 1), n),
            a = Qs(256 * (i + 1), 256 * (r + 1), n),
            o[0] + "," + o[1] + "," + a[0] + "," + a[1]), l = function(t, e, i) {
                for (var r, n = "", o = t; o > 0; o--)
                    n += (e & (r = 1 << o - 1) ? 1 : 0) + (i & r ? 2 : 0);
                return n
            }(this.z, this.x, this.y);
            return t[(this.x + this.y) % t.length].replace("{prefix}", (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace("{z}", String(this.z)).replace("{x}", String(this.x)).replace("{y}", String("tms" === e ? Math.pow(2, this.z) - this.y - 1 : this.y)).replace("{quadkey}", l).replace("{bbox-epsg-3857}", s)
        }
        ,
        ll.prototype.getTilePoint = function(t) {
            var e = Math.pow(2, this.z);
            return new n((t.x * e - this.x) * Bn,(t.y * e - this.y) * Bn)
        }
        ;
        var ul = function(t, e) {
            this.wrap = t,
            this.canonical = e,
            this.key = pl(t, e.z, e.x, e.y)
        }
          , cl = function(t, e, i, r, n) {
            this.overscaledZ = t,
            this.wrap = e,
            this.canonical = new ll(i,+r,+n),
            this.key = pl(e, t, r, n)
        };
        function pl(t, e, i, r) {
            (t *= 2) < 0 && (t = -1 * t - 1);
            var n = 1 << e;
            return 32 * (n * n * t + n * r + i) + e
        }
        cl.prototype.equals = function(t) {
            return this.overscaledZ === t.overscaledZ && this.wrap === t.wrap && this.canonical.equals(t.canonical)
        }
        ,
        cl.prototype.scaledTo = function(t) {
            var e = this.canonical.z - t;
            return t > this.canonical.z ? new cl(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y) : new cl(t,this.wrap,t,this.canonical.x >> e,this.canonical.y >> e)
        }
        ,
        cl.prototype.isChildOf = function(t) {
            var e = this.canonical.z - t.canonical.z;
            return 0 === t.overscaledZ || t.overscaledZ < this.overscaledZ && t.canonical.x === this.canonical.x >> e && t.canonical.y === this.canonical.y >> e
        }
        ,
        cl.prototype.children = function(t) {
            if (this.overscaledZ >= t)
                return [new cl(this.overscaledZ + 1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];
            var e = this.canonical.z + 1
              , i = 2 * this.canonical.x
              , r = 2 * this.canonical.y;
            return [new cl(e,this.wrap,e,i,r), new cl(e,this.wrap,e,i + 1,r), new cl(e,this.wrap,e,i,r + 1), new cl(e,this.wrap,e,i + 1,r + 1)]
        }
        ,
        cl.prototype.isLessThan = function(t) {
            return this.wrap < t.wrap || !(this.wrap > t.wrap) && (this.overscaledZ < t.overscaledZ || !(this.overscaledZ > t.overscaledZ) && (this.canonical.x < t.canonical.x || !(this.canonical.x > t.canonical.x) && this.canonical.y < t.canonical.y))
        }
        ,
        cl.prototype.wrapped = function() {
            return new cl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)
        }
        ,
        cl.prototype.unwrapTo = function(t) {
            return new cl(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)
        }
        ,
        cl.prototype.overscaleFactor = function() {
            return Math.pow(2, this.overscaledZ - this.canonical.z)
        }
        ,
        cl.prototype.toUnwrapped = function() {
            return new ul(this.wrap,this.canonical)
        }
        ,
        cl.prototype.toString = function() {
            return this.overscaledZ + "/" + this.canonical.x + "/" + this.canonical.y
        }
        ,
        cl.prototype.getTilePoint = function(t) {
            return this.canonical.getTilePoint(new sl(t.x - this.wrap,t.y))
        }
        ,
        Gi("CanonicalTileID", ll),
        Gi("OverscaledTileID", cl, {
            omit: ["posMatrix"]
        });
        var hl = function(t, e, i) {
            if (this.uid = t,
            e.height !== e.width)
                throw new RangeError("DEM tiles must be square");
            if (i && "mapbox" !== i && "terrarium" !== i)
                return w('"' + i + '" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');
            var r = this.dim = e.height;
            this.border = Math.max(Math.ceil(e.height / 2), 1),
            this.stride = this.dim + 2 * this.border,
            this.data = new Int32Array(this.stride * this.stride);
            for (var n = e.data, o = "terrarium" === i ? this._unpackTerrarium : this._unpackMapbox, a = 0; a < r; a++)
                for (var s = 0; s < r; s++) {
                    var l = 4 * (a * r + s);
                    this.set(s, a, o(n[l], n[l + 1], n[l + 2]))
                }
            for (var u = 0; u < r; u++)
                this.set(-1, u, this.get(0, u)),
                this.set(r, u, this.get(r - 1, u)),
                this.set(u, -1, this.get(u, 0)),
                this.set(u, r, this.get(u, r - 1));
            this.set(-1, -1, this.get(0, 0)),
            this.set(r, -1, this.get(r - 1, 0)),
            this.set(-1, r, this.get(0, r - 1)),
            this.set(r, r, this.get(r - 1, r - 1))
        };
        hl.prototype.set = function(t, e, i) {
            this.data[this._idx(t, e)] = i + 65536
        }
        ,
        hl.prototype.get = function(t, e) {
            return this.data[this._idx(t, e)] - 65536
        }
        ,
        hl.prototype._idx = function(t, e) {
            if (t < -this.border || t >= this.dim + this.border || e < -this.border || e >= this.dim + this.border)
                throw new RangeError("out of range source coordinates for DEM data");
            return (e + this.border) * this.stride + (t + this.border)
        }
        ,
        hl.prototype._unpackMapbox = function(t, e, i) {
            return (256 * t * 256 + 256 * e + i) / 10 - 1e4
        }
        ,
        hl.prototype._unpackTerrarium = function(t, e, i) {
            return 256 * t + e + i / 256 - 32768
        }
        ,
        hl.prototype.getPixels = function() {
            return new So({
                width: this.dim + 2 * this.border,
                height: this.dim + 2 * this.border
            },new Uint8Array(this.data.buffer))
        }
        ,
        hl.prototype.backfillBorder = function(t, e, i) {
            if (this.dim !== t.dim)
                throw new Error("dem dimension mismatch");
            var r = e * this.dim
              , n = e * this.dim + this.dim
              , o = i * this.dim
              , a = i * this.dim + this.dim;
            switch (e) {
            case -1:
                r = n - 1;
                break;
            case 1:
                n = r + 1
            }
            switch (i) {
            case -1:
                o = a - 1;
                break;
            case 1:
                a = o + 1
            }
            for (var s = u(r, -this.border, this.dim + this.border), l = u(n, -this.border, this.dim + this.border), c = u(o, -this.border, this.dim + this.border), p = u(a, -this.border, this.dim + this.border), h = -e * this.dim, d = -i * this.dim, f = c; f < p; f++)
                for (var m = s; m < l; m++)
                    this.set(m, f, t.get(m + h, f + d))
        }
        ,
        Gi("DEMData", hl);
        var dl = Ir([{
            name: "a_pos",
            type: "Int16",
            components: 2
        }, {
            name: "a_texture_pos",
            type: "Int16",
            components: 2
        }])
          , fl = function(t) {
            this._stringToNumber = {},
            this._numberToString = [];
            for (var e = 0; e < t.length; e++) {
                var i = t[e];
                this._stringToNumber[i] = e,
                this._numberToString[e] = i
            }
        };
        fl.prototype.encode = function(t) {
            return this._stringToNumber[t]
        }
        ,
        fl.prototype.decode = function(t) {
            return this._numberToString[t]
        }
        ;
        var ml = function(t, e, i, r) {
            this.type = "Feature",
            this._vectorTileFeature = t,
            t._z = e,
            t._x = i,
            t._y = r,
            this.properties = t.properties,
            null != t.id && (this.id = t.id)
        }
          , yl = {
            geometry: {
                configurable: !0
            }
        };
        yl.geometry.get = function() {
            return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry),
            this._geometry
        }
        ,
        yl.geometry.set = function(t) {
            this._geometry = t
        }
        ,
        ml.prototype.toJSON = function() {
            var t = {
                geometry: this.geometry
            };
            for (var e in this)
                "_geometry" !== e && "_vectorTileFeature" !== e && (t[e] = this[e]);
            return t
        }
        ,
        Object.defineProperties(ml.prototype, yl);
        var gl = function() {
            this.state = {},
            this.stateChanges = {}
        };
        gl.prototype.updateState = function(t, e, i) {
            var r = String(e);
            this.stateChanges[t] = this.stateChanges[t] || {},
            this.stateChanges[t][r] = this.stateChanges[t][r] || {},
            p(this.stateChanges[t][r], i)
        }
        ,
        gl.prototype.getState = function(t, e) {
            var i = String(e)
              , r = this.state[t] || {}
              , n = this.stateChanges[t] || {};
            return p({}, r[i], n[i])
        }
        ,
        gl.prototype.initializeTileState = function(t, e) {
            t.setFeatureState(this.state, e)
        }
        ,
        gl.prototype.coalesceChanges = function(t, e) {
            var i = {};
            for (var r in this.stateChanges) {
                this.state[r] = this.state[r] || {};
                var n = {};
                for (var o in this.stateChanges[r])
                    this.state[r][o] || (this.state[r][o] = {}),
                    p(this.state[r][o], this.stateChanges[r][o]),
                    n[o] = this.state[r][o];
                i[r] = n
            }
            if (this.stateChanges = {},
            0 !== Object.keys(i).length)
                for (var a in t)
                    t[a].setFeatureState(i, e)
        }
        ;
        var _l = function(t, e, i) {
            this.tileID = t,
            this.x = t.canonical.x,
            this.y = t.canonical.y,
            this.z = t.canonical.z,
            this.grid = e || new qi(Bn,16,0),
            this.featureIndexArray = i || new hn
        };
        function vl(t, e) {
            return e - t
        }
        _l.prototype.insert = function(t, e, i, r, n) {
            var o = this.featureIndexArray.length;
            this.featureIndexArray.emplaceBack(i, r, n);
            for (var a = 0; a < e.length; a++) {
                for (var s = e[a], l = [1 / 0, 1 / 0, -1 / 0, -1 / 0], u = 0; u < s.length; u++) {
                    var c = s[u];
                    l[0] = Math.min(l[0], c.x),
                    l[1] = Math.min(l[1], c.y),
                    l[2] = Math.max(l[2], c.x),
                    l[3] = Math.max(l[3], c.y)
                }
                l[0] < Bn && l[1] < Bn && l[2] >= 0 && l[3] >= 0 && this.grid.insert(o, l[0], l[1], l[2], l[3])
            }
        }
        ,
        _l.prototype.loadVTLayers = function() {
            return this.vtLayers || (this.vtLayers = new Da.VectorTile(new Ms(this.rawTileData)).layers,
            this.sourceLayerCoder = new fl(this.vtLayers ? Object.keys(this.vtLayers).sort() : ["_geojsonTileLayer"])),
            this.vtLayers
        }
        ,
        _l.prototype.query = function(t, e, i) {
            var r = this;
            this.loadVTLayers();
            for (var n = t.params || {}, o = Bn / t.tileSize / t.scale, a = _i(n.filter), s = t.queryGeometry, l = t.queryPadding * o, u = 1 / 0, c = 1 / 0, p = -1 / 0, h = -1 / 0, d = 0; d < s.length; d++)
                for (var f = s[d], m = 0; m < f.length; m++) {
                    var y = f[m];
                    u = Math.min(u, y.x),
                    c = Math.min(c, y.y),
                    p = Math.max(p, y.x),
                    h = Math.max(h, y.y)
                }
            var g = this.grid.query(u - l, c - l, p + l, h + l);
            g.sort(vl);
            for (var _, v = {}, x = function(l) {
                var u = g[l];
                if (u !== _) {
                    _ = u;
                    var c = r.featureIndexArray.get(u)
                      , p = null;
                    r.loadMatchingFeature(v, c.bucketIndex, c.sourceLayerIndex, c.featureIndex, a, n.layers, e, function(e, n) {
                        p || (p = Un(e));
                        var a = {};
                        return e.id && (a = i.getState(n.sourceLayer || "_geojsonTileLayer", e.id)),
                        n.queryIntersectsFeature(s, e, a, p, r.z, t.transform, o, t.posMatrix)
                    })
                }
            }, b = 0; b < g.length; b++)
                x(b);
            return v
        }
        ,
        _l.prototype.loadMatchingFeature = function(t, e, i, r, n, o, a, s) {
            var l = this.bucketLayerIDs[e];
            if (!o || function(t, e) {
                for (var i = 0; i < t.length; i++)
                    if (e.indexOf(t[i]) >= 0)
                        return !0;
                return !1
            }(o, l)) {
                var u = this.sourceLayerCoder.decode(i)
                  , c = this.vtLayers[u].feature(r);
                if (n(new hr(this.tileID.overscaledZ), c))
                    for (var p = 0; p < l.length; p++) {
                        var h = l[p];
                        if (!(o && o.indexOf(h) < 0)) {
                            var d = a[h];
                            if (d && (!s || s(c, d))) {
                                var f = new ml(c,this.z,this.x,this.y);
                                f.layer = d.serialize();
                                var m = t[h];
                                void 0 === m && (m = t[h] = []),
                                m.push({
                                    featureIndex: r,
                                    feature: f
                                })
                            }
                        }
                    }
            }
        }
        ,
        _l.prototype.lookupSymbolFeatures = function(t, e, i, r, n, o) {
            var a = {};
            this.loadVTLayers();
            for (var s = _i(r), l = 0, u = t; l < u.length; l += 1) {
                var c = u[l];
                this.loadMatchingFeature(a, e, i, c, s, n, o)
            }
            return a
        }
        ,
        _l.prototype.hasLayer = function(t) {
            for (var e = 0, i = this.bucketLayerIDs; e < i.length; e += 1)
                for (var r = 0, n = i[e]; r < n.length; r += 1)
                    if (t === n[r])
                        return !0;
            return !1
        }
        ,
        Gi("FeatureIndex", _l, {
            omit: ["rawTileData", "sourceLayerCoder"]
        });
        var xl = function(t, e) {
            this.tileID = t,
            this.uid = d(),
            this.uses = 0,
            this.tileSize = e,
            this.buckets = {},
            this.expirationTime = null,
            this.queryPadding = 0,
            this.hasSymbolBuckets = !1,
            this.expiredRequestCount = 0,
            this.state = "loading"
        };
        xl.prototype.registerFadeDuration = function(t) {
            var e = t + this.timeAdded;
            e < P.now() || this.fadeEndTime && e < this.fadeEndTime || (this.fadeEndTime = e)
        }
        ,
        xl.prototype.wasRequested = function() {
            return "errored" === this.state || "loaded" === this.state || "reloading" === this.state
        }
        ,
        xl.prototype.loadVectorData = function(t, e, i) {
            if (this.hasData() && this.unloadVectorData(),
            this.state = "loaded",
            t) {
                for (var r in t.featureIndex && (this.latestFeatureIndex = t.featureIndex,
                t.rawTileData ? (this.latestRawTileData = t.rawTileData,
                this.latestFeatureIndex.rawTileData = t.rawTileData) : this.latestRawTileData && (this.latestFeatureIndex.rawTileData = this.latestRawTileData)),
                this.collisionBoxArray = t.collisionBoxArray,
                this.buckets = function(t, e) {
                    var i = {};
                    if (!e)
                        return i;
                    for (var r = 0, n = t; r < n.length; r += 1) {
                        var o = n[r]
                          , a = o.layerIds.map(function(t) {
                            return e.getLayer(t)
                        }).filter(Boolean);
                        if (0 !== a.length) {
                            o.layers = a,
                            o.stateDependentLayers = a.filter(function(t) {
                                return t.isStateDependent()
                            });
                            for (var s = 0, l = a; s < l.length; s += 1)
                                i[l[s].id] = o
                        }
                    }
                    return i
                }(t.buckets, e.style),
                this.hasSymbolBuckets = !1,
                this.buckets) {
                    var n = this.buckets[r];
                    if (n instanceof us) {
                        if (this.hasSymbolBuckets = !0,
                        !i)
                            break;
                        n.justReloaded = !0
                    }
                }
                for (var o in this.queryPadding = 0,
                this.buckets) {
                    var a = this.buckets[o];
                    this.queryPadding = Math.max(this.queryPadding, e.style.getLayer(o).queryRadius(a))
                }
                t.imageAtlas && (this.imageAtlas = t.imageAtlas),
                t.glyphAtlasImage && (this.glyphAtlasImage = t.glyphAtlasImage)
            } else
                this.collisionBoxArray = new en
        }
        ,
        xl.prototype.unloadVectorData = function() {
            for (var t in this.buckets)
                this.buckets[t].destroy();
            this.buckets = {},
            this.imageAtlasTexture && this.imageAtlasTexture.destroy(),
            this.imageAtlas && (this.imageAtlas = null),
            this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(),
            this.latestFeatureIndex = null,
            this.state = "unloaded"
        }
        ,
        xl.prototype.unloadDEMData = function() {
            this.dem = null,
            this.neighboringTiles = null,
            this.state = "unloaded"
        }
        ,
        xl.prototype.getBucket = function(t) {
            return this.buckets[t.id]
        }
        ,
        xl.prototype.upload = function(t) {
            for (var e in this.buckets) {
                var i = this.buckets[e];
                i.uploadPending() && i.upload(t)
            }
            var r = t.gl;
            this.imageAtlas && !this.imageAtlas.uploaded && (this.imageAtlasTexture = new Es(t,this.imageAtlas.image,r.RGBA),
            this.imageAtlas.uploaded = !0),
            this.glyphAtlasImage && (this.glyphAtlasTexture = new Es(t,this.glyphAtlasImage,r.ALPHA),
            this.glyphAtlasImage = null)
        }
        ,
        xl.prototype.queryRenderedFeatures = function(t, e, i, r, n, o, a, s) {
            return this.latestFeatureIndex && this.latestFeatureIndex.rawTileData ? this.latestFeatureIndex.query({
                queryGeometry: i,
                scale: r,
                tileSize: this.tileSize,
                posMatrix: s,
                transform: o,
                params: n,
                queryPadding: this.queryPadding * a
            }, t, e) : {}
        }
        ,
        xl.prototype.querySourceFeatures = function(t, e) {
            if (this.latestFeatureIndex && this.latestFeatureIndex.rawTileData) {
                var i = this.latestFeatureIndex.loadVTLayers()
                  , r = e ? e.sourceLayer : ""
                  , n = i._geojsonTileLayer || i[r];
                if (n)
                    for (var o = _i(e && e.filter), a = this.tileID.canonical, s = a.z, l = a.x, u = a.y, c = {
                        z: s,
                        x: l,
                        y: u
                    }, p = 0; p < n.length; p++) {
                        var h = n.feature(p);
                        if (o(new hr(this.tileID.overscaledZ), h)) {
                            var d = new ml(h,s,l,u);
                            d.tile = c,
                            t.push(d)
                        }
                    }
            }
        }
        ,
        xl.prototype.clearMask = function() {
            this.segments && (this.segments.destroy(),
            delete this.segments),
            this.maskedBoundsBuffer && (this.maskedBoundsBuffer.destroy(),
            delete this.maskedBoundsBuffer),
            this.maskedIndexBuffer && (this.maskedIndexBuffer.destroy(),
            delete this.maskedIndexBuffer)
        }
        ,
        xl.prototype.setMask = function(t, e) {
            if (!a(this.mask, t) && (this.mask = t,
            this.clearMask(),
            !a(t, {
                0: !0
            }))) {
                var i = new Dr
                  , r = new Gr;
                this.segments = new mn,
                this.segments.prepareSegment(0, i, r);
                for (var o = Object.keys(t), s = 0; s < o.length; s++) {
                    var l = t[o[s]]
                      , u = Bn >> l.z
                      , c = new n(l.x * u,l.y * u)
                      , p = new n(c.x + u,c.y + u)
                      , h = this.segments.prepareSegment(4, i, r);
                    i.emplaceBack(c.x, c.y, c.x, c.y),
                    i.emplaceBack(p.x, c.y, p.x, c.y),
                    i.emplaceBack(c.x, p.y, c.x, p.y),
                    i.emplaceBack(p.x, p.y, p.x, p.y);
                    var d = h.vertexLength;
                    r.emplaceBack(d, d + 1, d + 2),
                    r.emplaceBack(d + 1, d + 2, d + 3),
                    h.vertexLength += 4,
                    h.primitiveLength += 2
                }
                this.maskedBoundsBuffer = e.createVertexBuffer(i, dl.members),
                this.maskedIndexBuffer = e.createIndexBuffer(r)
            }
        }
        ,
        xl.prototype.hasData = function() {
            return "loaded" === this.state || "reloading" === this.state || "expired" === this.state
        }
        ,
        xl.prototype.patternsLoaded = function() {
            return this.imageAtlas && !!Object.keys(this.imageAtlas.patternPositions).length
        }
        ,
        xl.prototype.setExpiryData = function(t) {
            var e = this.expirationTime;
            if (t.cacheControl) {
                var i = function(t) {
                    var e = {};
                    if (t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g, function(t, i, r, n) {
                        var o = r || n;
                        return e[i] = !o || o.toLowerCase(),
                        ""
                    }),
                    e["max-age"]) {
                        var i = parseInt(e["max-age"], 10);
                        isNaN(i) ? delete e["max-age"] : e["max-age"] = i
                    }
                    return e
                }(t.cacheControl);
                i["max-age"] && (this.expirationTime = Date.now() + 1e3 * i["max-age"])
            } else
                t.expires && (this.expirationTime = new Date(t.expires).getTime());
            if (this.expirationTime) {
                var r = Date.now()
                  , n = !1;
                if (this.expirationTime > r)
                    n = !1;
                else if (e)
                    if (this.expirationTime < e)
                        n = !0;
                    else {
                        var o = this.expirationTime - e;
                        o ? this.expirationTime = r + Math.max(o, 3e4) : n = !0
                    }
                else
                    n = !0;
                n ? (this.expiredRequestCount++,
                this.state = "expired") : this.expiredRequestCount = 0
            }
        }
        ,
        xl.prototype.getExpiryTimeout = function() {
            if (this.expirationTime)
                return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - (new Date).getTime(), Math.pow(2, 31) - 1)
        }
        ,
        xl.prototype.setFeatureState = function(t, e) {
            if (this.latestFeatureIndex && this.latestFeatureIndex.rawTileData && 0 !== Object.keys(t).length) {
                var i = this.latestFeatureIndex.loadVTLayers();
                for (var r in this.buckets) {
                    var n = this.buckets[r]
                      , o = n.layers[0].sourceLayer || "_geojsonTileLayer"
                      , a = i[o]
                      , s = t[o];
                    a && s && 0 !== Object.keys(s).length && (n.update(s, a, this.imageAtlas && this.imageAtlas.patternPositions || {}),
                    e && e.style && (this.queryPadding = Math.max(this.queryPadding, e.style.getLayer(r).queryRadius(n))))
                }
            }
        }
        ,
        xl.prototype.holdingForFade = function() {
            return void 0 !== this.symbolFadeHoldUntil
        }
        ,
        xl.prototype.symbolFadeFinished = function() {
            return !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < P.now()
        }
        ,
        xl.prototype.clearFadeHold = function() {
            this.symbolFadeHoldUntil = void 0
        }
        ,
        xl.prototype.setHoldDuration = function(t) {
            this.symbolFadeHoldUntil = P.now() + t
        }
        ;
        var bl = {
            horizontal: 1,
            vertical: 2,
            horizontalOnly: 3
        }
          , wl = function() {
            this.text = "",
            this.sectionIndex = [],
            this.sections = []
        };
        wl.fromFeature = function(t, e) {
            for (var i = new wl, r = 0; r < t.sections.length; r++) {
                var n = t.sections[r];
                i.sections.push({
                    scale: n.scale || 1,
                    fontStack: n.fontStack || e
                }),
                i.text += n.text;
                for (var o = 0; o < n.text.length; o++)
                    i.sectionIndex.push(r)
            }
            return i
        }
        ,
        wl.prototype.length = function() {
            return this.text.length
        }
        ,
        wl.prototype.getSection = function(t) {
            return this.sections[this.sectionIndex[t]]
        }
        ,
        wl.prototype.getCharCode = function(t) {
            return this.text.charCodeAt(t)
        }
        ,
        wl.prototype.verticalizePunctuation = function() {
            this.text = function(t) {
                for (var e = "", i = 0; i < t.length; i++) {
                    var r = t.charCodeAt(i + 1) || null
                      , n = t.charCodeAt(i - 1) || null;
                    r && nr(r) && !ts[t[i + 1]] || n && nr(n) && !ts[t[i - 1]] || !ts[t[i]] ? e += t[i] : e += ts[t[i]]
                }
                return e
            }(this.text)
        }
        ,
        wl.prototype.trim = function() {
            for (var t = 0, e = 0; e < this.text.length && Tl[this.text.charCodeAt(e)]; e++)
                t++;
            for (var i = this.text.length, r = this.text.length - 1; r >= 0 && r >= t && Tl[this.text.charCodeAt(r)]; r--)
                i--;
            this.text = this.text.substring(t, i),
            this.sectionIndex = this.sectionIndex.slice(t, i)
        }
        ,
        wl.prototype.substring = function(t, e) {
            var i = new wl;
            return i.text = this.text.substring(t, e),
            i.sectionIndex = this.sectionIndex.slice(t, e),
            i.sections = this.sections,
            i
        }
        ,
        wl.prototype.toString = function() {
            return this.text
        }
        ,
        wl.prototype.getMaxScale = function() {
            var t = this;
            return this.sectionIndex.reduce(function(e, i) {
                return Math.max(e, t.sections[i].scale)
            }, 0)
        }
        ;
        var Tl = {
            9: !0,
            10: !0,
            11: !0,
            12: !0,
            13: !0,
            32: !0
        }
          , Sl = {};
        function Al(t, e, i, r) {
            var n = Math.pow(t - e, 2);
            return r ? t < e ? n / 2 : 2 * n : n + Math.abs(i) * i
        }
        function kl(t, e) {
            var i = 0;
            return 10 === t && (i -= 1e4),
            40 !== t && 65288 !== t || (i += 50),
            41 !== e && 65289 !== e || (i += 50),
            i
        }
        function El(t, e, i, r, n, o) {
            for (var a = null, s = Al(e, i, n, o), l = 0, u = r; l < u.length; l += 1) {
                var c = u[l]
                  , p = Al(e - c.x, i, n, o) + c.badness;
                p <= s && (a = c,
                s = p)
            }
            return {
                index: t,
                x: e,
                priorBreak: a,
                badness: s
            }
        }
        function Cl(t, e, i, r) {
            if (!i)
                return [];
            if (!t)
                return [];
            for (var n, o = [], a = function(t, e, i, r) {
                for (var n = 0, o = 0; o < t.length(); o++) {
                    var a = t.getSection(o)
                      , s = r[a.fontStack]
                      , l = s && s[t.getCharCode(o)];
                    l && (n += l.metrics.advance * a.scale + e)
                }
                return n / Math.max(1, Math.ceil(n / i))
            }(t, e, i, r), s = 0, l = 0; l < t.length(); l++) {
                var u = t.getSection(l)
                  , c = t.getCharCode(l)
                  , p = r[u.fontStack]
                  , h = p && p[c];
                h && !Tl[c] && (s += h.metrics.advance * u.scale + e),
                l < t.length() - 1 && (Sl[c] || !((n = c) < 11904) && (tr["Bopomofo Extended"](n) || tr.Bopomofo(n) || tr["CJK Compatibility Forms"](n) || tr["CJK Compatibility Ideographs"](n) || tr["CJK Compatibility"](n) || tr["CJK Radicals Supplement"](n) || tr["CJK Strokes"](n) || tr["CJK Symbols and Punctuation"](n) || tr["CJK Unified Ideographs Extension A"](n) || tr["CJK Unified Ideographs"](n) || tr["Enclosed CJK Letters and Months"](n) || tr["Halfwidth and Fullwidth Forms"](n) || tr.Hiragana(n) || tr["Ideographic Description Characters"](n) || tr["Kangxi Radicals"](n) || tr["Katakana Phonetic Extensions"](n) || tr.Katakana(n) || tr["Vertical Forms"](n) || tr["Yi Radicals"](n) || tr["Yi Syllables"](n))) && o.push(El(l + 1, s, a, o, kl(c, t.getCharCode(l + 1)), !1))
            }
            return function t(e) {
                return e ? t(e.priorBreak).concat(e.index) : []
            }(El(t.length(), s, a, o, 0, !0))
        }
        function Pl(t) {
            var e = .5
              , i = .5;
            switch (t) {
            case "right":
            case "top-right":
            case "bottom-right":
                e = 1;
                break;
            case "left":
            case "top-left":
            case "bottom-left":
                e = 0
            }
            switch (t) {
            case "bottom":
            case "bottom-right":
            case "bottom-left":
                i = 1;
                break;
            case "top":
            case "top-right":
            case "top-left":
                i = 0
            }
            return {
                horizontalAlign: e,
                verticalAlign: i
            }
        }
        function Ml(t, e, i, r, n) {
            if (n) {
                var o = t[r]
                  , a = e[o.fontStack]
                  , s = a && a[o.glyph];
                if (s)
                    for (var l = s.metrics.advance * o.scale, u = (t[r].x + l) * n, c = i; c <= r; c++)
                        t[c].x -= u
            }
        }
        Sl[10] = !0,
        Sl[32] = !0,
        Sl[38] = !0,
        Sl[40] = !0,
        Sl[41] = !0,
        Sl[43] = !0,
        Sl[45] = !0,
        Sl[47] = !0,
        Sl[173] = !0,
        Sl[183] = !0,
        Sl[8203] = !0,
        Sl[8208] = !0,
        Sl[8211] = !0,
        Sl[8231] = !0,
        t.createCommonjsModule = e,
        t.Point = n,
        t.window = self,
        t.getJSON = function(t, e) {
            return Y(p(t, {
                type: "json"
            }), e)
        }
        ,
        t.getImage = et,
        t.ResourceType = X,
        t.browser = P,
        t.normalizeSpriteURL = function(t, e, i, r) {
            var n = N(t);
            return D(t) ? (n.path = "/styles/v1" + n.path + "/sprite" + e + i,
            L(n, r)) : (n.path += "" + e + i,
            U(n))
        }
        ,
        t.RGBAImage = So,
        t.potpack = vs,
        t.ImagePosition = xs,
        t.Texture = Es,
        t.normalizeGlyphsURL = function(t, e) {
            if (!D(t))
                return t;
            var i = N(t);
            return i.path = "/fonts/v1" + i.path,
            L(i, e)
        }
        ,
        t.getArrayBuffer = K,
        t.parseGlyphPBF = function(t) {
            return new Ms(t).readFields(Zs, [])
        }
        ,
        t.isChar = tr,
        t.asyncAll = function(t, e, i) {
            if (!t.length)
                return i(null, []);
            var r = t.length
              , n = new Array(t.length)
              , o = null;
            t.forEach(function(t, a) {
                e(t, function(t, e) {
                    t && (o = t),
                    n[a] = e,
                    0 == --r && i(o, n)
                })
            })
        }
        ,
        t.AlphaImage = To,
        t.styleSpec = st,
        t.endsWith = g,
        t.extend = p,
        t.sphericalToCartesian = function(t) {
            var e = t[0]
              , i = t[1]
              , r = t[2];
            return i += 90,
            i *= Math.PI / 180,
            r *= Math.PI / 180,
            {
                x: e * Math.cos(i) * Math.sin(r),
                y: e * Math.sin(i) * Math.sin(r),
                z: e * Math.cos(r)
            }
        }
        ,
        t.Evented = at,
        t.validateStyle = Ni,
        t.validateLight = Ui,
        t.emitValidationErrors = $i,
        t.Color = Pt,
        t.number = te,
        t.Properties = kr,
        t.Transitionable = mr,
        t.Transitioning = gr,
        t.PossiblyEvaluated = xr,
        t.DataConstantProperty = br,
        t.warnOnce = w,
        t.uniqueId = d,
        t.Actor = Js,
        t.pick = function(t, e) {
            for (var i = {}, r = 0; r < e.length; r++) {
                var n = e[r];
                n in t && (i[n] = t[n])
            }
            return i
        }
        ,
        t.normalizeSourceURL = function(t, e) {
            if (!D(t))
                return t;
            var i = N(t);
            return i.path = "/v4/" + i.authority + ".json",
            i.params.push("secure"),
            L(i, e)
        }
        ,
        t.LngLatBounds = tl,
        t.clamp = u,
        t.Event = nt,
        t.ErrorEvent = ot,
        t.normalizeTileURL = function(t, e, i) {
            if (!e || !D(e))
                return t;
            var r = N(t)
              , n = P.devicePixelRatio >= 2 || 512 === i ? "@2x" : ""
              , o = P.supportsWebp ? ".webp" : "$1";
            return r.path = r.path.replace(F, "" + n + o),
            function(t) {
                for (var e = 0; e < t.length; e++)
                    0 === t[e].indexOf("access_token=tk.") && (t[e] = "access_token=" + (I.ACCESS_TOKEN || ""))
            }(r.params),
            U(r)
        }
        ,
        t.postTurnstileEvent = q,
        t.postMapLoadEvent = H,
        t.OverscaledTileID = cl,
        t.EXTENT = Bn,
        t.CanonicalTileID = ll,
        t.StructArrayLayout4i8 = Dr,
        t.rasterBoundsAttributes = dl,
        t.SegmentVector = mn,
        t.MercatorCoordinate = sl,
        t.getVideo = function(t, e) {
            var i, r, n = self.document.createElement("video");
            n.muted = !0,
            n.onloadstart = function() {
                e(null, n)
            }
            ;
            for (var o = 0; o < t.length; o++) {
                var a = self.document.createElement("source");
                i = t[o],
                r = void 0,
                (r = self.document.createElement("a")).href = i,
                (r.protocol !== self.document.location.protocol || r.host !== self.document.location.host) && (n.crossOrigin = "Anonymous"),
                a.src = t[o],
                n.appendChild(a)
            }
            return {
                cancel: function() {}
            }
        }
        ,
        t.ValidationError = lt,
        t.bindAll = y,
        t.isEqual = a,
        t.Tile = xl,
        t.keysDifference = function(t, e) {
            var i = [];
            for (var r in t)
                r in e || i.push(r);
            return i
        }
        ,
        t.SourceFeatureState = gl,
        t.refProperties = ["type", "source", "source-layer", "minzoom", "maxzoom", "filter", "layout"],
        t.create = function() {
            var t = new ro(16);
            return t[0] = 1,
            t[1] = 0,
            t[2] = 0,
            t[3] = 0,
            t[4] = 0,
            t[5] = 1,
            t[6] = 0,
            t[7] = 0,
            t[8] = 0,
            t[9] = 0,
            t[10] = 1,
            t[11] = 0,
            t[12] = 0,
            t[13] = 0,
            t[14] = 0,
            t[15] = 1,
            t
        }
        ,
        t.identity = function(t) {
            return t[0] = 1,
            t[1] = 0,
            t[2] = 0,
            t[3] = 0,
            t[4] = 0,
            t[5] = 1,
            t[6] = 0,
            t[7] = 0,
            t[8] = 0,
            t[9] = 0,
            t[10] = 1,
            t[11] = 0,
            t[12] = 0,
            t[13] = 0,
            t[14] = 0,
            t[15] = 1,
            t
        }
        ,
        t.invert = function(t, e) {
            var i = e[0]
              , r = e[1]
              , n = e[2]
              , o = e[3]
              , a = e[4]
              , s = e[5]
              , l = e[6]
              , u = e[7]
              , c = e[8]
              , p = e[9]
              , h = e[10]
              , d = e[11]
              , f = e[12]
              , m = e[13]
              , y = e[14]
              , g = e[15]
              , _ = i * s - r * a
              , v = i * l - n * a
              , x = i * u - o * a
              , b = r * l - n * s
              , w = r * u - o * s
              , T = n * u - o * l
              , S = c * m - p * f
              , A = c * y - h * f
              , k = c * g - d * f
              , E = p * y - h * m
              , C = p * g - d * m
              , P = h * g - d * y
              , M = _ * P - v * C + x * E + b * k - w * A + T * S;
            return M ? (M = 1 / M,
            t[0] = (s * P - l * C + u * E) * M,
            t[1] = (n * C - r * P - o * E) * M,
            t[2] = (m * T - y * w + g * b) * M,
            t[3] = (h * w - p * T - d * b) * M,
            t[4] = (l * k - a * P - u * A) * M,
            t[5] = (i * P - n * k + o * A) * M,
            t[6] = (y * x - f * T - g * v) * M,
            t[7] = (c * T - h * x + d * v) * M,
            t[8] = (a * C - s * k + u * S) * M,
            t[9] = (r * k - i * C - o * S) * M,
            t[10] = (f * w - m * x + g * _) * M,
            t[11] = (p * x - c * w - d * _) * M,
            t[12] = (s * A - a * E - l * S) * M,
            t[13] = (i * E - r * A + n * S) * M,
            t[14] = (m * v - f * b - y * _) * M,
            t[15] = (c * b - p * v + h * _) * M,
            t) : null
        }
        ,
        t.multiply = function(t, e, i) {
            var r = e[0]
              , n = e[1]
              , o = e[2]
              , a = e[3]
              , s = e[4]
              , l = e[5]
              , u = e[6]
              , c = e[7]
              , p = e[8]
              , h = e[9]
              , d = e[10]
              , f = e[11]
              , m = e[12]
              , y = e[13]
              , g = e[14]
              , _ = e[15]
              , v = i[0]
              , x = i[1]
              , b = i[2]
              , w = i[3];
            return t[0] = v * r + x * s + b * p + w * m,
            t[1] = v * n + x * l + b * h + w * y,
            t[2] = v * o + x * u + b * d + w * g,
            t[3] = v * a + x * c + b * f + w * _,
            v = i[4],
            x = i[5],
            b = i[6],
            w = i[7],
            t[4] = v * r + x * s + b * p + w * m,
            t[5] = v * n + x * l + b * h + w * y,
            t[6] = v * o + x * u + b * d + w * g,
            t[7] = v * a + x * c + b * f + w * _,
            v = i[8],
            x = i[9],
            b = i[10],
            w = i[11],
            t[8] = v * r + x * s + b * p + w * m,
            t[9] = v * n + x * l + b * h + w * y,
            t[10] = v * o + x * u + b * d + w * g,
            t[11] = v * a + x * c + b * f + w * _,
            v = i[12],
            x = i[13],
            b = i[14],
            w = i[15],
            t[12] = v * r + x * s + b * p + w * m,
            t[13] = v * n + x * l + b * h + w * y,
            t[14] = v * o + x * u + b * d + w * g,
            t[15] = v * a + x * c + b * f + w * _,
            t
        }
        ,
        t.translate = function(t, e, i) {
            var r, n, o, a, s, l, u, c, p, h, d, f, m = i[0], y = i[1], g = i[2];
            return e === t ? (t[12] = e[0] * m + e[4] * y + e[8] * g + e[12],
            t[13] = e[1] * m + e[5] * y + e[9] * g + e[13],
            t[14] = e[2] * m + e[6] * y + e[10] * g + e[14],
            t[15] = e[3] * m + e[7] * y + e[11] * g + e[15]) : (r = e[0],
            n = e[1],
            o = e[2],
            a = e[3],
            s = e[4],
            l = e[5],
            u = e[6],
            c = e[7],
            p = e[8],
            h = e[9],
            d = e[10],
            f = e[11],
            t[0] = r,
            t[1] = n,
            t[2] = o,
            t[3] = a,
            t[4] = s,
            t[5] = l,
            t[6] = u,
            t[7] = c,
            t[8] = p,
            t[9] = h,
            t[10] = d,
            t[11] = f,
            t[12] = r * m + s * y + p * g + e[12],
            t[13] = n * m + l * y + h * g + e[13],
            t[14] = o * m + u * y + d * g + e[14],
            t[15] = a * m + c * y + f * g + e[15]),
            t
        }
        ,
        t.scale = function(t, e, i) {
            var r = i[0]
              , n = i[1]
              , o = i[2];
            return t[0] = e[0] * r,
            t[1] = e[1] * r,
            t[2] = e[2] * r,
            t[3] = e[3] * r,
            t[4] = e[4] * n,
            t[5] = e[5] * n,
            t[6] = e[6] * n,
            t[7] = e[7] * n,
            t[8] = e[8] * o,
            t[9] = e[9] * o,
            t[10] = e[10] * o,
            t[11] = e[11] * o,
            t[12] = e[12],
            t[13] = e[13],
            t[14] = e[14],
            t[15] = e[15],
            t
        }
        ,
        t.rotateX = function(t, e, i) {
            var r = Math.sin(i)
              , n = Math.cos(i)
              , o = e[4]
              , a = e[5]
              , s = e[6]
              , l = e[7]
              , u = e[8]
              , c = e[9]
              , p = e[10]
              , h = e[11];
            return e !== t && (t[0] = e[0],
            t[1] = e[1],
            t[2] = e[2],
            t[3] = e[3],
            t[12] = e[12],
            t[13] = e[13],
            t[14] = e[14],
            t[15] = e[15]),
            t[4] = o * n + u * r,
            t[5] = a * n + c * r,
            t[6] = s * n + p * r,
            t[7] = l * n + h * r,
            t[8] = u * n - o * r,
            t[9] = c * n - a * r,
            t[10] = p * n - s * r,
            t[11] = h * n - l * r,
            t
        }
        ,
        t.rotateZ = function(t, e, i) {
            var r = Math.sin(i)
              , n = Math.cos(i)
              , o = e[0]
              , a = e[1]
              , s = e[2]
              , l = e[3]
              , u = e[4]
              , c = e[5]
              , p = e[6]
              , h = e[7];
            return e !== t && (t[8] = e[8],
            t[9] = e[9],
            t[10] = e[10],
            t[11] = e[11],
            t[12] = e[12],
            t[13] = e[13],
            t[14] = e[14],
            t[15] = e[15]),
            t[0] = o * n + u * r,
            t[1] = a * n + c * r,
            t[2] = s * n + p * r,
            t[3] = l * n + h * r,
            t[4] = u * n - o * r,
            t[5] = c * n - a * r,
            t[6] = p * n - s * r,
            t[7] = h * n - l * r,
            t
        }
        ,
        t.perspective = function(t, e, i, r, n) {
            var o = 1 / Math.tan(e / 2)
              , a = 1 / (r - n);
            return t[0] = o / i,
            t[1] = 0,
            t[2] = 0,
            t[3] = 0,
            t[4] = 0,
            t[5] = o,
            t[6] = 0,
            t[7] = 0,
            t[8] = 0,
            t[9] = 0,
            t[10] = (n + r) * a,
            t[11] = -1,
            t[12] = 0,
            t[13] = 0,
            t[14] = 2 * n * r * a,
            t[15] = 0,
            t
        }
        ,
        t.ortho = function(t, e, i, r, n, o, a) {
            var s = 1 / (e - i)
              , l = 1 / (r - n)
              , u = 1 / (o - a);
            return t[0] = -2 * s,
            t[1] = 0,
            t[2] = 0,
            t[3] = 0,
            t[4] = 0,
            t[5] = -2 * l,
            t[6] = 0,
            t[7] = 0,
            t[8] = 0,
            t[9] = 0,
            t[10] = 2 * u,
            t[11] = 0,
            t[12] = (e + i) * s,
            t[13] = (n + r) * l,
            t[14] = (a + o) * u,
            t[15] = 1,
            t
        }
        ,
        t.create$1 = po,
        t.normalize = ho,
        t.transformMat4 = fo,
        t.forEach = mo,
        t.getSizeData = is,
        t.evaluateSizeForFeature = function(t, e, i) {
            var r = e;
            return "source" === t.functionType ? i.lowerSize / 256 : "composite" === t.functionType ? te(i.lowerSize / 256, i.upperSize / 256, r.uSizeT) : r.uSize
        }
        ,
        t.evaluateSizeForZoom = function(t, e, i) {
            if ("constant" === t.functionType)
                return {
                    uSizeT: 0,
                    uSize: t.layoutSize
                };
            if ("source" === t.functionType)
                return {
                    uSizeT: 0,
                    uSize: 0
                };
            if ("camera" === t.functionType) {
                var r = t.propertyValue
                  , n = t.zoomRange
                  , o = t.sizeRange
                  , a = u(ui(r, i.specification).interpolationFactor(e, n.min, n.max), 0, 1);
                return {
                    uSizeT: 0,
                    uSize: o.min + a * (o.max - o.min)
                }
            }
            var s = t.propertyValue
              , l = t.zoomRange;
            return {
                uSizeT: u(ui(s, i.specification).interpolationFactor(e, l.min, l.max), 0, 1),
                uSize: 0
            }
        }
        ,
        t.SIZE_PACK_FACTOR = 256,
        t.addDynamicAttributes = as,
        t.properties = ps,
        t.WritingMode = bl,
        t.multiPolygonIntersectsBufferedPoint = $n,
        t.multiPolygonIntersectsMultiPolygon = qn,
        t.multiPolygonIntersectsBufferedMultiLine = Wn,
        t.polygonIntersectsPolygon = function(t, e) {
            for (var i = 0; i < t.length; i++)
                if (Jn(e, t[i]))
                    return !0;
            for (var r = 0; r < e.length; r++)
                if (Jn(t, e[r]))
                    return !0;
            return !!Xn(t, e)
        }
        ,
        t.distToSegmentSquared = Yn,
        t.SymbolInstanceArray = an,
        t.StyleLayer = Er,
        t.createStyleLayer = function(t) {
            return "custom" === t.type ? new gs(t) : new _s[t.type](t)
        }
        ,
        t.clone = x,
        t.filterObject = v,
        t.mapObject = _,
        t.getReferrer = G,
        t.isMapboxURL = D,
        t.normalizeStyleURL = function(t, e) {
            if (!D(t))
                return t;
            var i = N(t);
            return i.path = "/styles/v1" + i.path,
            L(i, e)
        }
        ,
        t.registerForPluginAvailability = function(t) {
            return lr ? t({
                pluginURL: lr,
                completionCallback: ar
            }) : cr.once("pluginAvailable", t),
            t
        }
        ,
        t.evented = cr,
        t.ZoomHistory = Qi,
        t.validateCustomStyleLayer = function(t) {
            var e = []
              , i = t.id;
            return void 0 === i && e.push({
                message: "layers." + i + ': missing required property "id"'
            }),
            void 0 === t.render && e.push({
                message: "layers." + i + ': missing required method "render"'
            }),
            t.renderingMode && "2d" !== t.renderingMode && "3d" !== t.renderingMode && e.push({
                message: "layers." + i + ': property "renderingMode" must be either "2d" or "3d"'
            }),
            e
        }
        ,
        t.createLayout = Ir,
        t.ProgramConfiguration = Dn,
        t.Uniform1i = xn,
        t.Uniform1f = bn,
        t.Uniform2f = wn,
        t.Uniform4f = Sn,
        t.Uniform3f = Tn,
        t.UniformMatrix4f = En,
        t.create$2 = no,
        t.fromRotation = function(t, e) {
            var i = Math.sin(e)
              , r = Math.cos(e);
            return t[0] = r,
            t[1] = i,
            t[2] = 0,
            t[3] = -i,
            t[4] = r,
            t[5] = 0,
            t[6] = 0,
            t[7] = 0,
            t[8] = 1,
            t
        }
        ,
        t.create$3 = oo,
        t.length = ao,
        t.fromValues = so,
        t.normalize$1 = function(t, e) {
            var i = e[0]
              , r = e[1]
              , n = e[2]
              , o = i * i + r * r + n * n;
            return o > 0 && (o = 1 / Math.sqrt(o),
            t[0] = e[0] * o,
            t[1] = e[1] * o,
            t[2] = e[2] * o),
            t
        }
        ,
        t.dot = function(t, e) {
            return t[0] * e[0] + t[1] * e[1] + t[2] * e[2]
        }
        ,
        t.cross = function(t, e, i) {
            var r = e[0]
              , n = e[1]
              , o = e[2]
              , a = i[0]
              , s = i[1]
              , l = i[2];
            return t[0] = n * l - o * s,
            t[1] = o * a - r * l,
            t[2] = r * s - n * a,
            t
        }
        ,
        t.transformMat3 = function(t, e, i) {
            var r = e[0]
              , n = e[1]
              , o = e[2];
            return t[0] = r * i[0] + n * i[3] + o * i[6],
            t[1] = r * i[1] + n * i[4] + o * i[7],
            t[2] = r * i[2] + n * i[5] + o * i[8],
            t
        }
        ,
        t.len = uo,
        t.forEach$1 = co,
        t.UniformColor = An,
        t.StructArrayLayout2i4 = Lr,
        t.StructArrayLayout2ui4 = Yr,
        t.StructArrayLayout3ui6 = Gr,
        t.StructArrayLayout1ui2 = Kr,
        t.LngLat = el,
        t.mercatorXfromLng = rl,
        t.mercatorYfromLat = nl,
        t.mercatorZfromAltitude = ol,
        t.wrap = c,
        t.UnwrappedTileID = ul,
        t.create$4 = function() {
            var t = new ro(4);
            return t[0] = 1,
            t[1] = 0,
            t[2] = 0,
            t[3] = 1,
            t
        }
        ,
        t.rotate = function(t, e, i) {
            var r = e[0]
              , n = e[1]
              , o = e[2]
              , a = e[3]
              , s = Math.sin(i)
              , l = Math.cos(i);
            return t[0] = r * l + o * s,
            t[1] = n * l + a * s,
            t[2] = r * -s + o * l,
            t[3] = n * -s + a * l,
            t
        }
        ,
        t.ease = l,
        t.bezier = s,
        t.config = I,
        t.EvaluationParameters = hr,
        t.version = "0.51.0",
        t.setRTLTextPlugin = function(t, e) {
            if (sr)
                throw new Error("setRTLTextPlugin cannot be called multiple times.");
            sr = !0,
            lr = P.resolveURL(t),
            ar = function(t) {
                t ? (sr = !1,
                lr = null,
                e && e(t)) : ur = !0
            }
            ,
            cr.fire(new nt("pluginAvailable",{
                pluginURL: lr,
                completionCallback: ar
            }))
        }
        ,
        t.values = function(t) {
            var e = [];
            for (var i in t)
                e.push(t[i]);
            return e
        }
        ,
        t.featureFilter = _i,
        t.Anchor = es,
        t.GLYPH_PBF_BORDER = Ks,
        t.shapeText = function(t, e, i, r, n, o, a, s, l, u, c) {
            var p = wl.fromFeature(t, i);
            c === bl.vertical && p.verticalizePunctuation();
            var h, d = [], f = {
                positionedGlyphs: d,
                text: p,
                top: l[1],
                bottom: l[1],
                left: l[0],
                right: l[0],
                writingMode: c
            }, m = pr.processBidirectionalText, y = pr.processStyledBidirectionalText;
            if (m && 1 === p.sections.length) {
                h = [];
                for (var g = 0, _ = m(p.toString(), Cl(p, s, r, e)); g < _.length; g += 1) {
                    var v = _[g]
                      , x = new wl;
                    x.text = v,
                    x.sections = p.sections;
                    for (var b = 0; b < v.length; b++)
                        x.sectionIndex.push(0);
                    h.push(x)
                }
            } else if (y) {
                h = [];
                for (var w = 0, T = y(p.text, p.sectionIndex, Cl(p, s, r, e)); w < T.length; w += 1) {
                    var S = T[w]
                      , A = new wl;
                    A.text = S[0],
                    A.sectionIndex = S[1],
                    A.sections = p.sections,
                    h.push(A)
                }
            } else
                h = function(t, e) {
                    for (var i = [], r = t.text, n = 0, o = 0, a = e; o < a.length; o += 1) {
                        var s = a[o];
                        i.push(t.substring(n, s)),
                        n = s
                    }
                    return n < r.length && i.push(t.substring(n, r.length)),
                    i
                }(p, Cl(p, s, r, e));
            return function(t, e, i, r, n, o, a, s, l) {
                for (var u = 0, c = -17, p = 0, h = t.positionedGlyphs, d = "right" === o ? 1 : "left" === o ? 0 : .5, f = 0, m = i; f < m.length; f += 1) {
                    var y = m[f];
                    y.trim();
                    var g = y.getMaxScale();
                    if (y.length()) {
                        for (var _ = h.length, v = 0; v < y.length(); v++) {
                            var x = y.getSection(v)
                              , b = y.getCharCode(v)
                              , w = 24 * (g - x.scale)
                              , T = e[x.fontStack]
                              , S = T && T[b];
                            S && (rr(b) && a !== bl.horizontal ? (h.push({
                                glyph: b,
                                x: u,
                                y: w,
                                vertical: !0,
                                scale: x.scale,
                                fontStack: x.fontStack
                            }),
                            u += l * x.scale + s) : (h.push({
                                glyph: b,
                                x: u,
                                y: c + w,
                                vertical: !1,
                                scale: x.scale,
                                fontStack: x.fontStack
                            }),
                            u += S.metrics.advance * x.scale + s))
                        }
                        if (h.length !== _) {
                            var A = u - s;
                            p = Math.max(A, p),
                            Ml(h, e, _, h.length - 1, d)
                        }
                        u = 0,
                        c += r * g
                    } else
                        c += r
                }
                var k = Pl(n)
                  , E = k.horizontalAlign
                  , C = k.verticalAlign;
                !function(t, e, i, r, n, o, a) {
                    for (var s = (e - i) * n, l = (-r * a + .5) * o, u = 0; u < t.length; u++)
                        t[u].x += s,
                        t[u].y += l
                }(h, d, E, C, p, r, i.length);
                var P = c - -17;
                t.top += -C * P,
                t.bottom = t.top + P,
                t.left += -E * p,
                t.right = t.left + p
            }(f, e, h, n, o, a, c, s, u),
            !!d.length && (f.text = f.text.toString(),
            f)
        }
        ,
        t.shapeIcon = function(t, e, i) {
            var r = Pl(i)
              , n = r.horizontalAlign
              , o = r.verticalAlign
              , a = e[0]
              , s = e[1]
              , l = a - t.displaySize[0] * n
              , u = l + t.displaySize[0]
              , c = s - t.displaySize[1] * o;
            return {
                image: t,
                top: c,
                bottom: c + t.displaySize[1],
                left: l,
                right: u
            }
        }
        ,
        t.allowsVerticalWritingMode = er,
        t.allowsLetterSpacing = function(t) {
            for (var e = 0, i = t; e < i.length; e += 1)
                if (!ir(i[e].charCodeAt(0)))
                    return !1;
            return !0
        }
        ,
        t.classifyRings = la,
        t.SymbolBucket = us,
        t.register = Gi,
        t.FeatureIndex = _l,
        t.CollisionBoxArray = en,
        t.DictionaryCoder = fl,
        t.LineBucket = Va,
        t.FillBucket = ha,
        t.FillExtrusionBucket = va,
        t.ImageAtlas = ws,
        t.mvt = Da,
        t.Protobuf = Ms,
        t.DEMData = hl,
        t.vectorTile = Da,
        t.Point$1 = n,
        t.pbf = Ms,
        t.plugin = pr
    }),
    r(0, function(t) {
        function e(t) {
            var i = typeof t;
            if ("number" === i || "boolean" === i || "string" === i || null == t)
                return JSON.stringify(t);
            if (Array.isArray(t)) {
                for (var r = "[", n = 0, o = t; n < o.length; n += 1)
                    r += e(o[n]) + ",";
                return r + "]"
            }
            for (var a = Object.keys(t).sort(), s = "{", l = 0; l < a.length; l++)
                s += JSON.stringify(a[l]) + ":" + e(t[a[l]]) + ",";
            return s + "}"
        }
        function i(i) {
            for (var r = "", n = 0, o = t.refProperties; n < o.length; n += 1)
                r += "/" + e(i[o[n]]);
            return r
        }
        var r = function(t) {
            t && this.replace(t)
        };
        function n(t, e, i, r, n) {
            if (void 0 === e.segment)
                return !0;
            for (var o = e, a = e.segment + 1, s = 0; s > -i / 2; ) {
                if (--a < 0)
                    return !1;
                s -= t[a].dist(o),
                o = t[a]
            }
            s += t[a].dist(t[a + 1]),
            a++;
            for (var l = [], u = 0; s < i / 2; ) {
                var c = t[a - 1]
                  , p = t[a]
                  , h = t[a + 1];
                if (!h)
                    return !1;
                var d = c.angleTo(p) - p.angleTo(h);
                for (d = Math.abs((d + 3 * Math.PI) % (2 * Math.PI) - Math.PI),
                l.push({
                    distance: s,
                    angleDelta: d
                }),
                u += d; s - l[0].distance > r; )
                    u -= l.shift().angleDelta;
                if (u > n)
                    return !1;
                a++,
                s += p.dist(h)
            }
            return !0
        }
        function o(t) {
            for (var e = 0, i = 0; i < t.length - 1; i++)
                e += t[i].dist(t[i + 1]);
            return e
        }
        function a(t, e, i) {
            return t ? .6 * e * i : 0
        }
        function s(t, e) {
            return Math.max(t ? t.right - t.left : 0, e ? e.right - e.left : 0)
        }
        function l(e, i, r, l, u, c) {
            for (var p = a(r, u, c), h = s(r, l) * c, d = 0, f = o(e) / 2, m = 0; m < e.length - 1; m++) {
                var y = e[m]
                  , g = e[m + 1]
                  , _ = y.dist(g);
                if (d + _ > f) {
                    var v = (f - d) / _
                      , x = t.number(y.x, g.x, v)
                      , b = t.number(y.y, g.y, v)
                      , w = new t.Anchor(x,b,g.angleTo(y),m);
                    return w._round(),
                    !p || n(e, w, h, p, i) ? w : void 0
                }
                d += _
            }
        }
        function u(e, i, r, l, u, c, p, h, d) {
            var f = a(l, c, p)
              , m = s(l, u)
              , y = m * p
              , g = 0 === e[0].x || e[0].x === d || 0 === e[0].y || e[0].y === d;
            return i - y < i / 4 && (i = y + i / 4),
            function e(i, r, a, s, l, u, c, p, h) {
                for (var d = u / 2, f = o(i), m = 0, y = r - a, g = [], _ = 0; _ < i.length - 1; _++) {
                    for (var v = i[_], x = i[_ + 1], b = v.dist(x), w = x.angleTo(v); y + a < m + b; ) {
                        var T = ((y += a) - m) / b
                          , S = t.number(v.x, x.x, T)
                          , A = t.number(v.y, x.y, T);
                        if (S >= 0 && S < h && A >= 0 && A < h && y - d >= 0 && y + d <= f) {
                            var k = new t.Anchor(S,A,w,_);
                            k._round(),
                            s && !n(i, k, u, s, l) || g.push(k)
                        }
                    }
                    m += b
                }
                return p || g.length || c || (g = e(i, m / 2, a, s, l, u, c, !0, h)),
                g
            }(e, g ? i / 2 * h % i : (m / 2 + 2 * c) * p * h % i, i, f, r, y, g, !1, d)
        }
        r.prototype.replace = function(t) {
            this._layerConfigs = {},
            this._layers = {},
            this.update(t, [])
        }
        ,
        r.prototype.update = function(e, r) {
            for (var n = this, o = 0, a = e; o < a.length; o += 1) {
                var s = a[o];
                n._layerConfigs[s.id] = s;
                var l = n._layers[s.id] = t.createStyleLayer(s);
                l._featureFilter = t.featureFilter(l.filter)
            }
            for (var u = 0, c = r; u < c.length; u += 1) {
                var p = c[u];
                delete n._layerConfigs[p],
                delete n._layers[p]
            }
            this.familiesBySource = {};
            for (var h = 0, d = function(t) {
                for (var e = {}, r = 0; r < t.length; r++) {
                    var n = i(t[r])
                      , o = e[n];
                    o || (o = e[n] = []),
                    o.push(t[r])
                }
                var a = [];
                for (var s in e)
                    a.push(e[s]);
                return a
            }(t.values(this._layerConfigs)); h < d.length; h += 1) {
                var f = d[h].map(function(t) {
                    return n._layers[t.id]
                })
                  , m = f[0];
                if ("none" !== m.visibility) {
                    var y = m.source || ""
                      , g = n.familiesBySource[y];
                    g || (g = n.familiesBySource[y] = {});
                    var _ = m.sourceLayer || "_geojsonTileLayer"
                      , v = g[_];
                    v || (v = g[_] = []),
                    v.push(f)
                }
            }
        }
        ;
        var c = function(e, i, r, n, o, a, s, l, u, c, p, h) {
            var d = s.top * l - u
              , f = s.bottom * l + u
              , m = s.left * l - u
              , y = s.right * l + u;
            if (this.boxStartIndex = e.length,
            c) {
                var g = f - d
                  , _ = y - m;
                g > 0 && (g = Math.max(10 * l, g),
                this._addLineCollisionCircles(e, i, r, r.segment, _, g, n, o, a, p))
            } else {
                if (h) {
                    var v = new t.Point(m,d)
                      , x = new t.Point(y,d)
                      , b = new t.Point(m,f)
                      , w = new t.Point(y,f)
                      , T = h * Math.PI / 180;
                    v._rotate(T),
                    x._rotate(T),
                    b._rotate(T),
                    w._rotate(T),
                    m = Math.min(v.x, x.x, b.x, w.x),
                    y = Math.max(v.x, x.x, b.x, w.x),
                    d = Math.min(v.y, x.y, b.y, w.y),
                    f = Math.max(v.y, x.y, b.y, w.y)
                }
                e.emplaceBack(r.x, r.y, m, d, y, f, n, o, a, 0, 0)
            }
            this.boxEndIndex = e.length
        };
        c.prototype._addLineCollisionCircles = function(t, e, i, r, n, o, a, s, l, u) {
            var c = o / 2
              , p = Math.floor(n / c) || 1
              , h = 1 + .4 * Math.log(u) / Math.LN2
              , d = Math.floor(p * h / 2)
              , f = -o / 2
              , m = i
              , y = r + 1
              , g = f
              , _ = -n / 2
              , v = _ - n / 4;
            do {
                if (--y < 0) {
                    if (g > _)
                        return;
                    y = 0;
                    break
                }
                g -= e[y].dist(m),
                m = e[y]
            } while (g > v);
            for (var x = e[y].dist(e[y + 1]), b = -d; b < p + d; b++) {
                var w = b * c
                  , T = _ + w;
                if (w < 0 && (T += w),
                w > n && (T += w - n),
                !(T < g)) {
                    for (; g + x < T; ) {
                        if (g += x,
                        ++y + 1 >= e.length)
                            return;
                        x = e[y].dist(e[y + 1])
                    }
                    var S = T - g
                      , A = e[y]
                      , k = e[y + 1].sub(A)._unit()._mult(S)._add(A)._round()
                      , E = Math.abs(T - f) < c ? 0 : .8 * (T - f);
                    t.emplaceBack(k.x, k.y, -o / 2, -o / 2, o / 2, o / 2, a, s, l, o / 2, E)
                }
            }
        }
        ;
        var p = d
          , h = d;
        function d(t, e) {
            if (!(this instanceof d))
                return new d(t,e);
            if (this.data = t || [],
            this.length = this.data.length,
            this.compare = e || f,
            this.length > 0)
                for (var i = (this.length >> 1) - 1; i >= 0; i--)
                    this._down(i)
        }
        function f(t, e) {
            return t < e ? -1 : t > e ? 1 : 0
        }
        function m(e, i, r) {
            void 0 === i && (i = 1),
            void 0 === r && (r = !1);
            for (var n = 1 / 0, o = 1 / 0, a = -1 / 0, s = -1 / 0, l = e[0], u = 0; u < l.length; u++) {
                var c = l[u];
                (!u || c.x < n) && (n = c.x),
                (!u || c.y < o) && (o = c.y),
                (!u || c.x > a) && (a = c.x),
                (!u || c.y > s) && (s = c.y)
            }
            var h = a - n
              , d = s - o
              , f = Math.min(h, d)
              , m = f / 2
              , _ = new p(null,y);
            if (0 === f)
                return new t.Point(n,o);
            for (var v = n; v < a; v += f)
                for (var x = o; x < s; x += f)
                    _.push(new g(v + m,x + m,m,e));
            for (var b = function(t) {
                for (var e = 0, i = 0, r = 0, n = t[0], o = 0, a = n.length, s = a - 1; o < a; s = o++) {
                    var l = n[o]
                      , u = n[s]
                      , c = l.x * u.y - u.x * l.y;
                    i += (l.x + u.x) * c,
                    r += (l.y + u.y) * c,
                    e += 3 * c
                }
                return new g(i / e,r / e,0,t)
            }(e), w = _.length; _.length; ) {
                var T = _.pop();
                (T.d > b.d || !b.d) && (b = T,
                r && console.log("found best %d after %d probes", Math.round(1e4 * T.d) / 1e4, w)),
                T.max - b.d <= i || (m = T.h / 2,
                _.push(new g(T.p.x - m,T.p.y - m,m,e)),
                _.push(new g(T.p.x + m,T.p.y - m,m,e)),
                _.push(new g(T.p.x - m,T.p.y + m,m,e)),
                _.push(new g(T.p.x + m,T.p.y + m,m,e)),
                w += 4)
            }
            return r && (console.log("num probes: " + w),
            console.log("best distance: " + b.d)),
            b.p
        }
        function y(t, e) {
            return e.max - t.max
        }
        function g(e, i, r, n) {
            this.p = new t.Point(e,i),
            this.h = r,
            this.d = function(e, i) {
                for (var r = !1, n = 1 / 0, o = 0; o < i.length; o++)
                    for (var a = i[o], s = 0, l = a.length, u = l - 1; s < l; u = s++) {
                        var c = a[s]
                          , p = a[u];
                        c.y > e.y != p.y > e.y && e.x < (p.x - c.x) * (e.y - c.y) / (p.y - c.y) + c.x && (r = !r),
                        n = Math.min(n, t.distToSegmentSquared(e, c, p))
                    }
                return (r ? 1 : -1) * Math.sqrt(n)
            }(this.p, n),
            this.max = this.d + this.h * Math.SQRT2
        }
        d.prototype = {
            push: function(t) {
                this.data.push(t),
                this.length++,
                this._up(this.length - 1)
            },
            pop: function() {
                if (0 !== this.length) {
                    var t = this.data[0];
                    return this.length--,
                    this.length > 0 && (this.data[0] = this.data[this.length],
                    this._down(0)),
                    this.data.pop(),
                    t
                }
            },
            peek: function() {
                return this.data[0]
            },
            _up: function(t) {
                for (var e = this.data, i = this.compare, r = e[t]; t > 0; ) {
                    var n = t - 1 >> 1
                      , o = e[n];
                    if (i(r, o) >= 0)
                        break;
                    e[t] = o,
                    t = n
                }
                e[t] = r
            },
            _down: function(t) {
                for (var e = this.data, i = this.compare, r = this.length >> 1, n = e[t]; t < r; ) {
                    var o = 1 + (t << 1)
                      , a = o + 1
                      , s = e[o];
                    if (a < this.length && i(e[a], s) < 0 && (o = a,
                    s = e[a]),
                    i(s, n) >= 0)
                        break;
                    e[t] = s,
                    t = o
                }
                e[t] = n
            }
        },
        p.default = h;
        var _ = t.createCommonjsModule(function(t) {
            t.exports = function(t, e) {
                var i, r, n, o, a, s, l, u;
                for (i = 3 & t.length,
                r = t.length - i,
                n = e,
                a = 3432918353,
                s = 461845907,
                u = 0; u < r; )
                    l = 255 & t.charCodeAt(u) | (255 & t.charCodeAt(++u)) << 8 | (255 & t.charCodeAt(++u)) << 16 | (255 & t.charCodeAt(++u)) << 24,
                    ++u,
                    n = 27492 + (65535 & (o = 5 * (65535 & (n = (n ^= l = (65535 & (l = (l = (65535 & l) * a + (((l >>> 16) * a & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * s + (((l >>> 16) * s & 65535) << 16) & 4294967295) << 13 | n >>> 19)) + ((5 * (n >>> 16) & 65535) << 16) & 4294967295)) + ((58964 + (o >>> 16) & 65535) << 16);
                switch (l = 0,
                i) {
                case 3:
                    l ^= (255 & t.charCodeAt(u + 2)) << 16;
                case 2:
                    l ^= (255 & t.charCodeAt(u + 1)) << 8;
                case 1:
                    n ^= l = (65535 & (l = (l = (65535 & (l ^= 255 & t.charCodeAt(u))) * a + (((l >>> 16) * a & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * s + (((l >>> 16) * s & 65535) << 16) & 4294967295
                }
                return n ^= t.length,
                n = 2246822507 * (65535 & (n ^= n >>> 16)) + ((2246822507 * (n >>> 16) & 65535) << 16) & 4294967295,
                n = 3266489909 * (65535 & (n ^= n >>> 13)) + ((3266489909 * (n >>> 16) & 65535) << 16) & 4294967295,
                (n ^= n >>> 16) >>> 0
            }
        })
          , v = t.createCommonjsModule(function(t) {
            t.exports = function(t, e) {
                for (var i, r = t.length, n = e ^ r, o = 0; r >= 4; )
                    i = 1540483477 * (65535 & (i = 255 & t.charCodeAt(o) | (255 & t.charCodeAt(++o)) << 8 | (255 & t.charCodeAt(++o)) << 16 | (255 & t.charCodeAt(++o)) << 24)) + ((1540483477 * (i >>> 16) & 65535) << 16),
                    n = 1540483477 * (65535 & n) + ((1540483477 * (n >>> 16) & 65535) << 16) ^ (i = 1540483477 * (65535 & (i ^= i >>> 24)) + ((1540483477 * (i >>> 16) & 65535) << 16)),
                    r -= 4,
                    ++o;
                switch (r) {
                case 3:
                    n ^= (255 & t.charCodeAt(o + 2)) << 16;
                case 2:
                    n ^= (255 & t.charCodeAt(o + 1)) << 8;
                case 1:
                    n = 1540483477 * (65535 & (n ^= 255 & t.charCodeAt(o))) + ((1540483477 * (n >>> 16) & 65535) << 16)
                }
                return n = 1540483477 * (65535 & (n ^= n >>> 13)) + ((1540483477 * (n >>> 16) & 65535) << 16),
                (n ^= n >>> 15) >>> 0
            }
        })
          , x = _
          , b = _
          , w = v;
        function T(e, i, r, n, o, a) {
            e.createArrays();
            var s = 512 * e.overscaling;
            e.tilePixelRatio = t.EXTENT / s,
            e.compareText = {},
            e.iconsNeedLinear = !1;
            var l = e.layers[0].layout
              , u = e.layers[0]._unevaluatedLayout._values
              , c = {};
            if ("composite" === e.textSizeData.functionType) {
                var p = e.textSizeData.zoomRange
                  , h = p.min
                  , d = p.max;
                c.compositeTextSizes = [u["text-size"].possiblyEvaluate(new t.EvaluationParameters(h)), u["text-size"].possiblyEvaluate(new t.EvaluationParameters(d))]
            }
            if ("composite" === e.iconSizeData.functionType) {
                var f = e.iconSizeData.zoomRange
                  , m = f.min
                  , y = f.max;
                c.compositeIconSizes = [u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(m)), u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(y))]
            }
            c.layoutTextSize = u["text-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom + 1)),
            c.layoutIconSize = u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom + 1)),
            c.textMaxSize = u["text-size"].possiblyEvaluate(new t.EvaluationParameters(18));
            for (var g = 24 * l.get("text-line-height"), _ = "map" === l.get("text-rotation-alignment") && "point" !== l.get("symbol-placement"), v = l.get("text-keep-upright"), x = 0, b = e.features; x < b.length; x += 1) {
                var w = b[x]
                  , T = l.get("text-font").evaluate(w, {}).join(",")
                  , A = r
                  , k = {}
                  , E = w.text;
                if (E) {
                    var C = E.toString()
                      , P = l.get("text-offset").evaluate(w, {}).map(function(t) {
                        return 24 * t
                    })
                      , M = 24 * l.get("text-letter-spacing").evaluate(w, {})
                      , I = t.allowsLetterSpacing(C) ? M : 0
                      , z = l.get("text-anchor").evaluate(w, {})
                      , L = l.get("text-justify").evaluate(w, {})
                      , D = "point" === l.get("symbol-placement") ? 24 * l.get("text-max-width").evaluate(w, {}) : 0;
                    k.horizontal = t.shapeText(E, i, T, D, g, z, L, I, P, 24, t.WritingMode.horizontal),
                    t.allowsVerticalWritingMode(C) && _ && v && (k.vertical = t.shapeText(E, i, T, D, g, z, L, I, P, 24, t.WritingMode.vertical))
                }
                var O = void 0;
                if (w.icon) {
                    var R = n[w.icon];
                    R && (O = t.shapeIcon(o[w.icon], l.get("icon-offset").evaluate(w, {}), l.get("icon-anchor").evaluate(w, {})),
                    void 0 === e.sdfIcons ? e.sdfIcons = R.sdf : e.sdfIcons !== R.sdf && t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),
                    R.pixelRatio !== e.pixelRatio ? e.iconsNeedLinear = !0 : 0 !== l.get("icon-rotate").constantOr(1) && (e.iconsNeedLinear = !0))
                }
                (k.horizontal || O) && S(e, w, k, O, A, c)
            }
            a && e.generateCollisionDebugBuffers()
        }
        function S(e, i, r, n, o, a) {
            var s = a.layoutTextSize.evaluate(i, {})
              , p = a.layoutIconSize.evaluate(i, {})
              , h = a.textMaxSize.evaluate(i, {});
            void 0 === h && (h = s);
            var d = e.layers[0].layout
              , f = d.get("text-offset").evaluate(i, {})
              , y = d.get("icon-offset").evaluate(i, {})
              , g = s / 24
              , _ = e.tilePixelRatio * g
              , v = e.tilePixelRatio * h / 24
              , b = e.tilePixelRatio * p
              , w = e.tilePixelRatio * d.get("symbol-spacing")
              , T = d.get("text-padding") * e.tilePixelRatio
              , S = d.get("icon-padding") * e.tilePixelRatio
              , C = d.get("text-max-angle") / 180 * Math.PI
              , P = "map" === d.get("text-rotation-alignment") && "point" !== d.get("symbol-placement")
              , M = "map" === d.get("icon-rotation-alignment") && "point" !== d.get("symbol-placement")
              , I = d.get("symbol-placement")
              , z = w / 2
              , L = function(s, l) {
                l.x < 0 || l.x >= t.EXTENT || l.y < 0 || l.y >= t.EXTENT || function(e, i, r, n, o, a, s, l, u, p, h, d, f, m, y, g, _, v, b, w, T) {
                    var S, E, C = e.addToLineVertexArray(i, r), P = 0, M = 0, I = 0, z = x(n.horizontal ? n.horizontal.text : ""), L = [];
                    if (n.horizontal) {
                        var D = a.layout.get("text-rotate").evaluate(b, {});
                        S = new c(s,r,i,l,u,p,n.horizontal,h,d,f,e.overscaling,D),
                        M += k(e, i, n.horizontal, a, f, b, m, C, n.vertical ? t.WritingMode.horizontal : t.WritingMode.horizontalOnly, L, w, T),
                        n.vertical && (I += k(e, i, n.vertical, a, f, b, m, C, t.WritingMode.vertical, L, w, T))
                    }
                    var O = S ? S.boxStartIndex : e.collisionBoxArray.length
                      , R = S ? S.boxEndIndex : e.collisionBoxArray.length;
                    if (o) {
                        var F = function(e, i, r, n, o, a) {
                            var s, l, u, c, p = i.image, h = r.layout, d = i.top - 1 / p.pixelRatio, f = i.left - 1 / p.pixelRatio, m = i.bottom + 1 / p.pixelRatio, y = i.right + 1 / p.pixelRatio;
                            if ("none" !== h.get("icon-text-fit") && o) {
                                var g = y - f
                                  , _ = m - d
                                  , v = h.get("text-size").evaluate(a, {}) / 24
                                  , x = o.left * v
                                  , b = o.right * v
                                  , w = o.top * v
                                  , T = b - x
                                  , S = o.bottom * v - w
                                  , A = h.get("icon-text-fit-padding")[0]
                                  , k = h.get("icon-text-fit-padding")[1]
                                  , E = h.get("icon-text-fit-padding")[2]
                                  , C = h.get("icon-text-fit-padding")[3]
                                  , P = "width" === h.get("icon-text-fit") ? .5 * (S - _) : 0
                                  , M = "height" === h.get("icon-text-fit") ? .5 * (T - g) : 0
                                  , I = "width" === h.get("icon-text-fit") || "both" === h.get("icon-text-fit") ? T : g
                                  , z = "height" === h.get("icon-text-fit") || "both" === h.get("icon-text-fit") ? S : _;
                                s = new t.Point(x + M - C,w + P - A),
                                l = new t.Point(x + M + k + I,w + P - A),
                                u = new t.Point(x + M + k + I,w + P + E + z),
                                c = new t.Point(x + M - C,w + P + E + z)
                            } else
                                s = new t.Point(f,d),
                                l = new t.Point(y,d),
                                u = new t.Point(y,m),
                                c = new t.Point(f,m);
                            var L = r.layout.get("icon-rotate").evaluate(a, {}) * Math.PI / 180;
                            if (L) {
                                var D = Math.sin(L)
                                  , O = Math.cos(L)
                                  , R = [O, -D, D, O];
                                s._matMult(R),
                                l._matMult(R),
                                c._matMult(R),
                                u._matMult(R)
                            }
                            return [{
                                tl: s,
                                tr: l,
                                bl: c,
                                br: u,
                                tex: p.paddedRect,
                                writingMode: void 0,
                                glyphOffset: [0, 0]
                            }]
                        }(0, o, a, 0, n.horizontal, b)
                          , B = a.layout.get("icon-rotate").evaluate(b, {});
                        E = new c(s,r,i,l,u,p,o,y,g,!1,e.overscaling,B),
                        P = 4 * F.length;
                        var N = e.iconSizeData
                          , U = null;
                        "source" === N.functionType ? (U = [t.SIZE_PACK_FACTOR * a.layout.get("icon-size").evaluate(b, {})])[0] > A && t.warnOnce(e.layerIds[0] + ': Value for "icon-size" is >= 256. Reduce your "icon-size".') : "composite" === N.functionType && ((U = [t.SIZE_PACK_FACTOR * T.compositeIconSizes[0].evaluate(b, {}), t.SIZE_PACK_FACTOR * T.compositeIconSizes[1].evaluate(b, {})])[0] > A || U[1] > A) && t.warnOnce(e.layerIds[0] + ': Value for "icon-size" is >= 256. Reduce your "icon-size".'),
                        e.addSymbols(e.icon, F, U, v, _, b, !1, i, C.lineStartIndex, C.lineLength)
                    }
                    var V = E ? E.boxStartIndex : e.collisionBoxArray.length
                      , j = E ? E.boxEndIndex : e.collisionBoxArray.length;
                    e.glyphOffsetArray.length >= t.SymbolBucket.MAX_GLYPHS && t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),
                    e.symbolInstances.emplaceBack(i.x, i.y, L.length > 0 ? L[0] : -1, L.length > 1 ? L[1] : -1, z, O, R, V, j, l, M, I, P, 0)
                }(e, l, s, r, n, e.layers[0], e.collisionBoxArray, i.index, i.sourceLayerIndex, e.index, _, T, P, f, b, S, M, y, i, o, a)
            };
            if ("line" === I)
                for (var D = 0, O = function(e, i, r, n, o) {
                    for (var a = [], s = 0; s < e.length; s++)
                        for (var l = e[s], u = void 0, c = 0; c < l.length - 1; c++) {
                            var p = l[c]
                              , h = l[c + 1];
                            p.x < 0 && h.x < 0 || (p.x < 0 ? p = new t.Point(0,p.y + (h.y - p.y) * ((0 - p.x) / (h.x - p.x)))._round() : h.x < 0 && (h = new t.Point(0,p.y + (h.y - p.y) * ((0 - p.x) / (h.x - p.x)))._round()),
                            p.y < 0 && h.y < 0 || (p.y < 0 ? p = new t.Point(p.x + (h.x - p.x) * ((0 - p.y) / (h.y - p.y)),0)._round() : h.y < 0 && (h = new t.Point(p.x + (h.x - p.x) * ((0 - p.y) / (h.y - p.y)),0)._round()),
                            p.x >= n && h.x >= n || (p.x >= n ? p = new t.Point(n,p.y + (h.y - p.y) * ((n - p.x) / (h.x - p.x)))._round() : h.x >= n && (h = new t.Point(n,p.y + (h.y - p.y) * ((n - p.x) / (h.x - p.x)))._round()),
                            p.y >= o && h.y >= o || (p.y >= o ? p = new t.Point(p.x + (h.x - p.x) * ((o - p.y) / (h.y - p.y)),o)._round() : h.y >= o && (h = new t.Point(p.x + (h.x - p.x) * ((o - p.y) / (h.y - p.y)),o)._round()),
                            u && p.equals(u[u.length - 1]) || (u = [p],
                            a.push(u)),
                            u.push(h)))))
                        }
                    return a
                }(i.geometry, 0, 0, t.EXTENT, t.EXTENT); D < O.length; D += 1)
                    for (var R = O[D], F = 0, B = u(R, w, C, r.vertical || r.horizontal, n, 24, v, e.overscaling, t.EXTENT); F < B.length; F += 1) {
                        var N = B[F]
                          , U = r.horizontal;
                        U && E(e, U.text, z, N) || L(R, N)
                    }
            else if ("line-center" === I)
                for (var V = 0, j = i.geometry; V < j.length; V += 1) {
                    var $ = j[V];
                    if ($.length > 1) {
                        var q = l($, C, r.vertical || r.horizontal, n, 24, v);
                        q && L($, q)
                    }
                }
            else if ("Polygon" === i.type)
                for (var W = 0, H = t.classifyRings(i.geometry, 0); W < H.length; W += 1) {
                    var X = H[W]
                      , Z = m(X, 16);
                    L(X[0], new t.Anchor(Z.x,Z.y,0))
                }
            else if ("LineString" === i.type)
                for (var G = 0, Y = i.geometry; G < Y.length; G += 1) {
                    var K = Y[G];
                    L(K, new t.Anchor(K[0].x,K[0].y,0))
                }
            else if ("Point" === i.type)
                for (var J = 0, Q = i.geometry; J < Q.length; J += 1)
                    for (var tt = 0, et = Q[J]; tt < et.length; tt += 1) {
                        var it = et[tt];
                        L([it], new t.Anchor(it.x,it.y,0))
                    }
        }
        x.murmur3 = b,
        x.murmur2 = w;
        var A = 65535;
        function k(e, i, r, n, o, a, s, l, u, c, p, h) {
            var d = function(e, i, r, n, o, a) {
                for (var s = r.layout.get("text-rotate").evaluate(o, {}) * Math.PI / 180, l = r.layout.get("text-offset").evaluate(o, {}).map(function(t) {
                    return 24 * t
                }), u = i.positionedGlyphs, c = [], p = 0; p < u.length; p++) {
                    var h = u[p]
                      , d = a[h.fontStack]
                      , f = d && d[h.glyph];
                    if (f) {
                        var m = f.rect;
                        if (m) {
                            var y = t.GLYPH_PBF_BORDER + 1
                              , g = f.metrics.advance * h.scale / 2
                              , _ = n ? [h.x + g, h.y] : [0, 0]
                              , v = n ? [0, 0] : [h.x + g + l[0], h.y + l[1]]
                              , x = (f.metrics.left - y) * h.scale - g + v[0]
                              , b = (-f.metrics.top - y) * h.scale + v[1]
                              , w = x + m.w * h.scale
                              , T = b + m.h * h.scale
                              , S = new t.Point(x,b)
                              , A = new t.Point(w,b)
                              , k = new t.Point(x,T)
                              , E = new t.Point(w,T);
                            if (n && h.vertical) {
                                var C = new t.Point(-g,g)
                                  , P = -Math.PI / 2
                                  , M = new t.Point(5,0);
                                S._rotateAround(P, C)._add(M),
                                A._rotateAround(P, C)._add(M),
                                k._rotateAround(P, C)._add(M),
                                E._rotateAround(P, C)._add(M)
                            }
                            if (s) {
                                var I = Math.sin(s)
                                  , z = Math.cos(s)
                                  , L = [z, -I, I, z];
                                S._matMult(L),
                                A._matMult(L),
                                k._matMult(L),
                                E._matMult(L)
                            }
                            c.push({
                                tl: S,
                                tr: A,
                                bl: k,
                                br: E,
                                tex: m,
                                writingMode: i.writingMode,
                                glyphOffset: _
                            })
                        }
                    }
                }
                return c
            }(0, r, n, o, a, p)
              , f = e.textSizeData
              , m = null;
            return "source" === f.functionType ? (m = [t.SIZE_PACK_FACTOR * n.layout.get("text-size").evaluate(a, {})])[0] > A && t.warnOnce(e.layerIds[0] + ': Value for "text-size" is >= 256. Reduce your "text-size".') : "composite" === f.functionType && ((m = [t.SIZE_PACK_FACTOR * h.compositeTextSizes[0].evaluate(a, {}), t.SIZE_PACK_FACTOR * h.compositeTextSizes[1].evaluate(a, {})])[0] > A || m[1] > A) && t.warnOnce(e.layerIds[0] + ': Value for "text-size" is >= 256. Reduce your "text-size".'),
            e.addSymbols(e.text, d, m, s, o, a, u, i, l.lineStartIndex, l.lineLength),
            c.push(e.text.placedSymbolArray.length - 1),
            4 * d.length
        }
        function E(t, e, i, r) {
            var n = t.compareText;
            if (e in n) {
                for (var o = n[e], a = o.length - 1; a >= 0; a--)
                    if (r.dist(o[a]) < i)
                        return !0
            } else
                n[e] = [];
            return n[e].push(r),
            !1
        }
        var C = function(e) {
            var i = {}
              , r = [];
            for (var n in e) {
                var o = e[n]
                  , a = i[n] = {};
                for (var s in o) {
                    var l = o[+s];
                    if (l && 0 !== l.bitmap.width && 0 !== l.bitmap.height) {
                        var u = {
                            x: 0,
                            y: 0,
                            w: l.bitmap.width + 2,
                            h: l.bitmap.height + 2
                        };
                        r.push(u),
                        a[s] = {
                            rect: u,
                            metrics: l.metrics
                        }
                    }
                }
            }
            var c = t.potpack(r)
              , p = c.w
              , h = c.h
              , d = new t.AlphaImage({
                width: p || 1,
                height: h || 1
            });
            for (var f in e) {
                var m = e[f];
                for (var y in m) {
                    var g = m[+y];
                    if (g && 0 !== g.bitmap.width && 0 !== g.bitmap.height) {
                        var _ = i[f][y].rect;
                        t.AlphaImage.copy(g.bitmap, d, {
                            x: 0,
                            y: 0
                        }, {
                            x: _.x + 1,
                            y: _.y + 1
                        }, g.bitmap)
                    }
                }
            }
            this.image = d,
            this.positions = i
        };
        t.register("GlyphAtlas", C);
        var P = function(e) {
            this.tileID = new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),
            this.uid = e.uid,
            this.zoom = e.zoom,
            this.pixelRatio = e.pixelRatio,
            this.tileSize = e.tileSize,
            this.source = e.source,
            this.overscaling = this.tileID.overscaleFactor(),
            this.showCollisionBoxes = e.showCollisionBoxes,
            this.collectResourceTiming = !!e.collectResourceTiming,
            this.returnDependencies = !!e.returnDependencies
        };
        function M(e, i) {
            for (var r = new t.EvaluationParameters(i), n = 0, o = e; n < o.length; n += 1)
                o[n].recalculate(r)
        }
        P.prototype.parse = function(e, i, r, n) {
            var o = this;
            this.status = "parsing",
            this.data = e,
            this.collisionBoxArray = new t.CollisionBoxArray;
            var a = new t.DictionaryCoder(Object.keys(e.layers).sort())
              , s = new t.FeatureIndex(this.tileID);
            s.bucketLayerIDs = [];
            var l, u, c, p, h = {}, d = {
                featureIndex: s,
                iconDependencies: {},
                patternDependencies: {},
                glyphDependencies: {}
            }, f = i.familiesBySource[this.source];
            for (var m in f) {
                var y = e.layers[m];
                if (y) {
                    1 === y.version && t.warnOnce('Vector tile source "' + o.source + '" layer "' + m + '" does not use vector tile spec v2 and therefore may have some rendering errors.');
                    for (var g = a.encode(m), _ = [], v = 0; v < y.length; v++) {
                        var x = y.feature(v);
                        _.push({
                            feature: x,
                            index: v,
                            sourceLayerIndex: g
                        })
                    }
                    for (var b = 0, w = f[m]; b < w.length; b += 1) {
                        var S = w[b]
                          , A = S[0];
                        A.minzoom && o.zoom < Math.floor(A.minzoom) || A.maxzoom && o.zoom >= A.maxzoom || "none" !== A.visibility && (M(S, o.zoom),
                        (h[A.id] = A.createBucket({
                            index: s.bucketLayerIDs.length,
                            layers: S,
                            zoom: o.zoom,
                            pixelRatio: o.pixelRatio,
                            overscaling: o.overscaling,
                            collisionBoxArray: o.collisionBoxArray,
                            sourceLayerIndex: g,
                            sourceID: o.source
                        })).populate(_, d),
                        s.bucketLayerIDs.push(S.map(function(t) {
                            return t.id
                        })))
                    }
                }
            }
            var k = t.mapObject(d.glyphDependencies, function(t) {
                return Object.keys(t).map(Number)
            });
            Object.keys(k).length ? r.send("getGlyphs", {
                uid: this.uid,
                stacks: k
            }, function(t, e) {
                l || (l = t,
                u = e,
                I.call(o))
            }) : u = {};
            var E = Object.keys(d.iconDependencies);
            E.length ? r.send("getImages", {
                icons: E
            }, function(t, e) {
                l || (l = t,
                c = e,
                I.call(o))
            }) : c = {};
            var P = Object.keys(d.patternDependencies);
            function I() {
                if (l)
                    return n(l);
                if (u && c && p) {
                    var e = new C(u)
                      , i = new t.ImageAtlas(c,p);
                    for (var r in h) {
                        var o = h[r];
                        o instanceof t.SymbolBucket ? (M(o.layers, this.zoom),
                        T(o, u, e.positions, c, i.iconPositions, this.showCollisionBoxes)) : o.hasPattern && (o instanceof t.LineBucket || o instanceof t.FillBucket || o instanceof t.FillExtrusionBucket) && (M(o.layers, this.zoom),
                        o.addFeatures(d, i.patternPositions))
                    }
                    this.status = "done",
                    n(null, {
                        buckets: t.values(h).filter(function(t) {
                            return !t.isEmpty()
                        }),
                        featureIndex: s,
                        collisionBoxArray: this.collisionBoxArray,
                        glyphAtlasImage: e.image,
                        imageAtlas: i,
                        glyphMap: this.returnDependencies ? u : null,
                        iconMap: this.returnDependencies ? c : null,
                        glyphPositions: this.returnDependencies ? e.positions : null
                    })
                }
            }
            P.length ? r.send("getImages", {
                icons: P
            }, function(t, e) {
                l || (l = t,
                p = e,
                I.call(o))
            }) : p = {},
            I.call(this)
        }
        ;
        var I = "undefined" != typeof performance
          , z = {
            getEntriesByName: function(t) {
                return !!(I && performance && performance.getEntriesByName) && performance.getEntriesByName(t)
            },
            mark: function(t) {
                return !!(I && performance && performance.mark) && performance.mark(t)
            },
            measure: function(t, e, i) {
                return !!(I && performance && performance.measure) && performance.measure(t, e, i)
            },
            clearMarks: function(t) {
                return !!(I && performance && performance.clearMarks) && performance.clearMarks(t)
            },
            clearMeasures: function(t) {
                return !!(I && performance && performance.clearMeasures) && performance.clearMeasures(t)
            }
        }
          , L = function(t) {
            this._marks = {
                start: [t.url, "start"].join("#"),
                end: [t.url, "end"].join("#"),
                measure: t.url.toString()
            },
            z.mark(this._marks.start)
        };
        function D(e, i) {
            var r = t.getArrayBuffer(e.request, function(e, r, n, o) {
                e ? i(e) : r && i(null, {
                    vectorTile: new t.mvt.VectorTile(new t.Protobuf(r)),
                    rawData: r,
                    cacheControl: n,
                    expires: o
                })
            });
            return function() {
                r.cancel(),
                i()
            }
        }
        L.prototype.finish = function() {
            z.mark(this._marks.end);
            var t = z.getEntriesByName(this._marks.measure);
            return 0 === t.length && (z.measure(this._marks.measure, this._marks.start, this._marks.end),
            t = z.getEntriesByName(this._marks.measure),
            z.clearMarks(this._marks.start),
            z.clearMarks(this._marks.end),
            z.clearMeasures(this._marks.measure)),
            t
        }
        ,
        z.Performance = L;
        var O = function(t, e, i) {
            this.actor = t,
            this.layerIndex = e,
            this.loadVectorData = i || D,
            this.loading = {},
            this.loaded = {}
        };
        O.prototype.loadTile = function(e, i) {
            var r = this
              , n = e.uid;
            this.loading || (this.loading = {});
            var o = !!(e && e.request && e.request.collectResourceTiming) && new z.Performance(e.request)
              , a = this.loading[n] = new P(e);
            a.abort = this.loadVectorData(e, function(e, s) {
                if (delete r.loading[n],
                e || !s)
                    return a.status = "done",
                    r.loaded[n] = a,
                    i(e);
                var l = s.rawData
                  , u = {};
                s.expires && (u.expires = s.expires),
                s.cacheControl && (u.cacheControl = s.cacheControl);
                var c = {};
                if (o) {
                    var p = o.finish();
                    p && (c.resourceTiming = JSON.parse(JSON.stringify(p)))
                }
                a.vectorTile = s.vectorTile,
                a.parse(s.vectorTile, r.layerIndex, r.actor, function(e, r) {
                    if (e || !r)
                        return i(e);
                    i(null, t.extend({
                        rawTileData: l.slice(0)
                    }, r, u, c))
                }),
                r.loaded = r.loaded || {},
                r.loaded[n] = a
            })
        }
        ,
        O.prototype.reloadTile = function(t, e) {
            var i = this.loaded
              , r = t.uid
              , n = this;
            if (i && i[r]) {
                var o = i[r];
                o.showCollisionBoxes = t.showCollisionBoxes;
                var a = function(t, i) {
                    var r = o.reloadCallback;
                    r && (delete o.reloadCallback,
                    o.parse(o.vectorTile, n.layerIndex, n.actor, r)),
                    e(t, i)
                };
                "parsing" === o.status ? o.reloadCallback = a : "done" === o.status && (o.vectorTile ? o.parse(o.vectorTile, this.layerIndex, this.actor, a) : a())
            }
        }
        ,
        O.prototype.abortTile = function(t, e) {
            var i = this.loading
              , r = t.uid;
            i && i[r] && i[r].abort && (i[r].abort(),
            delete i[r]),
            e()
        }
        ,
        O.prototype.removeTile = function(t, e) {
            var i = this.loaded
              , r = t.uid;
            i && i[r] && delete i[r],
            e()
        }
        ;
        var R = function() {
            this.loaded = {}
        };
        R.prototype.loadTile = function(e, i) {
            var r = e.uid
              , n = e.encoding
              , o = e.rawImageData
              , a = new t.DEMData(r,o,n);
            this.loaded = this.loaded || {},
            this.loaded[r] = a,
            i(null, a)
        }
        ,
        R.prototype.removeTile = function(t) {
            var e = this.loaded
              , i = t.uid;
            e && e[i] && delete e[i]
        }
        ;
        var F = {
            RADIUS: 6378137,
            FLATTENING: 1 / 298.257223563,
            POLAR_RADIUS: 6356752.3142
        };
        function B(t) {
            var e = 0;
            if (t && t.length > 0) {
                e += Math.abs(N(t[0]));
                for (var i = 1; i < t.length; i++)
                    e -= Math.abs(N(t[i]))
            }
            return e
        }
        function N(t) {
            var e, i, r, n, o, a, s = 0, l = t.length;
            if (l > 2) {
                for (a = 0; a < l; a++)
                    a === l - 2 ? (r = l - 2,
                    n = l - 1,
                    o = 0) : a === l - 1 ? (r = l - 1,
                    n = 0,
                    o = 1) : (r = a,
                    n = a + 1,
                    o = a + 2),
                    e = t[r],
                    i = t[n],
                    s += (U(t[o][0]) - U(e[0])) * Math.sin(U(i[1]));
                s = s * F.RADIUS * F.RADIUS / 2
            }
            return s
        }
        function U(t) {
            return t * Math.PI / 180
        }
        var V = {
            geometry: function t(e) {
                var i, r = 0;
                switch (e.type) {
                case "Polygon":
                    return B(e.coordinates);
                case "MultiPolygon":
                    for (i = 0; i < e.coordinates.length; i++)
                        r += B(e.coordinates[i]);
                    return r;
                case "Point":
                case "MultiPoint":
                case "LineString":
                case "MultiLineString":
                    return 0;
                case "GeometryCollection":
                    for (i = 0; i < e.geometries.length; i++)
                        r += t(e.geometries[i]);
                    return r
                }
            },
            ring: N
        };
        function j(t, e) {
            return function(i) {
                return t(i, e)
            }
        }
        function $(t, e) {
            e = !!e,
            t[0] = q(t[0], e);
            for (var i = 1; i < t.length; i++)
                t[i] = q(t[i], !e);
            return t
        }
        function q(t, e) {
            return function(t) {
                return V.ring(t) >= 0
            }(t) === e ? t : t.reverse()
        }
        var W = t.mvt.VectorTileFeature.prototype.toGeoJSON
          , H = function(e) {
            this._feature = e,
            this.extent = t.EXTENT,
            this.type = e.type,
            this.properties = e.tags,
            "id"in e && !isNaN(e.id) && (this.id = parseInt(e.id, 10))
        };
        H.prototype.loadGeometry = function() {
            if (1 === this._feature.type) {
                for (var e = [], i = 0, r = this._feature.geometry; i < r.length; i += 1) {
                    var n = r[i];
                    e.push([new t.Point(n[0],n[1])])
                }
                return e
            }
            for (var o = [], a = 0, s = this._feature.geometry; a < s.length; a += 1) {
                for (var l = [], u = 0, c = s[a]; u < c.length; u += 1) {
                    var p = c[u];
                    l.push(new t.Point(p[0],p[1]))
                }
                o.push(l)
            }
            return o
        }
        ,
        H.prototype.toGeoJSON = function(t, e, i) {
            return W.call(this, t, e, i)
        }
        ;
        var X = function(e) {
            this.layers = {
                _geojsonTileLayer: this
            },
            this.name = "_geojsonTileLayer",
            this.extent = t.EXTENT,
            this.length = e.length,
            this._features = e
        };
        X.prototype.feature = function(t) {
            return new H(this._features[t])
        }
        ;
        var Z = t.vectorTile.VectorTileFeature
          , G = Y;
        function Y(t, e) {
            this.options = e || {},
            this.features = t,
            this.length = t.length
        }
        function K(t, e) {
            this.id = "number" == typeof t.id ? t.id : void 0,
            this.type = t.type,
            this.rawGeometry = 1 === t.type ? [t.geometry] : t.geometry,
            this.properties = t.tags,
            this.extent = e || 4096
        }
        Y.prototype.feature = function(t) {
            return new K(this.features[t],this.options.extent)
        }
        ,
        K.prototype.loadGeometry = function() {
            var e = this.rawGeometry;
            this.geometry = [];
            for (var i = 0; i < e.length; i++) {
                for (var r = e[i], n = [], o = 0; o < r.length; o++)
                    n.push(new t.Point$1(r[o][0],r[o][1]));
                this.geometry.push(n)
            }
            return this.geometry
        }
        ,
        K.prototype.bbox = function() {
            this.geometry || this.loadGeometry();
            for (var t = this.geometry, e = 1 / 0, i = -1 / 0, r = 1 / 0, n = -1 / 0, o = 0; o < t.length; o++)
                for (var a = t[o], s = 0; s < a.length; s++) {
                    var l = a[s];
                    e = Math.min(e, l.x),
                    i = Math.max(i, l.x),
                    r = Math.min(r, l.y),
                    n = Math.max(n, l.y)
                }
            return [e, r, i, n]
        }
        ,
        K.prototype.toGeoJSON = Z.prototype.toGeoJSON;
        var J = et
          , Q = et
          , tt = G;
        function et(e) {
            var i = new t.pbf;
            return function(t, e) {
                for (var i in t.layers)
                    e.writeMessage(3, it, t.layers[i])
            }(e, i),
            i.finish()
        }
        function it(t, e) {
            var i;
            e.writeVarintField(15, t.version || 1),
            e.writeStringField(1, t.name || ""),
            e.writeVarintField(5, t.extent || 4096);
            var r = {
                keys: [],
                values: [],
                keycache: {},
                valuecache: {}
            };
            for (i = 0; i < t.length; i++)
                r.feature = t.feature(i),
                e.writeMessage(2, rt, r);
            var n = r.keys;
            for (i = 0; i < n.length; i++)
                e.writeStringField(3, n[i]);
            var o = r.values;
            for (i = 0; i < o.length; i++)
                e.writeMessage(4, lt, o[i])
        }
        function rt(t, e) {
            var i = t.feature;
            void 0 !== i.id && e.writeVarintField(1, i.id),
            e.writeMessage(2, nt, t),
            e.writeVarintField(3, i.type),
            e.writeMessage(4, st, i)
        }
        function nt(t, e) {
            var i = t.feature
              , r = t.keys
              , n = t.values
              , o = t.keycache
              , a = t.valuecache;
            for (var s in i.properties) {
                var l = o[s];
                void 0 === l && (r.push(s),
                l = r.length - 1,
                o[s] = l),
                e.writeVarint(l);
                var u = i.properties[s]
                  , c = typeof u;
                "string" !== c && "boolean" !== c && "number" !== c && (u = JSON.stringify(u));
                var p = c + ":" + u
                  , h = a[p];
                void 0 === h && (n.push(u),
                h = n.length - 1,
                a[p] = h),
                e.writeVarint(h)
            }
        }
        function ot(t, e) {
            return (e << 3) + (7 & t)
        }
        function at(t) {
            return t << 1 ^ t >> 31
        }
        function st(t, e) {
            for (var i = t.loadGeometry(), r = t.type, n = 0, o = 0, a = i.length, s = 0; s < a; s++) {
                var l = i[s]
                  , u = 1;
                1 === r && (u = l.length),
                e.writeVarint(ot(1, u));
                for (var c = 3 === r ? l.length - 1 : l.length, p = 0; p < c; p++) {
                    1 === p && 1 !== r && e.writeVarint(ot(2, c - 1));
                    var h = l[p].x - n
                      , d = l[p].y - o;
                    e.writeVarint(at(h)),
                    e.writeVarint(at(d)),
                    n += h,
                    o += d
                }
                3 === r && e.writeVarint(ot(7, 0))
            }
        }
        function lt(t, e) {
            var i = typeof t;
            "string" === i ? e.writeStringField(1, t) : "boolean" === i ? e.writeBooleanField(7, t) : "number" === i && (t % 1 != 0 ? e.writeDoubleField(3, t) : t < 0 ? e.writeSVarintField(6, t) : e.writeVarintField(5, t))
        }
        function ut(t, e, i, r) {
            ct(t, i, r),
            ct(e, 2 * i, 2 * r),
            ct(e, 2 * i + 1, 2 * r + 1)
        }
        function ct(t, e, i) {
            var r = t[e];
            t[e] = t[i],
            t[i] = r
        }
        function pt(t, e, i, r) {
            var n = t - i
              , o = e - r;
            return n * n + o * o
        }
        function ht(t, e, i, r, n) {
            return new dt(t,e,i,r,n)
        }
        function dt(t, e, i, r, n) {
            e = e || ft,
            i = i || mt,
            n = n || Array,
            this.nodeSize = r || 64,
            this.points = t,
            this.ids = new n(t.length),
            this.coords = new n(2 * t.length);
            for (var o = 0; o < t.length; o++)
                this.ids[o] = o,
                this.coords[2 * o] = e(t[o]),
                this.coords[2 * o + 1] = i(t[o]);
            !function t(e, i, r, n, o, a) {
                if (!(o - n <= r)) {
                    var s = Math.floor((n + o) / 2);
                    !function t(e, i, r, n, o, a) {
                        for (; o > n; ) {
                            if (o - n > 600) {
                                var s = o - n + 1
                                  , l = r - n + 1
                                  , u = Math.log(s)
                                  , c = .5 * Math.exp(2 * u / 3)
                                  , p = .5 * Math.sqrt(u * c * (s - c) / s) * (l - s / 2 < 0 ? -1 : 1);
                                t(e, i, r, Math.max(n, Math.floor(r - l * c / s + p)), Math.min(o, Math.floor(r + (s - l) * c / s + p)), a)
                            }
                            var h = i[2 * r + a]
                              , d = n
                              , f = o;
                            for (ut(e, i, n, r),
                            i[2 * o + a] > h && ut(e, i, n, o); d < f; ) {
                                for (ut(e, i, d, f),
                                d++,
                                f--; i[2 * d + a] < h; )
                                    d++;
                                for (; i[2 * f + a] > h; )
                                    f--
                            }
                            i[2 * n + a] === h ? ut(e, i, n, f) : ut(e, i, ++f, o),
                            f <= r && (n = f + 1),
                            r <= f && (o = f - 1)
                        }
                    }(e, i, s, n, o, a % 2),
                    t(e, i, r, n, s - 1, a + 1),
                    t(e, i, r, s + 1, o, a + 1)
                }
            }(this.ids, this.coords, this.nodeSize, 0, this.ids.length - 1, 0)
        }
        function ft(t) {
            return t[0]
        }
        function mt(t) {
            return t[1]
        }
        function yt(t) {
            this.options = wt(Object.create(this.options), t),
            this.trees = new Array(this.options.maxZoom + 1)
        }
        function gt(t, e, i, r, n) {
            return {
                x: t,
                y: e,
                zoom: 1 / 0,
                id: i,
                parentId: -1,
                numPoints: r,
                properties: n
            }
        }
        function _t(t) {
            return {
                type: "Feature",
                id: t.id,
                properties: vt(t),
                geometry: {
                    type: "Point",
                    coordinates: [(r = t.x,
                    360 * (r - .5)), (e = t.y,
                    i = (180 - 360 * e) * Math.PI / 180,
                    360 * Math.atan(Math.exp(i)) / Math.PI - 90)]
                }
            };
            var e, i, r
        }
        function vt(t) {
            var e = t.numPoints
              , i = e >= 1e4 ? Math.round(e / 1e3) + "k" : e >= 1e3 ? Math.round(e / 100) / 10 + "k" : e;
            return wt(wt({}, t.properties), {
                cluster: !0,
                cluster_id: t.id,
                point_count: e,
                point_count_abbreviated: i
            })
        }
        function xt(t) {
            return t / 360 + .5
        }
        function bt(t) {
            var e = Math.sin(t * Math.PI / 180)
              , i = .5 - .25 * Math.log((1 + e) / (1 - e)) / Math.PI;
            return i < 0 ? 0 : i > 1 ? 1 : i
        }
        function wt(t, e) {
            for (var i in e)
                t[i] = e[i];
            return t
        }
        function Tt(t) {
            return t.x
        }
        function St(t) {
            return t.y
        }
        function At(t, e, i, r, n, o) {
            var a = n - i
              , s = o - r;
            if (0 !== a || 0 !== s) {
                var l = ((t - i) * a + (e - r) * s) / (a * a + s * s);
                l > 1 ? (i = n,
                r = o) : l > 0 && (i += a * l,
                r += s * l)
            }
            return (a = t - i) * a + (s = e - r) * s
        }
        function kt(t, e, i, r) {
            var n = {
                id: void 0 === t ? null : t,
                type: e,
                geometry: i,
                tags: r,
                minX: 1 / 0,
                minY: 1 / 0,
                maxX: -1 / 0,
                maxY: -1 / 0
            };
            return function(t) {
                var e = t.geometry
                  , i = t.type;
                if ("Point" === i || "MultiPoint" === i || "LineString" === i)
                    Et(t, e);
                else if ("Polygon" === i || "MultiLineString" === i)
                    for (var r = 0; r < e.length; r++)
                        Et(t, e[r]);
                else if ("MultiPolygon" === i)
                    for (r = 0; r < e.length; r++)
                        for (var n = 0; n < e[r].length; n++)
                            Et(t, e[r][n])
            }(n),
            n
        }
        function Et(t, e) {
            for (var i = 0; i < e.length; i += 3)
                t.minX = Math.min(t.minX, e[i]),
                t.minY = Math.min(t.minY, e[i + 1]),
                t.maxX = Math.max(t.maxX, e[i]),
                t.maxY = Math.max(t.maxY, e[i + 1])
        }
        function Ct(t, e, i, r) {
            if (e.geometry) {
                var n = e.geometry.coordinates
                  , o = e.geometry.type
                  , a = Math.pow(i.tolerance / ((1 << i.maxZoom) * i.extent), 2)
                  , s = []
                  , l = e.id;
                if (i.promoteId ? l = e.properties[i.promoteId] : i.generateId && (l = r || 0),
                "Point" === o)
                    Pt(n, s);
                else if ("MultiPoint" === o)
                    for (var u = 0; u < n.length; u++)
                        Pt(n[u], s);
                else if ("LineString" === o)
                    Mt(n, s, a, !1);
                else if ("MultiLineString" === o) {
                    if (i.lineMetrics) {
                        for (u = 0; u < n.length; u++)
                            s = [],
                            Mt(n[u], s, a, !1),
                            t.push(kt(l, "LineString", s, e.properties));
                        return
                    }
                    It(n, s, a, !1)
                } else if ("Polygon" === o)
                    It(n, s, a, !0);
                else {
                    if ("MultiPolygon" !== o) {
                        if ("GeometryCollection" === o) {
                            for (u = 0; u < e.geometry.geometries.length; u++)
                                Ct(t, {
                                    id: l,
                                    geometry: e.geometry.geometries[u],
                                    properties: e.properties
                                }, i, r);
                            return
                        }
                        throw new Error("Input data is not a valid GeoJSON object.")
                    }
                    for (u = 0; u < n.length; u++) {
                        var c = [];
                        It(n[u], c, a, !0),
                        s.push(c)
                    }
                }
                t.push(kt(l, o, s, e.properties))
            }
        }
        function Pt(t, e) {
            e.push(zt(t[0])),
            e.push(Lt(t[1])),
            e.push(0)
        }
        function Mt(t, e, i, r) {
            for (var n, o, a = 0, s = 0; s < t.length; s++) {
                var l = zt(t[s][0])
                  , u = Lt(t[s][1]);
                e.push(l),
                e.push(u),
                e.push(0),
                s > 0 && (a += r ? (n * u - l * o) / 2 : Math.sqrt(Math.pow(l - n, 2) + Math.pow(u - o, 2))),
                n = l,
                o = u
            }
            var c = e.length - 3;
            e[2] = 1,
            function t(e, i, r, n) {
                for (var o, a = n, s = r - i >> 1, l = r - i, u = e[i], c = e[i + 1], p = e[r], h = e[r + 1], d = i + 3; d < r; d += 3) {
                    var f = At(e[d], e[d + 1], u, c, p, h);
                    if (f > a)
                        o = d,
                        a = f;
                    else if (f === a) {
                        var m = Math.abs(d - s);
                        m < l && (o = d,
                        l = m)
                    }
                }
                a > n && (o - i > 3 && t(e, i, o, n),
                e[o + 2] = a,
                r - o > 3 && t(e, o, r, n))
            }(e, 0, c, i),
            e[c + 2] = 1,
            e.size = Math.abs(a),
            e.start = 0,
            e.end = e.size
        }
        function It(t, e, i, r) {
            for (var n = 0; n < t.length; n++) {
                var o = [];
                Mt(t[n], o, i, r),
                e.push(o)
            }
        }
        function zt(t) {
            return t / 360 + .5
        }
        function Lt(t) {
            var e = Math.sin(t * Math.PI / 180)
              , i = .5 - .25 * Math.log((1 + e) / (1 - e)) / Math.PI;
            return i < 0 ? 0 : i > 1 ? 1 : i
        }
        function Dt(t, e, i, r, n, o, a, s) {
            if (r /= e,
            o >= (i /= e) && a < r)
                return t;
            if (a < i || o >= r)
                return null;
            for (var l = [], u = 0; u < t.length; u++) {
                var c = t[u]
                  , p = c.geometry
                  , h = c.type
                  , d = 0 === n ? c.minX : c.minY
                  , f = 0 === n ? c.maxX : c.maxY;
                if (d >= i && f < r)
                    l.push(c);
                else if (!(f < i || d >= r)) {
                    var m = [];
                    if ("Point" === h || "MultiPoint" === h)
                        Ot(p, m, i, r, n);
                    else if ("LineString" === h)
                        Rt(p, m, i, r, n, !1, s.lineMetrics);
                    else if ("MultiLineString" === h)
                        Bt(p, m, i, r, n, !1);
                    else if ("Polygon" === h)
                        Bt(p, m, i, r, n, !0);
                    else if ("MultiPolygon" === h)
                        for (var y = 0; y < p.length; y++) {
                            var g = [];
                            Bt(p[y], g, i, r, n, !0),
                            g.length && m.push(g)
                        }
                    if (m.length) {
                        if (s.lineMetrics && "LineString" === h) {
                            for (y = 0; y < m.length; y++)
                                l.push(kt(c.id, h, m[y], c.tags));
                            continue
                        }
                        "LineString" !== h && "MultiLineString" !== h || (1 === m.length ? (h = "LineString",
                        m = m[0]) : h = "MultiLineString"),
                        "Point" !== h && "MultiPoint" !== h || (h = 3 === m.length ? "Point" : "MultiPoint"),
                        l.push(kt(c.id, h, m, c.tags))
                    }
                }
            }
            return l.length ? l : null
        }
        function Ot(t, e, i, r, n) {
            for (var o = 0; o < t.length; o += 3) {
                var a = t[o + n];
                a >= i && a <= r && (e.push(t[o]),
                e.push(t[o + 1]),
                e.push(t[o + 2]))
            }
        }
        function Rt(t, e, i, r, n, o, a) {
            for (var s, l, u = Ft(t), c = 0 === n ? Ut : Vt, p = t.start, h = 0; h < t.length - 3; h += 3) {
                var d = t[h]
                  , f = t[h + 1]
                  , m = t[h + 2]
                  , y = t[h + 3]
                  , g = t[h + 4]
                  , _ = 0 === n ? d : f
                  , v = 0 === n ? y : g
                  , x = !1;
                a && (s = Math.sqrt(Math.pow(d - y, 2) + Math.pow(f - g, 2))),
                _ < i ? v > i && (l = c(u, d, f, y, g, i),
                a && (u.start = p + s * l)) : _ > r ? v < r && (l = c(u, d, f, y, g, r),
                a && (u.start = p + s * l)) : Nt(u, d, f, m),
                v < i && _ >= i && (l = c(u, d, f, y, g, i),
                x = !0),
                v > r && _ <= r && (l = c(u, d, f, y, g, r),
                x = !0),
                !o && x && (a && (u.end = p + s * l),
                e.push(u),
                u = Ft(t)),
                a && (p += s)
            }
            var b = t.length - 3;
            d = t[b],
            f = t[b + 1],
            m = t[b + 2],
            (_ = 0 === n ? d : f) >= i && _ <= r && Nt(u, d, f, m),
            b = u.length - 3,
            o && b >= 3 && (u[b] !== u[0] || u[b + 1] !== u[1]) && Nt(u, u[0], u[1], u[2]),
            u.length && e.push(u)
        }
        function Ft(t) {
            var e = [];
            return e.size = t.size,
            e.start = t.start,
            e.end = t.end,
            e
        }
        function Bt(t, e, i, r, n, o) {
            for (var a = 0; a < t.length; a++)
                Rt(t[a], e, i, r, n, o, !1)
        }
        function Nt(t, e, i, r) {
            t.push(e),
            t.push(i),
            t.push(r)
        }
        function Ut(t, e, i, r, n, o) {
            var a = (o - e) / (r - e);
            return t.push(o),
            t.push(i + (n - i) * a),
            t.push(1),
            a
        }
        function Vt(t, e, i, r, n, o) {
            var a = (o - i) / (n - i);
            return t.push(e + (r - e) * a),
            t.push(o),
            t.push(1),
            a
        }
        function jt(t, e) {
            for (var i = [], r = 0; r < t.length; r++) {
                var n, o = t[r], a = o.type;
                if ("Point" === a || "MultiPoint" === a || "LineString" === a)
                    n = $t(o.geometry, e);
                else if ("MultiLineString" === a || "Polygon" === a) {
                    n = [];
                    for (var s = 0; s < o.geometry.length; s++)
                        n.push($t(o.geometry[s], e))
                } else if ("MultiPolygon" === a)
                    for (n = [],
                    s = 0; s < o.geometry.length; s++) {
                        for (var l = [], u = 0; u < o.geometry[s].length; u++)
                            l.push($t(o.geometry[s][u], e));
                        n.push(l)
                    }
                i.push(kt(o.id, a, n, o.tags))
            }
            return i
        }
        function $t(t, e) {
            var i = [];
            i.size = t.size,
            void 0 !== t.start && (i.start = t.start,
            i.end = t.end);
            for (var r = 0; r < t.length; r += 3)
                i.push(t[r] + e, t[r + 1], t[r + 2]);
            return i
        }
        function qt(t, e) {
            if (t.transformed)
                return t;
            var i, r, n, o = 1 << t.z, a = t.x, s = t.y;
            for (i = 0; i < t.features.length; i++) {
                var l = t.features[i]
                  , u = l.geometry
                  , c = l.type;
                if (l.geometry = [],
                1 === c)
                    for (r = 0; r < u.length; r += 2)
                        l.geometry.push(Wt(u[r], u[r + 1], e, o, a, s));
                else
                    for (r = 0; r < u.length; r++) {
                        var p = [];
                        for (n = 0; n < u[r].length; n += 2)
                            p.push(Wt(u[r][n], u[r][n + 1], e, o, a, s));
                        l.geometry.push(p)
                    }
            }
            return t.transformed = !0,
            t
        }
        function Wt(t, e, i, r, n, o) {
            return [Math.round(i * (t * r - n)), Math.round(i * (e * r - o))]
        }
        function Ht(t, e, i, r, n) {
            for (var o = e === n.maxZoom ? 0 : n.tolerance / ((1 << e) * n.extent), a = {
                features: [],
                numPoints: 0,
                numSimplified: 0,
                numFeatures: 0,
                source: null,
                x: i,
                y: r,
                z: e,
                transformed: !1,
                minX: 2,
                minY: 1,
                maxX: -1,
                maxY: 0
            }, s = 0; s < t.length; s++) {
                a.numFeatures++,
                Xt(a, t[s], o, n);
                var l = t[s].minX
                  , u = t[s].minY
                  , c = t[s].maxX
                  , p = t[s].maxY;
                l < a.minX && (a.minX = l),
                u < a.minY && (a.minY = u),
                c > a.maxX && (a.maxX = c),
                p > a.maxY && (a.maxY = p)
            }
            return a
        }
        function Xt(t, e, i, r) {
            var n = e.geometry
              , o = e.type
              , a = [];
            if ("Point" === o || "MultiPoint" === o)
                for (var s = 0; s < n.length; s += 3)
                    a.push(n[s]),
                    a.push(n[s + 1]),
                    t.numPoints++,
                    t.numSimplified++;
            else if ("LineString" === o)
                Zt(a, n, t, i, !1, !1);
            else if ("MultiLineString" === o || "Polygon" === o)
                for (s = 0; s < n.length; s++)
                    Zt(a, n[s], t, i, "Polygon" === o, 0 === s);
            else if ("MultiPolygon" === o)
                for (var l = 0; l < n.length; l++) {
                    var u = n[l];
                    for (s = 0; s < u.length; s++)
                        Zt(a, u[s], t, i, !0, 0 === s)
                }
            if (a.length) {
                var c = e.tags || null;
                if ("LineString" === o && r.lineMetrics) {
                    for (var p in c = {},
                    e.tags)
                        c[p] = e.tags[p];
                    c.mapbox_clip_start = n.start / n.size,
                    c.mapbox_clip_end = n.end / n.size
                }
                var h = {
                    geometry: a,
                    type: "Polygon" === o || "MultiPolygon" === o ? 3 : "LineString" === o || "MultiLineString" === o ? 2 : 1,
                    tags: c
                };
                null !== e.id && (h.id = e.id),
                t.features.push(h)
            }
        }
        function Zt(t, e, i, r, n, o) {
            var a = r * r;
            if (r > 0 && e.size < (n ? a : r))
                i.numPoints += e.length / 3;
            else {
                for (var s = [], l = 0; l < e.length; l += 3)
                    (0 === r || e[l + 2] > a) && (i.numSimplified++,
                    s.push(e[l]),
                    s.push(e[l + 1])),
                    i.numPoints++;
                n && function(t, e) {
                    for (var i = 0, r = 0, n = t.length, o = n - 2; r < n; o = r,
                    r += 2)
                        i += (t[r] - t[o]) * (t[r + 1] + t[o + 1]);
                    if (i > 0 === e)
                        for (r = 0,
                        n = t.length; r < n / 2; r += 2) {
                            var a = t[r]
                              , s = t[r + 1];
                            t[r] = t[n - 2 - r],
                            t[r + 1] = t[n - 1 - r],
                            t[n - 2 - r] = a,
                            t[n - 1 - r] = s
                        }
                }(s, o),
                t.push(s)
            }
        }
        function Gt(t, e) {
            var i = (e = this.options = function(t, e) {
                for (var i in e)
                    t[i] = e[i];
                return t
            }(Object.create(this.options), e)).debug;
            if (i && console.time("preprocess data"),
            e.maxZoom < 0 || e.maxZoom > 24)
                throw new Error("maxZoom should be in the 0-24 range");
            if (e.promoteId && e.generateId)
                throw new Error("promoteId and generateId cannot be used together.");
            var r = function(t, e) {
                var i = [];
                if ("FeatureCollection" === t.type)
                    for (var r = 0; r < t.features.length; r++)
                        Ct(i, t.features[r], e, r);
                else
                    "Feature" === t.type ? Ct(i, t, e) : Ct(i, {
                        geometry: t
                    }, e);
                return i
            }(t, e);
            this.tiles = {},
            this.tileCoords = [],
            i && (console.timeEnd("preprocess data"),
            console.log("index: maxZoom: %d, maxPoints: %d", e.indexMaxZoom, e.indexMaxPoints),
            console.time("generate tiles"),
            this.stats = {},
            this.total = 0),
            (r = function(t, e) {
                var i = e.buffer / e.extent
                  , r = t
                  , n = Dt(t, 1, -1 - i, i, 0, -1, 2, e)
                  , o = Dt(t, 1, 1 - i, 2 + i, 0, -1, 2, e);
                return (n || o) && (r = Dt(t, 1, -i, 1 + i, 0, -1, 2, e) || [],
                n && (r = jt(n, 1).concat(r)),
                o && (r = r.concat(jt(o, -1)))),
                r
            }(r, e)).length && this.splitTile(r, 0, 0, 0),
            i && (r.length && console.log("features: %d, points: %d", this.tiles[0].numFeatures, this.tiles[0].numPoints),
            console.timeEnd("generate tiles"),
            console.log("tiles generated:", this.total, JSON.stringify(this.stats)))
        }
        function Yt(t, e, i) {
            return 32 * ((1 << t) * i + e) + t
        }
        function Kt(t, e) {
            var i = t.tileID.canonical;
            if (!this._geoJSONIndex)
                return e(null, null);
            var r = this._geoJSONIndex.getTile(i.z, i.x, i.y);
            if (!r)
                return e(null, null);
            var n = new X(r.features)
              , o = J(n);
            0 === o.byteOffset && o.byteLength === o.buffer.byteLength || (o = new Uint8Array(o)),
            e(null, {
                vectorTile: n,
                rawData: o.buffer
            })
        }
        J.fromVectorTileJs = Q,
        J.fromGeojsonVt = function(t, e) {
            e = e || {};
            var i = {};
            for (var r in t)
                i[r] = new G(t[r].features,e),
                i[r].name = r,
                i[r].version = e.version,
                i[r].extent = e.extent;
            return et({
                layers: i
            })
        }
        ,
        J.GeoJSONWrapper = tt,
        dt.prototype = {
            range: function(t, e, i, r) {
                return function(t, e, i, r, n, o, a) {
                    for (var s, l, u = [0, t.length - 1, 0], c = []; u.length; ) {
                        var p = u.pop()
                          , h = u.pop()
                          , d = u.pop();
                        if (h - d <= a)
                            for (var f = d; f <= h; f++)
                                s = e[2 * f],
                                l = e[2 * f + 1],
                                s >= i && s <= n && l >= r && l <= o && c.push(t[f]);
                        else {
                            var m = Math.floor((d + h) / 2);
                            s = e[2 * m],
                            l = e[2 * m + 1],
                            s >= i && s <= n && l >= r && l <= o && c.push(t[m]);
                            var y = (p + 1) % 2;
                            (0 === p ? i <= s : r <= l) && (u.push(d),
                            u.push(m - 1),
                            u.push(y)),
                            (0 === p ? n >= s : o >= l) && (u.push(m + 1),
                            u.push(h),
                            u.push(y))
                        }
                    }
                    return c
                }(this.ids, this.coords, t, e, i, r, this.nodeSize)
            },
            within: function(t, e, i) {
                return function(t, e, i, r, n, o) {
                    for (var a = [0, t.length - 1, 0], s = [], l = n * n; a.length; ) {
                        var u = a.pop()
                          , c = a.pop()
                          , p = a.pop();
                        if (c - p <= o)
                            for (var h = p; h <= c; h++)
                                pt(e[2 * h], e[2 * h + 1], i, r) <= l && s.push(t[h]);
                        else {
                            var d = Math.floor((p + c) / 2)
                              , f = e[2 * d]
                              , m = e[2 * d + 1];
                            pt(f, m, i, r) <= l && s.push(t[d]);
                            var y = (u + 1) % 2;
                            (0 === u ? i - n <= f : r - n <= m) && (a.push(p),
                            a.push(d - 1),
                            a.push(y)),
                            (0 === u ? i + n >= f : r + n >= m) && (a.push(d + 1),
                            a.push(c),
                            a.push(y))
                        }
                    }
                    return s
                }(this.ids, this.coords, t, e, i, this.nodeSize)
            }
        },
        yt.prototype = {
            options: {
                minZoom: 0,
                maxZoom: 16,
                radius: 40,
                extent: 512,
                nodeSize: 64,
                log: !1,
                reduce: null,
                initial: function() {
                    return {}
                },
                map: function(t) {
                    return t
                }
            },
            load: function(t) {
                var e = this.options.log;
                e && console.time("total time");
                var i = "prepare " + t.length + " points";
                e && console.time(i),
                this.points = t;
                for (var r, n, o = [], a = 0; a < t.length; a++)
                    t[a].geometry && o.push((r = a,
                    {
                        x: xt((n = t[a].geometry.coordinates)[0]),
                        y: bt(n[1]),
                        zoom: 1 / 0,
                        index: r,
                        parentId: -1
                    }));
                this.trees[this.options.maxZoom + 1] = ht(o, Tt, St, this.options.nodeSize, Float32Array),
                e && console.timeEnd(i);
                for (var s = this.options.maxZoom; s >= this.options.minZoom; s--) {
                    var l = +Date.now();
                    o = this._cluster(o, s),
                    this.trees[s] = ht(o, Tt, St, this.options.nodeSize, Float32Array),
                    e && console.log("z%d: %d clusters in %dms", s, o.length, +Date.now() - l)
                }
                return e && console.timeEnd("total time"),
                this
            },
            getClusters: function(t, e) {
                var i = ((t[0] + 180) % 360 + 360) % 360 - 180
                  , r = Math.max(-90, Math.min(90, t[1]))
                  , n = 180 === t[2] ? 180 : ((t[2] + 180) % 360 + 360) % 360 - 180
                  , o = Math.max(-90, Math.min(90, t[3]));
                if (t[2] - t[0] >= 360)
                    i = -180,
                    n = 180;
                else if (i > n) {
                    var a = this.getClusters([i, r, 180, o], e)
                      , s = this.getClusters([-180, r, n, o], e);
                    return a.concat(s)
                }
                for (var l = this.trees[this._limitZoom(e)], u = l.range(xt(i), bt(o), xt(n), bt(r)), c = [], p = 0; p < u.length; p++) {
                    var h = l.points[u[p]];
                    c.push(h.numPoints ? _t(h) : this.points[h.index])
                }
                return c
            },
            getChildren: function(t) {
                var e = t >> 5
                  , i = t % 32
                  , r = "No cluster with the specified id."
                  , n = this.trees[i];
                if (!n)
                    throw new Error(r);
                var o = n.points[e];
                if (!o)
                    throw new Error(r);
                for (var a = this.options.radius / (this.options.extent * Math.pow(2, i - 1)), s = n.within(o.x, o.y, a), l = [], u = 0; u < s.length; u++) {
                    var c = n.points[s[u]];
                    c.parentId === t && l.push(c.numPoints ? _t(c) : this.points[c.index])
                }
                if (0 === l.length)
                    throw new Error(r);
                return l
            },
            getLeaves: function(t, e, i) {
                e = e || 10,
                i = i || 0;
                var r = [];
                return this._appendLeaves(r, t, e, i, 0),
                r
            },
            getTile: function(t, e, i) {
                var r = this.trees[this._limitZoom(t)]
                  , n = Math.pow(2, t)
                  , o = this.options.extent
                  , a = this.options.radius / o
                  , s = (i - a) / n
                  , l = (i + 1 + a) / n
                  , u = {
                    features: []
                };
                return this._addTileFeatures(r.range((e - a) / n, s, (e + 1 + a) / n, l), r.points, e, i, n, u),
                0 === e && this._addTileFeatures(r.range(1 - a / n, s, 1, l), r.points, n, i, n, u),
                e === n - 1 && this._addTileFeatures(r.range(0, s, a / n, l), r.points, -1, i, n, u),
                u.features.length ? u : null
            },
            getClusterExpansionZoom: function(t) {
                for (var e = t % 32 - 1; e < this.options.maxZoom; ) {
                    var i = this.getChildren(t);
                    if (e++,
                    1 !== i.length)
                        break;
                    t = i[0].properties.cluster_id
                }
                return e
            },
            _appendLeaves: function(t, e, i, r, n) {
                for (var o = this.getChildren(e), a = 0; a < o.length; a++) {
                    var s = o[a].properties;
                    if (s && s.cluster ? n + s.point_count <= r ? n += s.point_count : n = this._appendLeaves(t, s.cluster_id, i, r, n) : n < r ? n++ : t.push(o[a]),
                    t.length === i)
                        break
                }
                return n
            },
            _addTileFeatures: function(t, e, i, r, n, o) {
                for (var a = 0; a < t.length; a++) {
                    var s = e[t[a]]
                      , l = {
                        type: 1,
                        geometry: [[Math.round(this.options.extent * (s.x * n - i)), Math.round(this.options.extent * (s.y * n - r))]],
                        tags: s.numPoints ? vt(s) : this.points[s.index].properties
                    }
                      , u = s.numPoints ? s.id : this.points[s.index].id;
                    void 0 !== u && (l.id = u),
                    o.features.push(l)
                }
            },
            _limitZoom: function(t) {
                return Math.max(this.options.minZoom, Math.min(t, this.options.maxZoom + 1))
            },
            _cluster: function(t, e) {
                for (var i = [], r = this.options.radius / (this.options.extent * Math.pow(2, e)), n = 0; n < t.length; n++) {
                    var o = t[n];
                    if (!(o.zoom <= e)) {
                        o.zoom = e;
                        var a = this.trees[e + 1]
                          , s = a.within(o.x, o.y, r)
                          , l = o.numPoints || 1
                          , u = o.x * l
                          , c = o.y * l
                          , p = null;
                        this.options.reduce && (p = this.options.initial(),
                        this._accumulate(p, o));
                        for (var h = (n << 5) + (e + 1), d = 0; d < s.length; d++) {
                            var f = a.points[s[d]];
                            if (!(f.zoom <= e)) {
                                f.zoom = e;
                                var m = f.numPoints || 1;
                                u += f.x * m,
                                c += f.y * m,
                                l += m,
                                f.parentId = h,
                                this.options.reduce && this._accumulate(p, f)
                            }
                        }
                        1 === l ? i.push(o) : (o.parentId = h,
                        i.push(gt(u / l, c / l, h, l, p)))
                    }
                }
                return i
            },
            _accumulate: function(t, e) {
                var i = e.numPoints ? e.properties : this.options.map(this.points[e.index].properties);
                this.options.reduce(t, i)
            }
        },
        Gt.prototype.options = {
            maxZoom: 14,
            indexMaxZoom: 5,
            indexMaxPoints: 1e5,
            tolerance: 3,
            extent: 4096,
            buffer: 64,
            lineMetrics: !1,
            promoteId: null,
            generateId: !1,
            debug: 0
        },
        Gt.prototype.splitTile = function(t, e, i, r, n, o, a) {
            for (var s = [t, e, i, r], l = this.options, u = l.debug; s.length; ) {
                r = s.pop(),
                i = s.pop(),
                e = s.pop(),
                t = s.pop();
                var c = 1 << e
                  , p = Yt(e, i, r)
                  , h = this.tiles[p];
                if (!h && (u > 1 && console.time("creation"),
                h = this.tiles[p] = Ht(t, e, i, r, l),
                this.tileCoords.push({
                    z: e,
                    x: i,
                    y: r
                }),
                u)) {
                    u > 1 && (console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)", e, i, r, h.numFeatures, h.numPoints, h.numSimplified),
                    console.timeEnd("creation"));
                    var d = "z" + e;
                    this.stats[d] = (this.stats[d] || 0) + 1,
                    this.total++
                }
                if (h.source = t,
                n) {
                    if (e === l.maxZoom || e === n)
                        continue;
                    var f = 1 << n - e;
                    if (i !== Math.floor(o / f) || r !== Math.floor(a / f))
                        continue
                } else if (e === l.indexMaxZoom || h.numPoints <= l.indexMaxPoints)
                    continue;
                if (h.source = null,
                0 !== t.length) {
                    u > 1 && console.time("clipping");
                    var m, y, g, _, v, x, b = .5 * l.buffer / l.extent, w = .5 - b, T = .5 + b, S = 1 + b;
                    m = y = g = _ = null,
                    v = Dt(t, c, i - b, i + T, 0, h.minX, h.maxX, l),
                    x = Dt(t, c, i + w, i + S, 0, h.minX, h.maxX, l),
                    t = null,
                    v && (m = Dt(v, c, r - b, r + T, 1, h.minY, h.maxY, l),
                    y = Dt(v, c, r + w, r + S, 1, h.minY, h.maxY, l),
                    v = null),
                    x && (g = Dt(x, c, r - b, r + T, 1, h.minY, h.maxY, l),
                    _ = Dt(x, c, r + w, r + S, 1, h.minY, h.maxY, l),
                    x = null),
                    u > 1 && console.timeEnd("clipping"),
                    s.push(m || [], e + 1, 2 * i, 2 * r),
                    s.push(y || [], e + 1, 2 * i, 2 * r + 1),
                    s.push(g || [], e + 1, 2 * i + 1, 2 * r),
                    s.push(_ || [], e + 1, 2 * i + 1, 2 * r + 1)
                }
            }
        }
        ,
        Gt.prototype.getTile = function(t, e, i) {
            var r = this.options
              , n = r.extent
              , o = r.debug;
            if (t < 0 || t > 24)
                return null;
            var a = 1 << t
              , s = Yt(t, e = (e % a + a) % a, i);
            if (this.tiles[s])
                return qt(this.tiles[s], n);
            o > 1 && console.log("drilling down to z%d-%d-%d", t, e, i);
            for (var l, u = t, c = e, p = i; !l && u > 0; )
                u--,
                c = Math.floor(c / 2),
                p = Math.floor(p / 2),
                l = this.tiles[Yt(u, c, p)];
            return l && l.source ? (o > 1 && console.log("found parent tile z%d-%d-%d", u, c, p),
            o > 1 && console.time("drilling down"),
            this.splitTile(l.source, u, c, p, t, e, i),
            o > 1 && console.timeEnd("drilling down"),
            this.tiles[s] ? qt(this.tiles[s], n) : null) : null
        }
        ;
        var Jt = function(e) {
            function i(t, i, r) {
                e.call(this, t, i, Kt),
                r && (this.loadGeoJSON = r)
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.loadData = function(t, e) {
                this._pendingCallback && this._pendingCallback(null, {
                    abandoned: !0
                }),
                this._pendingCallback = e,
                this._pendingLoadDataParams = t,
                this._state && "Idle" !== this._state ? this._state = "NeedsLoadData" : (this._state = "Coalescing",
                this._loadData())
            }
            ,
            i.prototype._loadData = function() {
                var t = this;
                if (this._pendingCallback && this._pendingLoadDataParams) {
                    var e = this._pendingCallback
                      , i = this._pendingLoadDataParams;
                    delete this._pendingCallback,
                    delete this._pendingLoadDataParams;
                    var r = !!(i && i.request && i.request.collectResourceTiming) && new z.Performance(i.request);
                    this.loadGeoJSON(i, function(n, o) {
                        if (n || !o)
                            return e(n);
                        if ("object" != typeof o)
                            return e(new Error("Input data is not a valid GeoJSON object."));
                        !function t(e, i) {
                            switch (e && e.type || null) {
                            case "FeatureCollection":
                                return e.features = e.features.map(j(t, i)),
                                e;
                            case "Feature":
                                return e.geometry = t(e.geometry, i),
                                e;
                            case "Polygon":
                            case "MultiPolygon":
                                return function(t, e) {
                                    return "Polygon" === t.type ? t.coordinates = $(t.coordinates, e) : "MultiPolygon" === t.type && (t.coordinates = t.coordinates.map(j($, e))),
                                    t
                                }(e, i);
                            default:
                                return e
                            }
                        }(o, !0);
                        try {
                            t._geoJSONIndex = i.cluster ? (a = i.superclusterOptions,
                            new yt(a)).load(o.features) : new Gt(o,i.geojsonVtOptions)
                        } catch (n) {
                            return e(n)
                        }
                        t.loaded = {};
                        var a, s = {};
                        if (r) {
                            var l = r.finish();
                            l && (s.resourceTiming = {},
                            s.resourceTiming[i.source] = JSON.parse(JSON.stringify(l)))
                        }
                        e(null, s)
                    })
                }
            }
            ,
            i.prototype.coalesce = function() {
                "Coalescing" === this._state ? this._state = "Idle" : "NeedsLoadData" === this._state && (this._state = "Coalescing",
                this._loadData())
            }
            ,
            i.prototype.reloadTile = function(t, i) {
                var r = this.loaded
                  , n = t.uid;
                return r && r[n] ? e.prototype.reloadTile.call(this, t, i) : this.loadTile(t, i)
            }
            ,
            i.prototype.loadGeoJSON = function(e, i) {
                if (e.request)
                    t.getJSON(e.request, i);
                else {
                    if ("string" != typeof e.data)
                        return i(new Error("Input data is not a valid GeoJSON object."));
                    try {
                        return i(null, JSON.parse(e.data))
                    } catch (t) {
                        return i(new Error("Input data is not a valid GeoJSON object."))
                    }
                }
            }
            ,
            i.prototype.removeSource = function(t, e) {
                this._pendingCallback && this._pendingCallback(null, {
                    abandoned: !0
                }),
                e()
            }
            ,
            i.prototype.getClusterExpansionZoom = function(t, e) {
                e(null, this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))
            }
            ,
            i.prototype.getClusterChildren = function(t, e) {
                e(null, this._geoJSONIndex.getChildren(t.clusterId))
            }
            ,
            i.prototype.getClusterLeaves = function(t, e) {
                e(null, this._geoJSONIndex.getLeaves(t.clusterId, t.limit, t.offset))
            }
            ,
            i
        }(O)
          , Qt = function(e) {
            var i = this;
            this.self = e,
            this.actor = new t.Actor(e,this),
            this.layerIndexes = {},
            this.workerSourceTypes = {
                vector: O,
                geojson: Jt
            },
            this.workerSources = {},
            this.demWorkerSources = {},
            this.self.registerWorkerSource = function(t, e) {
                if (i.workerSourceTypes[t])
                    throw new Error('Worker source with name "' + t + '" already registered.');
                i.workerSourceTypes[t] = e
            }
            ,
            this.self.registerRTLTextPlugin = function(e) {
                if (t.plugin.isLoaded())
                    throw new Error("RTL text plugin already registered.");
                t.plugin.applyArabicShaping = e.applyArabicShaping,
                t.plugin.processBidirectionalText = e.processBidirectionalText,
                t.plugin.processStyledBidirectionalText = e.processStyledBidirectionalText
            }
        };
        return Qt.prototype.setReferrer = function(t, e) {
            this.referrer = e
        }
        ,
        Qt.prototype.setLayers = function(t, e, i) {
            this.getLayerIndex(t).replace(e),
            i()
        }
        ,
        Qt.prototype.updateLayers = function(t, e, i) {
            this.getLayerIndex(t).update(e.layers, e.removedIds),
            i()
        }
        ,
        Qt.prototype.loadTile = function(t, e, i) {
            this.getWorkerSource(t, e.type, e.source).loadTile(e, i)
        }
        ,
        Qt.prototype.loadDEMTile = function(t, e, i) {
            this.getDEMWorkerSource(t, e.source).loadTile(e, i)
        }
        ,
        Qt.prototype.reloadTile = function(t, e, i) {
            this.getWorkerSource(t, e.type, e.source).reloadTile(e, i)
        }
        ,
        Qt.prototype.abortTile = function(t, e, i) {
            this.getWorkerSource(t, e.type, e.source).abortTile(e, i)
        }
        ,
        Qt.prototype.removeTile = function(t, e, i) {
            this.getWorkerSource(t, e.type, e.source).removeTile(e, i)
        }
        ,
        Qt.prototype.removeDEMTile = function(t, e) {
            this.getDEMWorkerSource(t, e.source).removeTile(e)
        }
        ,
        Qt.prototype.removeSource = function(t, e, i) {
            if (this.workerSources[t] && this.workerSources[t][e.type] && this.workerSources[t][e.type][e.source]) {
                var r = this.workerSources[t][e.type][e.source];
                delete this.workerSources[t][e.type][e.source],
                void 0 !== r.removeSource ? r.removeSource(e, i) : i()
            }
        }
        ,
        Qt.prototype.loadWorkerSource = function(t, e, i) {
            try {
                this.self.importScripts(e.url),
                i()
            } catch (t) {
                i(t.toString())
            }
        }
        ,
        Qt.prototype.loadRTLTextPlugin = function(e, i, r) {
            try {
                t.plugin.isLoaded() || (this.self.importScripts(i),
                r(t.plugin.isLoaded() ? null : new Error("RTL Text Plugin failed to import scripts from " + i)))
            } catch (t) {
                r(t.toString())
            }
        }
        ,
        Qt.prototype.getLayerIndex = function(t) {
            var e = this.layerIndexes[t];
            return e || (e = this.layerIndexes[t] = new r),
            e
        }
        ,
        Qt.prototype.getWorkerSource = function(t, e, i) {
            var r = this;
            if (this.workerSources[t] || (this.workerSources[t] = {}),
            this.workerSources[t][e] || (this.workerSources[t][e] = {}),
            !this.workerSources[t][e][i]) {
                var n = {
                    send: function(e, i, n) {
                        r.actor.send(e, i, n, t)
                    }
                };
                this.workerSources[t][e][i] = new this.workerSourceTypes[e](n,this.getLayerIndex(t))
            }
            return this.workerSources[t][e][i]
        }
        ,
        Qt.prototype.getDEMWorkerSource = function(t, e) {
            return this.demWorkerSources[t] || (this.demWorkerSources[t] = {}),
            this.demWorkerSources[t][e] || (this.demWorkerSources[t][e] = new R),
            this.demWorkerSources[t][e]
        }
        ,
        "undefined" != typeof WorkerGlobalScope && "undefined" != typeof self && self instanceof WorkerGlobalScope && (self.worker = new Qt(self)),
        Qt
    }),
    r(0, function(t) {
        var e = t.createCommonjsModule(function(t) {
            function e(t) {
                return !!("undefined" != typeof window && "undefined" != typeof document && Array.prototype && Array.prototype.every && Array.prototype.filter && Array.prototype.forEach && Array.prototype.indexOf && Array.prototype.lastIndexOf && Array.prototype.map && Array.prototype.some && Array.prototype.reduce && Array.prototype.reduceRight && Array.isArray && Function.prototype && Function.prototype.bind && Object.keys && Object.create && Object.getPrototypeOf && Object.getOwnPropertyNames && Object.isSealed && Object.isFrozen && Object.isExtensible && Object.getOwnPropertyDescriptor && Object.defineProperty && Object.defineProperties && Object.seal && Object.freeze && Object.preventExtensions && "JSON"in window && "parse"in JSON && "stringify"in JSON && function() {
                    if (!("Worker"in window && "Blob"in window && "URL"in window))
                        return !1;
                    var t, e, i = new Blob([""],{
                        type: "text/javascript"
                    }), r = URL.createObjectURL(i);
                    try {
                        e = new Worker(r),
                        t = !0
                    } catch (e) {
                        t = !1
                    }
                    return e && e.terminate(),
                    URL.revokeObjectURL(r),
                    t
                }() && "Uint8ClampedArray"in window && ArrayBuffer.isView && function(t) {
                    return void 0 === i[t] && (i[t] = function(t) {
                        var i = document.createElement("canvas")
                          , r = Object.create(e.webGLContextAttributes);
                        return r.failIfMajorPerformanceCaveat = t,
                        i.probablySupportsContext ? i.probablySupportsContext("webgl", r) || i.probablySupportsContext("experimental-webgl", r) : i.supportsContext ? i.supportsContext("webgl", r) || i.supportsContext("experimental-webgl", r) : i.getContext("webgl", r) || i.getContext("experimental-webgl", r)
                    }(t)),
                    i[t]
                }(t && t.failIfMajorPerformanceCaveat))
            }
            t.exports ? t.exports = e : window && (window.mapboxgl = window.mapboxgl || {},
            window.mapboxgl.supported = e);
            var i = {};
            e.webGLContextAttributes = {
                antialias: !1,
                alpha: !0,
                stencil: !0,
                depth: !0
            }
        })
          , i = {
            create: function(e, i, r) {
                var n = t.window.document.createElement(e);
                return i && (n.className = i),
                r && r.appendChild(n),
                n
            },
            createNS: function(e, i) {
                return t.window.document.createElementNS(e, i)
            }
        }
          , r = t.window.document ? t.window.document.documentElement.style : null;
        function n(t) {
            if (!r)
                return null;
            for (var e = 0; e < t.length; e++)
                if (t[e]in r)
                    return t[e];
            return t[0]
        }
        var o, a = n(["userSelect", "MozUserSelect", "WebkitUserSelect", "msUserSelect"]);
        i.disableDrag = function() {
            r && a && (o = r[a],
            r[a] = "none")
        }
        ,
        i.enableDrag = function() {
            r && a && (r[a] = o)
        }
        ;
        var s = n(["transform", "WebkitTransform"]);
        i.setTransform = function(t, e) {
            t.style[s] = e
        }
        ;
        var l = !1;
        try {
            var u = Object.defineProperty({}, "passive", {
                get: function() {
                    l = !0
                }
            });
            t.window.addEventListener("test", u, u),
            t.window.removeEventListener("test", u, u)
        } catch (t) {
            l = !1
        }
        i.addEventListener = function(t, e, i, r) {
            void 0 === r && (r = {}),
            "passive"in r && l ? t.addEventListener(e, i, r) : t.addEventListener(e, i, r.capture)
        }
        ,
        i.removeEventListener = function(t, e, i, r) {
            void 0 === r && (r = {}),
            "passive"in r && l ? t.removeEventListener(e, i, r) : t.removeEventListener(e, i, r.capture)
        }
        ;
        var c = function(e) {
            e.preventDefault(),
            e.stopPropagation(),
            t.window.removeEventListener("click", c, !0)
        };
        i.suppressClick = function() {
            t.window.addEventListener("click", c, !0),
            t.window.setTimeout(function() {
                t.window.removeEventListener("click", c, !0)
            }, 0)
        }
        ,
        i.mousePos = function(e, i) {
            var r = e.getBoundingClientRect();
            return i = i.touches ? i.touches[0] : i,
            new t.Point(i.clientX - r.left - e.clientLeft,i.clientY - r.top - e.clientTop)
        }
        ,
        i.touchPos = function(e, i) {
            for (var r = e.getBoundingClientRect(), n = [], o = "touchend" === i.type ? i.changedTouches : i.touches, a = 0; a < o.length; a++)
                n.push(new t.Point(o[a].clientX - r.left - e.clientLeft,o[a].clientY - r.top - e.clientTop));
            return n
        }
        ,
        i.mouseButton = function(e) {
            return void 0 !== t.window.InstallTrigger && 2 === e.button && e.ctrlKey && t.window.navigator.platform.toUpperCase().indexOf("MAC") >= 0 ? 0 : e.button
        }
        ,
        i.remove = function(t) {
            t.parentNode && t.parentNode.removeChild(t)
        }
        ;
        var p = function() {
            this.images = {},
            this.loaded = !1,
            this.requestors = [],
            this.patterns = {},
            this.atlasImage = new t.RGBAImage({
                width: 1,
                height: 1
            }),
            this.dirty = !0
        };
        p.prototype.isLoaded = function() {
            return this.loaded
        }
        ,
        p.prototype.setLoaded = function(t) {
            if (this.loaded !== t && (this.loaded = t,
            t)) {
                for (var e = 0, i = this.requestors; e < i.length; e += 1) {
                    var r = i[e]
                      , n = r.ids
                      , o = r.callback;
                    this._notify(n, o)
                }
                this.requestors = []
            }
        }
        ,
        p.prototype.getImage = function(t) {
            return this.images[t]
        }
        ,
        p.prototype.addImage = function(t, e) {
            this.images[t] = e
        }
        ,
        p.prototype.removeImage = function(t) {
            delete this.images[t],
            delete this.patterns[t]
        }
        ,
        p.prototype.listImages = function() {
            return Object.keys(this.images)
        }
        ,
        p.prototype.getImages = function(t, e) {
            var i = !0;
            if (!this.isLoaded())
                for (var r = 0, n = t; r < n.length; r += 1) {
                    var o = n[r];
                    this.images[o] || (i = !1)
                }
            this.isLoaded() || i ? this._notify(t, e) : this.requestors.push({
                ids: t,
                callback: e
            })
        }
        ,
        p.prototype._notify = function(t, e) {
            for (var i = {}, r = 0, n = t; r < n.length; r += 1) {
                var o = n[r]
                  , a = this.images[o];
                a && (i[o] = {
                    data: a.data.clone(),
                    pixelRatio: a.pixelRatio,
                    sdf: a.sdf
                })
            }
            e(null, i)
        }
        ,
        p.prototype.getPixelSize = function() {
            var t = this.atlasImage;
            return {
                width: t.width,
                height: t.height
            }
        }
        ,
        p.prototype.getPattern = function(e) {
            var i = this.patterns[e];
            if (i)
                return i.position;
            var r = this.getImage(e);
            if (!r)
                return null;
            var n = {
                w: r.data.width + 2,
                h: r.data.height + 2,
                x: 0,
                y: 0
            }
              , o = new t.ImagePosition(n,r);
            return this.patterns[e] = {
                bin: n,
                position: o
            },
            this._updatePatternAtlas(),
            o
        }
        ,
        p.prototype.bind = function(e) {
            var i = e.gl;
            this.atlasTexture ? this.dirty && (this.atlasTexture.update(this.atlasImage),
            this.dirty = !1) : this.atlasTexture = new t.Texture(e,this.atlasImage,i.RGBA),
            this.atlasTexture.bind(i.LINEAR, i.CLAMP_TO_EDGE)
        }
        ,
        p.prototype._updatePatternAtlas = function() {
            var e = [];
            for (var i in this.patterns)
                e.push(this.patterns[i].bin);
            var r = t.potpack(e)
              , n = r.w
              , o = r.h
              , a = this.atlasImage;
            for (var s in a.resize({
                width: n || 1,
                height: o || 1
            }),
            this.patterns) {
                var l = this.patterns[s].bin
                  , u = l.x + 1
                  , c = l.y + 1
                  , p = this.images[s].data
                  , h = p.width
                  , d = p.height;
                t.RGBAImage.copy(p, a, {
                    x: 0,
                    y: 0
                }, {
                    x: u,
                    y: c
                }, {
                    width: h,
                    height: d
                }),
                t.RGBAImage.copy(p, a, {
                    x: 0,
                    y: d - 1
                }, {
                    x: u,
                    y: c - 1
                }, {
                    width: h,
                    height: 1
                }),
                t.RGBAImage.copy(p, a, {
                    x: 0,
                    y: 0
                }, {
                    x: u,
                    y: c + d
                }, {
                    width: h,
                    height: 1
                }),
                t.RGBAImage.copy(p, a, {
                    x: h - 1,
                    y: 0
                }, {
                    x: u - 1,
                    y: c
                }, {
                    width: 1,
                    height: d
                }),
                t.RGBAImage.copy(p, a, {
                    x: 0,
                    y: 0
                }, {
                    x: u + h,
                    y: c
                }, {
                    width: 1,
                    height: d
                })
            }
            this.dirty = !0
        }
        ;
        var h = f
          , d = 1e20;
        function f(t, e, i, r, n, o) {
            this.fontSize = t || 24,
            this.buffer = void 0 === e ? 3 : e,
            this.cutoff = r || .25,
            this.fontFamily = n || "sans-serif",
            this.fontWeight = o || "normal",
            this.radius = i || 8;
            var a = this.size = this.fontSize + 2 * this.buffer;
            this.canvas = document.createElement("canvas"),
            this.canvas.width = this.canvas.height = a,
            this.ctx = this.canvas.getContext("2d"),
            this.ctx.font = this.fontWeight + " " + this.fontSize + "px " + this.fontFamily,
            this.ctx.textBaseline = "middle",
            this.ctx.fillStyle = "black",
            this.gridOuter = new Float64Array(a * a),
            this.gridInner = new Float64Array(a * a),
            this.f = new Float64Array(a),
            this.d = new Float64Array(a),
            this.z = new Float64Array(a + 1),
            this.v = new Int16Array(a),
            this.middle = Math.round(a / 2 * (navigator.userAgent.indexOf("Gecko/") >= 0 ? 1.2 : 1))
        }
        function m(t, e, i, r, n, o, a) {
            for (var s = 0; s < e; s++) {
                for (var l = 0; l < i; l++)
                    r[l] = t[l * e + s];
                for (y(r, n, o, a, i),
                l = 0; l < i; l++)
                    t[l * e + s] = n[l]
            }
            for (l = 0; l < i; l++) {
                for (s = 0; s < e; s++)
                    r[s] = t[l * e + s];
                for (y(r, n, o, a, e),
                s = 0; s < e; s++)
                    t[l * e + s] = Math.sqrt(n[s])
            }
        }
        function y(t, e, i, r, n) {
            i[0] = 0,
            r[0] = -d,
            r[1] = +d;
            for (var o = 1, a = 0; o < n; o++) {
                for (var s = (t[o] + o * o - (t[i[a]] + i[a] * i[a])) / (2 * o - 2 * i[a]); s <= r[a]; )
                    a--,
                    s = (t[o] + o * o - (t[i[a]] + i[a] * i[a])) / (2 * o - 2 * i[a]);
                i[++a] = o,
                r[a] = s,
                r[a + 1] = +d
            }
            for (o = 0,
            a = 0; o < n; o++) {
                for (; r[a + 1] < o; )
                    a++;
                e[o] = (o - i[a]) * (o - i[a]) + t[i[a]]
            }
        }
        f.prototype.draw = function(t) {
            this.ctx.clearRect(0, 0, this.size, this.size),
            this.ctx.fillText(t, this.buffer, this.middle);
            for (var e = this.ctx.getImageData(0, 0, this.size, this.size), i = new Uint8ClampedArray(this.size * this.size), r = 0; r < this.size * this.size; r++) {
                var n = e.data[4 * r + 3] / 255;
                this.gridOuter[r] = 1 === n ? 0 : 0 === n ? d : Math.pow(Math.max(0, .5 - n), 2),
                this.gridInner[r] = 1 === n ? d : 0 === n ? 0 : Math.pow(Math.max(0, n - .5), 2)
            }
            for (m(this.gridOuter, this.size, this.size, this.f, this.d, this.v, this.z),
            m(this.gridInner, this.size, this.size, this.f, this.d, this.v, this.z),
            r = 0; r < this.size * this.size; r++) {
                var o = this.gridOuter[r] - this.gridInner[r];
                i[r] = Math.max(0, Math.min(255, Math.round(255 - 255 * (o / this.radius + this.cutoff))))
            }
            return i
        }
        ;
        var g = function(t, e) {
            this.requestTransform = t,
            this.localIdeographFontFamily = e,
            this.entries = {}
        };
        g.prototype.setURL = function(t) {
            this.url = t
        }
        ,
        g.prototype.getGlyphs = function(e, i) {
            var r = this
              , n = [];
            for (var o in e)
                for (var a = 0, s = e[o]; a < s.length; a += 1) {
                    var l = s[a];
                    n.push({
                        stack: o,
                        id: l
                    })
                }
            t.asyncAll(n, function(t, e) {
                var i = t.stack
                  , n = t.id
                  , o = r.entries[i];
                o || (o = r.entries[i] = {
                    glyphs: {},
                    requests: {}
                });
                var a = o.glyphs[n];
                if (void 0 === a)
                    if (a = r._tinySDF(o, i, n))
                        e(null, {
                            stack: i,
                            id: n,
                            glyph: a
                        });
                    else {
                        var s = Math.floor(n / 256);
                        if (256 * s > 65535)
                            e(new Error("glyphs > 65535 not supported"));
                        else {
                            var l = o.requests[s];
                            l || (l = o.requests[s] = [],
                            g.loadGlyphRange(i, s, r.url, r.requestTransform, function(t, e) {
                                if (e)
                                    for (var i in e)
                                        o.glyphs[+i] = e[+i];
                                for (var r = 0, n = l; r < n.length; r += 1)
                                    (0,
                                    n[r])(t, e);
                                delete o.requests[s]
                            })),
                            l.push(function(t, r) {
                                t ? e(t) : r && e(null, {
                                    stack: i,
                                    id: n,
                                    glyph: r[n] || null
                                })
                            })
                        }
                    }
                else
                    e(null, {
                        stack: i,
                        id: n,
                        glyph: a
                    })
            }, function(t, e) {
                if (t)
                    i(t);
                else if (e) {
                    for (var r = {}, n = 0, o = e; n < o.length; n += 1) {
                        var a = o[n]
                          , s = a.stack
                          , l = a.id
                          , u = a.glyph;
                        (r[s] || (r[s] = {}))[l] = u && {
                            id: u.id,
                            bitmap: u.bitmap.clone(),
                            metrics: u.metrics
                        }
                    }
                    i(null, r)
                }
            })
        }
        ,
        g.prototype._tinySDF = function(e, i, r) {
            var n = this.localIdeographFontFamily;
            if (n && (t.isChar["CJK Unified Ideographs"](r) || t.isChar["Hangul Syllables"](r))) {
                var o = e.tinySDF;
                if (!o) {
                    var a = "400";
                    /bold/i.test(i) ? a = "900" : /medium/i.test(i) ? a = "500" : /light/i.test(i) && (a = "200"),
                    o = e.tinySDF = new g.TinySDF(24,3,8,.25,n,a)
                }
                return {
                    id: r,
                    bitmap: new t.AlphaImage({
                        width: 30,
                        height: 30
                    },o.draw(String.fromCharCode(r))),
                    metrics: {
                        width: 24,
                        height: 24,
                        left: 0,
                        top: -8,
                        advance: 24
                    }
                }
            }
        }
        ,
        g.loadGlyphRange = function(e, i, r, n, o) {
            var a = 256 * i
              , s = a + 255
              , l = n(t.normalizeGlyphsURL(r).replace("{fontstack}", e).replace("{range}", a + "-" + s), t.ResourceType.Glyphs);
            t.getArrayBuffer(l, function(e, i) {
                if (e)
                    o(e);
                else if (i) {
                    for (var r = {}, n = 0, a = t.parseGlyphPBF(i); n < a.length; n += 1) {
                        var s = a[n];
                        r[s.id] = s
                    }
                    o(null, r)
                }
            })
        }
        ,
        g.TinySDF = h;
        var _ = function() {
            this.specification = t.styleSpec.light.position
        };
        _.prototype.possiblyEvaluate = function(e, i) {
            return t.sphericalToCartesian(e.expression.evaluate(i))
        }
        ,
        _.prototype.interpolate = function(e, i, r) {
            return {
                x: t.number(e.x, i.x, r),
                y: t.number(e.y, i.y, r),
                z: t.number(e.z, i.z, r)
            }
        }
        ;
        var v = new t.Properties({
            anchor: new t.DataConstantProperty(t.styleSpec.light.anchor),
            position: new _,
            color: new t.DataConstantProperty(t.styleSpec.light.color),
            intensity: new t.DataConstantProperty(t.styleSpec.light.intensity)
        })
          , x = function(e) {
            function i(i) {
                e.call(this),
                this._transitionable = new t.Transitionable(v),
                this.setLight(i),
                this._transitioning = this._transitionable.untransitioned()
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.getLight = function() {
                return this._transitionable.serialize()
            }
            ,
            i.prototype.setLight = function(e) {
                if (!this._validate(t.validateLight, e))
                    for (var i in e) {
                        var r = e[i];
                        t.endsWith(i, "-transition") ? this._transitionable.setTransition(i.slice(0, -"-transition".length), r) : this._transitionable.setValue(i, r)
                    }
            }
            ,
            i.prototype.updateTransitions = function(t) {
                this._transitioning = this._transitionable.transitioned(t, this._transitioning)
            }
            ,
            i.prototype.hasTransition = function() {
                return this._transitioning.hasTransition()
            }
            ,
            i.prototype.recalculate = function(t) {
                this.properties = this._transitioning.possiblyEvaluate(t)
            }
            ,
            i.prototype._validate = function(e, i) {
                return t.emitValidationErrors(this, e.call(t.validateStyle, t.extend({
                    value: i,
                    style: {
                        glyphs: !0,
                        sprite: !0
                    },
                    styleSpec: t.styleSpec
                })))
            }
            ,
            i
        }(t.Evented)
          , b = function(t, e) {
            this.width = t,
            this.height = e,
            this.nextRow = 0,
            this.bytes = 4,
            this.data = new Uint8Array(this.width * this.height * this.bytes),
            this.positions = {}
        };
        b.prototype.getDash = function(t, e) {
            var i = t.join(",") + String(e);
            return this.positions[i] || (this.positions[i] = this.addDash(t, e)),
            this.positions[i]
        }
        ,
        b.prototype.addDash = function(e, i) {
            var r = i ? 7 : 0
              , n = 2 * r + 1;
            if (this.nextRow + n > this.height)
                return t.warnOnce("LineAtlas out of space"),
                null;
            for (var o = 0, a = 0; a < e.length; a++)
                o += e[a];
            for (var s = this.width / o, l = s / 2, u = e.length % 2 == 1, c = -r; c <= r; c++)
                for (var p = this.nextRow + r + c, h = this.width * p, d = u ? -e[e.length - 1] : 0, f = e[0], m = 1, y = 0; y < this.width; y++) {
                    for (; f < y / s; )
                        d = f,
                        f += e[m],
                        u && m === e.length - 1 && (f += e[0]),
                        m++;
                    var g = Math.abs(y - d * s)
                      , _ = Math.abs(y - f * s)
                      , v = Math.min(g, _)
                      , x = m % 2 == 1
                      , b = void 0;
                    if (i) {
                        var w = r ? c / r * (l + 1) : 0;
                        if (x) {
                            var T = l - Math.abs(w);
                            b = Math.sqrt(v * v + T * T)
                        } else
                            b = l - Math.sqrt(v * v + w * w)
                    } else
                        b = (x ? 1 : -1) * v;
                    this.data[3 + 4 * (h + y)] = Math.max(0, Math.min(255, b + 128))
                }
            var S = {
                y: (this.nextRow + r + .5) / this.height,
                height: 2 * r / this.height,
                width: o
            };
            return this.nextRow += n,
            this.dirty = !0,
            S
        }
        ,
        b.prototype.bind = function(t) {
            var e = t.gl;
            this.texture ? (e.bindTexture(e.TEXTURE_2D, this.texture),
            this.dirty && (this.dirty = !1,
            e.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, this.width, this.height, e.RGBA, e.UNSIGNED_BYTE, this.data))) : (this.texture = e.createTexture(),
            e.bindTexture(e.TEXTURE_2D, this.texture),
            e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.REPEAT),
            e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.REPEAT),
            e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR),
            e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR),
            e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, this.width, this.height, 0, e.RGBA, e.UNSIGNED_BYTE, this.data))
        }
        ;
        var w = function e(i, r) {
            this.workerPool = i,
            this.actors = [],
            this.currentActor = 0,
            this.id = t.uniqueId();
            for (var n = this.workerPool.acquire(this.id), o = 0; o < n.length; o++) {
                var a = n[o]
                  , s = new e.Actor(a,r,this.id);
                s.name = "Worker " + o,
                this.actors.push(s)
            }
        };
        function T(e, i, r) {
            var n = function(e, i) {
                if (e)
                    return r(e);
                if (i) {
                    var n = t.pick(i, ["tiles", "minzoom", "maxzoom", "attribution", "mapbox_logo", "bounds"]);
                    i.vector_layers && (n.vectorLayers = i.vector_layers,
                    n.vectorLayerIds = n.vectorLayers.map(function(t) {
                        return t.id
                    })),
                    r(null, n)
                }
            };
            return e.url ? t.getJSON(i(t.normalizeSourceURL(e.url), t.ResourceType.Source), n) : t.browser.frame(function() {
                return n(null, e)
            })
        }
        w.prototype.broadcast = function(e, i, r) {
            r = r || function() {}
            ,
            t.asyncAll(this.actors, function(t, r) {
                t.send(e, i, r)
            }, r)
        }
        ,
        w.prototype.send = function(t, e, i, r) {
            return ("number" != typeof r || isNaN(r)) && (r = this.currentActor = (this.currentActor + 1) % this.actors.length),
            this.actors[r].send(t, e, i),
            r
        }
        ,
        w.prototype.remove = function() {
            this.actors.forEach(function(t) {
                t.remove()
            }),
            this.actors = [],
            this.workerPool.release(this.id)
        }
        ,
        w.Actor = t.Actor;
        var S = function(e, i, r) {
            this.bounds = t.LngLatBounds.convert(this.validateBounds(e)),
            this.minzoom = i || 0,
            this.maxzoom = r || 24
        };
        S.prototype.validateBounds = function(t) {
            return Array.isArray(t) && 4 === t.length ? [Math.max(-180, t[0]), Math.max(-90, t[1]), Math.min(180, t[2]), Math.min(90, t[3])] : [-180, -90, 180, 90]
        }
        ,
        S.prototype.contains = function(t) {
            var e = Math.floor(this.lngX(this.bounds.getWest(), t.z))
              , i = Math.floor(this.latY(this.bounds.getNorth(), t.z))
              , r = Math.ceil(this.lngX(this.bounds.getEast(), t.z))
              , n = Math.ceil(this.latY(this.bounds.getSouth(), t.z));
            return t.x >= e && t.x < r && t.y >= i && t.y < n
        }
        ,
        S.prototype.lngX = function(t, e) {
            return (t + 180) * (Math.pow(2, e) / 360)
        }
        ,
        S.prototype.latY = function(e, i) {
            var r = t.clamp(Math.sin(Math.PI / 180 * e), -.9999, .9999)
              , n = Math.pow(2, i) / (2 * Math.PI);
            return Math.pow(2, i - 1) + .5 * Math.log((1 + r) / (1 - r)) * -n
        }
        ;
        var A = function(e) {
            function i(i, r, n, o) {
                if (e.call(this),
                this.id = i,
                this.dispatcher = n,
                this.type = "vector",
                this.minzoom = 0,
                this.maxzoom = 22,
                this.scheme = "xyz",
                this.tileSize = 512,
                this.reparseOverscaled = !0,
                this.isTileClipped = !0,
                t.extend(this, t.pick(r, ["url", "scheme", "tileSize"])),
                this._options = t.extend({
                    type: "vector"
                }, r),
                this._collectResourceTiming = r.collectResourceTiming,
                512 !== this.tileSize)
                    throw new Error("vector tile sources must have a tileSize of 512");
                this.setEventedParent(o)
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.load = function() {
                var e = this;
                this.fire(new t.Event("dataloading",{
                    dataType: "source"
                })),
                this._tileJSONRequest = T(this._options, this.map._transformRequest, function(i, r) {
                    e._tileJSONRequest = null,
                    i ? e.fire(new t.ErrorEvent(i)) : r && (t.extend(e, r),
                    r.bounds && (e.tileBounds = new S(r.bounds,e.minzoom,e.maxzoom)),
                    t.postTurnstileEvent(r.tiles),
                    t.postMapLoadEvent(r.tiles, e.map._getMapId()),
                    e.fire(new t.Event("data",{
                        dataType: "source",
                        sourceDataType: "metadata"
                    })),
                    e.fire(new t.Event("data",{
                        dataType: "source",
                        sourceDataType: "content"
                    })))
                })
            }
            ,
            i.prototype.hasTile = function(t) {
                return !this.tileBounds || this.tileBounds.contains(t.canonical)
            }
            ,
            i.prototype.onAdd = function(t) {
                this.map = t,
                this.load()
            }
            ,
            i.prototype.onRemove = function() {
                this._tileJSONRequest && (this._tileJSONRequest.cancel(),
                this._tileJSONRequest = null)
            }
            ,
            i.prototype.serialize = function() {
                return t.extend({}, this._options)
            }
            ,
            i.prototype.loadTile = function(e, i) {
                var r = t.normalizeTileURL(e.tileID.canonical.url(this.tiles, this.scheme), this.url)
                  , n = {
                    request: this.map._transformRequest(r, t.ResourceType.Tile),
                    uid: e.uid,
                    tileID: e.tileID,
                    zoom: e.tileID.overscaledZ,
                    tileSize: this.tileSize * e.tileID.overscaleFactor(),
                    type: this.type,
                    source: this.id,
                    pixelRatio: t.browser.devicePixelRatio,
                    showCollisionBoxes: this.map.showCollisionBoxes
                };
                function o(t, r) {
                    return e.aborted ? i(null) : t && 404 !== t.status ? i(t) : (r && r.resourceTiming && (e.resourceTiming = r.resourceTiming),
                    this.map._refreshExpiredTiles && r && e.setExpiryData(r),
                    e.loadVectorData(r, this.map.painter),
                    i(null),
                    void (e.reloadCallback && (this.loadTile(e, e.reloadCallback),
                    e.reloadCallback = null)))
                }
                n.request.collectResourceTiming = this._collectResourceTiming,
                void 0 === e.workerID || "expired" === e.state ? e.workerID = this.dispatcher.send("loadTile", n, o.bind(this)) : "loading" === e.state ? e.reloadCallback = i : this.dispatcher.send("reloadTile", n, o.bind(this), e.workerID)
            }
            ,
            i.prototype.abortTile = function(t) {
                this.dispatcher.send("abortTile", {
                    uid: t.uid,
                    type: this.type,
                    source: this.id
                }, void 0, t.workerID)
            }
            ,
            i.prototype.unloadTile = function(t) {
                t.unloadVectorData(),
                this.dispatcher.send("removeTile", {
                    uid: t.uid,
                    type: this.type,
                    source: this.id
                }, void 0, t.workerID)
            }
            ,
            i.prototype.hasTransition = function() {
                return !1
            }
            ,
            i
        }(t.Evented)
          , k = function(e) {
            function i(i, r, n, o) {
                e.call(this),
                this.id = i,
                this.dispatcher = n,
                this.setEventedParent(o),
                this.type = "raster",
                this.minzoom = 0,
                this.maxzoom = 22,
                this.roundZoom = !0,
                this.scheme = "xyz",
                this.tileSize = 512,
                this._loaded = !1,
                this._options = t.extend({}, r),
                t.extend(this, t.pick(r, ["url", "scheme", "tileSize"]))
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.load = function() {
                var e = this;
                this.fire(new t.Event("dataloading",{
                    dataType: "source"
                })),
                this._tileJSONRequest = T(this._options, this.map._transformRequest, function(i, r) {
                    e._tileJSONRequest = null,
                    i ? e.fire(new t.ErrorEvent(i)) : r && (t.extend(e, r),
                    r.bounds && (e.tileBounds = new S(r.bounds,e.minzoom,e.maxzoom)),
                    t.postTurnstileEvent(r.tiles),
                    t.postMapLoadEvent(r.tiles, e.map._getMapId()),
                    e.fire(new t.Event("data",{
                        dataType: "source",
                        sourceDataType: "metadata"
                    })),
                    e.fire(new t.Event("data",{
                        dataType: "source",
                        sourceDataType: "content"
                    })))
                })
            }
            ,
            i.prototype.onAdd = function(t) {
                this.map = t,
                this.load()
            }
            ,
            i.prototype.onRemove = function() {
                this._tileJSONRequest && (this._tileJSONRequest.cancel(),
                this._tileJSONRequest = null)
            }
            ,
            i.prototype.serialize = function() {
                return t.extend({}, this._options)
            }
            ,
            i.prototype.hasTile = function(t) {
                return !this.tileBounds || this.tileBounds.contains(t.canonical)
            }
            ,
            i.prototype.loadTile = function(e, i) {
                var r = this
                  , n = t.normalizeTileURL(e.tileID.canonical.url(this.tiles, this.scheme), this.url, this.tileSize);
                e.request = t.getImage(this.map._transformRequest(n, t.ResourceType.Tile), function(n, o) {
                    if (delete e.request,
                    e.aborted)
                        e.state = "unloaded",
                        i(null);
                    else if (n)
                        e.state = "errored",
                        i(n);
                    else if (o) {
                        r.map._refreshExpiredTiles && e.setExpiryData(o),
                        delete o.cacheControl,
                        delete o.expires;
                        var a = r.map.painter.context
                          , s = a.gl;
                        e.texture = r.map.painter.getTileTexture(o.width),
                        e.texture ? e.texture.update(o, {
                            useMipmap: !0
                        }) : (e.texture = new t.Texture(a,o,s.RGBA,{
                            useMipmap: !0
                        }),
                        e.texture.bind(s.LINEAR, s.CLAMP_TO_EDGE, s.LINEAR_MIPMAP_NEAREST),
                        a.extTextureFilterAnisotropic && s.texParameterf(s.TEXTURE_2D, a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, a.extTextureFilterAnisotropicMax)),
                        e.state = "loaded",
                        i(null)
                    }
                })
            }
            ,
            i.prototype.abortTile = function(t, e) {
                t.request && (t.request.cancel(),
                delete t.request),
                e()
            }
            ,
            i.prototype.unloadTile = function(t, e) {
                t.texture && this.map.painter.saveTileTexture(t.texture),
                e()
            }
            ,
            i.prototype.hasTransition = function() {
                return !1
            }
            ,
            i
        }(t.Evented)
          , E = function(e) {
            function i(i, r, n, o) {
                e.call(this, i, r, n, o),
                this.type = "raster-dem",
                this.maxzoom = 22,
                this._options = t.extend({}, r),
                this.encoding = r.encoding || "mapbox"
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.serialize = function() {
                return {
                    type: "raster-dem",
                    url: this.url,
                    tileSize: this.tileSize,
                    tiles: this.tiles,
                    bounds: this.bounds,
                    encoding: this.encoding
                }
            }
            ,
            i.prototype.loadTile = function(e, i) {
                var r = t.normalizeTileURL(e.tileID.canonical.url(this.tiles, this.scheme), this.url, this.tileSize);
                e.request = t.getImage(this.map._transformRequest(r, t.ResourceType.Tile), function(r, n) {
                    if (delete e.request,
                    e.aborted)
                        e.state = "unloaded",
                        i(null);
                    else if (r)
                        e.state = "errored",
                        i(r);
                    else if (n) {
                        this.map._refreshExpiredTiles && e.setExpiryData(n),
                        delete n.cacheControl,
                        delete n.expires;
                        var o = t.browser.getImageData(n)
                          , a = {
                            uid: e.uid,
                            coord: e.tileID,
                            source: this.id,
                            rawImageData: o,
                            encoding: this.encoding
                        };
                        e.workerID && "expired" !== e.state || (e.workerID = this.dispatcher.send("loadDEMTile", a, function(t, r) {
                            t && (e.state = "errored",
                            i(t)),
                            r && (e.dem = r,
                            e.needsHillshadePrepare = !0,
                            e.state = "loaded",
                            i(null))
                        }
                        .bind(this)))
                    }
                }
                .bind(this)),
                e.neighboringTiles = this._getNeighboringTiles(e.tileID)
            }
            ,
            i.prototype._getNeighboringTiles = function(e) {
                var i = e.canonical
                  , r = Math.pow(2, i.z)
                  , n = (i.x - 1 + r) % r
                  , o = 0 === i.x ? e.wrap - 1 : e.wrap
                  , a = (i.x + 1 + r) % r
                  , s = i.x + 1 === r ? e.wrap + 1 : e.wrap
                  , l = {};
                return l[new t.OverscaledTileID(e.overscaledZ,o,i.z,n,i.y).key] = {
                    backfilled: !1
                },
                l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y).key] = {
                    backfilled: !1
                },
                i.y > 0 && (l[new t.OverscaledTileID(e.overscaledZ,o,i.z,n,i.y - 1).key] = {
                    backfilled: !1
                },
                l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y - 1).key] = {
                    backfilled: !1
                },
                l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y - 1).key] = {
                    backfilled: !1
                }),
                i.y + 1 < r && (l[new t.OverscaledTileID(e.overscaledZ,o,i.z,n,i.y + 1).key] = {
                    backfilled: !1
                },
                l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y + 1).key] = {
                    backfilled: !1
                },
                l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y + 1).key] = {
                    backfilled: !1
                }),
                l
            }
            ,
            i.prototype.unloadTile = function(t) {
                t.demTexture && this.map.painter.saveTileTexture(t.demTexture),
                t.fbo && (t.fbo.destroy(),
                delete t.fbo),
                t.dem && delete t.dem,
                delete t.neighboringTiles,
                t.state = "unloaded",
                this.dispatcher.send("removeDEMTile", {
                    uid: t.uid,
                    source: this.id
                }, void 0, t.workerID)
            }
            ,
            i
        }(k)
          , C = function(e) {
            function i(i, r, n, o) {
                e.call(this),
                this.id = i,
                this.type = "geojson",
                this.minzoom = 0,
                this.maxzoom = 18,
                this.tileSize = 512,
                this.isTileClipped = !0,
                this.reparseOverscaled = !0,
                this._removed = !1,
                this.dispatcher = n,
                this.setEventedParent(o),
                this._data = r.data,
                this._options = t.extend({}, r),
                this._collectResourceTiming = r.collectResourceTiming,
                this._resourceTiming = [],
                void 0 !== r.maxzoom && (this.maxzoom = r.maxzoom),
                r.type && (this.type = r.type),
                r.attribution && (this.attribution = r.attribution);
                var a = t.EXTENT / this.tileSize;
                this.workerOptions = t.extend({
                    source: this.id,
                    cluster: r.cluster || !1,
                    geojsonVtOptions: {
                        buffer: (void 0 !== r.buffer ? r.buffer : 128) * a,
                        tolerance: (void 0 !== r.tolerance ? r.tolerance : .375) * a,
                        extent: t.EXTENT,
                        maxZoom: this.maxzoom,
                        lineMetrics: r.lineMetrics || !1,
                        generateId: r.generateId || !1
                    },
                    superclusterOptions: {
                        maxZoom: void 0 !== r.clusterMaxZoom ? Math.min(r.clusterMaxZoom, this.maxzoom - 1) : this.maxzoom - 1,
                        extent: t.EXTENT,
                        radius: (r.clusterRadius || 50) * a,
                        log: !1
                    }
                }, r.workerOptions)
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.load = function() {
                var e = this;
                this.fire(new t.Event("dataloading",{
                    dataType: "source"
                })),
                this._updateWorkerData(function(i) {
                    if (i)
                        e.fire(new t.ErrorEvent(i));
                    else {
                        var r = {
                            dataType: "source",
                            sourceDataType: "metadata"
                        };
                        e._collectResourceTiming && e._resourceTiming && e._resourceTiming.length > 0 && (r.resourceTiming = e._resourceTiming,
                        e._resourceTiming = []),
                        e.fire(new t.Event("data",r))
                    }
                })
            }
            ,
            i.prototype.onAdd = function(t) {
                this.map = t,
                this.load()
            }
            ,
            i.prototype.setData = function(e) {
                var i = this;
                return this._data = e,
                this.fire(new t.Event("dataloading",{
                    dataType: "source"
                })),
                this._updateWorkerData(function(e) {
                    if (e)
                        i.fire(new t.ErrorEvent(e));
                    else {
                        var r = {
                            dataType: "source",
                            sourceDataType: "content"
                        };
                        i._collectResourceTiming && i._resourceTiming && i._resourceTiming.length > 0 && (r.resourceTiming = i._resourceTiming,
                        i._resourceTiming = []),
                        i.fire(new t.Event("data",r))
                    }
                }),
                this
            }
            ,
            i.prototype.getClusterExpansionZoom = function(t, e) {
                return this.dispatcher.send("geojson.getClusterExpansionZoom", {
                    clusterId: t,
                    source: this.id
                }, e, this.workerID),
                this
            }
            ,
            i.prototype.getClusterChildren = function(t, e) {
                return this.dispatcher.send("geojson.getClusterChildren", {
                    clusterId: t,
                    source: this.id
                }, e, this.workerID),
                this
            }
            ,
            i.prototype.getClusterLeaves = function(t, e, i, r) {
                return this.dispatcher.send("geojson.getClusterLeaves", {
                    source: this.id,
                    clusterId: t,
                    limit: e,
                    offset: i
                }, r, this.workerID),
                this
            }
            ,
            i.prototype._updateWorkerData = function(e) {
                var i = this
                  , r = t.extend({}, this.workerOptions)
                  , n = this._data;
                "string" == typeof n ? (r.request = this.map._transformRequest(t.browser.resolveURL(n), t.ResourceType.Source),
                r.request.collectResourceTiming = this._collectResourceTiming) : r.data = JSON.stringify(n),
                this.workerID = this.dispatcher.send(this.type + ".loadData", r, function(t, n) {
                    i._removed || n && n.abandoned || (i._loaded = !0,
                    n && n.resourceTiming && n.resourceTiming[i.id] && (i._resourceTiming = n.resourceTiming[i.id].slice(0)),
                    i.dispatcher.send(i.type + ".coalesce", {
                        source: r.source
                    }, null, i.workerID),
                    e(t))
                }, this.workerID)
            }
            ,
            i.prototype.loadTile = function(e, i) {
                var r = this
                  , n = void 0 === e.workerID ? "loadTile" : "reloadTile"
                  , o = {
                    type: this.type,
                    uid: e.uid,
                    tileID: e.tileID,
                    zoom: e.tileID.overscaledZ,
                    maxZoom: this.maxzoom,
                    tileSize: this.tileSize,
                    source: this.id,
                    pixelRatio: t.browser.devicePixelRatio,
                    showCollisionBoxes: this.map.showCollisionBoxes
                };
                e.workerID = this.dispatcher.send(n, o, function(t, o) {
                    return e.unloadVectorData(),
                    e.aborted ? i(null) : t ? i(t) : (e.loadVectorData(o, r.map.painter, "reloadTile" === n),
                    i(null))
                }, this.workerID)
            }
            ,
            i.prototype.abortTile = function(t) {
                t.aborted = !0
            }
            ,
            i.prototype.unloadTile = function(t) {
                t.unloadVectorData(),
                this.dispatcher.send("removeTile", {
                    uid: t.uid,
                    type: this.type,
                    source: this.id
                }, null, t.workerID)
            }
            ,
            i.prototype.onRemove = function() {
                this._removed = !0,
                this.dispatcher.send("removeSource", {
                    type: this.type,
                    source: this.id
                }, null, this.workerID)
            }
            ,
            i.prototype.serialize = function() {
                return t.extend({}, this._options, {
                    type: this.type,
                    data: this._data
                })
            }
            ,
            i.prototype.hasTransition = function() {
                return !1
            }
            ,
            i
        }(t.Evented)
          , P = function(e) {
            function i(t, i, r, n) {
                e.call(this),
                this.id = t,
                this.dispatcher = r,
                this.coordinates = i.coordinates,
                this.type = "image",
                this.minzoom = 0,
                this.maxzoom = 22,
                this.tileSize = 512,
                this.tiles = {},
                this.setEventedParent(n),
                this.options = i
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.load = function(e, i) {
                var r = this;
                this.fire(new t.Event("dataloading",{
                    dataType: "source"
                })),
                this.url = this.options.url,
                t.getImage(this.map._transformRequest(this.url, t.ResourceType.Image), function(n, o) {
                    n ? r.fire(new t.ErrorEvent(n)) : o && (r.image = t.browser.getImageData(o),
                    e && (r.coordinates = e),
                    i && i(),
                    r._finishLoading())
                })
            }
            ,
            i.prototype.updateImage = function(t) {
                var e = this;
                return this.image && t.url ? (this.options.url = t.url,
                this.load(t.coordinates, function() {
                    e.texture = null
                }),
                this) : this
            }
            ,
            i.prototype._finishLoading = function() {
                this.map && (this.setCoordinates(this.coordinates),
                this.fire(new t.Event("data",{
                    dataType: "source",
                    sourceDataType: "metadata"
                })))
            }
            ,
            i.prototype.onAdd = function(t) {
                this.map = t,
                this.load()
            }
            ,
            i.prototype.setCoordinates = function(e) {
                var i = this;
                this.coordinates = e;
                var r = e.map(t.MercatorCoordinate.fromLngLat);
                this.tileID = function(e) {
                    for (var i = 1 / 0, r = 1 / 0, n = -1 / 0, o = -1 / 0, a = 0, s = e; a < s.length; a += 1) {
                        var l = s[a];
                        i = Math.min(i, l.x),
                        r = Math.min(r, l.y),
                        n = Math.max(n, l.x),
                        o = Math.max(o, l.y)
                    }
                    var u = n - i
                      , c = o - r
                      , p = Math.max(u, c)
                      , h = Math.max(0, Math.floor(-Math.log(p) / Math.LN2))
                      , d = Math.pow(2, h);
                    return new t.CanonicalTileID(h,Math.floor((i + n) / 2 * d),Math.floor((r + o) / 2 * d))
                }(r),
                this.minzoom = this.maxzoom = this.tileID.z;
                var n = r.map(function(t) {
                    return i.tileID.getTilePoint(t)._round()
                });
                return this._boundsArray = new t.StructArrayLayout4i8,
                this._boundsArray.emplaceBack(n[0].x, n[0].y, 0, 0),
                this._boundsArray.emplaceBack(n[1].x, n[1].y, t.EXTENT, 0),
                this._boundsArray.emplaceBack(n[3].x, n[3].y, 0, t.EXTENT),
                this._boundsArray.emplaceBack(n[2].x, n[2].y, t.EXTENT, t.EXTENT),
                this.boundsBuffer && (this.boundsBuffer.destroy(),
                delete this.boundsBuffer),
                this.fire(new t.Event("data",{
                    dataType: "source",
                    sourceDataType: "content"
                })),
                this
            }
            ,
            i.prototype.prepare = function() {
                if (0 !== Object.keys(this.tiles).length && this.image) {
                    var e = this.map.painter.context
                      , i = e.gl;
                    for (var r in this.boundsBuffer || (this.boundsBuffer = e.createVertexBuffer(this._boundsArray, t.rasterBoundsAttributes.members)),
                    this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)),
                    this.texture || (this.texture = new t.Texture(e,this.image,i.RGBA),
                    this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE)),
                    this.tiles) {
                        var n = this.tiles[r];
                        "loaded" !== n.state && (n.state = "loaded",
                        n.texture = this.texture)
                    }
                }
            }
            ,
            i.prototype.loadTile = function(t, e) {
                this.tileID && this.tileID.equals(t.tileID.canonical) ? (this.tiles[String(t.tileID.wrap)] = t,
                t.buckets = {},
                e(null)) : (t.state = "errored",
                e(null))
            }
            ,
            i.prototype.serialize = function() {
                return {
                    type: "image",
                    url: this.options.url,
                    coordinates: this.coordinates
                }
            }
            ,
            i.prototype.hasTransition = function() {
                return !1
            }
            ,
            i
        }(t.Evented)
          , M = function(e) {
            function i(t, i, r, n) {
                e.call(this, t, i, r, n),
                this.roundZoom = !0,
                this.type = "video",
                this.options = i
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.load = function() {
                var e = this
                  , i = this.options;
                this.urls = [];
                for (var r = 0, n = i.urls; r < n.length; r += 1) {
                    var o = n[r];
                    e.urls.push(e.map._transformRequest(o, t.ResourceType.Source).url)
                }
                t.getVideo(this.urls, function(i, r) {
                    i ? e.fire(new t.ErrorEvent(i)) : r && (e.video = r,
                    e.video.loop = !0,
                    e.video.addEventListener("playing", function() {
                        e.map.triggerRepaint()
                    }),
                    e.map && e.video.play(),
                    e._finishLoading())
                })
            }
            ,
            i.prototype.getVideo = function() {
                return this.video
            }
            ,
            i.prototype.onAdd = function(t) {
                this.map || (this.map = t,
                this.load(),
                this.video && (this.video.play(),
                this.setCoordinates(this.coordinates)))
            }
            ,
            i.prototype.prepare = function() {
                if (!(0 === Object.keys(this.tiles).length || this.video.readyState < 2)) {
                    var e = this.map.painter.context
                      , i = e.gl;
                    for (var r in this.boundsBuffer || (this.boundsBuffer = e.createVertexBuffer(this._boundsArray, t.rasterBoundsAttributes.members)),
                    this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)),
                    this.texture ? this.video.paused || (this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE),
                    i.texSubImage2D(i.TEXTURE_2D, 0, 0, 0, i.RGBA, i.UNSIGNED_BYTE, this.video)) : (this.texture = new t.Texture(e,this.video,i.RGBA),
                    this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE)),
                    this.tiles) {
                        var n = this.tiles[r];
                        "loaded" !== n.state && (n.state = "loaded",
                        n.texture = this.texture)
                    }
                }
            }
            ,
            i.prototype.serialize = function() {
                return {
                    type: "video",
                    urls: this.urls,
                    coordinates: this.coordinates
                }
            }
            ,
            i.prototype.hasTransition = function() {
                return this.video && !this.video.paused
            }
            ,
            i
        }(P)
          , I = function(e) {
            function i(i, r, n, o) {
                e.call(this, i, r, n, o),
                r.coordinates ? Array.isArray(r.coordinates) && 4 === r.coordinates.length && !r.coordinates.some(function(t) {
                    return !Array.isArray(t) || 2 !== t.length || t.some(function(t) {
                        return "number" != typeof t
                    })
                }) || this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))) : this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i,null,'missing required property "coordinates"'))),
                r.animate && "boolean" != typeof r.animate && this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i,null,'optional "animate" property must be a boolean value'))),
                r.canvas ? "string" == typeof r.canvas || r.canvas instanceof t.window.HTMLCanvasElement || this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))) : this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i,null,'missing required property "canvas"'))),
                this.options = r,
                this.animate = void 0 === r.animate || r.animate
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.load = function() {
                this.canvas || (this.canvas = this.options.canvas instanceof t.window.HTMLCanvasElement ? this.options.canvas : t.window.document.getElementById(this.options.canvas)),
                this.width = this.canvas.width,
                this.height = this.canvas.height,
                this._hasInvalidDimensions() ? this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))) : (this.play = function() {
                    this._playing = !0,
                    this.map.triggerRepaint()
                }
                ,
                this.pause = function() {
                    this._playing = !1
                }
                ,
                this._finishLoading())
            }
            ,
            i.prototype.getCanvas = function() {
                return this.canvas
            }
            ,
            i.prototype.onAdd = function(t) {
                this.map = t,
                this.load(),
                this.canvas && this.animate && this.play()
            }
            ,
            i.prototype.onRemove = function() {
                this.pause()
            }
            ,
            i.prototype.prepare = function() {
                var e = !1;
                if (this.canvas.width !== this.width && (this.width = this.canvas.width,
                e = !0),
                this.canvas.height !== this.height && (this.height = this.canvas.height,
                e = !0),
                !this._hasInvalidDimensions() && 0 !== Object.keys(this.tiles).length) {
                    var i = this.map.painter.context
                      , r = i.gl;
                    for (var n in this.boundsBuffer || (this.boundsBuffer = i.createVertexBuffer(this._boundsArray, t.rasterBoundsAttributes.members)),
                    this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)),
                    this.texture ? (e || this._playing) && this.texture.update(this.canvas, {
                        premultiply: !0
                    }) : this.texture = new t.Texture(i,this.canvas,r.RGBA,{
                        premultiply: !0
                    }),
                    this.tiles) {
                        var o = this.tiles[n];
                        "loaded" !== o.state && (o.state = "loaded",
                        o.texture = this.texture)
                    }
                }
            }
            ,
            i.prototype.serialize = function() {
                return {
                    type: "canvas",
                    coordinates: this.coordinates
                }
            }
            ,
            i.prototype.hasTransition = function() {
                return this._playing
            }
            ,
            i.prototype._hasInvalidDimensions = function() {
                for (var t = 0, e = [this.canvas.width, this.canvas.height]; t < e.length; t += 1) {
                    var i = e[t];
                    if (isNaN(i) || i <= 0)
                        return !0
                }
                return !1
            }
            ,
            i
        }(P)
          , z = {
            vector: A,
            raster: k,
            "raster-dem": E,
            geojson: C,
            video: M,
            image: P,
            canvas: I
        }
          , L = function(e, i, r, n) {
            var o = new z[i.type](e,i,r,n);
            if (o.id !== e)
                throw new Error("Expected Source id to be " + e + " instead of " + o.id);
            return t.bindAll(["load", "abort", "unload", "serialize", "prepare"], o),
            o
        };
        function D(t, e, i, r, n) {
            var o = n.maxPitchScaleFactor()
              , a = t.tilesIn(i, o);
            a.sort(O);
            for (var s = [], l = 0, u = a; l < u.length; l += 1) {
                var c = u[l];
                s.push({
                    wrappedTileID: c.tileID.wrapped().key,
                    queryResults: c.tile.queryRenderedFeatures(e, t._state, c.queryGeometry, c.scale, r, n, o, t.transform.calculatePosMatrix(c.tileID.toUnwrapped()))
                })
            }
            var p = function(t) {
                for (var e = {}, i = {}, r = 0, n = t; r < n.length; r += 1) {
                    var o = n[r]
                      , a = o.queryResults
                      , s = o.wrappedTileID
                      , l = i[s] = i[s] || {};
                    for (var u in a)
                        for (var c = a[u], p = l[u] = l[u] || {}, h = e[u] = e[u] || [], d = 0, f = c; d < f.length; d += 1) {
                            var m = f[d];
                            p[m.featureIndex] || (p[m.featureIndex] = !0,
                            h.push(m.feature))
                        }
                }
                return e
            }(s);
            for (var h in p)
                p[h].forEach(function(e) {
                    var i = t.getFeatureState(e.layer["source-layer"], e.id);
                    e.source = e.layer.source,
                    e.layer["source-layer"] && (e.sourceLayer = e.layer["source-layer"]),
                    e.state = i
                });
            return p
        }
        function O(t, e) {
            var i = t.tileID
              , r = e.tileID;
            return i.overscaledZ - r.overscaledZ || i.canonical.y - r.canonical.y || i.wrap - r.wrap || i.canonical.x - r.canonical.x
        }
        var R = function(t, e) {
            this.max = t,
            this.onRemove = e,
            this.reset()
        };
        R.prototype.reset = function() {
            for (var t in this.data)
                for (var e = 0, i = this.data[t]; e < i.length; e += 1) {
                    var r = i[e];
                    r.timeout && clearTimeout(r.timeout),
                    this.onRemove(r.value)
                }
            return this.data = {},
            this.order = [],
            this
        }
        ,
        R.prototype.add = function(t, e, i) {
            var r = this
              , n = t.wrapped().key;
            void 0 === this.data[n] && (this.data[n] = []);
            var o = {
                value: e,
                timeout: void 0
            };
            if (void 0 !== i && (o.timeout = setTimeout(function() {
                r.remove(t, o)
            }, i)),
            this.data[n].push(o),
            this.order.push(n),
            this.order.length > this.max) {
                var a = this._getAndRemoveByKey(this.order[0]);
                a && this.onRemove(a)
            }
            return this
        }
        ,
        R.prototype.has = function(t) {
            return t.wrapped().key in this.data
        }
        ,
        R.prototype.getAndRemove = function(t) {
            return this.has(t) ? this._getAndRemoveByKey(t.wrapped().key) : null
        }
        ,
        R.prototype._getAndRemoveByKey = function(t) {
            var e = this.data[t].shift();
            return e.timeout && clearTimeout(e.timeout),
            0 === this.data[t].length && delete this.data[t],
            this.order.splice(this.order.indexOf(t), 1),
            e.value
        }
        ,
        R.prototype.get = function(t) {
            return this.has(t) ? this.data[t.wrapped().key][0].value : null
        }
        ,
        R.prototype.remove = function(t, e) {
            if (!this.has(t))
                return this;
            var i = t.wrapped().key
              , r = void 0 === e ? 0 : this.data[i].indexOf(e)
              , n = this.data[i][r];
            return this.data[i].splice(r, 1),
            n.timeout && clearTimeout(n.timeout),
            0 === this.data[i].length && delete this.data[i],
            this.onRemove(n.value),
            this.order.splice(this.order.indexOf(i), 1),
            this
        }
        ,
        R.prototype.setMaxSize = function(t) {
            for (this.max = t; this.order.length > this.max; ) {
                var e = this._getAndRemoveByKey(this.order[0]);
                e && this.onRemove(e)
            }
            return this
        }
        ;
        var F = function(t, e, i) {
            this.context = t;
            var r = t.gl;
            this.buffer = r.createBuffer(),
            this.dynamicDraw = Boolean(i),
            this.context.unbindVAO(),
            t.bindElementBuffer.set(this.buffer),
            r.bufferData(r.ELEMENT_ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? r.DYNAMIC_DRAW : r.STATIC_DRAW),
            this.dynamicDraw || delete e.arrayBuffer
        };
        F.prototype.bind = function() {
            this.context.bindElementBuffer.set(this.buffer)
        }
        ,
        F.prototype.updateData = function(t) {
            var e = this.context.gl;
            this.context.unbindVAO(),
            this.bind(),
            e.bufferSubData(e.ELEMENT_ARRAY_BUFFER, 0, t.arrayBuffer)
        }
        ,
        F.prototype.destroy = function() {
            var t = this.context.gl;
            this.buffer && (t.deleteBuffer(this.buffer),
            delete this.buffer)
        }
        ;
        var B = {
            Int8: "BYTE",
            Uint8: "UNSIGNED_BYTE",
            Int16: "SHORT",
            Uint16: "UNSIGNED_SHORT",
            Int32: "INT",
            Uint32: "UNSIGNED_INT",
            Float32: "FLOAT"
        }
          , N = function(t, e, i, r) {
            this.length = e.length,
            this.attributes = i,
            this.itemSize = e.bytesPerElement,
            this.dynamicDraw = r,
            this.context = t;
            var n = t.gl;
            this.buffer = n.createBuffer(),
            t.bindVertexBuffer.set(this.buffer),
            n.bufferData(n.ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? n.DYNAMIC_DRAW : n.STATIC_DRAW),
            this.dynamicDraw || delete e.arrayBuffer
        };
        N.prototype.bind = function() {
            this.context.bindVertexBuffer.set(this.buffer)
        }
        ,
        N.prototype.updateData = function(t) {
            var e = this.context.gl;
            this.bind(),
            e.bufferSubData(e.ARRAY_BUFFER, 0, t.arrayBuffer)
        }
        ,
        N.prototype.enableAttributes = function(t, e) {
            for (var i = 0; i < this.attributes.length; i++) {
                var r = this.attributes[i]
                  , n = e.attributes[r.name];
                void 0 !== n && t.enableVertexAttribArray(n)
            }
        }
        ,
        N.prototype.setVertexAttribPointers = function(t, e, i) {
            for (var r = 0; r < this.attributes.length; r++) {
                var n = this.attributes[r]
                  , o = e.attributes[n.name];
                void 0 !== o && t.vertexAttribPointer(o, n.components, t[B[n.type]], !1, this.itemSize, n.offset + this.itemSize * (i || 0))
            }
        }
        ,
        N.prototype.destroy = function() {
            var t = this.context.gl;
            this.buffer && (t.deleteBuffer(this.buffer),
            delete this.buffer)
        }
        ;
        var U = function(t) {
            this.gl = t.gl,
            this.default = this.getDefault(),
            this.current = this.default,
            this.dirty = !1
        };
        U.prototype.get = function() {
            return this.current
        }
        ,
        U.prototype.set = function(t) {}
        ,
        U.prototype.getDefault = function() {
            return this.default
        }
        ,
        U.prototype.setDefault = function() {
            this.set(this.default)
        }
        ;
        var V = function(e) {
            function i() {
                e.apply(this, arguments)
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.getDefault = function() {
                return t.Color.transparent
            }
            ,
            i.prototype.set = function(t) {
                var e = this.current;
                (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.clearColor(t.r, t.g, t.b, t.a),
                this.current = t,
                this.dirty = !1)
            }
            ,
            i
        }(U)
          , j = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return 1
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.clearDepth(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , $ = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return 0
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.clearStencil(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , q = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return [!0, !0, !0, !0]
            }
            ,
            e.prototype.set = function(t) {
                var e = this.current;
                (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.colorMask(t[0], t[1], t[2], t[3]),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , W = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return !0
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.depthMask(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , H = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return 255
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.stencilMask(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , X = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return {
                    func: this.gl.ALWAYS,
                    ref: 0,
                    mask: 255
                }
            }
            ,
            e.prototype.set = function(t) {
                var e = this.current;
                (t.func !== e.func || t.ref !== e.ref || t.mask !== e.mask || this.dirty) && (this.gl.stencilFunc(t.func, t.ref, t.mask),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , Z = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                var t = this.gl;
                return [t.KEEP, t.KEEP, t.KEEP]
            }
            ,
            e.prototype.set = function(t) {
                var e = this.current;
                (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || this.dirty) && (this.gl.stencilOp(t[0], t[1], t[2]),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , G = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return !1
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    t ? e.enable(e.STENCIL_TEST) : e.disable(e.STENCIL_TEST),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , Y = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return [0, 1]
            }
            ,
            e.prototype.set = function(t) {
                var e = this.current;
                (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.depthRange(t[0], t[1]),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , K = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return !1
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    t ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , J = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return this.gl.LESS
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.depthFunc(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , Q = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return !1
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    t ? e.enable(e.BLEND) : e.disable(e.BLEND),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , tt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                var t = this.gl;
                return [t.ONE, t.ZERO]
            }
            ,
            e.prototype.set = function(t) {
                var e = this.current;
                (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.blendFunc(t[0], t[1]),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , et = function(e) {
            function i() {
                e.apply(this, arguments)
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.getDefault = function() {
                return t.Color.transparent
            }
            ,
            i.prototype.set = function(t) {
                var e = this.current;
                (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.blendColor(t.r, t.g, t.b, t.a),
                this.current = t,
                this.dirty = !1)
            }
            ,
            i
        }(U)
          , it = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return this.gl.FUNC_ADD
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.blendEquation(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , rt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return !1
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    t ? e.enable(e.CULL_FACE) : e.disable(e.CULL_FACE),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , nt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return this.gl.BACK
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.cullFace(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , ot = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return this.gl.CCW
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.frontFace(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , at = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return null
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.useProgram(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , st = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return this.gl.TEXTURE0
            }
            ,
            e.prototype.set = function(t) {
                (t !== this.current || this.dirty) && (this.gl.activeTexture(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , lt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                var t = this.gl;
                return [0, 0, t.drawingBufferWidth, t.drawingBufferHeight]
            }
            ,
            e.prototype.set = function(t) {
                var e = this.current;
                (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.viewport(t[0], t[1], t[2], t[3]),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , ut = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return null
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    e.bindFramebuffer(e.FRAMEBUFFER, t),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , ct = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return null
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    e.bindRenderbuffer(e.RENDERBUFFER, t),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , pt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return null
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    e.bindTexture(e.TEXTURE_2D, t),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , ht = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return null
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    e.bindBuffer(e.ARRAY_BUFFER, t),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , dt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return null
            }
            ,
            e.prototype.set = function(t) {
                var e = this.gl;
                e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t),
                this.current = t,
                this.dirty = !1
            }
            ,
            e
        }(U)
          , ft = function(t) {
            function e(e) {
                t.call(this, e),
                this.vao = e.extVertexArrayObject
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return null
            }
            ,
            e.prototype.set = function(t) {
                this.vao && (t !== this.current || this.dirty) && (this.vao.bindVertexArrayOES(t),
                this.current = t,
                this.dirty = !1)
            }
            ,
            e
        }(U)
          , mt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return 4
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    e.pixelStorei(e.UNPACK_ALIGNMENT, t),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , yt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return !1
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , gt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return !1
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    var e = this.gl;
                    e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(U)
          , _t = function(t) {
            function e(e, i) {
                t.call(this, e),
                this.context = e,
                this.parent = i
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.getDefault = function() {
                return null
            }
            ,
            e
        }(U)
          , vt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.setDirty = function() {
                this.dirty = !0
            }
            ,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    this.context.bindFramebuffer.set(this.parent);
                    var e = this.gl;
                    e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, t, 0),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(_t)
          , xt = function(t) {
            function e() {
                t.apply(this, arguments)
            }
            return t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e,
            e.prototype.set = function(t) {
                if (t !== this.current || this.dirty) {
                    this.context.bindFramebuffer.set(this.parent);
                    var e = this.gl;
                    e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, t),
                    this.current = t,
                    this.dirty = !1
                }
            }
            ,
            e
        }(_t)
          , bt = function(t, e, i) {
            this.context = t,
            this.width = e,
            this.height = i;
            var r = t.gl
              , n = this.framebuffer = r.createFramebuffer();
            this.colorAttachment = new vt(t,n),
            this.depthAttachment = new xt(t,n)
        };
        bt.prototype.destroy = function() {
            var t = this.context.gl
              , e = this.colorAttachment.get();
            e && t.deleteTexture(e);
            var i = this.depthAttachment.get();
            i && t.deleteRenderbuffer(i),
            t.deleteFramebuffer(this.framebuffer)
        }
        ;
        var wt = function(t, e, i) {
            this.func = t,
            this.mask = e,
            this.range = i
        };
        wt.ReadOnly = !1,
        wt.ReadWrite = !0,
        wt.disabled = new wt(519,wt.ReadOnly,[0, 1]);
        var Tt = function(t, e, i, r, n, o) {
            this.test = t,
            this.ref = e,
            this.mask = i,
            this.fail = r,
            this.depthFail = n,
            this.pass = o
        };
        Tt.disabled = new Tt({
            func: 519,
            mask: 0
        },0,0,7680,7680,7680);
        var St = function(t, e, i) {
            this.blendFunction = t,
            this.blendColor = e,
            this.mask = i
        };
        St.disabled = new St(St.Replace = [1, 0],t.Color.transparent,[!1, !1, !1, !1]),
        St.unblended = new St(St.Replace,t.Color.transparent,[!0, !0, !0, !0]),
        St.alphaBlended = new St([1, 771],t.Color.transparent,[!0, !0, !0, !0]);
        var At = function(t, e, i) {
            this.enable = t,
            this.mode = e,
            this.frontFace = i
        };
        At.disabled = new At(!1,1029,2305),
        At.backCCW = new At(!0,1029,2305);
        var kt = function(t) {
            this.gl = t,
            this.extVertexArrayObject = this.gl.getExtension("OES_vertex_array_object"),
            this.clearColor = new V(this),
            this.clearDepth = new j(this),
            this.clearStencil = new $(this),
            this.colorMask = new q(this),
            this.depthMask = new W(this),
            this.stencilMask = new H(this),
            this.stencilFunc = new X(this),
            this.stencilOp = new Z(this),
            this.stencilTest = new G(this),
            this.depthRange = new Y(this),
            this.depthTest = new K(this),
            this.depthFunc = new J(this),
            this.blend = new Q(this),
            this.blendFunc = new tt(this),
            this.blendColor = new et(this),
            this.blendEquation = new it(this),
            this.cullFace = new rt(this),
            this.cullFaceSide = new nt(this),
            this.frontFace = new ot(this),
            this.program = new at(this),
            this.activeTexture = new st(this),
            this.viewport = new lt(this),
            this.bindFramebuffer = new ut(this),
            this.bindRenderbuffer = new ct(this),
            this.bindTexture = new pt(this),
            this.bindVertexBuffer = new ht(this),
            this.bindElementBuffer = new dt(this),
            this.bindVertexArrayOES = this.extVertexArrayObject && new ft(this),
            this.pixelStoreUnpack = new mt(this),
            this.pixelStoreUnpackPremultiplyAlpha = new yt(this),
            this.pixelStoreUnpackFlipY = new gt(this),
            this.extTextureFilterAnisotropic = t.getExtension("EXT_texture_filter_anisotropic") || t.getExtension("MOZ_EXT_texture_filter_anisotropic") || t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),
            this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),
            this.extTextureHalfFloat = t.getExtension("OES_texture_half_float"),
            this.extTextureHalfFloat && t.getExtension("OES_texture_half_float_linear")
        };
        kt.prototype.setDirty = function() {
            this.clearColor.dirty = !0,
            this.clearDepth.dirty = !0,
            this.clearStencil.dirty = !0,
            this.colorMask.dirty = !0,
            this.depthMask.dirty = !0,
            this.stencilMask.dirty = !0,
            this.stencilFunc.dirty = !0,
            this.stencilOp.dirty = !0,
            this.stencilTest.dirty = !0,
            this.depthRange.dirty = !0,
            this.depthTest.dirty = !0,
            this.depthFunc.dirty = !0,
            this.blend.dirty = !0,
            this.blendFunc.dirty = !0,
            this.blendColor.dirty = !0,
            this.blendEquation.dirty = !0,
            this.cullFace.dirty = !0,
            this.cullFaceSide.dirty = !0,
            this.frontFace.dirty = !0,
            this.program.dirty = !0,
            this.activeTexture.dirty = !0,
            this.viewport.dirty = !0,
            this.bindFramebuffer.dirty = !0,
            this.bindRenderbuffer.dirty = !0,
            this.bindTexture.dirty = !0,
            this.bindVertexBuffer.dirty = !0,
            this.bindElementBuffer.dirty = !0,
            this.extVertexArrayObject && (this.bindVertexArrayOES.dirty = !0),
            this.pixelStoreUnpack.dirty = !0,
            this.pixelStoreUnpackPremultiplyAlpha.dirty = !0,
            this.pixelStoreUnpackFlipY.dirty = !0
        }
        ,
        kt.prototype.createIndexBuffer = function(t, e) {
            return new F(this,t,e)
        }
        ,
        kt.prototype.createVertexBuffer = function(t, e, i) {
            return new N(this,t,e,i)
        }
        ,
        kt.prototype.createRenderbuffer = function(t, e, i) {
            var r = this.gl
              , n = r.createRenderbuffer();
            return this.bindRenderbuffer.set(n),
            r.renderbufferStorage(r.RENDERBUFFER, t, e, i),
            this.bindRenderbuffer.set(null),
            n
        }
        ,
        kt.prototype.createFramebuffer = function(t, e) {
            return new bt(this,t,e)
        }
        ,
        kt.prototype.clear = function(t) {
            var e = t.color
              , i = t.depth
              , r = this.gl
              , n = 0;
            e && (n |= r.COLOR_BUFFER_BIT,
            this.clearColor.set(e),
            this.colorMask.set([!0, !0, !0, !0])),
            void 0 !== i && (n |= r.DEPTH_BUFFER_BIT,
            this.depthRange.set([0, 1]),
            this.clearDepth.set(i),
            this.depthMask.set(!0)),
            r.clear(n)
        }
        ,
        kt.prototype.setCullFace = function(t) {
            !1 === t.enable ? this.cullFace.set(!1) : (this.cullFace.set(!0),
            this.cullFaceSide.set(t.mode),
            this.frontFace.set(t.frontFace))
        }
        ,
        kt.prototype.setDepthMode = function(t) {
            t.func !== this.gl.ALWAYS || t.mask ? (this.depthTest.set(!0),
            this.depthFunc.set(t.func),
            this.depthMask.set(t.mask),
            this.depthRange.set(t.range)) : this.depthTest.set(!1)
        }
        ,
        kt.prototype.setStencilMode = function(t) {
            t.test.func !== this.gl.ALWAYS || t.mask ? (this.stencilTest.set(!0),
            this.stencilMask.set(t.mask),
            this.stencilOp.set([t.fail, t.depthFail, t.pass]),
            this.stencilFunc.set({
                func: t.test.func,
                ref: t.ref,
                mask: t.test.mask
            })) : this.stencilTest.set(!1)
        }
        ,
        kt.prototype.setColorMode = function(e) {
            t.isEqual(e.blendFunction, St.Replace) ? this.blend.set(!1) : (this.blend.set(!0),
            this.blendFunc.set(e.blendFunction),
            this.blendColor.set(e.blendColor)),
            this.colorMask.set(e.mask)
        }
        ,
        kt.prototype.unbindVAO = function() {
            this.extVertexArrayObject && this.bindVertexArrayOES.set(null)
        }
        ;
        var Et = function(e) {
            function i(i, r, n) {
                var o = this;
                e.call(this),
                this.id = i,
                this.dispatcher = n,
                this.on("data", function(t) {
                    "source" === t.dataType && "metadata" === t.sourceDataType && (o._sourceLoaded = !0),
                    o._sourceLoaded && !o._paused && "source" === t.dataType && "content" === t.sourceDataType && (o.reload(),
                    o.transform && o.update(o.transform))
                }),
                this.on("error", function() {
                    o._sourceErrored = !0
                }),
                this._source = L(i, r, n, this),
                this._tiles = {},
                this._cache = new R(0,this._unloadTile.bind(this)),
                this._timers = {},
                this._cacheTimers = {},
                this._maxTileCacheSize = null,
                this._coveredTiles = {},
                this._state = new t.SourceFeatureState
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.onAdd = function(t) {
                this.map = t,
                this._maxTileCacheSize = t ? t._maxTileCacheSize : null,
                this._source && this._source.onAdd && this._source.onAdd(t)
            }
            ,
            i.prototype.onRemove = function(t) {
                this._source && this._source.onRemove && this._source.onRemove(t)
            }
            ,
            i.prototype.loaded = function() {
                if (this._sourceErrored)
                    return !0;
                if (!this._sourceLoaded)
                    return !1;
                for (var t in this._tiles) {
                    var e = this._tiles[t];
                    if ("loaded" !== e.state && "errored" !== e.state)
                        return !1
                }
                return !0
            }
            ,
            i.prototype.getSource = function() {
                return this._source
            }
            ,
            i.prototype.pause = function() {
                this._paused = !0
            }
            ,
            i.prototype.resume = function() {
                if (this._paused) {
                    var t = this._shouldReloadOnResume;
                    this._paused = !1,
                    this._shouldReloadOnResume = !1,
                    t && this.reload(),
                    this.transform && this.update(this.transform)
                }
            }
            ,
            i.prototype._loadTile = function(t, e) {
                return this._source.loadTile(t, e)
            }
            ,
            i.prototype._unloadTile = function(t) {
                if (this._source.unloadTile)
                    return this._source.unloadTile(t, function() {})
            }
            ,
            i.prototype._abortTile = function(t) {
                if (this._source.abortTile)
                    return this._source.abortTile(t, function() {})
            }
            ,
            i.prototype.serialize = function() {
                return this._source.serialize()
            }
            ,
            i.prototype.prepare = function(t) {
                for (var e in this._source.prepare && this._source.prepare(),
                this._state.coalesceChanges(this._tiles, this.map ? this.map.painter : null),
                this._tiles)
                    this._tiles[e].upload(t)
            }
            ,
            i.prototype.getIds = function() {
                return Object.keys(this._tiles).map(Number).sort(Ct)
            }
            ,
            i.prototype.getRenderableIds = function(e) {
                var i = this
                  , r = [];
                for (var n in i._tiles)
                    i._isIdRenderable(+n, e) && r.push(+n);
                return e ? r.sort(function(e, r) {
                    var n = i._tiles[e].tileID
                      , o = i._tiles[r].tileID
                      , a = new t.Point(n.canonical.x,n.canonical.y)._rotate(i.transform.angle)
                      , s = new t.Point(o.canonical.x,o.canonical.y)._rotate(i.transform.angle);
                    return n.overscaledZ - o.overscaledZ || s.y - a.y || s.x - a.x
                }) : r.sort(Ct)
            }
            ,
            i.prototype.hasRenderableParent = function(t) {
                var e = this.findLoadedParent(t, 0);
                return !!e && this._isIdRenderable(e.tileID.key)
            }
            ,
            i.prototype._isIdRenderable = function(t, e) {
                return this._tiles[t] && this._tiles[t].hasData() && !this._coveredTiles[t] && (e || !this._tiles[t].holdingForFade())
            }
            ,
            i.prototype.reload = function() {
                if (this._paused)
                    this._shouldReloadOnResume = !0;
                else
                    for (var t in this._cache.reset(),
                    this._tiles)
                        "errored" !== this._tiles[t].state && this._reloadTile(t, "reloading")
            }
            ,
            i.prototype._reloadTile = function(t, e) {
                var i = this._tiles[t];
                i && ("loading" !== i.state && (i.state = e),
                this._loadTile(i, this._tileLoaded.bind(this, i, t, e)))
            }
            ,
            i.prototype._tileLoaded = function(e, i, r, n) {
                if (n)
                    return e.state = "errored",
                    void (404 !== n.status ? this._source.fire(new t.ErrorEvent(n,{
                        tile: e
                    })) : this.update(this.transform));
                e.timeAdded = t.browser.now(),
                "expired" === r && (e.refreshedUponExpiration = !0),
                this._setTileReloadTimer(i, e),
                "raster-dem" === this.getSource().type && e.dem && this._backfillDEM(e),
                this._state.initializeTileState(e, this.map ? this.map.painter : null),
                this._source.fire(new t.Event("data",{
                    dataType: "source",
                    tile: e,
                    coord: e.tileID
                }))
            }
            ,
            i.prototype._backfillDEM = function(t) {
                for (var e = this.getRenderableIds(), i = 0; i < e.length; i++) {
                    var r = e[i];
                    if (t.neighboringTiles && t.neighboringTiles[r]) {
                        var n = this.getTileByID(r);
                        o(t, n),
                        o(n, t)
                    }
                }
                function o(t, e) {
                    t.needsHillshadePrepare = !0;
                    var i = e.tileID.canonical.x - t.tileID.canonical.x
                      , r = e.tileID.canonical.y - t.tileID.canonical.y
                      , n = Math.pow(2, t.tileID.canonical.z)
                      , o = e.tileID.key;
                    0 === i && 0 === r || Math.abs(r) > 1 || (Math.abs(i) > 1 && (1 === Math.abs(i + n) ? i += n : 1 === Math.abs(i - n) && (i -= n)),
                    e.dem && t.dem && (t.dem.backfillBorder(e.dem, i, r),
                    t.neighboringTiles && t.neighboringTiles[o] && (t.neighboringTiles[o].backfilled = !0)))
                }
            }
            ,
            i.prototype.getTile = function(t) {
                return this.getTileByID(t.key)
            }
            ,
            i.prototype.getTileByID = function(t) {
                return this._tiles[t]
            }
            ,
            i.prototype.getZoom = function(t) {
                return t.zoom + t.scaleZoom(t.tileSize / this._source.tileSize)
            }
            ,
            i.prototype._retainLoadedChildren = function(t, e, i, r) {
                for (var n in this._tiles) {
                    var o = this._tiles[n];
                    if (!(r[n] || !o.hasData() || o.tileID.overscaledZ <= e || o.tileID.overscaledZ > i)) {
                        for (var a = o.tileID; o && o.tileID.overscaledZ > e + 1; ) {
                            var s = o.tileID.scaledTo(o.tileID.overscaledZ - 1);
                            (o = this._tiles[s.key]) && o.hasData() && (a = s)
                        }
                        for (var l = a; l.overscaledZ > e; )
                            if (t[(l = l.scaledTo(l.overscaledZ - 1)).key]) {
                                r[a.key] = a;
                                break
                            }
                    }
                }
            }
            ,
            i.prototype.findLoadedParent = function(t, e) {
                for (var i = t.overscaledZ - 1; i >= e; i--) {
                    var r = t.scaledTo(i);
                    if (!r)
                        return;
                    var n = String(r.key)
                      , o = this._tiles[n];
                    if (o && o.hasData())
                        return o;
                    if (this._cache.has(r))
                        return this._cache.get(r)
                }
            }
            ,
            i.prototype.updateCacheSize = function(t) {
                var e = (Math.ceil(t.width / this._source.tileSize) + 1) * (Math.ceil(t.height / this._source.tileSize) + 1)
                  , i = Math.floor(5 * e)
                  , r = "number" == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, i) : i;
                this._cache.setMaxSize(r)
            }
            ,
            i.prototype.handleWrapJump = function(t) {
                var e = (t - (void 0 === this._prevLng ? t : this._prevLng)) / 360
                  , i = Math.round(e);
                if (this._prevLng = t,
                i) {
                    var r = {};
                    for (var n in this._tiles) {
                        var o = this._tiles[n];
                        o.tileID = o.tileID.unwrapTo(o.tileID.wrap + i),
                        r[o.tileID.key] = o
                    }
                    for (var a in this._tiles = r,
                    this._timers)
                        clearTimeout(this._timers[a]),
                        delete this._timers[a];
                    for (var s in this._tiles) {
                        var l = this._tiles[s];
                        this._setTileReloadTimer(s, l)
                    }
                }
            }
            ,
            i.prototype.update = function(e) {
                var r = this;
                if (this.transform = e,
                this._sourceLoaded && !this._paused) {
                    var n;
                    this.updateCacheSize(e),
                    this.handleWrapJump(this.transform.center.lng),
                    this._coveredTiles = {},
                    this.used ? this._source.tileID ? n = e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e) {
                        return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)
                    }) : (n = e.coveringTiles({
                        tileSize: this._source.tileSize,
                        minzoom: this._source.minzoom,
                        maxzoom: this._source.maxzoom,
                        roundZoom: this._source.roundZoom,
                        reparseOverscaled: this._source.reparseOverscaled
                    }),
                    this._source.hasTile && (n = n.filter(function(t) {
                        return r._source.hasTile(t)
                    }))) : n = [];
                    var o = (this._source.roundZoom ? Math.round : Math.floor)(this.getZoom(e))
                      , a = Math.max(o - i.maxOverzooming, this._source.minzoom)
                      , s = Math.max(o + i.maxUnderzooming, this._source.minzoom)
                      , l = this._updateRetainedTiles(n, o);
                    if (Pt(this._source.type)) {
                        for (var u = {}, c = {}, p = 0, h = Object.keys(l); p < h.length; p += 1) {
                            var d = h[p]
                              , f = l[d]
                              , m = r._tiles[d];
                            if (m && !(m.fadeEndTime && m.fadeEndTime <= t.browser.now())) {
                                var y = r.findLoadedParent(f, a);
                                y && (r._addTile(y.tileID),
                                u[y.tileID.key] = y.tileID),
                                c[d] = f
                            }
                        }
                        for (var g in this._retainLoadedChildren(c, o, s, l),
                        u)
                            l[g] || (r._coveredTiles[g] = !0,
                            l[g] = u[g])
                    }
                    for (var _ in l)
                        r._tiles[_].clearFadeHold();
                    for (var v = 0, x = t.keysDifference(this._tiles, l); v < x.length; v += 1) {
                        var b = x[v]
                          , w = r._tiles[b];
                        w.hasSymbolBuckets && !w.holdingForFade() ? w.setHoldDuration(r.map._fadeDuration) : w.hasSymbolBuckets && !w.symbolFadeFinished() || r._removeTile(b)
                    }
                }
            }
            ,
            i.prototype.releaseSymbolFadeTiles = function() {
                for (var t in this._tiles)
                    this._tiles[t].holdingForFade() && this._removeTile(t)
            }
            ,
            i.prototype._updateRetainedTiles = function(t, e) {
                for (var r = {}, n = {}, o = Math.max(e - i.maxOverzooming, this._source.minzoom), a = Math.max(e + i.maxUnderzooming, this._source.minzoom), s = {}, l = 0, u = t; l < u.length; l += 1) {
                    var c = u[l]
                      , p = this._addTile(c);
                    r[c.key] = c,
                    p.hasData() || e < this._source.maxzoom && (s[c.key] = c)
                }
                this._retainLoadedChildren(s, e, a, r);
                for (var h = 0, d = t; h < d.length; h += 1) {
                    var f = d[h]
                      , m = this._tiles[f.key];
                    if (!m.hasData()) {
                        if (e + 1 > this._source.maxzoom) {
                            var y = f.children(this._source.maxzoom)[0]
                              , g = this.getTile(y);
                            if (g && g.hasData()) {
                                r[y.key] = y;
                                continue
                            }
                        } else {
                            var _ = f.children(this._source.maxzoom);
                            if (r[_[0].key] && r[_[1].key] && r[_[2].key] && r[_[3].key])
                                continue
                        }
                        for (var v = m.wasRequested(), x = f.overscaledZ - 1; x >= o; --x) {
                            var b = f.scaledTo(x);
                            if (n[b.key])
                                break;
                            if (n[b.key] = !0,
                            !(m = this.getTile(b)) && v && (m = this._addTile(b)),
                            m && (r[b.key] = b,
                            v = m.wasRequested(),
                            m.hasData()))
                                break
                        }
                    }
                }
                return r
            }
            ,
            i.prototype._addTile = function(e) {
                var i = this._tiles[e.key];
                if (i)
                    return i;
                (i = this._cache.getAndRemove(e)) && (this._setTileReloadTimer(e.key, i),
                i.tileID = e,
                this._state.initializeTileState(i, this.map ? this.map.painter : null),
                this._cacheTimers[e.key] && (clearTimeout(this._cacheTimers[e.key]),
                delete this._cacheTimers[e.key],
                this._setTileReloadTimer(e.key, i)));
                var r = Boolean(i);
                return r || (i = new t.Tile(e,this._source.tileSize * e.overscaleFactor()),
                this._loadTile(i, this._tileLoaded.bind(this, i, e.key, i.state))),
                i ? (i.uses++,
                this._tiles[e.key] = i,
                r || this._source.fire(new t.Event("dataloading",{
                    tile: i,
                    coord: i.tileID,
                    dataType: "source"
                })),
                i) : null
            }
            ,
            i.prototype._setTileReloadTimer = function(t, e) {
                var i = this;
                t in this._timers && (clearTimeout(this._timers[t]),
                delete this._timers[t]);
                var r = e.getExpiryTimeout();
                r && (this._timers[t] = setTimeout(function() {
                    i._reloadTile(t, "expired"),
                    delete i._timers[t]
                }, r))
            }
            ,
            i.prototype._removeTile = function(t) {
                var e = this._tiles[t];
                e && (e.uses--,
                delete this._tiles[t],
                this._timers[t] && (clearTimeout(this._timers[t]),
                delete this._timers[t]),
                e.uses > 0 || (e.hasData() ? this._cache.add(e.tileID, e, e.getExpiryTimeout()) : (e.aborted = !0,
                this._abortTile(e),
                this._unloadTile(e))))
            }
            ,
            i.prototype.clearTiles = function() {
                for (var t in this._shouldReloadOnResume = !1,
                this._paused = !1,
                this._tiles)
                    this._removeTile(t);
                this._cache.reset()
            }
            ,
            i.prototype.tilesIn = function(e, i) {
                for (var r = [], n = this.getIds(), o = 1 / 0, a = 1 / 0, s = -1 / 0, l = -1 / 0, u = 0; u < e.length; u++) {
                    var c = e[u];
                    o = Math.min(o, c.x),
                    a = Math.min(a, c.y),
                    s = Math.max(s, c.x),
                    l = Math.max(l, c.y)
                }
                for (var p = 0; p < n.length; p++) {
                    var h = this._tiles[n[p]];
                    if (!h.holdingForFade()) {
                        var d = h.tileID
                          , f = Math.pow(2, this.transform.zoom - h.tileID.overscaledZ)
                          , m = i * h.queryPadding * t.EXTENT / h.tileSize / f
                          , y = [d.getTilePoint(new t.MercatorCoordinate(o,a)), d.getTilePoint(new t.MercatorCoordinate(s,l))];
                        if (y[0].x - m < t.EXTENT && y[0].y - m < t.EXTENT && y[1].x + m >= 0 && y[1].y + m >= 0) {
                            for (var g = [], _ = 0; _ < e.length; _++)
                                g.push(d.getTilePoint(e[_]));
                            r.push({
                                tile: h,
                                tileID: d,
                                queryGeometry: [g],
                                scale: f
                            })
                        }
                    }
                }
                return r
            }
            ,
            i.prototype.getVisibleCoordinates = function(t) {
                for (var e = this, i = this.getRenderableIds(t).map(function(t) {
                    return e._tiles[t].tileID
                }), r = 0, n = i; r < n.length; r += 1) {
                    var o = n[r];
                    o.posMatrix = e.transform.calculatePosMatrix(o.toUnwrapped())
                }
                return i
            }
            ,
            i.prototype.hasTransition = function() {
                if (this._source.hasTransition())
                    return !0;
                if (Pt(this._source.type))
                    for (var e in this._tiles) {
                        var i = this._tiles[e];
                        if (void 0 !== i.fadeEndTime && i.fadeEndTime >= t.browser.now())
                            return !0
                    }
                return !1
            }
            ,
            i.prototype.setFeatureState = function(t, e, i) {
                t = t || "_geojsonTileLayer",
                this._state.updateState(t, e, i)
            }
            ,
            i.prototype.getFeatureState = function(t, e) {
                return t = t || "_geojsonTileLayer",
                this._state.getState(t, e)
            }
            ,
            i
        }(t.Evented);
        function Ct(t, e) {
            return t % 32 - e % 32 || e - t
        }
        function Pt(t) {
            return "raster" === t || "image" === t || "video" === t
        }
        function Mt() {
            return new t.window.Worker(Xr.workerUrl)
        }
        Et.maxOverzooming = 10,
        Et.maxUnderzooming = 3;
        var It = function() {
            this.active = {}
        };
        It.prototype.acquire = function(t) {
            if (!this.workers)
                for (this.workers = []; this.workers.length < It.workerCount; )
                    this.workers.push(new Mt);
            return this.active[t] = !0,
            this.workers.slice()
        }
        ,
        It.prototype.release = function(t) {
            delete this.active[t],
            0 === Object.keys(this.active).length && (this.workers.forEach(function(t) {
                t.terminate()
            }),
            this.workers = null)
        }
        ;
        var zt, Lt = Math.floor(t.browser.hardwareConcurrency / 2);
        function Dt(e, i) {
            var r = {};
            for (var n in e)
                "ref" !== n && (r[n] = e[n]);
            return t.refProperties.forEach(function(t) {
                t in i && (r[t] = i[t])
            }),
            r
        }
        function Ot(t) {
            t = t.slice();
            for (var e = Object.create(null), i = 0; i < t.length; i++)
                e[t[i].id] = t[i];
            for (var r = 0; r < t.length; r++)
                "ref"in t[r] && (t[r] = Dt(t[r], e[t[r].ref]));
            return t
        }
        It.workerCount = Math.max(Math.min(Lt, 6), 1);
        var Rt = {
            setStyle: "setStyle",
            addLayer: "addLayer",
            removeLayer: "removeLayer",
            setPaintProperty: "setPaintProperty",
            setLayoutProperty: "setLayoutProperty",
            setFilter: "setFilter",
            addSource: "addSource",
            removeSource: "removeSource",
            setGeoJSONSourceData: "setGeoJSONSourceData",
            setLayerZoomRange: "setLayerZoomRange",
            setLayerProperty: "setLayerProperty",
            setCenter: "setCenter",
            setZoom: "setZoom",
            setBearing: "setBearing",
            setPitch: "setPitch",
            setSprite: "setSprite",
            setGlyphs: "setGlyphs",
            setTransition: "setTransition",
            setLight: "setLight"
        };
        function Ft(t, e, i) {
            i.push({
                command: Rt.addSource,
                args: [t, e[t]]
            })
        }
        function Bt(t, e, i) {
            e.push({
                command: Rt.removeSource,
                args: [t]
            }),
            i[t] = !0
        }
        function Nt(t, e, i, r) {
            Bt(t, i, r),
            Ft(t, e, i)
        }
        function Ut(e, i, r) {
            var n;
            for (n in e[r])
                if (e[r].hasOwnProperty(n) && "data" !== n && !t.isEqual(e[r][n], i[r][n]))
                    return !1;
            for (n in i[r])
                if (i[r].hasOwnProperty(n) && "data" !== n && !t.isEqual(e[r][n], i[r][n]))
                    return !1;
            return !0
        }
        function Vt(e, i, r, n, o, a) {
            var s;
            for (s in i = i || {},
            e = e || {})
                e.hasOwnProperty(s) && (t.isEqual(e[s], i[s]) || r.push({
                    command: a,
                    args: [n, s, i[s], o]
                }));
            for (s in i)
                i.hasOwnProperty(s) && !e.hasOwnProperty(s) && (t.isEqual(e[s], i[s]) || r.push({
                    command: a,
                    args: [n, s, i[s], o]
                }))
        }
        function jt(t) {
            return t.id
        }
        function $t(t, e) {
            return t[e.id] = e,
            t
        }
        var qt = function(t, e, i) {
            var r = this.boxCells = []
              , n = this.circleCells = [];
            this.xCellCount = Math.ceil(t / i),
            this.yCellCount = Math.ceil(e / i);
            for (var o = 0; o < this.xCellCount * this.yCellCount; o++)
                r.push([]),
                n.push([]);
            this.circleKeys = [],
            this.boxKeys = [],
            this.bboxes = [],
            this.circles = [],
            this.width = t,
            this.height = e,
            this.xScale = this.xCellCount / t,
            this.yScale = this.yCellCount / e,
            this.boxUid = 0,
            this.circleUid = 0
        };
        qt.prototype.keysLength = function() {
            return this.boxKeys.length + this.circleKeys.length
        }
        ,
        qt.prototype.insert = function(t, e, i, r, n) {
            this._forEachCell(e, i, r, n, this._insertBoxCell, this.boxUid++),
            this.boxKeys.push(t),
            this.bboxes.push(e),
            this.bboxes.push(i),
            this.bboxes.push(r),
            this.bboxes.push(n)
        }
        ,
        qt.prototype.insertCircle = function(t, e, i, r) {
            this._forEachCell(e - r, i - r, e + r, i + r, this._insertCircleCell, this.circleUid++),
            this.circleKeys.push(t),
            this.circles.push(e),
            this.circles.push(i),
            this.circles.push(r)
        }
        ,
        qt.prototype._insertBoxCell = function(t, e, i, r, n, o) {
            this.boxCells[n].push(o)
        }
        ,
        qt.prototype._insertCircleCell = function(t, e, i, r, n, o) {
            this.circleCells[n].push(o)
        }
        ,
        qt.prototype._query = function(t, e, i, r, n, o) {
            if (i < 0 || t > this.width || r < 0 || e > this.height)
                return !n && [];
            var a = [];
            if (t <= 0 && e <= 0 && this.width <= i && this.height <= r) {
                if (n)
                    return !0;
                for (var s = 0; s < this.boxKeys.length; s++)
                    a.push({
                        key: this.boxKeys[s],
                        x1: this.bboxes[4 * s],
                        y1: this.bboxes[4 * s + 1],
                        x2: this.bboxes[4 * s + 2],
                        y2: this.bboxes[4 * s + 3]
                    });
                for (var l = 0; l < this.circleKeys.length; l++) {
                    var u = this.circles[3 * l]
                      , c = this.circles[3 * l + 1]
                      , p = this.circles[3 * l + 2];
                    a.push({
                        key: this.circleKeys[l],
                        x1: u - p,
                        y1: c - p,
                        x2: u + p,
                        y2: c + p
                    })
                }
                return o ? a.filter(o) : a
            }
            var h = {
                hitTest: n,
                seenUids: {
                    box: {},
                    circle: {}
                }
            };
            return this._forEachCell(t, e, i, r, this._queryCell, a, h, o),
            n ? a.length > 0 : a
        }
        ,
        qt.prototype._queryCircle = function(t, e, i, r, n) {
            var o = t - i
              , a = t + i
              , s = e - i
              , l = e + i;
            if (a < 0 || o > this.width || l < 0 || s > this.height)
                return !r && [];
            var u = []
              , c = {
                hitTest: r,
                circle: {
                    x: t,
                    y: e,
                    radius: i
                },
                seenUids: {
                    box: {},
                    circle: {}
                }
            };
            return this._forEachCell(o, s, a, l, this._queryCellCircle, u, c, n),
            r ? u.length > 0 : u
        }
        ,
        qt.prototype.query = function(t, e, i, r, n) {
            return this._query(t, e, i, r, !1, n)
        }
        ,
        qt.prototype.hitTest = function(t, e, i, r, n) {
            return this._query(t, e, i, r, !0, n)
        }
        ,
        qt.prototype.hitTestCircle = function(t, e, i, r) {
            return this._queryCircle(t, e, i, !0, r)
        }
        ,
        qt.prototype._queryCell = function(t, e, i, r, n, o, a, s) {
            var l = a.seenUids
              , u = this.boxCells[n];
            if (null !== u)
                for (var c = this.bboxes, p = 0, h = u; p < h.length; p += 1) {
                    var d = h[p];
                    if (!l.box[d]) {
                        l.box[d] = !0;
                        var f = 4 * d;
                        if (t <= c[f + 2] && e <= c[f + 3] && i >= c[f + 0] && r >= c[f + 1] && (!s || s(this.boxKeys[d]))) {
                            if (a.hitTest)
                                return o.push(!0),
                                !0;
                            o.push({
                                key: this.boxKeys[d],
                                x1: c[f],
                                y1: c[f + 1],
                                x2: c[f + 2],
                                y2: c[f + 3]
                            })
                        }
                    }
                }
            var m = this.circleCells[n];
            if (null !== m)
                for (var y = this.circles, g = 0, _ = m; g < _.length; g += 1) {
                    var v = _[g];
                    if (!l.circle[v]) {
                        l.circle[v] = !0;
                        var x = 3 * v;
                        if (this._circleAndRectCollide(y[x], y[x + 1], y[x + 2], t, e, i, r) && (!s || s(this.circleKeys[v]))) {
                            if (a.hitTest)
                                return o.push(!0),
                                !0;
                            var b = y[x]
                              , w = y[x + 1]
                              , T = y[x + 2];
                            o.push({
                                key: this.circleKeys[v],
                                x1: b - T,
                                y1: w - T,
                                x2: b + T,
                                y2: w + T
                            })
                        }
                    }
                }
        }
        ,
        qt.prototype._queryCellCircle = function(t, e, i, r, n, o, a, s) {
            var l = a.circle
              , u = a.seenUids
              , c = this.boxCells[n];
            if (null !== c)
                for (var p = this.bboxes, h = 0, d = c; h < d.length; h += 1) {
                    var f = d[h];
                    if (!u.box[f]) {
                        u.box[f] = !0;
                        var m = 4 * f;
                        if (this._circleAndRectCollide(l.x, l.y, l.radius, p[m + 0], p[m + 1], p[m + 2], p[m + 3]) && (!s || s(this.boxKeys[f])))
                            return o.push(!0),
                            !0
                    }
                }
            var y = this.circleCells[n];
            if (null !== y)
                for (var g = this.circles, _ = 0, v = y; _ < v.length; _ += 1) {
                    var x = v[_];
                    if (!u.circle[x]) {
                        u.circle[x] = !0;
                        var b = 3 * x;
                        if (this._circlesCollide(g[b], g[b + 1], g[b + 2], l.x, l.y, l.radius) && (!s || s(this.circleKeys[x])))
                            return o.push(!0),
                            !0
                    }
                }
        }
        ,
        qt.prototype._forEachCell = function(t, e, i, r, n, o, a, s) {
            for (var l = this._convertToXCellCoord(t), u = this._convertToYCellCoord(e), c = this._convertToXCellCoord(i), p = this._convertToYCellCoord(r), h = l; h <= c; h++)
                for (var d = u; d <= p; d++) {
                    var f = this.xCellCount * d + h;
                    if (n.call(this, t, e, i, r, f, o, a, s))
                        return
                }
        }
        ,
        qt.prototype._convertToXCellCoord = function(t) {
            return Math.max(0, Math.min(this.xCellCount - 1, Math.floor(t * this.xScale)))
        }
        ,
        qt.prototype._convertToYCellCoord = function(t) {
            return Math.max(0, Math.min(this.yCellCount - 1, Math.floor(t * this.yScale)))
        }
        ,
        qt.prototype._circlesCollide = function(t, e, i, r, n, o) {
            var a = r - t
              , s = n - e
              , l = i + o;
            return l * l > a * a + s * s
        }
        ,
        qt.prototype._circleAndRectCollide = function(t, e, i, r, n, o, a) {
            var s = (o - r) / 2
              , l = Math.abs(t - (r + s));
            if (l > s + i)
                return !1;
            var u = (a - n) / 2
              , c = Math.abs(e - (n + u));
            if (c > u + i)
                return !1;
            if (l <= s || c <= u)
                return !0;
            var p = l - s
              , h = c - u;
            return p * p + h * h <= i * i
        }
        ;
        var Wt = t.properties.layout;
        function Ht(e, i, r, n, o) {
            var a = t.identity(new Float32Array(16));
            return i ? (t.identity(a),
            t.scale(a, a, [1 / o, 1 / o, 1]),
            r || t.rotateZ(a, a, n.angle)) : (t.scale(a, a, [n.width / 2, -n.height / 2, 1]),
            t.translate(a, a, [1, -1, 0]),
            t.multiply(a, a, e)),
            a
        }
        function Xt(e, i, r, n, o) {
            var a = t.identity(new Float32Array(16));
            return i ? (t.multiply(a, a, e),
            t.scale(a, a, [o, o, 1]),
            r || t.rotateZ(a, a, -n.angle)) : (t.scale(a, a, [1, -1, 1]),
            t.translate(a, a, [-1, -1, 0]),
            t.scale(a, a, [2 / n.width, 2 / n.height, 1])),
            a
        }
        function Zt(e, i) {
            var r = [e.x, e.y, 0, 1];
            ne(r, r, i);
            var n = r[3];
            return {
                point: new t.Point(r[0] / n,r[1] / n),
                signedDistanceFromCamera: n
            }
        }
        function Gt(t, e) {
            var i = t[0] / t[3]
              , r = t[1] / t[3];
            return i >= -e[0] && i <= e[0] && r >= -e[1] && r <= e[1]
        }
        function Yt(e, i, r, n, o, a, s, l) {
            var u = n ? e.textSizeData : e.iconSizeData
              , c = t.evaluateSizeForZoom(u, r.transform.zoom, Wt.properties[n ? "text-size" : "icon-size"])
              , p = [256 / r.width * 2 + 1, 256 / r.height * 2 + 1]
              , h = n ? e.text.dynamicLayoutVertexArray : e.icon.dynamicLayoutVertexArray;
            h.clear();
            for (var d = e.lineVertexArray, f = n ? e.text.placedSymbolArray : e.icon.placedSymbolArray, m = r.transform.width / r.transform.height, y = !1, g = 0; g < f.length; g++) {
                var _ = f.get(g);
                if (_.hidden || _.writingMode === t.WritingMode.vertical && !y)
                    re(_.numGlyphs, h);
                else {
                    y = !1;
                    var v = [_.anchorX, _.anchorY, 0, 1];
                    if (t.transformMat4(v, v, i),
                    Gt(v, p)) {
                        var x = .5 + v[3] / r.transform.cameraToCenterDistance * .5
                          , b = t.evaluateSizeForFeature(u, c, _)
                          , w = s ? b * x : b / x
                          , T = new t.Point(_.anchorX,_.anchorY)
                          , S = Zt(T, o).point
                          , A = {}
                          , k = Qt(_, w, !1, l, i, o, a, e.glyphOffsetArray, d, h, S, T, A, m);
                        y = k.useVertical,
                        (k.notEnoughRoom || y || k.needsFlipping && Qt(_, w, !0, l, i, o, a, e.glyphOffsetArray, d, h, S, T, A, m).notEnoughRoom) && re(_.numGlyphs, h)
                    } else
                        re(_.numGlyphs, h)
                }
            }
            n ? e.text.dynamicLayoutVertexBuffer.updateData(h) : e.icon.dynamicLayoutVertexBuffer.updateData(h)
        }
        function Kt(t, e, i, r, n, o, a, s, l, u, c, p) {
            var h = s.glyphStartIndex + s.numGlyphs
              , d = s.lineStartIndex
              , f = s.lineStartIndex + s.lineLength
              , m = e.getoffsetX(s.glyphStartIndex)
              , y = e.getoffsetX(h - 1)
              , g = ee(t * m, i, r, n, o, a, s.segment, d, f, l, u, c, p);
            if (!g)
                return null;
            var _ = ee(t * y, i, r, n, o, a, s.segment, d, f, l, u, c, p);
            return _ ? {
                first: g,
                last: _
            } : null
        }
        function Jt(e, i, r, n) {
            return e === t.WritingMode.horizontal && Math.abs(r.y - i.y) > Math.abs(r.x - i.x) * n ? {
                useVertical: !0
            } : (e === t.WritingMode.vertical ? i.y < r.y : i.x > r.x) ? {
                needsFlipping: !0
            } : null
        }
        function Qt(e, i, r, n, o, a, s, l, u, c, p, h, d, f) {
            var m, y = i / 24, g = e.lineOffsetX * i, _ = e.lineOffsetY * i;
            if (e.numGlyphs > 1) {
                var v = e.glyphStartIndex + e.numGlyphs
                  , x = e.lineStartIndex
                  , b = e.lineStartIndex + e.lineLength
                  , w = Kt(y, l, g, _, r, p, h, e, u, a, d, !1);
                if (!w)
                    return {
                        notEnoughRoom: !0
                    };
                var T = Zt(w.first.point, s).point
                  , S = Zt(w.last.point, s).point;
                if (n && !r) {
                    var A = Jt(e.writingMode, T, S, f);
                    if (A)
                        return A
                }
                m = [w.first];
                for (var k = e.glyphStartIndex + 1; k < v - 1; k++)
                    m.push(ee(y * l.getoffsetX(k), g, _, r, p, h, e.segment, x, b, u, a, d, !1));
                m.push(w.last)
            } else {
                if (n && !r) {
                    var E = Zt(h, o).point
                      , C = e.lineStartIndex + e.segment + 1
                      , P = new t.Point(u.getx(C),u.gety(C))
                      , M = Zt(P, o)
                      , I = M.signedDistanceFromCamera > 0 ? M.point : te(h, P, E, 1, o)
                      , z = Jt(e.writingMode, E, I, f);
                    if (z)
                        return z
                }
                var L = ee(y * l.getoffsetX(e.glyphStartIndex), g, _, r, p, h, e.segment, e.lineStartIndex, e.lineStartIndex + e.lineLength, u, a, d, !1);
                if (!L)
                    return {
                        notEnoughRoom: !0
                    };
                m = [L]
            }
            for (var D = 0, O = m; D < O.length; D += 1) {
                var R = O[D];
                t.addDynamicAttributes(c, R.point, R.angle)
            }
            return {}
        }
        function te(t, e, i, r, n) {
            var o = Zt(t.add(t.sub(e)._unit()), n).point
              , a = i.sub(o);
            return i.add(a._mult(r / a.mag()))
        }
        function ee(e, i, r, n, o, a, s, l, u, c, p, h, d) {
            var f = n ? e - i : e + i
              , m = f > 0 ? 1 : -1
              , y = 0;
            n && (m *= -1,
            y = Math.PI),
            m < 0 && (y += Math.PI);
            for (var g = m > 0 ? l + s : l + s + 1, _ = g, v = o, x = o, b = 0, w = 0, T = Math.abs(f); b + w <= T; ) {
                if ((g += m) < l || g >= u)
                    return null;
                if (x = v,
                void 0 === (v = h[g])) {
                    var S = new t.Point(c.getx(g),c.gety(g))
                      , A = Zt(S, p);
                    if (A.signedDistanceFromCamera > 0)
                        v = h[g] = A.point;
                    else {
                        var k = g - m;
                        v = te(0 === b ? a : new t.Point(c.getx(k),c.gety(k)), S, x, T - b + 1, p)
                    }
                }
                b += w,
                w = x.dist(v)
            }
            var E = (T - b) / w
              , C = v.sub(x)
              , P = C.mult(E)._add(x);
            return P._add(C._unit()._perp()._mult(r * m)),
            {
                point: P,
                angle: y + Math.atan2(v.y - x.y, v.x - x.x),
                tileDistance: d ? {
                    prevTileDistance: g - m === _ ? 0 : c.gettileUnitDistanceFromAnchor(g - m),
                    lastSegmentViewportDistance: T - b
                } : null
            }
        }
        var ie = new Float32Array([-1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0]);
        function re(t, e) {
            for (var i = 0; i < t; i++) {
                var r = e.length;
                e.resize(r + 4),
                e.float32.set(ie, 3 * r)
            }
        }
        function ne(t, e, i) {
            var r = e[0]
              , n = e[1];
            return t[0] = i[0] * r + i[4] * n + i[12],
            t[1] = i[1] * r + i[5] * n + i[13],
            t[3] = i[3] * r + i[7] * n + i[15],
            t
        }
        var oe = function(t, e, i) {
            void 0 === e && (e = new qt(t.width + 200,t.height + 200,25)),
            void 0 === i && (i = new qt(t.width + 200,t.height + 200,25)),
            this.transform = t,
            this.grid = e,
            this.ignoredGrid = i,
            this.pitchfactor = Math.cos(t._pitch) * t.cameraToCenterDistance,
            this.screenRightBoundary = t.width + 100,
            this.screenBottomBoundary = t.height + 100,
            this.gridRightBoundary = t.width + 200,
            this.gridBottomBoundary = t.height + 200
        };
        function ae(t, e, i) {
            t[e + 4] = i ? 1 : 0
        }
        function se(e, i, r) {
            return i * (t.EXTENT / (e.tileSize * Math.pow(2, r - e.tileID.overscaledZ)))
        }
        oe.prototype.placeCollisionBox = function(t, e, i, r, n) {
            var o = this.projectAndGetPerspectiveRatio(r, t.anchorPointX, t.anchorPointY)
              , a = i * o.perspectiveRatio
              , s = t.x1 * a + o.point.x
              , l = t.y1 * a + o.point.y
              , u = t.x2 * a + o.point.x
              , c = t.y2 * a + o.point.y;
            return !this.isInsideGrid(s, l, u, c) || !e && this.grid.hitTest(s, l, u, c, n) ? {
                box: [],
                offscreen: !1
            } : {
                box: [s, l, u, c],
                offscreen: this.isOffscreen(s, l, u, c)
            }
        }
        ,
        oe.prototype.approximateTileDistance = function(t, e, i, r, n) {
            var o = n ? 1 : r / this.pitchfactor
              , a = t.lastSegmentViewportDistance * i;
            return t.prevTileDistance + a + (o - 1) * a * Math.abs(Math.sin(e))
        }
        ,
        oe.prototype.placeCollisionCircles = function(e, i, r, n, o, a, s, l, u, c, p, h, d) {
            var f = []
              , m = this.projectAnchor(u, o.anchorX, o.anchorY)
              , y = l / 24
              , g = o.lineOffsetX * l
              , _ = o.lineOffsetY * l
              , v = new t.Point(o.anchorX,o.anchorY)
              , x = Kt(y, s, g, _, !1, Zt(v, c).point, v, o, a, c, {}, !0)
              , b = !1
              , w = !1
              , T = !0
              , S = m.perspectiveRatio * n
              , A = 1 / (n * r)
              , k = 0
              , E = 0;
            x && (k = this.approximateTileDistance(x.first.tileDistance, x.first.angle, A, m.cameraDistance, h),
            E = this.approximateTileDistance(x.last.tileDistance, x.last.angle, A, m.cameraDistance, h));
            for (var C = 0; C < e.length; C += 5) {
                var P = e[C]
                  , M = e[C + 1]
                  , I = e[C + 2]
                  , z = e[C + 3];
                if (!x || z < -k || z > E)
                    ae(e, C, !1);
                else {
                    var L = this.projectPoint(u, P, M)
                      , D = I * S;
                    if (f.length > 0) {
                        var O = L.x - f[f.length - 4]
                          , R = L.y - f[f.length - 3];
                        if (D * D * 2 > O * O + R * R && C + 8 < e.length) {
                            var F = e[C + 8];
                            if (F > -k && F < E) {
                                ae(e, C, !1);
                                continue
                            }
                        }
                    }
                    var B = C / 5;
                    f.push(L.x, L.y, D, B),
                    ae(e, C, !0);
                    var N = L.x - D
                      , U = L.y - D
                      , V = L.x + D
                      , j = L.y + D;
                    if (T = T && this.isOffscreen(N, U, V, j),
                    w = w || this.isInsideGrid(N, U, V, j),
                    !i && this.grid.hitTestCircle(L.x, L.y, D, d)) {
                        if (!p)
                            return {
                                circles: [],
                                offscreen: !1
                            };
                        b = !0
                    }
                }
            }
            return {
                circles: b || !w ? [] : f,
                offscreen: T
            }
        }
        ,
        oe.prototype.queryRenderedSymbols = function(e) {
            if (0 === e.length || 0 === this.grid.keysLength() && 0 === this.ignoredGrid.keysLength())
                return {};
            for (var i = [], r = 1 / 0, n = 1 / 0, o = -1 / 0, a = -1 / 0, s = 0, l = e; s < l.length; s += 1) {
                var u = l[s]
                  , c = new t.Point(u.x + 100,u.y + 100);
                r = Math.min(r, c.x),
                n = Math.min(n, c.y),
                o = Math.max(o, c.x),
                a = Math.max(a, c.y),
                i.push(c)
            }
            for (var p = {}, h = {}, d = 0, f = this.grid.query(r, n, o, a).concat(this.ignoredGrid.query(r, n, o, a)); d < f.length; d += 1) {
                var m = f[d]
                  , y = m.key;
                if (void 0 === p[y.bucketInstanceId] && (p[y.bucketInstanceId] = {}),
                !p[y.bucketInstanceId][y.featureIndex]) {
                    var g = [new t.Point(m.x1,m.y1), new t.Point(m.x2,m.y1), new t.Point(m.x2,m.y2), new t.Point(m.x1,m.y2)];
                    t.polygonIntersectsPolygon(i, g) && (p[y.bucketInstanceId][y.featureIndex] = !0,
                    void 0 === h[y.bucketInstanceId] && (h[y.bucketInstanceId] = []),
                    h[y.bucketInstanceId].push(y.featureIndex))
                }
            }
            return h
        }
        ,
        oe.prototype.insertCollisionBox = function(t, e, i, r, n) {
            var o = {
                bucketInstanceId: i,
                featureIndex: r,
                collisionGroupID: n
            };
            (e ? this.ignoredGrid : this.grid).insert(o, t[0], t[1], t[2], t[3])
        }
        ,
        oe.prototype.insertCollisionCircles = function(t, e, i, r, n) {
            for (var o = e ? this.ignoredGrid : this.grid, a = {
                bucketInstanceId: i,
                featureIndex: r,
                collisionGroupID: n
            }, s = 0; s < t.length; s += 4)
                o.insertCircle(a, t[s], t[s + 1], t[s + 2])
        }
        ,
        oe.prototype.projectAnchor = function(t, e, i) {
            var r = [e, i, 0, 1];
            return ne(r, r, t),
            {
                perspectiveRatio: .5 + this.transform.cameraToCenterDistance / r[3] * .5,
                cameraDistance: r[3]
            }
        }
        ,
        oe.prototype.projectPoint = function(e, i, r) {
            var n = [i, r, 0, 1];
            return ne(n, n, e),
            new t.Point((n[0] / n[3] + 1) / 2 * this.transform.width + 100,(-n[1] / n[3] + 1) / 2 * this.transform.height + 100)
        }
        ,
        oe.prototype.projectAndGetPerspectiveRatio = function(e, i, r) {
            var n = [i, r, 0, 1];
            return ne(n, n, e),
            {
                point: new t.Point((n[0] / n[3] + 1) / 2 * this.transform.width + 100,(-n[1] / n[3] + 1) / 2 * this.transform.height + 100),
                perspectiveRatio: .5 + this.transform.cameraToCenterDistance / n[3] * .5
            }
        }
        ,
        oe.prototype.isOffscreen = function(t, e, i, r) {
            return i < 100 || t >= this.screenRightBoundary || r < 100 || e > this.screenBottomBoundary
        }
        ,
        oe.prototype.isInsideGrid = function(t, e, i, r) {
            return i >= 0 && t < this.gridRightBoundary && r >= 0 && e < this.gridBottomBoundary
        }
        ;
        var le = function(t, e, i, r) {
            this.opacity = t ? Math.max(0, Math.min(1, t.opacity + (t.placed ? e : -e))) : r && i ? 1 : 0,
            this.placed = i
        };
        le.prototype.isHidden = function() {
            return 0 === this.opacity && !this.placed
        }
        ;
        var ue = function(t, e, i, r, n) {
            this.text = new le(t ? t.text : null,e,i,n),
            this.icon = new le(t ? t.icon : null,e,r,n)
        };
        ue.prototype.isHidden = function() {
            return this.text.isHidden() && this.icon.isHidden()
        }
        ;
        var ce = function(t, e, i) {
            this.text = t,
            this.icon = e,
            this.skipFade = i
        }
          , pe = function(t) {
            this.crossSourceCollisions = t,
            this.maxGroupID = 0,
            this.collisionGroups = {}
        };
        pe.prototype.get = function(t) {
            if (this.crossSourceCollisions)
                return {
                    ID: 0,
                    predicate: null
                };
            if (!this.collisionGroups[t]) {
                var e = ++this.maxGroupID;
                this.collisionGroups[t] = {
                    ID: e,
                    predicate: function(t) {
                        return t.collisionGroupID === e
                    }
                }
            }
            return this.collisionGroups[t]
        }
        ;
        var he = function(t, e, i) {
            this.transform = t.clone(),
            this.collisionIndex = new oe(this.transform),
            this.placements = {},
            this.opacities = {},
            this.stale = !1,
            this.fadeDuration = e,
            this.retainedQueryData = {},
            this.collisionGroups = new pe(i)
        };
        function de(t, e, i) {
            t.emplaceBack(e ? 1 : 0, i ? 1 : 0),
            t.emplaceBack(e ? 1 : 0, i ? 1 : 0),
            t.emplaceBack(e ? 1 : 0, i ? 1 : 0),
            t.emplaceBack(e ? 1 : 0, i ? 1 : 0)
        }
        he.prototype.placeLayerTile = function(e, i, r, n) {
            var o = i.getBucket(e)
              , a = i.latestFeatureIndex;
            if (o && a && e.id === o.layerIds[0]) {
                var s = i.collisionBoxArray
                  , l = o.layers[0].layout
                  , u = Math.pow(2, this.transform.zoom - i.tileID.overscaledZ)
                  , c = i.tileSize / t.EXTENT
                  , p = this.transform.calculatePosMatrix(i.tileID.toUnwrapped())
                  , h = Ht(p, "map" === l.get("text-pitch-alignment"), "map" === l.get("text-rotation-alignment"), this.transform, se(i, 1, this.transform.zoom))
                  , d = Ht(p, "map" === l.get("icon-pitch-alignment"), "map" === l.get("icon-rotation-alignment"), this.transform, se(i, 1, this.transform.zoom));
                this.retainedQueryData[o.bucketInstanceId] = new function(t, e, i, r, n) {
                    this.bucketInstanceId = t,
                    this.featureIndex = e,
                    this.sourceLayerIndex = i,
                    this.bucketIndex = r,
                    this.tileID = n
                }
                (o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID),
                this.placeLayerBucket(o, p, h, d, u, c, r, i.holdingForFade(), n, s)
            }
        }
        ,
        he.prototype.placeLayerBucket = function(e, i, r, n, o, a, s, l, u, c) {
            var p = e.layers[0].layout
              , h = t.evaluateSizeForZoom(e.textSizeData, this.transform.zoom, t.properties.layout.properties["text-size"])
              , d = p.get("text-optional")
              , f = p.get("icon-optional")
              , m = p.get("text-allow-overlap")
              , y = p.get("icon-allow-overlap")
              , g = m && (y || !e.hasIconData() || f)
              , _ = y && (m || !e.hasTextData() || d)
              , v = this.collisionGroups.get(e.sourceID);
            !e.collisionArrays && c && e.deserializeCollisionBoxes(c);
            for (var x = 0; x < e.symbolInstances.length; x++) {
                var b = e.symbolInstances.get(x);
                if (!u[b.crossTileID]) {
                    if (l) {
                        this.placements[b.crossTileID] = new ce(!1,!1,!1);
                        continue
                    }
                    var w = !1
                      , T = !1
                      , S = !0
                      , A = null
                      , k = null
                      , E = null
                      , C = 0
                      , P = 0
                      , M = e.collisionArrays[x];
                    M.textFeatureIndex && (C = M.textFeatureIndex),
                    M.textBox && (w = (A = this.collisionIndex.placeCollisionBox(M.textBox, p.get("text-allow-overlap"), a, i, v.predicate)).box.length > 0,
                    S = S && A.offscreen);
                    var I = M.textCircles;
                    if (I) {
                        var z = e.text.placedSymbolArray.get(b.horizontalPlacedTextSymbolIndex)
                          , L = t.evaluateSizeForFeature(e.textSizeData, h, z);
                        k = this.collisionIndex.placeCollisionCircles(I, p.get("text-allow-overlap"), o, a, z, e.lineVertexArray, e.glyphOffsetArray, L, i, r, s, "map" === p.get("text-pitch-alignment"), v.predicate),
                        w = p.get("text-allow-overlap") || k.circles.length > 0,
                        S = S && k.offscreen
                    }
                    M.iconFeatureIndex && (P = M.iconFeatureIndex),
                    M.iconBox && (T = (E = this.collisionIndex.placeCollisionBox(M.iconBox, p.get("icon-allow-overlap"), a, i, v.predicate)).box.length > 0,
                    S = S && E.offscreen);
                    var D = d || 0 === b.numGlyphVertices && 0 === b.numVerticalGlyphVertices
                      , O = f || 0 === b.numIconVertices;
                    D || O ? O ? D || (T = T && w) : w = T && w : T = w = T && w,
                    w && A && this.collisionIndex.insertCollisionBox(A.box, p.get("text-ignore-placement"), e.bucketInstanceId, C, v.ID),
                    T && E && this.collisionIndex.insertCollisionBox(E.box, p.get("icon-ignore-placement"), e.bucketInstanceId, P, v.ID),
                    w && k && this.collisionIndex.insertCollisionCircles(k.circles, p.get("text-ignore-placement"), e.bucketInstanceId, C, v.ID),
                    this.placements[b.crossTileID] = new ce(w || g,T || _,S || e.justReloaded),
                    u[b.crossTileID] = !0
                }
            }
            e.justReloaded = !1
        }
        ,
        he.prototype.commit = function(t, e) {
            this.commitTime = e;
            var i = !1
              , r = t && 0 !== this.fadeDuration ? (this.commitTime - t.commitTime) / this.fadeDuration : 1
              , n = t ? t.opacities : {};
            for (var o in this.placements) {
                var a = this.placements[o]
                  , s = n[o];
                s ? (this.opacities[o] = new ue(s,r,a.text,a.icon),
                i = i || a.text !== s.text.placed || a.icon !== s.icon.placed) : (this.opacities[o] = new ue(null,r,a.text,a.icon,a.skipFade),
                i = i || a.text || a.icon)
            }
            for (var l in n) {
                var u = n[l];
                if (!this.opacities[l]) {
                    var c = new ue(u,r,!1,!1);
                    c.isHidden() || (this.opacities[l] = c,
                    i = i || u.text.placed || u.icon.placed)
                }
            }
            i ? this.lastPlacementChangeTime = e : "number" != typeof this.lastPlacementChangeTime && (this.lastPlacementChangeTime = t ? t.lastPlacementChangeTime : e)
        }
        ,
        he.prototype.updateLayerOpacities = function(t, e) {
            for (var i = {}, r = 0, n = e; r < n.length; r += 1) {
                var o = n[r]
                  , a = o.getBucket(t);
                a && o.latestFeatureIndex && t.id === a.layerIds[0] && this.updateBucketOpacities(a, i, o.collisionBoxArray)
            }
        }
        ,
        he.prototype.updateBucketOpacities = function(t, e, i) {
            t.hasTextData() && t.text.opacityVertexArray.clear(),
            t.hasIconData() && t.icon.opacityVertexArray.clear(),
            t.hasCollisionBoxData() && t.collisionBox.collisionVertexArray.clear(),
            t.hasCollisionCircleData() && t.collisionCircle.collisionVertexArray.clear();
            var r = t.layers[0].layout
              , n = new ue(null,0,!1,!1,!0)
              , o = r.get("text-allow-overlap")
              , a = r.get("icon-allow-overlap")
              , s = new ue(null,0,o && (a || !t.hasIconData() || r.get("icon-optional")),a && (o || !t.hasTextData() || r.get("text-optional")),!0);
            !t.collisionArrays && i && (t.hasCollisionBoxData() || t.hasCollisionCircleData()) && t.deserializeCollisionBoxes(i);
            for (var l = 0; l < t.symbolInstances.length; l++) {
                var u = t.symbolInstances.get(l)
                  , c = e[u.crossTileID]
                  , p = this.opacities[u.crossTileID];
                c ? p = n : p || (p = s,
                this.opacities[u.crossTileID] = p),
                e[u.crossTileID] = !0;
                var h = u.numGlyphVertices > 0 || u.numVerticalGlyphVertices > 0
                  , d = u.numIconVertices > 0;
                if (h) {
                    for (var f = be(p.text), m = (u.numGlyphVertices + u.numVerticalGlyphVertices) / 4, y = 0; y < m; y++)
                        t.text.opacityVertexArray.emplaceBack(f);
                    t.text.placedSymbolArray.get(u.horizontalPlacedTextSymbolIndex).hidden = p.text.isHidden(),
                    u.verticalPlacedTextSymbolIndex >= 0 && (t.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).hidden = p.text.isHidden())
                }
                if (d) {
                    for (var g = be(p.icon), _ = 0; _ < u.numIconVertices / 4; _++)
                        t.icon.opacityVertexArray.emplaceBack(g);
                    t.icon.placedSymbolArray.get(l).hidden = p.icon.isHidden()
                }
                if (t.hasCollisionBoxData() || t.hasCollisionCircleData()) {
                    var v = t.collisionArrays[l];
                    if (v) {
                        v.textBox && de(t.collisionBox.collisionVertexArray, p.text.placed, !1),
                        v.iconBox && de(t.collisionBox.collisionVertexArray, p.icon.placed, !1);
                        var x = v.textCircles;
                        if (x && t.hasCollisionCircleData())
                            for (var b = 0; b < x.length; b += 5) {
                                var w = c || 0 === x[b + 4];
                                de(t.collisionCircle.collisionVertexArray, p.text.placed, w)
                            }
                    }
                }
            }
            t.sortFeatures(this.transform.angle),
            this.retainedQueryData[t.bucketInstanceId] && (this.retainedQueryData[t.bucketInstanceId].featureSortOrder = t.featureSortOrder),
            t.hasTextData() && t.text.opacityVertexBuffer && t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),
            t.hasIconData() && t.icon.opacityVertexBuffer && t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),
            t.hasCollisionBoxData() && t.collisionBox.collisionVertexBuffer && t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),
            t.hasCollisionCircleData() && t.collisionCircle.collisionVertexBuffer && t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)
        }
        ,
        he.prototype.symbolFadeChange = function(t) {
            return 0 === this.fadeDuration ? 1 : (t - this.commitTime) / this.fadeDuration
        }
        ,
        he.prototype.hasTransitions = function(t) {
            return this.stale || t - this.lastPlacementChangeTime < this.fadeDuration
        }
        ,
        he.prototype.stillRecent = function(t) {
            return "undefined" !== this.commitTime && this.commitTime + this.fadeDuration > t
        }
        ,
        he.prototype.setStale = function() {
            this.stale = !0
        }
        ;
        var fe = Math.pow(2, 25)
          , me = Math.pow(2, 24)
          , ye = Math.pow(2, 17)
          , ge = Math.pow(2, 16)
          , _e = Math.pow(2, 9)
          , ve = Math.pow(2, 8)
          , xe = Math.pow(2, 1);
        function be(t) {
            if (0 === t.opacity && !t.placed)
                return 0;
            if (1 === t.opacity && t.placed)
                return 4294967295;
            var e = t.placed ? 1 : 0
              , i = Math.floor(127 * t.opacity);
            return i * fe + e * me + i * ye + e * ge + i * _e + e * ve + i * xe + e
        }
        var we = function() {
            this._currentTileIndex = 0,
            this._seenCrossTileIDs = {}
        };
        we.prototype.continuePlacement = function(t, e, i, r, n) {
            for (; this._currentTileIndex < t.length; ) {
                var o = t[this._currentTileIndex];
                if (e.placeLayerTile(r, o, i, this._seenCrossTileIDs),
                this._currentTileIndex++,
                n())
                    return !0
            }
        }
        ;
        var Te = function(t, e, i, r, n, o) {
            this.placement = new he(t,n,o),
            this._currentPlacementIndex = e.length - 1,
            this._forceFullPlacement = i,
            this._showCollisionBoxes = r,
            this._done = !1
        };
        Te.prototype.isDone = function() {
            return this._done
        }
        ,
        Te.prototype.continuePlacement = function(e, i, r) {
            for (var n = this, o = t.browser.now(), a = function() {
                var e = t.browser.now() - o;
                return !n._forceFullPlacement && e > 2
            }; this._currentPlacementIndex >= 0; ) {
                var s = i[e[n._currentPlacementIndex]]
                  , l = n.placement.collisionIndex.transform.zoom;
                if ("symbol" === s.type && (!s.minzoom || s.minzoom <= l) && (!s.maxzoom || s.maxzoom > l)) {
                    if (n._inProgressLayer || (n._inProgressLayer = new we),
                    n._inProgressLayer.continuePlacement(r[s.source], n.placement, n._showCollisionBoxes, s, a))
                        return;
                    delete n._inProgressLayer
                }
                n._currentPlacementIndex--
            }
            this._done = !0
        }
        ,
        Te.prototype.commit = function(t, e) {
            return this.placement.commit(t, e),
            this.placement
        }
        ;
        var Se = 512 / t.EXTENT / 2
          , Ae = function(t, e, i) {
            this.tileID = t,
            this.indexedSymbolInstances = {},
            this.bucketInstanceId = i;
            for (var r = 0; r < e.length; r++) {
                var n = e.get(r)
                  , o = n.key;
                this.indexedSymbolInstances[o] || (this.indexedSymbolInstances[o] = []),
                this.indexedSymbolInstances[o].push({
                    crossTileID: n.crossTileID,
                    coord: this.getScaledCoordinates(n, t)
                })
            }
        };
        Ae.prototype.getScaledCoordinates = function(e, i) {
            var r = i.canonical.z - this.tileID.canonical.z
              , n = Se / Math.pow(2, r);
            return {
                x: Math.floor((i.canonical.x * t.EXTENT + e.anchorX) * n),
                y: Math.floor((i.canonical.y * t.EXTENT + e.anchorY) * n)
            }
        }
        ,
        Ae.prototype.findMatches = function(t, e, i) {
            for (var r = this.tileID.canonical.z < e.canonical.z ? 1 : Math.pow(2, this.tileID.canonical.z - e.canonical.z), n = 0; n < t.length; n++) {
                var o = t.get(n);
                if (!o.crossTileID) {
                    var a = this.indexedSymbolInstances[o.key];
                    if (a)
                        for (var s = this.getScaledCoordinates(o, e), l = 0, u = a; l < u.length; l += 1) {
                            var c = u[l];
                            if (Math.abs(c.coord.x - s.x) <= r && Math.abs(c.coord.y - s.y) <= r && !i[c.crossTileID]) {
                                i[c.crossTileID] = !0,
                                o.crossTileID = c.crossTileID;
                                break
                            }
                        }
                }
            }
        }
        ;
        var ke = function() {
            this.maxCrossTileID = 0
        };
        ke.prototype.generate = function() {
            return ++this.maxCrossTileID
        }
        ;
        var Ee = function() {
            this.indexes = {},
            this.usedCrossTileIDs = {},
            this.lng = 0
        };
        Ee.prototype.handleWrapJump = function(t) {
            var e = Math.round((t - this.lng) / 360);
            if (0 !== e)
                for (var i in this.indexes) {
                    var r = this.indexes[i]
                      , n = {};
                    for (var o in r) {
                        var a = r[o];
                        a.tileID = a.tileID.unwrapTo(a.tileID.wrap + e),
                        n[a.tileID.key] = a
                    }
                    this.indexes[i] = n
                }
            this.lng = t
        }
        ,
        Ee.prototype.addBucket = function(t, e, i) {
            if (this.indexes[t.overscaledZ] && this.indexes[t.overscaledZ][t.key]) {
                if (this.indexes[t.overscaledZ][t.key].bucketInstanceId === e.bucketInstanceId)
                    return !1;
                this.removeBucketCrossTileIDs(t.overscaledZ, this.indexes[t.overscaledZ][t.key])
            }
            for (var r = 0; r < e.symbolInstances.length; r++)
                e.symbolInstances.get(r).crossTileID = 0;
            this.usedCrossTileIDs[t.overscaledZ] || (this.usedCrossTileIDs[t.overscaledZ] = {});
            var n = this.usedCrossTileIDs[t.overscaledZ];
            for (var o in this.indexes) {
                var a = this.indexes[o];
                if (Number(o) > t.overscaledZ)
                    for (var s in a) {
                        var l = a[s];
                        l.tileID.isChildOf(t) && l.findMatches(e.symbolInstances, t, n)
                    }
                else {
                    var u = a[t.scaledTo(Number(o)).key];
                    u && u.findMatches(e.symbolInstances, t, n)
                }
            }
            for (var c = 0; c < e.symbolInstances.length; c++) {
                var p = e.symbolInstances.get(c);
                p.crossTileID || (p.crossTileID = i.generate(),
                n[p.crossTileID] = !0)
            }
            return void 0 === this.indexes[t.overscaledZ] && (this.indexes[t.overscaledZ] = {}),
            this.indexes[t.overscaledZ][t.key] = new Ae(t,e.symbolInstances,e.bucketInstanceId),
            !0
        }
        ,
        Ee.prototype.removeBucketCrossTileIDs = function(t, e) {
            for (var i in e.indexedSymbolInstances)
                for (var r = 0, n = e.indexedSymbolInstances[i]; r < n.length; r += 1) {
                    var o = n[r];
                    delete this.usedCrossTileIDs[t][o.crossTileID]
                }
        }
        ,
        Ee.prototype.removeStaleBuckets = function(t) {
            var e = !1;
            for (var i in this.indexes) {
                var r = this.indexes[i];
                for (var n in r)
                    t[r[n].bucketInstanceId] || (this.removeBucketCrossTileIDs(i, r[n]),
                    delete r[n],
                    e = !0)
            }
            return e
        }
        ;
        var Ce = function() {
            this.layerIndexes = {},
            this.crossTileIDs = new ke,
            this.maxBucketInstanceId = 0,
            this.bucketsInCurrentPlacement = {}
        };
        Ce.prototype.addLayer = function(t, e, i) {
            var r = this.layerIndexes[t.id];
            void 0 === r && (r = this.layerIndexes[t.id] = new Ee);
            var n = !1
              , o = {};
            r.handleWrapJump(i);
            for (var a = 0, s = e; a < s.length; a += 1) {
                var l = s[a]
                  , u = l.getBucket(t);
                u && t.id === u.layerIds[0] && (u.bucketInstanceId || (u.bucketInstanceId = ++this.maxBucketInstanceId),
                r.addBucket(l.tileID, u, this.crossTileIDs) && (n = !0),
                o[u.bucketInstanceId] = !0)
            }
            return r.removeStaleBuckets(o) && (n = !0),
            n
        }
        ,
        Ce.prototype.pruneUnusedLayers = function(t) {
            var e = {};
            for (var i in t.forEach(function(t) {
                e[t] = !0
            }),
            this.layerIndexes)
                e[i] || delete this.layerIndexes[i]
        }
        ;
        var Pe = function(e, i) {
            return t.emitValidationErrors(e, i && i.filter(function(t) {
                return "source.canvas" !== t.identifier
            }))
        }
          , Me = t.pick(Rt, ["addLayer", "removeLayer", "setPaintProperty", "setLayoutProperty", "setFilter", "addSource", "removeSource", "setLayerZoomRange", "setLight", "setTransition", "setGeoJSONSourceData"])
          , Ie = t.pick(Rt, ["setCenter", "setZoom", "setBearing", "setPitch"])
          , ze = function(e) {
            function i(r, n) {
                var o = this;
                void 0 === n && (n = {}),
                e.call(this),
                this.map = r,
                this.dispatcher = new w((zt || (zt = new It),
                zt),this),
                this.imageManager = new p,
                this.glyphManager = new g(r._transformRequest,n.localIdeographFontFamily),
                this.lineAtlas = new b(256,512),
                this.crossTileSymbolIndex = new Ce,
                this._layers = {},
                this._order = [],
                this.sourceCaches = {},
                this.zoomHistory = new t.ZoomHistory,
                this._loaded = !1,
                this._resetUpdates(),
                this.dispatcher.broadcast("setReferrer", t.getReferrer());
                var a = this;
                this._rtlTextPluginCallback = i.registerForPluginAvailability(function(t) {
                    for (var e in a.dispatcher.broadcast("loadRTLTextPlugin", t.pluginURL, t.completionCallback),
                    a.sourceCaches)
                        a.sourceCaches[e].reload()
                }),
                this.on("data", function(t) {
                    if ("source" === t.dataType && "metadata" === t.sourceDataType) {
                        var e = o.sourceCaches[t.sourceId];
                        if (e) {
                            var i = e.getSource();
                            if (i && i.vectorLayerIds)
                                for (var r in o._layers) {
                                    var n = o._layers[r];
                                    n.source === i.id && o._validateLayer(n)
                                }
                        }
                    }
                })
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.loadURL = function(e, i) {
                var r = this;
                void 0 === i && (i = {}),
                this.fire(new t.Event("dataloading",{
                    dataType: "style"
                }));
                var n = "boolean" == typeof i.validate ? i.validate : !t.isMapboxURL(e);
                e = t.normalizeStyleURL(e, i.accessToken);
                var o = this.map._transformRequest(e, t.ResourceType.Style);
                this._request = t.getJSON(o, function(e, i) {
                    r._request = null,
                    e ? r.fire(new t.ErrorEvent(e)) : i && r._load(i, n)
                })
            }
            ,
            i.prototype.loadJSON = function(e, i) {
                var r = this;
                void 0 === i && (i = {}),
                this.fire(new t.Event("dataloading",{
                    dataType: "style"
                })),
                this._request = t.browser.frame(function() {
                    r._request = null,
                    r._load(e, !1 !== i.validate)
                })
            }
            ,
            i.prototype._load = function(e, i) {
                var r = this;
                if (!i || !Pe(this, t.validateStyle(e))) {
                    for (var n in this._loaded = !0,
                    this.stylesheet = e,
                    e.sources)
                        r.addSource(n, e.sources[n], {
                            validate: !1
                        });
                    e.sprite ? this._spriteRequest = function(e, i, r) {
                        var n, o, a, s = t.browser.devicePixelRatio > 1 ? "@2x" : "", l = t.getJSON(i(t.normalizeSpriteURL(e, s, ".json"), t.ResourceType.SpriteJSON), function(t, e) {
                            l = null,
                            a || (a = t,
                            n = e,
                            c())
                        }), u = t.getImage(i(t.normalizeSpriteURL(e, s, ".png"), t.ResourceType.SpriteImage), function(t, e) {
                            u = null,
                            a || (a = t,
                            o = e,
                            c())
                        });
                        function c() {
                            if (a)
                                r(a);
                            else if (n && o) {
                                var e = t.browser.getImageData(o)
                                  , i = {};
                                for (var s in n) {
                                    var l = n[s]
                                      , u = l.width
                                      , c = l.height
                                      , p = l.x
                                      , h = l.y
                                      , d = l.sdf
                                      , f = l.pixelRatio
                                      , m = new t.RGBAImage({
                                        width: u,
                                        height: c
                                    });
                                    t.RGBAImage.copy(e, m, {
                                        x: p,
                                        y: h
                                    }, {
                                        x: 0,
                                        y: 0
                                    }, {
                                        width: u,
                                        height: c
                                    }),
                                    i[s] = {
                                        data: m,
                                        pixelRatio: f,
                                        sdf: d
                                    }
                                }
                                r(null, i)
                            }
                        }
                        return {
                            cancel: function() {
                                l && (l.cancel(),
                                l = null),
                                u && (u.cancel(),
                                u = null)
                            }
                        }
                    }(e.sprite, this.map._transformRequest, function(e, i) {
                        if (r._spriteRequest = null,
                        e)
                            r.fire(new t.ErrorEvent(e));
                        else if (i)
                            for (var n in i)
                                r.imageManager.addImage(n, i[n]);
                        r.imageManager.setLoaded(!0),
                        r.fire(new t.Event("data",{
                            dataType: "style"
                        }))
                    }) : this.imageManager.setLoaded(!0),
                    this.glyphManager.setURL(e.glyphs);
                    var o = Ot(this.stylesheet.layers);
                    this._order = o.map(function(t) {
                        return t.id
                    }),
                    this._layers = {};
                    for (var a = 0, s = o; a < s.length; a += 1) {
                        var l = s[a];
                        (l = t.createStyleLayer(l)).setEventedParent(r, {
                            layer: {
                                id: l.id
                            }
                        }),
                        r._layers[l.id] = l
                    }
                    this.dispatcher.broadcast("setLayers", this._serializeLayers(this._order)),
                    this.light = new x(this.stylesheet.light),
                    this.fire(new t.Event("data",{
                        dataType: "style"
                    })),
                    this.fire(new t.Event("style.load"))
                }
            }
            ,
            i.prototype._validateLayer = function(e) {
                var i = this.sourceCaches[e.source];
                if (i) {
                    var r = e.sourceLayer;
                    if (r) {
                        var n = i.getSource();
                        ("geojson" === n.type || n.vectorLayerIds && -1 === n.vectorLayerIds.indexOf(r)) && this.fire(new t.ErrorEvent(new Error('Source layer "' + r + '" does not exist on source "' + n.id + '" as specified by style layer "' + e.id + '"')))
                    }
                }
            }
            ,
            i.prototype.loaded = function() {
                if (!this._loaded)
                    return !1;
                if (Object.keys(this._updatedSources).length)
                    return !1;
                for (var t in this.sourceCaches)
                    if (!this.sourceCaches[t].loaded())
                        return !1;
                return !!this.imageManager.isLoaded()
            }
            ,
            i.prototype._serializeLayers = function(t) {
                for (var e = [], i = 0, r = t; i < r.length; i += 1) {
                    var n = r[i]
                      , o = this._layers[n];
                    "custom" !== o.type && e.push(o.serialize())
                }
                return e
            }
            ,
            i.prototype.hasTransitions = function() {
                if (this.light && this.light.hasTransition())
                    return !0;
                for (var t in this.sourceCaches)
                    if (this.sourceCaches[t].hasTransition())
                        return !0;
                for (var e in this._layers)
                    if (this._layers[e].hasTransition())
                        return !0;
                return !1
            }
            ,
            i.prototype._checkLoaded = function() {
                if (!this._loaded)
                    throw new Error("Style is not done loading")
            }
            ,
            i.prototype.update = function(e) {
                if (this._loaded) {
                    var i = this._changed;
                    if (this._changed) {
                        var r = Object.keys(this._updatedLayers)
                          , n = Object.keys(this._removedLayers);
                        for (var o in (r.length || n.length) && this._updateWorkerLayers(r, n),
                        this._updatedSources) {
                            var a = this._updatedSources[o];
                            "reload" === a ? this._reloadSource(o) : "clear" === a && this._clearSource(o)
                        }
                        for (var s in this._updatedPaintProps)
                            this._layers[s].updateTransitions(e);
                        this.light.updateTransitions(e),
                        this._resetUpdates()
                    }
                    for (var l in this.sourceCaches)
                        this.sourceCaches[l].used = !1;
                    for (var u = 0, c = this._order; u < c.length; u += 1) {
                        var p = c[u]
                          , h = this._layers[p];
                        h.recalculate(e),
                        !h.isHidden(e.zoom) && h.source && (this.sourceCaches[h.source].used = !0)
                    }
                    this.light.recalculate(e),
                    this.z = e.zoom,
                    i && this.fire(new t.Event("data",{
                        dataType: "style"
                    }))
                }
            }
            ,
            i.prototype._updateWorkerLayers = function(t, e) {
                this.dispatcher.broadcast("updateLayers", {
                    layers: this._serializeLayers(t),
                    removedIds: e
                })
            }
            ,
            i.prototype._resetUpdates = function() {
                this._changed = !1,
                this._updatedLayers = {},
                this._removedLayers = {},
                this._updatedSources = {},
                this._updatedPaintProps = {}
            }
            ,
            i.prototype.setState = function(e) {
                var i = this;
                if (this._checkLoaded(),
                Pe(this, t.validateStyle(e)))
                    return !1;
                (e = t.clone(e)).layers = Ot(e.layers);
                var r = function(e, i) {
                    if (!e)
                        return [{
                            command: Rt.setStyle,
                            args: [i]
                        }];
                    var r = [];
                    try {
                        if (!t.isEqual(e.version, i.version))
                            return [{
                                command: Rt.setStyle,
                                args: [i]
                            }];
                        t.isEqual(e.center, i.center) || r.push({
                            command: Rt.setCenter,
                            args: [i.center]
                        }),
                        t.isEqual(e.zoom, i.zoom) || r.push({
                            command: Rt.setZoom,
                            args: [i.zoom]
                        }),
                        t.isEqual(e.bearing, i.bearing) || r.push({
                            command: Rt.setBearing,
                            args: [i.bearing]
                        }),
                        t.isEqual(e.pitch, i.pitch) || r.push({
                            command: Rt.setPitch,
                            args: [i.pitch]
                        }),
                        t.isEqual(e.sprite, i.sprite) || r.push({
                            command: Rt.setSprite,
                            args: [i.sprite]
                        }),
                        t.isEqual(e.glyphs, i.glyphs) || r.push({
                            command: Rt.setGlyphs,
                            args: [i.glyphs]
                        }),
                        t.isEqual(e.transition, i.transition) || r.push({
                            command: Rt.setTransition,
                            args: [i.transition]
                        }),
                        t.isEqual(e.light, i.light) || r.push({
                            command: Rt.setLight,
                            args: [i.light]
                        });
                        var n = {}
                          , o = [];
                        !function(e, i, r, n) {
                            var o;
                            for (o in i = i || {},
                            e = e || {})
                                e.hasOwnProperty(o) && (i.hasOwnProperty(o) || Bt(o, r, n));
                            for (o in i)
                                i.hasOwnProperty(o) && (e.hasOwnProperty(o) ? t.isEqual(e[o], i[o]) || ("geojson" === e[o].type && "geojson" === i[o].type && Ut(e, i, o) ? r.push({
                                    command: Rt.setGeoJSONSourceData,
                                    args: [o, i[o].data]
                                }) : Nt(o, i, r, n)) : Ft(o, i, r))
                        }(e.sources, i.sources, o, n);
                        var a = [];
                        e.layers && e.layers.forEach(function(t) {
                            n[t.source] ? r.push({
                                command: Rt.removeLayer,
                                args: [t.id]
                            }) : a.push(t)
                        }),
                        r = r.concat(o),
                        function(e, i, r) {
                            i = i || [];
                            var n, o, a, s, l, u, c, p = (e = e || []).map(jt), h = i.map(jt), d = e.reduce($t, {}), f = i.reduce($t, {}), m = p.slice(), y = Object.create(null);
                            for (n = 0,
                            o = 0; n < p.length; n++)
                                a = p[n],
                                f.hasOwnProperty(a) ? o++ : (r.push({
                                    command: Rt.removeLayer,
                                    args: [a]
                                }),
                                m.splice(m.indexOf(a, o), 1));
                            for (n = 0,
                            o = 0; n < h.length; n++)
                                a = h[h.length - 1 - n],
                                m[m.length - 1 - n] !== a && (d.hasOwnProperty(a) ? (r.push({
                                    command: Rt.removeLayer,
                                    args: [a]
                                }),
                                m.splice(m.lastIndexOf(a, m.length - o), 1)) : o++,
                                u = m[m.length - n],
                                r.push({
                                    command: Rt.addLayer,
                                    args: [f[a], u]
                                }),
                                m.splice(m.length - n, 0, a),
                                y[a] = !0);
                            for (n = 0; n < h.length; n++)
                                if (s = d[a = h[n]],
                                l = f[a],
                                !y[a] && !t.isEqual(s, l))
                                    if (t.isEqual(s.source, l.source) && t.isEqual(s["source-layer"], l["source-layer"]) && t.isEqual(s.type, l.type)) {
                                        for (c in Vt(s.layout, l.layout, r, a, null, Rt.setLayoutProperty),
                                        Vt(s.paint, l.paint, r, a, null, Rt.setPaintProperty),
                                        t.isEqual(s.filter, l.filter) || r.push({
                                            command: Rt.setFilter,
                                            args: [a, l.filter]
                                        }),
                                        t.isEqual(s.minzoom, l.minzoom) && t.isEqual(s.maxzoom, l.maxzoom) || r.push({
                                            command: Rt.setLayerZoomRange,
                                            args: [a, l.minzoom, l.maxzoom]
                                        }),
                                        s)
                                            s.hasOwnProperty(c) && "layout" !== c && "paint" !== c && "filter" !== c && "metadata" !== c && "minzoom" !== c && "maxzoom" !== c && (0 === c.indexOf("paint.") ? Vt(s[c], l[c], r, a, c.slice(6), Rt.setPaintProperty) : t.isEqual(s[c], l[c]) || r.push({
                                                command: Rt.setLayerProperty,
                                                args: [a, c, l[c]]
                                            }));
                                        for (c in l)
                                            l.hasOwnProperty(c) && !s.hasOwnProperty(c) && "layout" !== c && "paint" !== c && "filter" !== c && "metadata" !== c && "minzoom" !== c && "maxzoom" !== c && (0 === c.indexOf("paint.") ? Vt(s[c], l[c], r, a, c.slice(6), Rt.setPaintProperty) : t.isEqual(s[c], l[c]) || r.push({
                                                command: Rt.setLayerProperty,
                                                args: [a, c, l[c]]
                                            }))
                                    } else
                                        r.push({
                                            command: Rt.removeLayer,
                                            args: [a]
                                        }),
                                        u = m[m.lastIndexOf(a) + 1],
                                        r.push({
                                            command: Rt.addLayer,
                                            args: [l, u]
                                        })
                        }(a, i.layers, r)
                    } catch (t) {
                        console.warn("Unable to compute style diff:", t),
                        r = [{
                            command: Rt.setStyle,
                            args: [i]
                        }]
                    }
                    return r
                }(this.serialize(), e).filter(function(t) {
                    return !(t.command in Ie)
                });
                if (0 === r.length)
                    return !1;
                var n = r.filter(function(t) {
                    return !(t.command in Me)
                });
                if (n.length > 0)
                    throw new Error("Unimplemented: " + n.map(function(t) {
                        return t.command
                    }).join(", ") + ".");
                return r.forEach(function(t) {
                    "setTransition" !== t.command && i[t.command].apply(i, t.args)
                }),
                this.stylesheet = e,
                !0
            }
            ,
            i.prototype.addImage = function(e, i) {
                if (this.getImage(e))
                    return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));
                this.imageManager.addImage(e, i),
                this.fire(new t.Event("data",{
                    dataType: "style"
                }))
            }
            ,
            i.prototype.getImage = function(t) {
                return this.imageManager.getImage(t)
            }
            ,
            i.prototype.removeImage = function(e) {
                if (!this.getImage(e))
                    return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));
                this.imageManager.removeImage(e),
                this.fire(new t.Event("data",{
                    dataType: "style"
                }))
            }
            ,
            i.prototype.listImages = function() {
                return this._checkLoaded(),
                this.imageManager.listImages()
            }
            ,
            i.prototype.addSource = function(e, i, r) {
                var n = this;
                if (this._checkLoaded(),
                void 0 !== this.sourceCaches[e])
                    throw new Error("There is already a source with this ID");
                if (!i.type)
                    throw new Error("The type property must be defined, but the only the following properties were given: " + Object.keys(i).join(", ") + ".");
                if (!(["vector", "raster", "geojson", "video", "image"].indexOf(i.type) >= 0 && this._validate(t.validateStyle.source, "sources." + e, i, null, r))) {
                    this.map && this.map._collectResourceTiming && (i.collectResourceTiming = !0);
                    var o = this.sourceCaches[e] = new Et(e,i,this.dispatcher);
                    o.style = this,
                    o.setEventedParent(this, function() {
                        return {
                            isSourceLoaded: n.loaded(),
                            source: o.serialize(),
                            sourceId: e
                        }
                    }),
                    o.onAdd(this.map),
                    this._changed = !0
                }
            }
            ,
            i.prototype.removeSource = function(e) {
                if (this._checkLoaded(),
                void 0 === this.sourceCaches[e])
                    throw new Error("There is no source with this ID");
                for (var i in this._layers)
                    if (this._layers[i].source === e)
                        return this.fire(new t.ErrorEvent(new Error('Source "' + e + '" cannot be removed while layer "' + i + '" is using it.')));
                var r = this.sourceCaches[e];
                delete this.sourceCaches[e],
                delete this._updatedSources[e],
                r.fire(new t.Event("data",{
                    sourceDataType: "metadata",
                    dataType: "source",
                    sourceId: e
                })),
                r.setEventedParent(null),
                r.clearTiles(),
                r.onRemove && r.onRemove(this.map),
                this._changed = !0
            }
            ,
            i.prototype.setGeoJSONSourceData = function(t, e) {
                this._checkLoaded(),
                this.sourceCaches[t].getSource().setData(e),
                this._changed = !0
            }
            ,
            i.prototype.getSource = function(t) {
                return this.sourceCaches[t] && this.sourceCaches[t].getSource()
            }
            ,
            i.prototype.addLayer = function(e, i, r) {
                this._checkLoaded();
                var n = e.id;
                if (this.getLayer(n))
                    this.fire(new t.ErrorEvent(new Error('Layer with id "' + n + '" already exists on this map')));
                else {
                    var o;
                    if ("custom" === e.type) {
                        if (Pe(this, t.validateCustomStyleLayer(e)))
                            return;
                        o = t.createStyleLayer(e)
                    } else {
                        if ("object" == typeof e.source && (this.addSource(n, e.source),
                        e = t.clone(e),
                        e = t.extend(e, {
                            source: n
                        })),
                        this._validate(t.validateStyle.layer, "layers." + n, e, {
                            arrayIndex: -1
                        }, r))
                            return;
                        o = t.createStyleLayer(e),
                        this._validateLayer(o),
                        o.setEventedParent(this, {
                            layer: {
                                id: n
                            }
                        })
                    }
                    var a = i ? this._order.indexOf(i) : this._order.length;
                    if (i && -1 === a)
                        this.fire(new t.ErrorEvent(new Error('Layer with id "' + i + '" does not exist on this map.')));
                    else {
                        if (this._order.splice(a, 0, n),
                        this._layerOrderChanged = !0,
                        this._layers[n] = o,
                        this._removedLayers[n] && o.source && "custom" !== o.type) {
                            var s = this._removedLayers[n];
                            delete this._removedLayers[n],
                            s.type !== o.type ? this._updatedSources[o.source] = "clear" : (this._updatedSources[o.source] = "reload",
                            this.sourceCaches[o.source].pause())
                        }
                        this._updateLayer(o),
                        o.onAdd && o.onAdd(this.map)
                    }
                }
            }
            ,
            i.prototype.moveLayer = function(e, i) {
                if (this._checkLoaded(),
                this._changed = !0,
                this._layers[e]) {
                    if (e !== i) {
                        var r = this._order.indexOf(e);
                        this._order.splice(r, 1);
                        var n = i ? this._order.indexOf(i) : this._order.length;
                        i && -1 === n ? this.fire(new t.ErrorEvent(new Error('Layer with id "' + i + '" does not exist on this map.'))) : (this._order.splice(n, 0, e),
                        this._layerOrderChanged = !0)
                    }
                } else
                    this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be moved.")))
            }
            ,
            i.prototype.removeLayer = function(e) {
                this._checkLoaded();
                var i = this._layers[e];
                if (i) {
                    i.setEventedParent(null);
                    var r = this._order.indexOf(e);
                    this._order.splice(r, 1),
                    this._layerOrderChanged = !0,
                    this._changed = !0,
                    this._removedLayers[e] = i,
                    delete this._layers[e],
                    delete this._updatedLayers[e],
                    delete this._updatedPaintProps[e],
                    i.onRemove && i.onRemove(this.map)
                } else
                    this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be removed.")))
            }
            ,
            i.prototype.getLayer = function(t) {
                return this._layers[t]
            }
            ,
            i.prototype.setLayerZoomRange = function(e, i, r) {
                this._checkLoaded();
                var n = this.getLayer(e);
                n ? n.minzoom === i && n.maxzoom === r || (null != i && (n.minzoom = i),
                null != r && (n.maxzoom = r),
                this._updateLayer(n)) : this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot have zoom extent.")))
            }
            ,
            i.prototype.setFilter = function(e, i) {
                this._checkLoaded();
                var r = this.getLayer(e);
                if (r) {
                    if (!t.isEqual(r.filter, i))
                        return null == i ? (r.filter = void 0,
                        void this._updateLayer(r)) : void (this._validate(t.validateStyle.filter, "layers." + r.id + ".filter", i) || (r.filter = t.clone(i),
                        this._updateLayer(r)))
                } else
                    this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be filtered.")))
            }
            ,
            i.prototype.getFilter = function(e) {
                return t.clone(this.getLayer(e).filter)
            }
            ,
            i.prototype.setLayoutProperty = function(e, i, r) {
                this._checkLoaded();
                var n = this.getLayer(e);
                n ? t.isEqual(n.getLayoutProperty(i), r) || (n.setLayoutProperty(i, r),
                this._updateLayer(n)) : this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be styled.")))
            }
            ,
            i.prototype.getLayoutProperty = function(t, e) {
                return this.getLayer(t).getLayoutProperty(e)
            }
            ,
            i.prototype.setPaintProperty = function(e, i, r) {
                this._checkLoaded();
                var n = this.getLayer(e);
                n ? t.isEqual(n.getPaintProperty(i), r) || (n.setPaintProperty(i, r) && this._updateLayer(n),
                this._changed = !0,
                this._updatedPaintProps[e] = !0) : this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be styled.")))
            }
            ,
            i.prototype.getPaintProperty = function(t, e) {
                return this.getLayer(t).getPaintProperty(e)
            }
            ,
            i.prototype.setFeatureState = function(e, i) {
                this._checkLoaded();
                var r = e.source
                  , n = e.sourceLayer
                  , o = this.sourceCaches[r]
                  , a = parseInt(e.id, 10);
                void 0 !== o ? "vector" !== o.getSource().type || n ? isNaN(a) || a < 0 ? this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))) : o.setFeatureState(n, a, i) : this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))) : this.fire(new t.ErrorEvent(new Error("The source '" + r + "' does not exist in the map's style.")))
            }
            ,
            i.prototype.getFeatureState = function(e) {
                this._checkLoaded();
                var i = e.source
                  , r = e.sourceLayer
                  , n = this.sourceCaches[i]
                  , o = parseInt(e.id, 10);
                if (void 0 !== n)
                    if ("vector" !== n.getSource().type || r) {
                        if (!(isNaN(o) || o < 0))
                            return n.getFeatureState(r, o);
                        this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))
                    } else
                        this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
                else
                    this.fire(new t.ErrorEvent(new Error("The source '" + i + "' does not exist in the map's style.")))
            }
            ,
            i.prototype.getTransition = function() {
                return t.extend({
                    duration: 300,
                    delay: 0
                }, this.stylesheet && this.stylesheet.transition)
            }
            ,
            i.prototype.serialize = function() {
                return t.filterObject({
                    version: this.stylesheet.version,
                    name: this.stylesheet.name,
                    metadata: this.stylesheet.metadata,
                    light: this.stylesheet.light,
                    center: this.stylesheet.center,
                    zoom: this.stylesheet.zoom,
                    bearing: this.stylesheet.bearing,
                    pitch: this.stylesheet.pitch,
                    sprite: this.stylesheet.sprite,
                    glyphs: this.stylesheet.glyphs,
                    transition: this.stylesheet.transition,
                    sources: t.mapObject(this.sourceCaches, function(t) {
                        return t.serialize()
                    }),
                    layers: this._serializeLayers(this._order)
                }, function(t) {
                    return void 0 !== t
                })
            }
            ,
            i.prototype._updateLayer = function(t) {
                this._updatedLayers[t.id] = !0,
                t.source && !this._updatedSources[t.source] && (this._updatedSources[t.source] = "reload",
                this.sourceCaches[t.source].pause()),
                this._changed = !0
            }
            ,
            i.prototype._flattenRenderedFeatures = function(t) {
                for (var e = [], i = this._order.length - 1; i >= 0; i--)
                    for (var r = this._order[i], n = 0, o = t; n < o.length; n += 1) {
                        var a = o[n][r];
                        if (a)
                            for (var s = 0, l = a; s < l.length; s += 1) {
                                var u = l[s];
                                e.push(u)
                            }
                    }
                return e
            }
            ,
            i.prototype.queryRenderedFeatures = function(e, i, r) {
                i && i.filter && this._validate(t.validateStyle.filter, "queryRenderedFeatures.filter", i.filter);
                var n = {};
                if (i && i.layers) {
                    if (!Array.isArray(i.layers))
                        return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),
                        [];
                    for (var o = 0, a = i.layers; o < a.length; o += 1) {
                        var s = a[o]
                          , l = this._layers[s];
                        if (!l)
                            return this.fire(new t.ErrorEvent(new Error("The layer '" + s + "' does not exist in the map's style and cannot be queried for features."))),
                            [];
                        n[l.source] = !0
                    }
                }
                var u = []
                  , c = e.map(function(t) {
                    return r.pointCoordinate(t)
                });
                for (var p in this.sourceCaches)
                    i.layers && !n[p] || u.push(D(this.sourceCaches[p], this._layers, c, i, r));
                return this.placement && u.push(function(t, e, i, r, n, o) {
                    for (var a = {}, s = n.queryRenderedSymbols(i), l = [], u = 0, c = Object.keys(s).map(Number); u < c.length; u += 1) {
                        var p = c[u];
                        l.push(o[p])
                    }
                    l.sort(O);
                    for (var h = function() {
                        var e = f[d]
                          , i = e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId], e.bucketIndex, e.sourceLayerIndex, r.filter, r.layers, t);
                        for (var n in i) {
                            var o = a[n] = a[n] || []
                              , l = i[n];
                            l.sort(function(t, i) {
                                var r = e.featureSortOrder;
                                if (r) {
                                    var n = r.indexOf(t.featureIndex);
                                    return r.indexOf(i.featureIndex) - n
                                }
                                return i.featureIndex - t.featureIndex
                            });
                            for (var u = 0, c = l; u < c.length; u += 1) {
                                var p = c[u];
                                o.push(p.feature)
                            }
                        }
                    }, d = 0, f = l; d < f.length; d += 1)
                        h();
                    var m = function(i) {
                        a[i].forEach(function(r) {
                            var n = t[i]
                              , o = e[n.source].getFeatureState(r.layer["source-layer"], r.id);
                            r.source = r.layer.source,
                            r.layer["source-layer"] && (r.sourceLayer = r.layer["source-layer"]),
                            r.state = o
                        })
                    };
                    for (var y in a)
                        m(y);
                    return a
                }(this._layers, this.sourceCaches, e, i, this.placement.collisionIndex, this.placement.retainedQueryData)),
                this._flattenRenderedFeatures(u)
            }
            ,
            i.prototype.querySourceFeatures = function(e, i) {
                i && i.filter && this._validate(t.validateStyle.filter, "querySourceFeatures.filter", i.filter);
                var r = this.sourceCaches[e];
                return r ? function(t, e) {
                    for (var i = t.getRenderableIds().map(function(e) {
                        return t.getTileByID(e)
                    }), r = [], n = {}, o = 0; o < i.length; o++) {
                        var a = i[o]
                          , s = a.tileID.canonical.key;
                        n[s] || (n[s] = !0,
                        a.querySourceFeatures(r, e))
                    }
                    return r
                }(r, i) : []
            }
            ,
            i.prototype.addSourceType = function(t, e, r) {
                return i.getSourceType(t) ? r(new Error('A source type called "' + t + '" already exists.')) : (i.setSourceType(t, e),
                e.workerSourceURL ? void this.dispatcher.broadcast("loadWorkerSource", {
                    name: t,
                    url: e.workerSourceURL
                }, r) : r(null, null))
            }
            ,
            i.prototype.getLight = function() {
                return this.light.getLight()
            }
            ,
            i.prototype.setLight = function(e) {
                this._checkLoaded();
                var i = this.light.getLight()
                  , r = !1;
                for (var n in e)
                    if (!t.isEqual(e[n], i[n])) {
                        r = !0;
                        break
                    }
                if (r) {
                    var o = {
                        now: t.browser.now(),
                        transition: t.extend({
                            duration: 300,
                            delay: 0
                        }, this.stylesheet.transition)
                    };
                    this.light.setLight(e),
                    this.light.updateTransitions(o)
                }
            }
            ,
            i.prototype._validate = function(e, i, r, n, o) {
                return (!o || !1 !== o.validate) && Pe(this, e.call(t.validateStyle, t.extend({
                    key: i,
                    style: this.serialize(),
                    value: r,
                    styleSpec: t.styleSpec
                }, n)))
            }
            ,
            i.prototype._remove = function() {
                for (var e in this._request && (this._request.cancel(),
                this._request = null),
                this._spriteRequest && (this._spriteRequest.cancel(),
                this._spriteRequest = null),
                t.evented.off("pluginAvailable", this._rtlTextPluginCallback),
                this.sourceCaches)
                    this.sourceCaches[e].clearTiles();
                this.dispatcher.remove()
            }
            ,
            i.prototype._clearSource = function(t) {
                this.sourceCaches[t].clearTiles()
            }
            ,
            i.prototype._reloadSource = function(t) {
                this.sourceCaches[t].resume(),
                this.sourceCaches[t].reload()
            }
            ,
            i.prototype._updateSources = function(t) {
                for (var e in this.sourceCaches)
                    this.sourceCaches[e].update(t)
            }
            ,
            i.prototype._generateCollisionBoxes = function() {
                for (var t in this.sourceCaches)
                    this._reloadSource(t)
            }
            ,
            i.prototype._updatePlacement = function(e, i, r, n) {
                for (var o = !1, a = !1, s = {}, l = 0, u = this._order; l < u.length; l += 1) {
                    var c = u[l]
                      , p = this._layers[c];
                    if ("symbol" === p.type) {
                        if (!s[p.source]) {
                            var h = this.sourceCaches[p.source];
                            s[p.source] = h.getRenderableIds(!0).map(function(t) {
                                return h.getTileByID(t)
                            }).sort(function(t, e) {
                                return e.tileID.overscaledZ - t.tileID.overscaledZ || (t.tileID.isLessThan(e.tileID) ? -1 : 1)
                            })
                        }
                        var d = this.crossTileSymbolIndex.addLayer(p, s[p.source], e.center.lng);
                        o = o || d
                    }
                }
                this.crossTileSymbolIndex.pruneUnusedLayers(this._order);
                var f = this._layerOrderChanged;
                if ((f || !this.pauseablePlacement || this.pauseablePlacement.isDone() && !this.placement.stillRecent(t.browser.now())) && (this.pauseablePlacement = new Te(e,this._order,f,i,r,n),
                this._layerOrderChanged = !1),
                this.pauseablePlacement.isDone() ? this.placement.setStale() : (this.pauseablePlacement.continuePlacement(this._order, this._layers, s),
                this.pauseablePlacement.isDone() && (this.placement = this.pauseablePlacement.commit(this.placement, t.browser.now()),
                a = !0),
                o && this.pauseablePlacement.placement.setStale()),
                a || o)
                    for (var m = 0, y = this._order; m < y.length; m += 1) {
                        var g = y[m]
                          , _ = this._layers[g];
                        "symbol" === _.type && this.placement.updateLayerOpacities(_, s[_.source])
                    }
                return !this.pauseablePlacement.isDone() || this.placement.hasTransitions(t.browser.now())
            }
            ,
            i.prototype._releaseSymbolFadeTiles = function() {
                for (var t in this.sourceCaches)
                    this.sourceCaches[t].releaseSymbolFadeTiles()
            }
            ,
            i.prototype.getImages = function(t, e, i) {
                this.imageManager.getImages(e.icons, i)
            }
            ,
            i.prototype.getGlyphs = function(t, e, i) {
                this.glyphManager.getGlyphs(e.stacks, i)
            }
            ,
            i
        }(t.Evented);
        ze.getSourceType = function(t) {
            return z[t]
        }
        ,
        ze.setSourceType = function(t, e) {
            z[t] = e
        }
        ,
        ze.registerForPluginAvailability = t.registerForPluginAvailability;
        var Le = t.createLayout([{
            name: "a_pos",
            type: "Int16",
            components: 2
        }])
          , De = ai("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif", "#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}")
          , Oe = ai("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}")
          , Re = ai("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}")
          , Fe = ai("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}")
          , Be = ai("void main() {gl_FragColor=vec4(1.0);}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}")
          , Ne = ai("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}")
          , Ue = ai("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}")
          , Ve = ai("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}", "attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}")
          , je = ai("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}", "attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}")
          , $e = ai("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}")
          , qe = ai("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}")
          , We = ai("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}")
          , He = ai("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}")
          , Xe = ai("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}")
          , Ze = ai("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}")
          , Ge = ai("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}")
          , Ye = ai("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}")
          , Ke = ai("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(a_texture_pos/8192.0)/2.0+0.25;}")
          , Je = ai("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}")
          , Qe = ai("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}")
          , ti = ai("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}")
          , ei = ai("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}")
          , ii = ai("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}")
          , ri = ai("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}")
          , ni = ai("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}")
          , oi = ai("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");
        function ai(t, e) {
            var i = /#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g
              , r = {};
            return {
                fragmentSource: t = t.replace(i, function(t, e, i, n, o) {
                    return r[o] = !0,
                    "define" === e ? "\n#ifndef HAS_UNIFORM_u_" + o + "\nvarying " + i + " " + n + " " + o + ";\n#else\nuniform " + i + " " + n + " u_" + o + ";\n#endif\n" : "\n#ifdef HAS_UNIFORM_u_" + o + "\n    " + i + " " + n + " " + o + " = u_" + o + ";\n#endif\n"
                }),
                vertexSource: e = e.replace(i, function(t, e, i, n, o) {
                    var a = "float" === n ? "vec2" : "vec4"
                      , s = o.match(/color/) ? "color" : a;
                    return r[o] ? "define" === e ? "\n#ifndef HAS_UNIFORM_u_" + o + "\nuniform lowp float a_" + o + "_t;\nattribute " + i + " " + a + " a_" + o + ";\nvarying " + i + " " + n + " " + o + ";\n#else\nuniform " + i + " " + n + " u_" + o + ";\n#endif\n" : "vec4" === s ? "\n#ifndef HAS_UNIFORM_u_" + o + "\n    " + o + " = a_" + o + ";\n#else\n    " + i + " " + n + " " + o + " = u_" + o + ";\n#endif\n" : "\n#ifndef HAS_UNIFORM_u_" + o + "\n    " + o + " = unpack_mix_" + s + "(a_" + o + ", a_" + o + "_t);\n#else\n    " + i + " " + n + " " + o + " = u_" + o + ";\n#endif\n" : "define" === e ? "\n#ifndef HAS_UNIFORM_u_" + o + "\nuniform lowp float a_" + o + "_t;\nattribute " + i + " " + a + " a_" + o + ";\n#else\nuniform " + i + " " + n + " u_" + o + ";\n#endif\n" : "vec4" === s ? "\n#ifndef HAS_UNIFORM_u_" + o + "\n    " + i + " " + n + " " + o + " = a_" + o + ";\n#else\n    " + i + " " + n + " " + o + " = u_" + o + ";\n#endif\n" : "\n#ifndef HAS_UNIFORM_u_" + o + "\n    " + i + " " + n + " " + o + " = unpack_mix_" + s + "(a_" + o + ", a_" + o + "_t);\n#else\n    " + i + " " + n + " " + o + " = u_" + o + ";\n#endif\n"
                })
            }
        }
        var si = Object.freeze({
            prelude: De,
            background: Oe,
            backgroundPattern: Re,
            circle: Fe,
            clippingMask: Be,
            heatmap: Ne,
            heatmapTexture: Ue,
            collisionBox: Ve,
            collisionCircle: je,
            debug: $e,
            fill: qe,
            fillOutline: We,
            fillOutlinePattern: He,
            fillPattern: Xe,
            fillExtrusion: Ze,
            fillExtrusionPattern: Ge,
            extrusionTexture: Ye,
            hillshadePrepare: Ke,
            hillshade: Je,
            line: Qe,
            lineGradient: ti,
            linePattern: ei,
            lineSDF: ii,
            raster: ri,
            symbolIcon: ni,
            symbolSDF: oi
        })
          , li = function() {
            this.boundProgram = null,
            this.boundLayoutVertexBuffer = null,
            this.boundPaintVertexBuffers = [],
            this.boundIndexBuffer = null,
            this.boundVertexOffset = null,
            this.boundDynamicVertexBuffer = null,
            this.vao = null
        };
        li.prototype.bind = function(t, e, i, r, n, o, a, s) {
            this.context = t;
            for (var l = this.boundPaintVertexBuffers.length !== r.length, u = 0; !l && u < r.length; u++)
                this.boundPaintVertexBuffers[u] !== r[u] && (l = !0);
            var c = !this.vao || this.boundProgram !== e || this.boundLayoutVertexBuffer !== i || l || this.boundIndexBuffer !== n || this.boundVertexOffset !== o || this.boundDynamicVertexBuffer !== a || this.boundDynamicVertexBuffer2 !== s;
            !t.extVertexArrayObject || c ? this.freshBind(e, i, r, n, o, a, s) : (t.bindVertexArrayOES.set(this.vao),
            a && a.bind(),
            n && n.dynamicDraw && n.bind(),
            s && s.bind())
        }
        ,
        li.prototype.freshBind = function(t, e, i, r, n, o, a) {
            var s, l = t.numAttributes, u = this.context, c = u.gl;
            if (u.extVertexArrayObject)
                this.vao && this.destroy(),
                this.vao = u.extVertexArrayObject.createVertexArrayOES(),
                u.bindVertexArrayOES.set(this.vao),
                s = 0,
                this.boundProgram = t,
                this.boundLayoutVertexBuffer = e,
                this.boundPaintVertexBuffers = i,
                this.boundIndexBuffer = r,
                this.boundVertexOffset = n,
                this.boundDynamicVertexBuffer = o,
                this.boundDynamicVertexBuffer2 = a;
            else {
                s = u.currentNumAttributes || 0;
                for (var p = l; p < s; p++)
                    c.disableVertexAttribArray(p)
            }
            e.enableAttributes(c, t);
            for (var h = 0, d = i; h < d.length; h += 1)
                d[h].enableAttributes(c, t);
            o && o.enableAttributes(c, t),
            a && a.enableAttributes(c, t),
            e.bind(),
            e.setVertexAttribPointers(c, t, n);
            for (var f = 0, m = i; f < m.length; f += 1) {
                var y = m[f];
                y.bind(),
                y.setVertexAttribPointers(c, t, n)
            }
            o && (o.bind(),
            o.setVertexAttribPointers(c, t, n)),
            r && r.bind(),
            a && (a.bind(),
            a.setVertexAttribPointers(c, t, n)),
            u.currentNumAttributes = l
        }
        ,
        li.prototype.destroy = function() {
            this.vao && (this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),
            this.vao = null)
        }
        ;
        var ui = function(e, i, r, n, o) {
            var a = e.gl;
            this.program = a.createProgram();
            var s = r.defines().concat("#define DEVICE_PIXEL_RATIO " + t.browser.devicePixelRatio.toFixed(1));
            o && s.push("#define OVERDRAW_INSPECTOR;");
            var l = s.concat(De.fragmentSource, i.fragmentSource).join("\n")
              , u = s.concat(De.vertexSource, i.vertexSource).join("\n")
              , c = a.createShader(a.FRAGMENT_SHADER);
            a.shaderSource(c, l),
            a.compileShader(c),
            a.attachShader(this.program, c);
            var p = a.createShader(a.VERTEX_SHADER);
            a.shaderSource(p, u),
            a.compileShader(p),
            a.attachShader(this.program, p);
            for (var h = r.layoutAttributes || [], d = 0; d < h.length; d++)
                a.bindAttribLocation(this.program, d, h[d].name);
            a.linkProgram(this.program),
            this.numAttributes = a.getProgramParameter(this.program, a.ACTIVE_ATTRIBUTES),
            this.attributes = {};
            for (var f = {}, m = 0; m < this.numAttributes; m++) {
                var y = a.getActiveAttrib(this.program, m);
                y && (this.attributes[y.name] = a.getAttribLocation(this.program, y.name))
            }
            for (var g = a.getProgramParameter(this.program, a.ACTIVE_UNIFORMS), _ = 0; _ < g; _++) {
                var v = a.getActiveUniform(this.program, _);
                v && (f[v.name] = a.getUniformLocation(this.program, v.name))
            }
            this.fixedUniforms = n(e, f),
            this.binderUniforms = r.getUniforms(e, f)
        };
        function ci(e, i, r) {
            var n = 1 / se(r, 1, i.transform.tileZoom)
              , o = Math.pow(2, r.tileID.overscaledZ)
              , a = r.tileSize * Math.pow(2, i.transform.tileZoom) / o
              , s = a * (r.tileID.canonical.x + r.tileID.wrap * o)
              , l = a * r.tileID.canonical.y;
            return {
                u_image: 0,
                u_texsize: r.imageAtlasTexture.size,
                u_scale: [t.browser.devicePixelRatio, n, e.fromScale, e.toScale],
                u_fade: e.t,
                u_pixel_coord_upper: [s >> 16, l >> 16],
                u_pixel_coord_lower: [65535 & s, 65535 & l]
            }
        }
        ui.prototype.draw = function(t, e, i, r, n, o, a, s, l, u, c, p, h, d, f, m) {
            var y, g = t.gl;
            for (var _ in t.program.set(this.program),
            t.setDepthMode(i),
            t.setStencilMode(r),
            t.setColorMode(n),
            t.setCullFace(o),
            this.fixedUniforms)
                this.fixedUniforms[_].set(a[_]);
            d && d.setUniforms(t, this.binderUniforms, p, {
                zoom: h
            });
            for (var v = (y = {},
            y[g.LINES] = 2,
            y[g.TRIANGLES] = 3,
            y[g.LINE_STRIP] = 1,
            y)[e], x = 0, b = c.get(); x < b.length; x += 1) {
                var w = b[x]
                  , T = w.vaos || (w.vaos = {});
                (T[s] || (T[s] = new li)).bind(t, this, l, d ? d.getPaintVertexBuffers() : [], u, w.vertexOffset, f, m),
                g.drawElements(e, w.primitiveLength * v, g.UNSIGNED_SHORT, w.primitiveOffset * v * 2)
            }
        }
        ;
        var pi = function(e, i, r) {
            var n = i.style.light
              , o = n.properties.get("position")
              , a = [o.x, o.y, o.z]
              , s = t.create$2();
            "viewport" === n.properties.get("anchor") && t.fromRotation(s, -i.transform.angle),
            t.transformMat3(a, a, s);
            var l = n.properties.get("color");
            return {
                u_matrix: e,
                u_lightpos: a,
                u_lightintensity: n.properties.get("intensity"),
                u_lightcolor: [l.r, l.g, l.b],
                u_vertical_gradient: +r
            }
        }
          , hi = function(e, i, r, n, o, a) {
            return t.extend(pi(e, i, r), ci(o, i, a), {
                u_height_factor: -Math.pow(2, n.overscaledZ) / a.tileSize / 8
            })
        }
          , di = function(e, i, r) {
            var n = t.create();
            t.ortho(n, 0, e.width, e.height, 0, 0, 1);
            var o = e.context.gl;
            return {
                u_matrix: n,
                u_world: [o.drawingBufferWidth, o.drawingBufferHeight],
                u_image: r,
                u_opacity: i
            }
        }
          , fi = function(t) {
            return {
                u_matrix: t
            }
        }
          , mi = function(e, i, r, n) {
            return t.extend(fi(e), ci(r, i, n))
        }
          , yi = function(t, e) {
            return {
                u_matrix: t,
                u_world: e
            }
        }
          , gi = function(e, i, r, n, o) {
            return t.extend(mi(e, i, r, n), {
                u_world: o
            })
        }
          , _i = function(t, e, i, r) {
            var n, o, a = t.transform;
            if ("map" === r.paint.get("circle-pitch-alignment")) {
                var s = se(i, 1, a.zoom);
                n = !0,
                o = [s, s]
            } else
                n = !1,
                o = a.pixelsToGLUnits;
            return {
                u_camera_to_center_distance: a.cameraToCenterDistance,
                u_scale_with_map: +("map" === r.paint.get("circle-pitch-scale")),
                u_matrix: t.translatePosMatrix(e.posMatrix, i, r.paint.get("circle-translate"), r.paint.get("circle-translate-anchor")),
                u_pitch_with_map: +n,
                u_extrude_scale: o
            }
        }
          , vi = function(e, i) {
            return {
                u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                u_camera_to_center_distance: new t.Uniform1f(e,i.u_camera_to_center_distance),
                u_pixels_to_tile_units: new t.Uniform1f(e,i.u_pixels_to_tile_units),
                u_extrude_scale: new t.Uniform2f(e,i.u_extrude_scale),
                u_overscale_factor: new t.Uniform1f(e,i.u_overscale_factor)
            }
        }
          , xi = function(t, e, i) {
            var r = se(i, 1, e.zoom)
              , n = Math.pow(2, e.zoom - i.tileID.overscaledZ)
              , o = i.tileID.overscaleFactor();
            return {
                u_matrix: t,
                u_camera_to_center_distance: e.cameraToCenterDistance,
                u_pixels_to_tile_units: r,
                u_extrude_scale: [e.pixelsToGLUnits[0] / (r * n), e.pixelsToGLUnits[1] / (r * n)],
                u_overscale_factor: o
            }
        }
          , bi = function(t, e) {
            return {
                u_matrix: t,
                u_color: e
            }
        }
          , wi = function(t) {
            return {
                u_matrix: t
            }
        }
          , Ti = function(t, e, i, r) {
            return {
                u_matrix: t,
                u_extrude_scale: se(e, 1, i),
                u_intensity: r
            }
        }
          , Si = function(e, i, r) {
            var n, o, a, s = r.paint.get("hillshade-shadow-color"), l = r.paint.get("hillshade-highlight-color"), u = r.paint.get("hillshade-accent-color"), c = r.paint.get("hillshade-illumination-direction") * (Math.PI / 180);
            return "viewport" === r.paint.get("hillshade-illumination-anchor") && (c -= e.transform.angle),
            {
                u_matrix: e.transform.calculatePosMatrix(i.tileID.toUnwrapped(), !0),
                u_image: 0,
                u_latrange: (n = i.tileID,
                o = Math.pow(2, n.canonical.z),
                a = n.canonical.y,
                [new t.MercatorCoordinate(0,a / o).toLngLat().lat, new t.MercatorCoordinate(0,(a + 1) / o).toLngLat().lat]),
                u_light: [r.paint.get("hillshade-exaggeration"), c],
                u_shadow: s,
                u_highlight: l,
                u_accent: u
            }
        }
          , Ai = function(e, i) {
            var r = e.dem.dim
              , n = t.create();
            return t.ortho(n, 0, t.EXTENT, -t.EXTENT, 0, 0, 1),
            t.translate(n, n, [0, -t.EXTENT, 0]),
            {
                u_matrix: n,
                u_image: 1,
                u_dimension: [2 * r, 2 * r],
                u_zoom: e.tileID.overscaledZ,
                u_maxzoom: i
            }
        }
          , ki = function(t, e, i) {
            var r = t.transform;
            return {
                u_matrix: Ii(t, e, i),
                u_ratio: 1 / se(e, 1, r.zoom),
                u_gl_units_to_pixels: [1 / r.pixelsToGLUnits[0], 1 / r.pixelsToGLUnits[1]]
            }
        }
          , Ei = function(e, i, r) {
            return t.extend(ki(e, i, r), {
                u_image: 0
            })
        }
          , Ci = function(e, i, r, n) {
            var o = e.transform
              , a = Mi(i, o);
            return {
                u_matrix: Ii(e, i, r),
                u_texsize: i.imageAtlasTexture.size,
                u_ratio: 1 / se(i, 1, o.zoom),
                u_image: 0,
                u_scale: [t.browser.devicePixelRatio, a, n.fromScale, n.toScale],
                u_fade: n.t,
                u_gl_units_to_pixels: [1 / o.pixelsToGLUnits[0], 1 / o.pixelsToGLUnits[1]]
            }
        }
          , Pi = function(e, i, r, n, o) {
            var a = e.transform
              , s = e.lineAtlas
              , l = Mi(i, a)
              , u = "round" === r.layout.get("line-cap")
              , c = s.getDash(n.from, u)
              , p = s.getDash(n.to, u)
              , h = c.width * o.fromScale
              , d = p.width * o.toScale;
            return t.extend(ki(e, i, r), {
                u_patternscale_a: [l / h, -c.height / 2],
                u_patternscale_b: [l / d, -p.height / 2],
                u_sdfgamma: s.width / (256 * Math.min(h, d) * t.browser.devicePixelRatio) / 2,
                u_image: 0,
                u_tex_y_a: c.y,
                u_tex_y_b: p.y,
                u_mix: o.t
            })
        };
        function Mi(t, e) {
            return 1 / se(t, 1, e.tileZoom)
        }
        function Ii(t, e, i) {
            return t.translatePosMatrix(e.tileID.posMatrix, e, i.paint.get("line-translate"), i.paint.get("line-translate-anchor"))
        }
        var zi = function(t, e, i, r, n) {
            return {
                u_matrix: t,
                u_tl_parent: e,
                u_scale_parent: i,
                u_buffer_scale: 1,
                u_fade_t: r.mix,
                u_opacity: r.opacity * n.paint.get("raster-opacity"),
                u_image0: 0,
                u_image1: 1,
                u_brightness_low: n.paint.get("raster-brightness-min"),
                u_brightness_high: n.paint.get("raster-brightness-max"),
                u_saturation_factor: (a = n.paint.get("raster-saturation"),
                a > 0 ? 1 - 1 / (1.001 - a) : -a),
                u_contrast_factor: (o = n.paint.get("raster-contrast"),
                o > 0 ? 1 / (1 - o) : 1 + o),
                u_spin_weights: function(t) {
                    t *= Math.PI / 180;
                    var e = Math.sin(t)
                      , i = Math.cos(t);
                    return [(2 * i + 1) / 3, (-Math.sqrt(3) * e - i + 1) / 3, (Math.sqrt(3) * e - i + 1) / 3]
                }(n.paint.get("raster-hue-rotate"))
            };
            var o, a
        }
          , Li = function(t, e, i, r, n, o, a, s, l, u) {
            var c = n.transform;
            return {
                u_is_size_zoom_constant: +("constant" === t || "source" === t),
                u_is_size_feature_constant: +("constant" === t || "camera" === t),
                u_size_t: e ? e.uSizeT : 0,
                u_size: e ? e.uSize : 0,
                u_camera_to_center_distance: c.cameraToCenterDistance,
                u_pitch: c.pitch / 360 * 2 * Math.PI,
                u_rotate_symbol: +i,
                u_aspect_ratio: c.width / c.height,
                u_fade_change: n.options.fadeDuration ? n.symbolFadeChange : 1,
                u_matrix: o,
                u_label_plane_matrix: a,
                u_gl_coord_matrix: s,
                u_is_text: +l,
                u_pitch_with_map: +r,
                u_texsize: u,
                u_texture: 0
            }
        }
          , Di = function(e, i, r, n, o, a, s, l, u, c, p) {
            var h = o.transform;
            return t.extend(Li(e, i, r, n, o, a, s, l, u, c), {
                u_gamma_scale: n ? Math.cos(h._pitch) * h.cameraToCenterDistance : 1,
                u_is_halo: +p
            })
        }
          , Oi = function(t, e, i) {
            return {
                u_matrix: t,
                u_opacity: e,
                u_color: i
            }
        }
          , Ri = function(e, i, r, n, o, a) {
            return t.extend(function(t, e, i, r) {
                var n = i.imageManager.getPattern(t.from)
                  , o = i.imageManager.getPattern(t.to)
                  , a = i.imageManager.getPixelSize()
                  , s = a.width
                  , l = a.height
                  , u = Math.pow(2, r.tileID.overscaledZ)
                  , c = r.tileSize * Math.pow(2, i.transform.tileZoom) / u
                  , p = c * (r.tileID.canonical.x + r.tileID.wrap * u)
                  , h = c * r.tileID.canonical.y;
                return {
                    u_image: 0,
                    u_pattern_tl_a: n.tl,
                    u_pattern_br_a: n.br,
                    u_pattern_tl_b: o.tl,
                    u_pattern_br_b: o.br,
                    u_texsize: [s, l],
                    u_mix: e.t,
                    u_pattern_size_a: n.displaySize,
                    u_pattern_size_b: o.displaySize,
                    u_scale_a: e.fromScale,
                    u_scale_b: e.toScale,
                    u_tile_units_to_pixels: 1 / se(r, 1, i.transform.tileZoom),
                    u_pixel_coord_upper: [p >> 16, h >> 16],
                    u_pixel_coord_lower: [65535 & p, 65535 & h]
                }
            }(n, a, r, o), {
                u_matrix: e,
                u_opacity: i
            })
        }
          , Fi = {
            fillExtrusion: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_lightpos: new t.Uniform3f(e,i.u_lightpos),
                    u_lightintensity: new t.Uniform1f(e,i.u_lightintensity),
                    u_lightcolor: new t.Uniform3f(e,i.u_lightcolor),
                    u_vertical_gradient: new t.Uniform1f(e,i.u_vertical_gradient)
                }
            },
            fillExtrusionPattern: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_lightpos: new t.Uniform3f(e,i.u_lightpos),
                    u_lightintensity: new t.Uniform1f(e,i.u_lightintensity),
                    u_lightcolor: new t.Uniform3f(e,i.u_lightcolor),
                    u_vertical_gradient: new t.Uniform1f(e,i.u_vertical_gradient),
                    u_height_factor: new t.Uniform1f(e,i.u_height_factor),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_texsize: new t.Uniform2f(e,i.u_texsize),
                    u_pixel_coord_upper: new t.Uniform2f(e,i.u_pixel_coord_upper),
                    u_pixel_coord_lower: new t.Uniform2f(e,i.u_pixel_coord_lower),
                    u_scale: new t.Uniform4f(e,i.u_scale),
                    u_fade: new t.Uniform1f(e,i.u_fade)
                }
            },
            extrusionTexture: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_world: new t.Uniform2f(e,i.u_world),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_opacity: new t.Uniform1f(e,i.u_opacity)
                }
            },
            fill: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix)
                }
            },
            fillPattern: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_texsize: new t.Uniform2f(e,i.u_texsize),
                    u_pixel_coord_upper: new t.Uniform2f(e,i.u_pixel_coord_upper),
                    u_pixel_coord_lower: new t.Uniform2f(e,i.u_pixel_coord_lower),
                    u_scale: new t.Uniform4f(e,i.u_scale),
                    u_fade: new t.Uniform1f(e,i.u_fade)
                }
            },
            fillOutline: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_world: new t.Uniform2f(e,i.u_world)
                }
            },
            fillOutlinePattern: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_world: new t.Uniform2f(e,i.u_world),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_texsize: new t.Uniform2f(e,i.u_texsize),
                    u_pixel_coord_upper: new t.Uniform2f(e,i.u_pixel_coord_upper),
                    u_pixel_coord_lower: new t.Uniform2f(e,i.u_pixel_coord_lower),
                    u_scale: new t.Uniform4f(e,i.u_scale),
                    u_fade: new t.Uniform1f(e,i.u_fade)
                }
            },
            circle: function(e, i) {
                return {
                    u_camera_to_center_distance: new t.Uniform1f(e,i.u_camera_to_center_distance),
                    u_scale_with_map: new t.Uniform1i(e,i.u_scale_with_map),
                    u_pitch_with_map: new t.Uniform1i(e,i.u_pitch_with_map),
                    u_extrude_scale: new t.Uniform2f(e,i.u_extrude_scale),
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix)
                }
            },
            collisionBox: vi,
            collisionCircle: vi,
            debug: function(e, i) {
                return {
                    u_color: new t.UniformColor(e,i.u_color),
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix)
                }
            },
            clippingMask: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix)
                }
            },
            heatmap: function(e, i) {
                return {
                    u_extrude_scale: new t.Uniform1f(e,i.u_extrude_scale),
                    u_intensity: new t.Uniform1f(e,i.u_intensity),
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix)
                }
            },
            heatmapTexture: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_world: new t.Uniform2f(e,i.u_world),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_color_ramp: new t.Uniform1i(e,i.u_color_ramp),
                    u_opacity: new t.Uniform1f(e,i.u_opacity)
                }
            },
            hillshade: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_latrange: new t.Uniform2f(e,i.u_latrange),
                    u_light: new t.Uniform2f(e,i.u_light),
                    u_shadow: new t.UniformColor(e,i.u_shadow),
                    u_highlight: new t.UniformColor(e,i.u_highlight),
                    u_accent: new t.UniformColor(e,i.u_accent)
                }
            },
            hillshadePrepare: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_dimension: new t.Uniform2f(e,i.u_dimension),
                    u_zoom: new t.Uniform1f(e,i.u_zoom),
                    u_maxzoom: new t.Uniform1f(e,i.u_maxzoom)
                }
            },
            line: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_ratio: new t.Uniform1f(e,i.u_ratio),
                    u_gl_units_to_pixels: new t.Uniform2f(e,i.u_gl_units_to_pixels)
                }
            },
            lineGradient: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_ratio: new t.Uniform1f(e,i.u_ratio),
                    u_gl_units_to_pixels: new t.Uniform2f(e,i.u_gl_units_to_pixels),
                    u_image: new t.Uniform1i(e,i.u_image)
                }
            },
            linePattern: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_texsize: new t.Uniform2f(e,i.u_texsize),
                    u_ratio: new t.Uniform1f(e,i.u_ratio),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_gl_units_to_pixels: new t.Uniform2f(e,i.u_gl_units_to_pixels),
                    u_scale: new t.Uniform4f(e,i.u_scale),
                    u_fade: new t.Uniform1f(e,i.u_fade)
                }
            },
            lineSDF: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_ratio: new t.Uniform1f(e,i.u_ratio),
                    u_gl_units_to_pixels: new t.Uniform2f(e,i.u_gl_units_to_pixels),
                    u_patternscale_a: new t.Uniform2f(e,i.u_patternscale_a),
                    u_patternscale_b: new t.Uniform2f(e,i.u_patternscale_b),
                    u_sdfgamma: new t.Uniform1f(e,i.u_sdfgamma),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_tex_y_a: new t.Uniform1f(e,i.u_tex_y_a),
                    u_tex_y_b: new t.Uniform1f(e,i.u_tex_y_b),
                    u_mix: new t.Uniform1f(e,i.u_mix)
                }
            },
            raster: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_tl_parent: new t.Uniform2f(e,i.u_tl_parent),
                    u_scale_parent: new t.Uniform1f(e,i.u_scale_parent),
                    u_buffer_scale: new t.Uniform1f(e,i.u_buffer_scale),
                    u_fade_t: new t.Uniform1f(e,i.u_fade_t),
                    u_opacity: new t.Uniform1f(e,i.u_opacity),
                    u_image0: new t.Uniform1i(e,i.u_image0),
                    u_image1: new t.Uniform1i(e,i.u_image1),
                    u_brightness_low: new t.Uniform1f(e,i.u_brightness_low),
                    u_brightness_high: new t.Uniform1f(e,i.u_brightness_high),
                    u_saturation_factor: new t.Uniform1f(e,i.u_saturation_factor),
                    u_contrast_factor: new t.Uniform1f(e,i.u_contrast_factor),
                    u_spin_weights: new t.Uniform3f(e,i.u_spin_weights)
                }
            },
            symbolIcon: function(e, i) {
                return {
                    u_is_size_zoom_constant: new t.Uniform1i(e,i.u_is_size_zoom_constant),
                    u_is_size_feature_constant: new t.Uniform1i(e,i.u_is_size_feature_constant),
                    u_size_t: new t.Uniform1f(e,i.u_size_t),
                    u_size: new t.Uniform1f(e,i.u_size),
                    u_camera_to_center_distance: new t.Uniform1f(e,i.u_camera_to_center_distance),
                    u_pitch: new t.Uniform1f(e,i.u_pitch),
                    u_rotate_symbol: new t.Uniform1i(e,i.u_rotate_symbol),
                    u_aspect_ratio: new t.Uniform1f(e,i.u_aspect_ratio),
                    u_fade_change: new t.Uniform1f(e,i.u_fade_change),
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_label_plane_matrix: new t.UniformMatrix4f(e,i.u_label_plane_matrix),
                    u_gl_coord_matrix: new t.UniformMatrix4f(e,i.u_gl_coord_matrix),
                    u_is_text: new t.Uniform1f(e,i.u_is_text),
                    u_pitch_with_map: new t.Uniform1i(e,i.u_pitch_with_map),
                    u_texsize: new t.Uniform2f(e,i.u_texsize),
                    u_texture: new t.Uniform1i(e,i.u_texture)
                }
            },
            symbolSDF: function(e, i) {
                return {
                    u_is_size_zoom_constant: new t.Uniform1i(e,i.u_is_size_zoom_constant),
                    u_is_size_feature_constant: new t.Uniform1i(e,i.u_is_size_feature_constant),
                    u_size_t: new t.Uniform1f(e,i.u_size_t),
                    u_size: new t.Uniform1f(e,i.u_size),
                    u_camera_to_center_distance: new t.Uniform1f(e,i.u_camera_to_center_distance),
                    u_pitch: new t.Uniform1f(e,i.u_pitch),
                    u_rotate_symbol: new t.Uniform1i(e,i.u_rotate_symbol),
                    u_aspect_ratio: new t.Uniform1f(e,i.u_aspect_ratio),
                    u_fade_change: new t.Uniform1f(e,i.u_fade_change),
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_label_plane_matrix: new t.UniformMatrix4f(e,i.u_label_plane_matrix),
                    u_gl_coord_matrix: new t.UniformMatrix4f(e,i.u_gl_coord_matrix),
                    u_is_text: new t.Uniform1f(e,i.u_is_text),
                    u_pitch_with_map: new t.Uniform1i(e,i.u_pitch_with_map),
                    u_texsize: new t.Uniform2f(e,i.u_texsize),
                    u_texture: new t.Uniform1i(e,i.u_texture),
                    u_gamma_scale: new t.Uniform1f(e,i.u_gamma_scale),
                    u_is_halo: new t.Uniform1f(e,i.u_is_halo)
                }
            },
            background: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_opacity: new t.Uniform1f(e,i.u_opacity),
                    u_color: new t.UniformColor(e,i.u_color)
                }
            },
            backgroundPattern: function(e, i) {
                return {
                    u_matrix: new t.UniformMatrix4f(e,i.u_matrix),
                    u_opacity: new t.Uniform1f(e,i.u_opacity),
                    u_image: new t.Uniform1i(e,i.u_image),
                    u_pattern_tl_a: new t.Uniform2f(e,i.u_pattern_tl_a),
                    u_pattern_br_a: new t.Uniform2f(e,i.u_pattern_br_a),
                    u_pattern_tl_b: new t.Uniform2f(e,i.u_pattern_tl_b),
                    u_pattern_br_b: new t.Uniform2f(e,i.u_pattern_br_b),
                    u_texsize: new t.Uniform2f(e,i.u_texsize),
                    u_mix: new t.Uniform1f(e,i.u_mix),
                    u_pattern_size_a: new t.Uniform2f(e,i.u_pattern_size_a),
                    u_pattern_size_b: new t.Uniform2f(e,i.u_pattern_size_b),
                    u_scale_a: new t.Uniform1f(e,i.u_scale_a),
                    u_scale_b: new t.Uniform1f(e,i.u_scale_b),
                    u_pixel_coord_upper: new t.Uniform2f(e,i.u_pixel_coord_upper),
                    u_pixel_coord_lower: new t.Uniform2f(e,i.u_pixel_coord_lower),
                    u_tile_units_to_pixels: new t.Uniform1f(e,i.u_tile_units_to_pixels)
                }
            }
        };
        function Bi(e, i) {
            for (var r = e.sort(function(t, e) {
                return t.tileID.isLessThan(e.tileID) ? -1 : e.tileID.isLessThan(t.tileID) ? 1 : 0
            }), n = 0; n < r.length; n++) {
                var o = {}
                  , a = r[n]
                  , s = r.slice(n + 1);
                Ni(a.tileID.wrapped(), a.tileID, s, new t.OverscaledTileID(0,a.tileID.wrap + 1,0,0,0), o),
                a.setMask(o, i)
            }
        }
        function Ni(e, i, r, n, o) {
            for (var a = 0; a < r.length; a++) {
                var s = r[a];
                if (n.isLessThan(s.tileID))
                    break;
                if (i.key === s.tileID.key)
                    return;
                if (s.tileID.isChildOf(i)) {
                    for (var l = i.children(1 / 0), u = 0; u < l.length; u++)
                        Ni(e, l[u], r.slice(a), n, o);
                    return
                }
            }
            var c = i.overscaledZ - e.overscaledZ
              , p = new t.CanonicalTileID(c,i.canonical.x - (e.canonical.x << c),i.canonical.y - (e.canonical.y << c));
            o[p.key] = o[p.key] || p
        }
        function Ui(t, e, i, r, n) {
            for (var o = t.context, a = o.gl, s = n ? t.useProgram("collisionCircle") : t.useProgram("collisionBox"), l = 0; l < r.length; l++) {
                var u = r[l]
                  , c = e.getTile(u)
                  , p = c.getBucket(i);
                if (p) {
                    var h = n ? p.collisionCircle : p.collisionBox;
                    h && s.draw(o, n ? a.TRIANGLES : a.LINES, wt.disabled, Tt.disabled, t.colorModeForRenderPass(), At.disabled, xi(u.posMatrix, t.transform, c), i.id, h.layoutVertexBuffer, h.indexBuffer, h.segments, null, t.transform.zoom, null, null, h.collisionVertexBuffer)
                }
            }
        }
        var Vi = t.identity(new Float32Array(16))
          , ji = t.properties.layout;
        function $i(e, i, r, n, o, a, s, l, u, c, p, h) {
            for (var d, f, m = e.context, y = m.gl, g = e.transform, _ = "map" === l, v = "map" === u, x = _ && "point" !== r.layout.get("symbol-placement"), b = _ && !v && !x, w = v ? e.depthModeForSublayer(0, wt.ReadOnly) : wt.disabled, T = 0, S = n; T < S.length; T += 1) {
                var A = S[T]
                  , k = i.getTile(A)
                  , E = k.getBucket(r);
                if (E) {
                    var C = o ? E.text : E.icon;
                    if (C && C.segments.get().length) {
                        var P = C.programConfigurations.get(r.id)
                          , M = o || E.sdfIcons
                          , I = o ? E.textSizeData : E.iconSizeData;
                        d || (d = e.useProgram(M ? "symbolSDF" : "symbolIcon", P),
                        f = t.evaluateSizeForZoom(I, g.zoom, ji.properties[o ? "text-size" : "icon-size"])),
                        m.activeTexture.set(y.TEXTURE0);
                        var z = void 0;
                        if (o)
                            k.glyphAtlasTexture.bind(y.LINEAR, y.CLAMP_TO_EDGE),
                            z = k.glyphAtlasTexture.size;
                        else {
                            var L = 1 !== r.layout.get("icon-size").constantOr(0) || E.iconsNeedLinear
                              , D = v || 0 !== g.pitch;
                            k.imageAtlasTexture.bind(M || e.options.rotating || e.options.zooming || L || D ? y.LINEAR : y.NEAREST, y.CLAMP_TO_EDGE),
                            z = k.imageAtlasTexture.size
                        }
                        var O = se(k, 1, e.transform.zoom)
                          , R = Ht(A.posMatrix, v, _, e.transform, O)
                          , F = Xt(A.posMatrix, v, _, e.transform, O);
                        x && Yt(E, A.posMatrix, e, o, R, F, v, c);
                        var B = e.translatePosMatrix(A.posMatrix, k, a, s)
                          , N = x ? Vi : R
                          , U = e.translatePosMatrix(F, k, a, s, !0)
                          , V = void 0;
                        if (M) {
                            var j = 0 !== r.paint.get(o ? "text-halo-width" : "icon-halo-width").constantOr(1);
                            V = Di(I.functionType, f, b, v, e, B, N, U, o, z, !0),
                            j && qi(C, r, e, d, w, p, h, V),
                            V.u_is_halo = 0
                        } else
                            V = Li(I.functionType, f, b, v, e, B, N, U, o, z);
                        qi(C, r, e, d, w, p, h, V)
                    }
                }
            }
        }
        function qi(t, e, i, r, n, o, a, s) {
            var l = i.context
              , u = l.gl;
            r.draw(l, u.TRIANGLES, n, o, a, At.disabled, s, e.id, t.layoutVertexBuffer, t.indexBuffer, t.segments, e.paint, i.transform.zoom, t.programConfigurations.get(e.id), t.dynamicLayoutVertexBuffer, t.opacityVertexBuffer)
        }
        function Wi(t, e, i, r, n, o, a) {
            var s, l, u, c, p, h = t.context.gl, d = i.paint.get("fill-pattern"), f = d && d.constantOr(1), m = i.getCrossfadeParameters();
            a ? (l = f && !i.getPaintProperty("fill-outline-color") ? "fillOutlinePattern" : "fillOutline",
            s = h.LINES) : (l = f ? "fillPattern" : "fill",
            s = h.TRIANGLES);
            for (var y = 0, g = r; y < g.length; y += 1) {
                var _ = g[y]
                  , v = e.getTile(_);
                if (!f || v.patternsLoaded()) {
                    var x = v.getBucket(i);
                    if (x) {
                        var b = x.programConfigurations.get(i.id)
                          , w = t.useProgram(l, b);
                        f && (t.context.activeTexture.set(h.TEXTURE0),
                        v.imageAtlasTexture.bind(h.LINEAR, h.CLAMP_TO_EDGE),
                        b.updatePatternPaintBuffers(m));
                        var T = d.constantOr(null);
                        if (T && v.imageAtlas) {
                            var S = v.imageAtlas.patternPositions[T.to]
                              , A = v.imageAtlas.patternPositions[T.from];
                            S && A && b.setConstantPatternPositions(S, A)
                        }
                        var k = t.translatePosMatrix(_.posMatrix, v, i.paint.get("fill-translate"), i.paint.get("fill-translate-anchor"));
                        if (a) {
                            c = x.indexBuffer2,
                            p = x.segments2;
                            var E = [h.drawingBufferWidth, h.drawingBufferHeight];
                            u = "fillOutlinePattern" === l && f ? gi(k, t, m, v, E) : yi(k, E)
                        } else
                            c = x.indexBuffer,
                            p = x.segments,
                            u = f ? mi(k, t, m, v) : fi(k);
                        w.draw(t.context, s, n, t.stencilModeForClipping(_), o, At.disabled, u, i.id, x.layoutVertexBuffer, c, p, i.paint, t.transform.zoom, b)
                    }
                }
            }
        }
        function Hi(e, i) {
            var r = e.context
              , n = r.gl
              , o = i.viewportFrame;
            if (e.depthRboNeedsClear && e.setupOffscreenDepthRenderbuffer(),
            !o) {
                var a = new t.Texture(r,{
                    width: e.width,
                    height: e.height,
                    data: null
                },n.RGBA);
                a.bind(n.LINEAR, n.CLAMP_TO_EDGE),
                (o = i.viewportFrame = r.createFramebuffer(e.width, e.height)).colorAttachment.set(a.texture)
            }
            r.bindFramebuffer.set(o.framebuffer),
            o.depthAttachment.set(e.depthRbo),
            e.depthRboNeedsClear && (r.clear({
                depth: 1
            }),
            e.depthRboNeedsClear = !1),
            r.clear({
                color: t.Color.transparent
            }),
            r.setStencilMode(Tt.disabled),
            r.setDepthMode(new wt(n.LEQUAL,wt.ReadWrite,[0, 1])),
            r.setColorMode(e.colorModeForRenderPass())
        }
        function Xi(t, e, i) {
            var r = e.viewportFrame;
            if (r) {
                var n = t.context
                  , o = n.gl;
                n.activeTexture.set(o.TEXTURE0),
                o.bindTexture(o.TEXTURE_2D, r.colorAttachment.get()),
                t.useProgram("extrusionTexture").draw(n, o.TRIANGLES, wt.disabled, Tt.disabled, t.colorModeForRenderPass(), At.disabled, di(t, i, 0), e.id, t.viewportBuffer, t.quadTriangleIndexBuffer, t.viewportSegments, e.paint, t.transform.zoom)
            }
        }
        function Zi(t, e, i, r, n, o) {
            var a = t.context
              , s = a.gl
              , l = e.fbo;
            if (l) {
                var u = t.useProgram("hillshade");
                a.activeTexture.set(s.TEXTURE0),
                s.bindTexture(s.TEXTURE_2D, l.colorAttachment.get());
                var c = Si(t, e, i);
                e.maskedBoundsBuffer && e.maskedIndexBuffer && e.segments ? u.draw(a, s.TRIANGLES, r, n, o, At.disabled, c, i.id, e.maskedBoundsBuffer, e.maskedIndexBuffer, e.segments) : u.draw(a, s.TRIANGLES, r, n, o, At.disabled, c, i.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments)
            }
        }
        function Gi(e, i, r, n, o, a, s) {
            var l = e.context
              , u = l.gl;
            if (i.dem && i.dem.data) {
                var c = i.dem.dim
                  , p = i.dem.getPixels();
                if (l.activeTexture.set(u.TEXTURE1),
                l.pixelStoreUnpackPremultiplyAlpha.set(!1),
                i.demTexture = i.demTexture || e.getTileTexture(i.tileSize),
                i.demTexture) {
                    var h = i.demTexture;
                    h.update(p, {
                        premultiply: !1
                    }),
                    h.bind(u.NEAREST, u.CLAMP_TO_EDGE)
                } else
                    i.demTexture = new t.Texture(l,p,u.RGBA,{
                        premultiply: !1
                    }),
                    i.demTexture.bind(u.NEAREST, u.CLAMP_TO_EDGE);
                l.activeTexture.set(u.TEXTURE0);
                var d = i.fbo;
                if (!d) {
                    var f = new t.Texture(l,{
                        width: c,
                        height: c,
                        data: null
                    },u.RGBA);
                    f.bind(u.LINEAR, u.CLAMP_TO_EDGE),
                    (d = i.fbo = l.createFramebuffer(c, c)).colorAttachment.set(f.texture)
                }
                l.bindFramebuffer.set(d.framebuffer),
                l.viewport.set([0, 0, c, c]),
                e.useProgram("hillshadePrepare").draw(l, u.TRIANGLES, o, a, s, At.disabled, Ai(i, n), r.id, e.rasterBoundsBuffer, e.quadTriangleIndexBuffer, e.rasterBoundsSegments),
                i.needsHillshadePrepare = !1
            }
        }
        function Yi(e, i, r, n, o) {
            var a = n.paint.get("raster-fade-duration");
            if (a > 0) {
                var s = t.browser.now()
                  , l = (s - e.timeAdded) / a
                  , u = i ? (s - i.timeAdded) / a : -1
                  , c = r.getSource()
                  , p = o.coveringZoomLevel({
                    tileSize: c.tileSize,
                    roundZoom: c.roundZoom
                })
                  , h = !i || Math.abs(i.tileID.overscaledZ - p) > Math.abs(e.tileID.overscaledZ - p)
                  , d = h && e.refreshedUponExpiration ? 1 : t.clamp(h ? l : 1 - u, 0, 1);
                return e.refreshedUponExpiration && l >= 1 && (e.refreshedUponExpiration = !1),
                i ? {
                    opacity: 1,
                    mix: 1 - d
                } : {
                    opacity: d,
                    mix: 0
                }
            }
            return {
                opacity: 1,
                mix: 0
            }
        }
        function Ki(e, i, r) {
            var n = e.context
              , o = n.gl
              , a = r.posMatrix
              , s = e.useProgram("debug")
              , l = wt.disabled
              , u = Tt.disabled
              , c = e.colorModeForRenderPass()
              , p = "$debug";
            s.draw(n, o.LINE_STRIP, l, u, c, At.disabled, bi(a, t.Color.red), p, e.debugBuffer, e.tileBorderIndexBuffer, e.debugSegments);
            for (var h = function(t, e, i, r) {
                r = r || 1;
                var n, o, a, s, l, u, c, p, h = [];
                for (n = 0,
                o = t.length; n < o; n++)
                    if (l = Ji[t[n]]) {
                        for (p = null,
                        a = 0,
                        s = l[1].length; a < s; a += 2)
                            -1 === l[1][a] && -1 === l[1][a + 1] ? p = null : (u = e + l[1][a] * r,
                            c = 200 - l[1][a + 1] * r,
                            p && h.push(p.x, p.y, u, c),
                            p = {
                                x: u,
                                y: c
                            });
                        e += l[0] * r
                    }
                return h
            }(r.toString(), 50, 0, 5), d = new t.StructArrayLayout2i4, f = new t.StructArrayLayout2ui4, m = 0; m < h.length; m += 2)
                d.emplaceBack(h[m], h[m + 1]),
                f.emplaceBack(m, m + 1);
            for (var y = n.createVertexBuffer(d, Le.members), g = n.createIndexBuffer(f), _ = t.SegmentVector.simpleSegment(0, 0, d.length / 2, d.length / 2), v = i.getTile(r).tileSize, x = t.EXTENT / (Math.pow(2, e.transform.zoom - r.overscaledZ) * v), b = [[-1, -1], [-1, 1], [1, -1], [1, 1]], w = 0; w < b.length; w++) {
                var T = b[w];
                s.draw(n, o.LINES, l, u, c, At.disabled, bi(t.translate([], a, [x * T[0], x * T[1], 0]), t.Color.white), p, y, g, _)
            }
            s.draw(n, o.LINES, l, u, c, At.disabled, bi(a, t.Color.black), p, y, g, _)
        }
        var Ji = {
            " ": [16, []],
            "!": [10, [5, 21, 5, 7, -1, -1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2]],
            '"': [16, [4, 21, 4, 14, -1, -1, 12, 21, 12, 14]],
            "#": [21, [11, 25, 4, -7, -1, -1, 17, 25, 10, -7, -1, -1, 4, 12, 18, 12, -1, -1, 3, 6, 17, 6]],
            $: [20, [8, 25, 8, -4, -1, -1, 12, 25, 12, -4, -1, -1, 17, 18, 15, 20, 12, 21, 8, 21, 5, 20, 3, 18, 3, 16, 4, 14, 5, 13, 7, 12, 13, 10, 15, 9, 16, 8, 17, 6, 17, 3, 15, 1, 12, 0, 8, 0, 5, 1, 3, 3]],
            "%": [24, [21, 21, 3, 0, -1, -1, 8, 21, 10, 19, 10, 17, 9, 15, 7, 14, 5, 14, 3, 16, 3, 18, 4, 20, 6, 21, 8, 21, 10, 20, 13, 19, 16, 19, 19, 20, 21, 21, -1, -1, 17, 7, 15, 6, 14, 4, 14, 2, 16, 0, 18, 0, 20, 1, 21, 3, 21, 5, 19, 7, 17, 7]],
            "&": [26, [23, 12, 23, 13, 22, 14, 21, 14, 20, 13, 19, 11, 17, 6, 15, 3, 13, 1, 11, 0, 7, 0, 5, 1, 4, 2, 3, 4, 3, 6, 4, 8, 5, 9, 12, 13, 13, 14, 14, 16, 14, 18, 13, 20, 11, 21, 9, 20, 8, 18, 8, 16, 9, 13, 11, 10, 16, 3, 18, 1, 20, 0, 22, 0, 23, 1, 23, 2]],
            "'": [10, [5, 19, 4, 20, 5, 21, 6, 20, 6, 18, 5, 16, 4, 15]],
            "(": [14, [11, 25, 9, 23, 7, 20, 5, 16, 4, 11, 4, 7, 5, 2, 7, -2, 9, -5, 11, -7]],
            ")": [14, [3, 25, 5, 23, 7, 20, 9, 16, 10, 11, 10, 7, 9, 2, 7, -2, 5, -5, 3, -7]],
            "*": [16, [8, 21, 8, 9, -1, -1, 3, 18, 13, 12, -1, -1, 13, 18, 3, 12]],
            "+": [26, [13, 18, 13, 0, -1, -1, 4, 9, 22, 9]],
            ",": [10, [6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6, -1, 5, -3, 4, -4]],
            "-": [26, [4, 9, 22, 9]],
            ".": [10, [5, 2, 4, 1, 5, 0, 6, 1, 5, 2]],
            "/": [22, [20, 25, 2, -7]],
            0: [20, [9, 21, 6, 20, 4, 17, 3, 12, 3, 9, 4, 4, 6, 1, 9, 0, 11, 0, 14, 1, 16, 4, 17, 9, 17, 12, 16, 17, 14, 20, 11, 21, 9, 21]],
            1: [20, [6, 17, 8, 18, 11, 21, 11, 0]],
            2: [20, [4, 16, 4, 17, 5, 19, 6, 20, 8, 21, 12, 21, 14, 20, 15, 19, 16, 17, 16, 15, 15, 13, 13, 10, 3, 0, 17, 0]],
            3: [20, [5, 21, 16, 21, 10, 13, 13, 13, 15, 12, 16, 11, 17, 8, 17, 6, 16, 3, 14, 1, 11, 0, 8, 0, 5, 1, 4, 2, 3, 4]],
            4: [20, [13, 21, 3, 7, 18, 7, -1, -1, 13, 21, 13, 0]],
            5: [20, [15, 21, 5, 21, 4, 12, 5, 13, 8, 14, 11, 14, 14, 13, 16, 11, 17, 8, 17, 6, 16, 3, 14, 1, 11, 0, 8, 0, 5, 1, 4, 2, 3, 4]],
            6: [20, [16, 18, 15, 20, 12, 21, 10, 21, 7, 20, 5, 17, 4, 12, 4, 7, 5, 3, 7, 1, 10, 0, 11, 0, 14, 1, 16, 3, 17, 6, 17, 7, 16, 10, 14, 12, 11, 13, 10, 13, 7, 12, 5, 10, 4, 7]],
            7: [20, [17, 21, 7, 0, -1, -1, 3, 21, 17, 21]],
            8: [20, [8, 21, 5, 20, 4, 18, 4, 16, 5, 14, 7, 13, 11, 12, 14, 11, 16, 9, 17, 7, 17, 4, 16, 2, 15, 1, 12, 0, 8, 0, 5, 1, 4, 2, 3, 4, 3, 7, 4, 9, 6, 11, 9, 12, 13, 13, 15, 14, 16, 16, 16, 18, 15, 20, 12, 21, 8, 21]],
            9: [20, [16, 14, 15, 11, 13, 9, 10, 8, 9, 8, 6, 9, 4, 11, 3, 14, 3, 15, 4, 18, 6, 20, 9, 21, 10, 21, 13, 20, 15, 18, 16, 14, 16, 9, 15, 4, 13, 1, 10, 0, 8, 0, 5, 1, 4, 3]],
            ":": [10, [5, 14, 4, 13, 5, 12, 6, 13, 5, 14, -1, -1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2]],
            ";": [10, [5, 14, 4, 13, 5, 12, 6, 13, 5, 14, -1, -1, 6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6, -1, 5, -3, 4, -4]],
            "<": [24, [20, 18, 4, 9, 20, 0]],
            "=": [26, [4, 12, 22, 12, -1, -1, 4, 6, 22, 6]],
            ">": [24, [4, 18, 20, 9, 4, 0]],
            "?": [18, [3, 16, 3, 17, 4, 19, 5, 20, 7, 21, 11, 21, 13, 20, 14, 19, 15, 17, 15, 15, 14, 13, 13, 12, 9, 10, 9, 7, -1, -1, 9, 2, 8, 1, 9, 0, 10, 1, 9, 2]],
            "@": [27, [18, 13, 17, 15, 15, 16, 12, 16, 10, 15, 9, 14, 8, 11, 8, 8, 9, 6, 11, 5, 14, 5, 16, 6, 17, 8, -1, -1, 12, 16, 10, 14, 9, 11, 9, 8, 10, 6, 11, 5, -1, -1, 18, 16, 17, 8, 17, 6, 19, 5, 21, 5, 23, 7, 24, 10, 24, 12, 23, 15, 22, 17, 20, 19, 18, 20, 15, 21, 12, 21, 9, 20, 7, 19, 5, 17, 4, 15, 3, 12, 3, 9, 4, 6, 5, 4, 7, 2, 9, 1, 12, 0, 15, 0, 18, 1, 20, 2, 21, 3, -1, -1, 19, 16, 18, 8, 18, 6, 19, 5]],
            A: [18, [9, 21, 1, 0, -1, -1, 9, 21, 17, 0, -1, -1, 4, 7, 14, 7]],
            B: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 15, 17, 13, 16, 12, 13, 11, -1, -1, 4, 11, 13, 11, 16, 10, 17, 9, 18, 7, 18, 4, 17, 2, 16, 1, 13, 0, 4, 0]],
            C: [21, [18, 16, 17, 18, 15, 20, 13, 21, 9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5]],
            D: [21, [4, 21, 4, 0, -1, -1, 4, 21, 11, 21, 14, 20, 16, 18, 17, 16, 18, 13, 18, 8, 17, 5, 16, 3, 14, 1, 11, 0, 4, 0]],
            E: [19, [4, 21, 4, 0, -1, -1, 4, 21, 17, 21, -1, -1, 4, 11, 12, 11, -1, -1, 4, 0, 17, 0]],
            F: [18, [4, 21, 4, 0, -1, -1, 4, 21, 17, 21, -1, -1, 4, 11, 12, 11]],
            G: [21, [18, 16, 17, 18, 15, 20, 13, 21, 9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 18, 8, -1, -1, 13, 8, 18, 8]],
            H: [22, [4, 21, 4, 0, -1, -1, 18, 21, 18, 0, -1, -1, 4, 11, 18, 11]],
            I: [8, [4, 21, 4, 0]],
            J: [16, [12, 21, 12, 5, 11, 2, 10, 1, 8, 0, 6, 0, 4, 1, 3, 2, 2, 5, 2, 7]],
            K: [21, [4, 21, 4, 0, -1, -1, 18, 21, 4, 7, -1, -1, 9, 12, 18, 0]],
            L: [17, [4, 21, 4, 0, -1, -1, 4, 0, 16, 0]],
            M: [24, [4, 21, 4, 0, -1, -1, 4, 21, 12, 0, -1, -1, 20, 21, 12, 0, -1, -1, 20, 21, 20, 0]],
            N: [22, [4, 21, 4, 0, -1, -1, 4, 21, 18, 0, -1, -1, 18, 21, 18, 0]],
            O: [22, [9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 19, 8, 19, 13, 18, 16, 17, 18, 15, 20, 13, 21, 9, 21]],
            P: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 14, 17, 12, 16, 11, 13, 10, 4, 10]],
            Q: [22, [9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 19, 8, 19, 13, 18, 16, 17, 18, 15, 20, 13, 21, 9, 21, -1, -1, 12, 4, 18, -2]],
            R: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 15, 17, 13, 16, 12, 13, 11, 4, 11, -1, -1, 11, 11, 18, 0]],
            S: [20, [17, 18, 15, 20, 12, 21, 8, 21, 5, 20, 3, 18, 3, 16, 4, 14, 5, 13, 7, 12, 13, 10, 15, 9, 16, 8, 17, 6, 17, 3, 15, 1, 12, 0, 8, 0, 5, 1, 3, 3]],
            T: [16, [8, 21, 8, 0, -1, -1, 1, 21, 15, 21]],
            U: [22, [4, 21, 4, 6, 5, 3, 7, 1, 10, 0, 12, 0, 15, 1, 17, 3, 18, 6, 18, 21]],
            V: [18, [1, 21, 9, 0, -1, -1, 17, 21, 9, 0]],
            W: [24, [2, 21, 7, 0, -1, -1, 12, 21, 7, 0, -1, -1, 12, 21, 17, 0, -1, -1, 22, 21, 17, 0]],
            X: [20, [3, 21, 17, 0, -1, -1, 17, 21, 3, 0]],
            Y: [18, [1, 21, 9, 11, 9, 0, -1, -1, 17, 21, 9, 11]],
            Z: [20, [17, 21, 3, 0, -1, -1, 3, 21, 17, 21, -1, -1, 3, 0, 17, 0]],
            "[": [14, [4, 25, 4, -7, -1, -1, 5, 25, 5, -7, -1, -1, 4, 25, 11, 25, -1, -1, 4, -7, 11, -7]],
            "\\": [14, [0, 21, 14, -3]],
            "]": [14, [9, 25, 9, -7, -1, -1, 10, 25, 10, -7, -1, -1, 3, 25, 10, 25, -1, -1, 3, -7, 10, -7]],
            "^": [16, [6, 15, 8, 18, 10, 15, -1, -1, 3, 12, 8, 17, 13, 12, -1, -1, 8, 17, 8, 0]],
            _: [16, [0, -2, 16, -2]],
            "`": [10, [6, 21, 5, 20, 4, 18, 4, 16, 5, 15, 6, 16, 5, 17]],
            a: [19, [15, 14, 15, 0, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
            b: [19, [4, 21, 4, 0, -1, -1, 4, 11, 6, 13, 8, 14, 11, 14, 13, 13, 15, 11, 16, 8, 16, 6, 15, 3, 13, 1, 11, 0, 8, 0, 6, 1, 4, 3]],
            c: [18, [15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
            d: [19, [15, 21, 15, 0, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
            e: [18, [3, 8, 15, 8, 15, 10, 14, 12, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
            f: [12, [10, 21, 8, 21, 6, 20, 5, 17, 5, 0, -1, -1, 2, 14, 9, 14]],
            g: [19, [15, 14, 15, -2, 14, -5, 13, -6, 11, -7, 8, -7, 6, -6, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
            h: [19, [4, 21, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0]],
            i: [8, [3, 21, 4, 20, 5, 21, 4, 22, 3, 21, -1, -1, 4, 14, 4, 0]],
            j: [10, [5, 21, 6, 20, 7, 21, 6, 22, 5, 21, -1, -1, 6, 14, 6, -3, 5, -6, 3, -7, 1, -7]],
            k: [17, [4, 21, 4, 0, -1, -1, 14, 14, 4, 4, -1, -1, 8, 8, 15, 0]],
            l: [8, [4, 21, 4, 0]],
            m: [30, [4, 14, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0, -1, -1, 15, 10, 18, 13, 20, 14, 23, 14, 25, 13, 26, 10, 26, 0]],
            n: [19, [4, 14, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0]],
            o: [19, [8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3, 16, 6, 16, 8, 15, 11, 13, 13, 11, 14, 8, 14]],
            p: [19, [4, 14, 4, -7, -1, -1, 4, 11, 6, 13, 8, 14, 11, 14, 13, 13, 15, 11, 16, 8, 16, 6, 15, 3, 13, 1, 11, 0, 8, 0, 6, 1, 4, 3]],
            q: [19, [15, 14, 15, -7, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
            r: [13, [4, 14, 4, 0, -1, -1, 4, 8, 5, 11, 7, 13, 9, 14, 12, 14]],
            s: [17, [14, 11, 13, 13, 10, 14, 7, 14, 4, 13, 3, 11, 4, 9, 6, 8, 11, 7, 13, 6, 14, 4, 14, 3, 13, 1, 10, 0, 7, 0, 4, 1, 3, 3]],
            t: [12, [5, 21, 5, 4, 6, 1, 8, 0, 10, 0, -1, -1, 2, 14, 9, 14]],
            u: [19, [4, 14, 4, 4, 5, 1, 7, 0, 10, 0, 12, 1, 15, 4, -1, -1, 15, 14, 15, 0]],
            v: [16, [2, 14, 8, 0, -1, -1, 14, 14, 8, 0]],
            w: [22, [3, 14, 7, 0, -1, -1, 11, 14, 7, 0, -1, -1, 11, 14, 15, 0, -1, -1, 19, 14, 15, 0]],
            x: [17, [3, 14, 14, 0, -1, -1, 14, 14, 3, 0]],
            y: [16, [2, 14, 8, 0, -1, -1, 14, 14, 8, 0, 6, -4, 4, -6, 2, -7, 1, -7]],
            z: [17, [14, 14, 3, 0, -1, -1, 3, 14, 14, 14, -1, -1, 3, 0, 14, 0]],
            "{": [14, [9, 25, 7, 24, 6, 23, 5, 21, 5, 19, 6, 17, 7, 16, 8, 14, 8, 12, 6, 10, -1, -1, 7, 24, 6, 22, 6, 20, 7, 18, 8, 17, 9, 15, 9, 13, 8, 11, 4, 9, 8, 7, 9, 5, 9, 3, 8, 1, 7, 0, 6, -2, 6, -4, 7, -6, -1, -1, 6, 8, 8, 6, 8, 4, 7, 2, 6, 1, 5, -1, 5, -3, 6, -5, 7, -6, 9, -7]],
            "|": [8, [4, 25, 4, -7]],
            "}": [14, [5, 25, 7, 24, 8, 23, 9, 21, 9, 19, 8, 17, 7, 16, 6, 14, 6, 12, 8, 10, -1, -1, 7, 24, 8, 22, 8, 20, 7, 18, 6, 17, 5, 15, 5, 13, 6, 11, 10, 9, 6, 7, 5, 5, 5, 3, 6, 1, 7, 0, 8, -2, 8, -4, 7, -6, -1, -1, 8, 8, 6, 6, 6, 4, 7, 2, 8, 1, 9, -1, 9, -3, 8, -5, 7, -6, 5, -7]],
            "~": [24, [3, 6, 3, 8, 4, 11, 6, 12, 8, 12, 10, 11, 14, 8, 16, 7, 18, 7, 20, 8, 21, 10, -1, -1, 3, 8, 4, 10, 6, 11, 8, 11, 10, 10, 14, 7, 16, 6, 18, 6, 20, 7, 21, 10, 21, 12]]
        }
          , Qi = {
            symbol: function(t, e, i, r) {
                if ("translucent" === t.renderPass) {
                    var n = Tt.disabled
                      , o = t.colorModeForRenderPass();
                    0 !== i.paint.get("icon-opacity").constantOr(1) && $i(t, e, i, r, !1, i.paint.get("icon-translate"), i.paint.get("icon-translate-anchor"), i.layout.get("icon-rotation-alignment"), i.layout.get("icon-pitch-alignment"), i.layout.get("icon-keep-upright"), n, o),
                    0 !== i.paint.get("text-opacity").constantOr(1) && $i(t, e, i, r, !0, i.paint.get("text-translate"), i.paint.get("text-translate-anchor"), i.layout.get("text-rotation-alignment"), i.layout.get("text-pitch-alignment"), i.layout.get("text-keep-upright"), n, o),
                    e.map.showCollisionBoxes && function(t, e, i, r) {
                        Ui(t, e, i, r, !1),
                        Ui(t, e, i, r, !0)
                    }(t, e, i, r)
                }
            },
            circle: function(t, e, i, r) {
                if ("translucent" === t.renderPass) {
                    var n = i.paint.get("circle-opacity")
                      , o = i.paint.get("circle-stroke-width")
                      , a = i.paint.get("circle-stroke-opacity");
                    if (0 !== n.constantOr(1) || 0 !== o.constantOr(1) && 0 !== a.constantOr(1))
                        for (var s = t.context, l = s.gl, u = t.depthModeForSublayer(0, wt.ReadOnly), c = Tt.disabled, p = t.colorModeForRenderPass(), h = 0; h < r.length; h++) {
                            var d = r[h]
                              , f = e.getTile(d)
                              , m = f.getBucket(i);
                            if (m) {
                                var y = m.programConfigurations.get(i.id);
                                t.useProgram("circle", y).draw(s, l.TRIANGLES, u, c, p, At.disabled, _i(t, d, f, i), i.id, m.layoutVertexBuffer, m.indexBuffer, m.segments, i.paint, t.transform.zoom, y)
                            }
                        }
                }
            },
            heatmap: function(e, i, r, n) {
                if (0 !== r.paint.get("heatmap-opacity"))
                    if ("offscreen" === e.renderPass) {
                        var o = e.context
                          , a = o.gl
                          , s = e.depthModeForSublayer(0, wt.ReadOnly)
                          , l = Tt.disabled
                          , u = new St([a.ONE, a.ONE],t.Color.transparent,[!0, !0, !0, !0]);
                        !function(t, e, i) {
                            var r = t.gl;
                            t.activeTexture.set(r.TEXTURE1),
                            t.viewport.set([0, 0, e.width / 4, e.height / 4]);
                            var n = i.heatmapFbo;
                            if (n)
                                r.bindTexture(r.TEXTURE_2D, n.colorAttachment.get()),
                                t.bindFramebuffer.set(n.framebuffer);
                            else {
                                var o = r.createTexture();
                                r.bindTexture(r.TEXTURE_2D, o),
                                r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, r.CLAMP_TO_EDGE),
                                r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, r.CLAMP_TO_EDGE),
                                r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, r.LINEAR),
                                r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, r.LINEAR),
                                n = i.heatmapFbo = t.createFramebuffer(e.width / 4, e.height / 4),
                                function t(e, i, r, n) {
                                    var o = e.gl;
                                    o.texImage2D(o.TEXTURE_2D, 0, o.RGBA, i.width / 4, i.height / 4, 0, o.RGBA, e.extTextureHalfFloat ? e.extTextureHalfFloat.HALF_FLOAT_OES : o.UNSIGNED_BYTE, null),
                                    n.colorAttachment.set(r),
                                    e.extTextureHalfFloat && o.checkFramebufferStatus(o.FRAMEBUFFER) !== o.FRAMEBUFFER_COMPLETE && (e.extTextureHalfFloat = null,
                                    n.colorAttachment.setDirty(),
                                    t(e, i, r, n))
                                }(t, e, o, n)
                            }
                        }(o, e, r),
                        o.clear({
                            color: t.Color.transparent
                        });
                        for (var c = 0; c < n.length; c++) {
                            var p = n[c];
                            if (!i.hasRenderableParent(p)) {
                                var h = i.getTile(p)
                                  , d = h.getBucket(r);
                                if (d) {
                                    var f = d.programConfigurations.get(r.id)
                                      , m = e.useProgram("heatmap", f)
                                      , y = e.transform.zoom;
                                    m.draw(o, a.TRIANGLES, s, l, u, At.disabled, Ti(p.posMatrix, h, y, r.paint.get("heatmap-intensity")), r.id, d.layoutVertexBuffer, d.indexBuffer, d.segments, r.paint, e.transform.zoom, f)
                                }
                            }
                        }
                        o.viewport.set([0, 0, e.width, e.height])
                    } else
                        "translucent" === e.renderPass && (e.context.setColorMode(e.colorModeForRenderPass()),
                        function(e, i) {
                            var r = e.context
                              , n = r.gl
                              , o = i.heatmapFbo;
                            if (o) {
                                r.activeTexture.set(n.TEXTURE0),
                                n.bindTexture(n.TEXTURE_2D, o.colorAttachment.get()),
                                r.activeTexture.set(n.TEXTURE1);
                                var a = i.colorRampTexture;
                                a || (a = i.colorRampTexture = new t.Texture(r,i.colorRamp,n.RGBA)),
                                a.bind(n.LINEAR, n.CLAMP_TO_EDGE),
                                e.useProgram("heatmapTexture").draw(r, n.TRIANGLES, wt.disabled, Tt.disabled, e.colorModeForRenderPass(), At.disabled, function(e, i, r, n) {
                                    var o = t.create();
                                    t.ortho(o, 0, e.width, e.height, 0, 0, 1);
                                    var a = e.context.gl;
                                    return {
                                        u_matrix: o,
                                        u_world: [a.drawingBufferWidth, a.drawingBufferHeight],
                                        u_image: r,
                                        u_color_ramp: n,
                                        u_opacity: i.paint.get("heatmap-opacity")
                                    }
                                }(e, i, 0, 1), i.id, e.viewportBuffer, e.quadTriangleIndexBuffer, e.viewportSegments, i.paint, e.transform.zoom)
                            }
                        }(e, r))
            },
            line: function(e, i, r, n) {
                if ("translucent" === e.renderPass) {
                    var o = r.paint.get("line-opacity")
                      , a = r.paint.get("line-width");
                    if (0 !== o.constantOr(1) && 0 !== a.constantOr(1)) {
                        var s = e.depthModeForSublayer(0, wt.ReadOnly)
                          , l = e.colorModeForRenderPass()
                          , u = r.paint.get("line-dasharray")
                          , c = r.paint.get("line-pattern")
                          , p = c.constantOr(1)
                          , h = r.paint.get("line-gradient")
                          , d = r.getCrossfadeParameters()
                          , f = u ? "lineSDF" : p ? "linePattern" : h ? "lineGradient" : "line"
                          , m = e.context
                          , y = m.gl
                          , g = !0;
                        if (h) {
                            m.activeTexture.set(y.TEXTURE0);
                            var _ = r.gradientTexture;
                            if (!r.gradient)
                                return;
                            _ || (_ = r.gradientTexture = new t.Texture(m,r.gradient,y.RGBA)),
                            _.bind(y.LINEAR, y.CLAMP_TO_EDGE)
                        }
                        for (var v = 0, x = n; v < x.length; v += 1) {
                            var b = x[v]
                              , w = i.getTile(b);
                            if (!p || w.patternsLoaded()) {
                                var T = w.getBucket(r);
                                if (T) {
                                    var S = T.programConfigurations.get(r.id)
                                      , A = e.context.program.get()
                                      , k = e.useProgram(f, S)
                                      , E = g || k.program !== A
                                      , C = c.constantOr(null);
                                    if (C && w.imageAtlas) {
                                        var P = w.imageAtlas.patternPositions[C.to]
                                          , M = w.imageAtlas.patternPositions[C.from];
                                        P && M && S.setConstantPatternPositions(P, M)
                                    }
                                    var I = u ? Pi(e, w, r, u, d) : p ? Ci(e, w, r, d) : h ? Ei(e, w, r) : ki(e, w, r);
                                    u && (E || e.lineAtlas.dirty) ? (m.activeTexture.set(y.TEXTURE0),
                                    e.lineAtlas.bind(m)) : p && (m.activeTexture.set(y.TEXTURE0),
                                    w.imageAtlasTexture.bind(y.LINEAR, y.CLAMP_TO_EDGE),
                                    S.updatePatternPaintBuffers(d)),
                                    k.draw(m, y.TRIANGLES, s, e.stencilModeForClipping(b), l, At.disabled, I, r.id, T.layoutVertexBuffer, T.indexBuffer, T.segments, r.paint, e.transform.zoom, S),
                                    g = !1
                                }
                            }
                        }
                    }
                }
            },
            fill: function(e, i, r, n) {
                var o = r.paint.get("fill-color")
                  , a = r.paint.get("fill-opacity");
                if (0 !== a.constantOr(1)) {
                    var s = e.colorModeForRenderPass()
                      , l = r.paint.get("fill-pattern").constantOr(1) || 1 !== o.constantOr(t.Color.transparent).a || 1 !== a.constantOr(0) ? "translucent" : "opaque";
                    e.renderPass === l && Wi(e, i, r, n, e.depthModeForSublayer(1, "opaque" === e.renderPass ? wt.ReadWrite : wt.ReadOnly), s, !1),
                    "translucent" === e.renderPass && r.paint.get("fill-antialias") && Wi(e, i, r, n, e.depthModeForSublayer(r.getPaintProperty("fill-outline-color") ? 2 : 0, wt.ReadOnly), s, !0)
                }
            },
            "fill-extrusion": function(t, e, i, r) {
                0 !== i.paint.get("fill-extrusion-opacity") && ("offscreen" === t.renderPass ? (Hi(t, i),
                function(t, e, i, r, n, o, a) {
                    for (var s = t.context, l = s.gl, u = i.paint.get("fill-extrusion-pattern"), c = u.constantOr(1), p = i.getCrossfadeParameters(), h = 0, d = r; h < d.length; h += 1) {
                        var f = d[h]
                          , m = e.getTile(f)
                          , y = m.getBucket(i);
                        if (y) {
                            var g = y.programConfigurations.get(i.id)
                              , _ = t.useProgram(c ? "fillExtrusionPattern" : "fillExtrusion", g);
                            c && (t.context.activeTexture.set(l.TEXTURE0),
                            m.imageAtlasTexture.bind(l.LINEAR, l.CLAMP_TO_EDGE),
                            g.updatePatternPaintBuffers(p));
                            var v = u.constantOr(null);
                            if (v && m.imageAtlas) {
                                var x = m.imageAtlas.patternPositions[v.to]
                                  , b = m.imageAtlas.patternPositions[v.from];
                                x && b && g.setConstantPatternPositions(x, b)
                            }
                            var w = t.translatePosMatrix(f.posMatrix, m, i.paint.get("fill-extrusion-translate"), i.paint.get("fill-extrusion-translate-anchor"))
                              , T = i.paint.get("fill-extrusion-vertical-gradient")
                              , S = c ? hi(w, t, T, f, p, m) : pi(w, t, T);
                            _.draw(s, s.gl.TRIANGLES, n, o, a, At.backCCW, S, i.id, y.layoutVertexBuffer, y.indexBuffer, y.segments, i.paint, t.transform.zoom, g)
                        }
                    }
                }(t, e, i, r, new wt(t.context.gl.LEQUAL,wt.ReadWrite,[0, 1]), Tt.disabled, t.colorModeForRenderPass())) : "translucent" === t.renderPass && Xi(t, i, i.paint.get("fill-extrusion-opacity")))
            },
            hillshade: function(t, e, i, r) {
                if ("offscreen" === t.renderPass || "translucent" === t.renderPass) {
                    for (var n = t.context, o = e.getSource().maxzoom, a = t.depthModeForSublayer(0, wt.ReadOnly), s = Tt.disabled, l = t.colorModeForRenderPass(), u = 0, c = r; u < c.length; u += 1) {
                        var p = c[u]
                          , h = e.getTile(p);
                        h.needsHillshadePrepare && "offscreen" === t.renderPass ? Gi(t, h, i, o, a, s, l) : "translucent" === t.renderPass && Zi(t, h, i, a, s, l)
                    }
                    n.viewport.set([0, 0, t.width, t.height])
                }
            },
            raster: function(t, e, i, r) {
                if ("translucent" === t.renderPass && 0 !== i.paint.get("raster-opacity"))
                    for (var n = t.context, o = n.gl, a = e.getSource(), s = t.useProgram("raster"), l = Tt.disabled, u = t.colorModeForRenderPass(), c = r.length && r[0].overscaledZ, p = 0, h = r; p < h.length; p += 1) {
                        var d = h[p]
                          , f = t.depthModeForSublayer(d.overscaledZ - c, 1 === i.paint.get("raster-opacity") ? wt.ReadWrite : wt.ReadOnly, o.LESS)
                          , m = e.getTile(d)
                          , y = t.transform.calculatePosMatrix(d.toUnwrapped(), !0);
                        m.registerFadeDuration(i.paint.get("raster-fade-duration"));
                        var g = e.findLoadedParent(d, 0)
                          , _ = Yi(m, g, e, i, t.transform)
                          , v = void 0
                          , x = void 0
                          , b = "nearest" === i.paint.get("raster-resampling") ? o.NEAREST : o.LINEAR;
                        n.activeTexture.set(o.TEXTURE0),
                        m.texture.bind(b, o.CLAMP_TO_EDGE, o.LINEAR_MIPMAP_NEAREST),
                        n.activeTexture.set(o.TEXTURE1),
                        g ? (g.texture.bind(b, o.CLAMP_TO_EDGE, o.LINEAR_MIPMAP_NEAREST),
                        v = Math.pow(2, g.tileID.overscaledZ - m.tileID.overscaledZ),
                        x = [m.tileID.canonical.x * v % 1, m.tileID.canonical.y * v % 1]) : m.texture.bind(b, o.CLAMP_TO_EDGE, o.LINEAR_MIPMAP_NEAREST);
                        var w = zi(y, x || [0, 0], v || 1, _, i);
                        a instanceof P ? s.draw(n, o.TRIANGLES, f, l, u, At.disabled, w, i.id, a.boundsBuffer, t.quadTriangleIndexBuffer, a.boundsSegments) : m.maskedBoundsBuffer && m.maskedIndexBuffer && m.segments ? s.draw(n, o.TRIANGLES, f, l, u, At.disabled, w, i.id, m.maskedBoundsBuffer, m.maskedIndexBuffer, m.segments, i.paint, t.transform.zoom) : s.draw(n, o.TRIANGLES, f, l, u, At.disabled, w, i.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments)
                    }
            },
            background: function(t, e, i) {
                var r = i.paint.get("background-color")
                  , n = i.paint.get("background-opacity");
                if (0 !== n) {
                    var o = t.context
                      , a = o.gl
                      , s = t.transform
                      , l = s.tileSize
                      , u = i.paint.get("background-pattern");
                    if (!t.isPatternMissing(u)) {
                        var c = u || 1 !== r.a || 1 !== n ? "translucent" : "opaque";
                        if (t.renderPass === c) {
                            var p = Tt.disabled
                              , h = t.depthModeForSublayer(0, "opaque" === c ? wt.ReadWrite : wt.ReadOnly)
                              , d = t.colorModeForRenderPass()
                              , f = t.useProgram(u ? "backgroundPattern" : "background")
                              , m = s.coveringTiles({
                                tileSize: l
                            });
                            u && (o.activeTexture.set(a.TEXTURE0),
                            t.imageManager.bind(t.context));
                            for (var y = i.getCrossfadeParameters(), g = 0, _ = m; g < _.length; g += 1) {
                                var v = _[g]
                                  , x = t.transform.calculatePosMatrix(v.toUnwrapped())
                                  , b = u ? Ri(x, n, t, u, {
                                    tileID: v,
                                    tileSize: l
                                }, y) : Oi(x, n, r);
                                f.draw(o, a.TRIANGLES, h, p, d, At.disabled, b, i.id, t.tileExtentBuffer, t.quadTriangleIndexBuffer, t.tileExtentSegments)
                            }
                        }
                    }
                }
            },
            debug: function(t, e, i) {
                for (var r = 0; r < i.length; r++)
                    Ki(t, e, i[r])
            },
            custom: function(t, e, i) {
                var r = t.context
                  , n = i.implementation;
                if ("offscreen" === t.renderPass) {
                    var o = n.prerender;
                    o && (t.setCustomLayerDefaults(),
                    o.call(n, r.gl, t.transform.customLayerMatrix()),
                    r.setDirty(),
                    t.setBaseState()),
                    "3d" === n.renderingMode && (t.setCustomLayerDefaults(),
                    Hi(t, i),
                    n.render(r.gl, t.transform.customLayerMatrix()),
                    r.setDirty(),
                    t.setBaseState())
                } else if ("translucent" === t.renderPass)
                    if ("3d" === n.renderingMode)
                        Xi(t, i, 1);
                    else {
                        t.setCustomLayerDefaults(),
                        r.setStencilMode(Tt.disabled);
                        var a = t.depthModeForSublayer(0, wt.ReadOnly);
                        r.setDepthMode(a),
                        n.render(r.gl, t.transform.customLayerMatrix()),
                        r.setDirty(),
                        t.setBaseState(),
                        r.bindFramebuffer.set(null)
                    }
            }
        }
          , tr = function(e, i) {
            this.context = new kt(e),
            this.transform = i,
            this._tileTextures = {},
            this.setup(),
            this.numSublayers = Et.maxUnderzooming + Et.maxOverzooming + 1,
            this.depthEpsilon = 1 / Math.pow(2, 16),
            this.depthRboNeedsClear = !0,
            this.emptyProgramConfiguration = new t.ProgramConfiguration,
            this.crossTileSymbolIndex = new Ce
        };
        function er(t, e) {
            if (t.y > e.y) {
                var i = t;
                t = e,
                e = i
            }
            return {
                x0: t.x,
                y0: t.y,
                x1: e.x,
                y1: e.y,
                dx: e.x - t.x,
                dy: e.y - t.y
            }
        }
        function ir(t, e, i, r, n) {
            var o = Math.max(i, Math.floor(e.y0))
              , a = Math.min(r, Math.ceil(e.y1));
            if (t.x0 === e.x0 && t.y0 === e.y0 ? t.x0 + e.dy / t.dy * t.dx < e.x1 : t.x1 - e.dy / t.dy * t.dx < e.x0) {
                var s = t;
                t = e,
                e = s
            }
            for (var l = t.dx / t.dy, u = e.dx / e.dy, c = t.dx > 0, p = e.dx < 0, h = o; h < a; h++) {
                var d = l * Math.max(0, Math.min(t.dy, h + c - t.y0)) + t.x0
                  , f = u * Math.max(0, Math.min(e.dy, h + p - e.y0)) + e.x0;
                n(Math.floor(f), Math.ceil(d), h)
            }
        }
        function rr(t, e, i, r, n, o) {
            var a, s = er(t, e), l = er(e, i), u = er(i, t);
            s.dy > l.dy && (a = s,
            s = l,
            l = a),
            s.dy > u.dy && (a = s,
            s = u,
            u = a),
            l.dy > u.dy && (a = l,
            l = u,
            u = a),
            s.dy && ir(u, s, r, n, o),
            l.dy && ir(u, l, r, n, o)
        }
        tr.prototype.resize = function(e, i) {
            var r = this.context.gl;
            if (this.width = e * t.browser.devicePixelRatio,
            this.height = i * t.browser.devicePixelRatio,
            this.context.viewport.set([0, 0, this.width, this.height]),
            this.style)
                for (var n = 0, o = this.style._order; n < o.length; n += 1) {
                    var a = o[n];
                    this.style._layers[a].resize()
                }
            this.depthRbo && (r.deleteRenderbuffer(this.depthRbo),
            this.depthRbo = null)
        }
        ,
        tr.prototype.setup = function() {
            var e = this.context
              , i = new t.StructArrayLayout2i4;
            i.emplaceBack(0, 0),
            i.emplaceBack(t.EXTENT, 0),
            i.emplaceBack(0, t.EXTENT),
            i.emplaceBack(t.EXTENT, t.EXTENT),
            this.tileExtentBuffer = e.createVertexBuffer(i, Le.members),
            this.tileExtentSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
            var r = new t.StructArrayLayout2i4;
            r.emplaceBack(0, 0),
            r.emplaceBack(t.EXTENT, 0),
            r.emplaceBack(0, t.EXTENT),
            r.emplaceBack(t.EXTENT, t.EXTENT),
            this.debugBuffer = e.createVertexBuffer(r, Le.members),
            this.debugSegments = t.SegmentVector.simpleSegment(0, 0, 4, 5);
            var n = new t.StructArrayLayout4i8;
            n.emplaceBack(0, 0, 0, 0),
            n.emplaceBack(t.EXTENT, 0, t.EXTENT, 0),
            n.emplaceBack(0, t.EXTENT, 0, t.EXTENT),
            n.emplaceBack(t.EXTENT, t.EXTENT, t.EXTENT, t.EXTENT),
            this.rasterBoundsBuffer = e.createVertexBuffer(n, t.rasterBoundsAttributes.members),
            this.rasterBoundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
            var o = new t.StructArrayLayout2i4;
            o.emplaceBack(0, 0),
            o.emplaceBack(1, 0),
            o.emplaceBack(0, 1),
            o.emplaceBack(1, 1),
            this.viewportBuffer = e.createVertexBuffer(o, Le.members),
            this.viewportSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
            var a = new t.StructArrayLayout1ui2;
            a.emplaceBack(0),
            a.emplaceBack(1),
            a.emplaceBack(3),
            a.emplaceBack(2),
            a.emplaceBack(0),
            this.tileBorderIndexBuffer = e.createIndexBuffer(a);
            var s = new t.StructArrayLayout3ui6;
            s.emplaceBack(0, 1, 2),
            s.emplaceBack(2, 1, 3),
            this.quadTriangleIndexBuffer = e.createIndexBuffer(s);
            var l = this.context.gl;
            this.stencilClearMode = new Tt({
                func: l.ALWAYS,
                mask: 0
            },0,255,l.ZERO,l.ZERO,l.ZERO)
        }
        ,
        tr.prototype.clearStencil = function() {
            var e = this.context
              , i = e.gl
              , r = t.create();
            t.ortho(r, 0, this.width, this.height, 0, 0, 1),
            t.scale(r, r, [i.drawingBufferWidth, i.drawingBufferHeight, 0]),
            this.useProgram("clippingMask").draw(e, i.TRIANGLES, wt.disabled, this.stencilClearMode, St.disabled, At.disabled, wi(r), "$clipping", this.viewportBuffer, this.quadTriangleIndexBuffer, this.viewportSegments)
        }
        ,
        tr.prototype._renderTileClippingMasks = function(t) {
            var e = this.context
              , i = e.gl;
            e.setColorMode(St.disabled),
            e.setDepthMode(wt.disabled);
            var r = this.useProgram("clippingMask")
              , n = 1;
            this._tileClippingMaskIDs = {};
            for (var o = 0, a = t; o < a.length; o += 1) {
                var s = a[o]
                  , l = this._tileClippingMaskIDs[s.key] = n++;
                r.draw(e, i.TRIANGLES, wt.disabled, new Tt({
                    func: i.ALWAYS,
                    mask: 0
                },l,255,i.KEEP,i.KEEP,i.REPLACE), St.disabled, At.disabled, wi(s.posMatrix), "$clipping", this.tileExtentBuffer, this.quadTriangleIndexBuffer, this.tileExtentSegments)
            }
        }
        ,
        tr.prototype.stencilModeForClipping = function(t) {
            var e = this.context.gl;
            return new Tt({
                func: e.EQUAL,
                mask: 255
            },this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)
        }
        ,
        tr.prototype.colorModeForRenderPass = function() {
            var e = this.context.gl;
            return this._showOverdrawInspector ? new St([e.CONSTANT_COLOR, e.ONE],new t.Color(1 / 8,1 / 8,1 / 8,0),[!0, !0, !0, !0]) : "opaque" === this.renderPass ? St.unblended : St.alphaBlended
        }
        ,
        tr.prototype.depthModeForSublayer = function(t, e, i) {
            var r = 1 - ((1 + this.currentLayer) * this.numSublayers + t) * this.depthEpsilon
              , n = r - 1 + this.depthRange;
            return new wt(i || this.context.gl.LEQUAL,e,[n, r])
        }
        ,
        tr.prototype.render = function(e, i) {
            this.style = e,
            this.options = i,
            this.lineAtlas = e.lineAtlas,
            this.imageManager = e.imageManager,
            this.glyphManager = e.glyphManager,
            this.symbolFadeChange = e.placement.symbolFadeChange(t.browser.now());
            var r = this.style._order
              , n = this.style.sourceCaches;
            for (var o in n) {
                var a = n[o];
                a.used && a.prepare(this.context)
            }
            var s, l = {}, u = {}, c = {};
            for (var p in n) {
                var h = n[p];
                l[p] = h.getVisibleCoordinates(),
                u[p] = l[p].slice().reverse(),
                c[p] = h.getVisibleCoordinates(!0).reverse()
            }
            for (var d in n) {
                var f = n[d]
                  , m = f.getSource();
                if ("raster" === m.type || "raster-dem" === m.type) {
                    for (var y = [], g = 0, _ = l[d]; g < _.length; g += 1) {
                        var v = _[g];
                        y.push(f.getTile(v))
                    }
                    Bi(y, this.context)
                }
            }
            this.renderPass = "offscreen",
            this.depthRboNeedsClear = !0;
            for (var x = 0, b = r; x < b.length; x += 1) {
                var w = b[x]
                  , T = this.style._layers[w];
                if (T.hasOffscreenPass() && !T.isHidden(this.transform.zoom)) {
                    var S = u[T.source];
                    ("custom" === T.type || S.length) && this.renderLayer(this, n[T.source], T, S)
                }
            }
            for (this.context.bindFramebuffer.set(null),
            this.context.clear({
                color: i.showOverdrawInspector ? t.Color.black : t.Color.transparent,
                depth: 1
            }),
            this._showOverdrawInspector = i.showOverdrawInspector,
            this.depthRange = (e._order.length + 2) * this.numSublayers * this.depthEpsilon,
            this.renderPass = "opaque",
            this.currentLayer = r.length - 1; this.currentLayer >= 0; this.currentLayer--) {
                var A = this.style._layers[r[this.currentLayer]]
                  , k = n[A.source]
                  , E = l[A.source];
                A.source !== s && k && (this.clearStencil(),
                k.getSource().isTileClipped && this._renderTileClippingMasks(E)),
                this.renderLayer(this, k, A, E),
                s = A.source
            }
            for (this.renderPass = "translucent",
            this.currentLayer = 0,
            s = null; this.currentLayer < r.length; this.currentLayer++) {
                var C = this.style._layers[r[this.currentLayer]]
                  , P = n[C.source]
                  , M = ("symbol" === C.type ? c : u)[C.source];
                C.source !== s && P && (this.clearStencil(),
                P.getSource().isTileClipped && this._renderTileClippingMasks(l[C.source])),
                this.renderLayer(this, P, C, M),
                s = C.source
            }
            if (this.options.showTileBoundaries)
                for (var I in n) {
                    Qi.debug(this, n[I], l[I]);
                    break
                }
            this.setCustomLayerDefaults()
        }
        ,
        tr.prototype.setupOffscreenDepthRenderbuffer = function() {
            var t = this.context;
            this.depthRbo || (this.depthRbo = t.createRenderbuffer(t.gl.DEPTH_COMPONENT16, this.width, this.height))
        }
        ,
        tr.prototype.renderLayer = function(t, e, i, r) {
            i.isHidden(this.transform.zoom) || ("background" === i.type || "custom" === i.type || r.length) && (this.id = i.id,
            Qi[i.type](t, e, i, r))
        }
        ,
        tr.prototype.translatePosMatrix = function(e, i, r, n, o) {
            if (!r[0] && !r[1])
                return e;
            var a = o ? "map" === n ? this.transform.angle : 0 : "viewport" === n ? -this.transform.angle : 0;
            if (a) {
                var s = Math.sin(a)
                  , l = Math.cos(a);
                r = [r[0] * l - r[1] * s, r[0] * s + r[1] * l]
            }
            var u = [o ? r[0] : se(i, r[0], this.transform.zoom), o ? r[1] : se(i, r[1], this.transform.zoom), 0]
              , c = new Float32Array(16);
            return t.translate(c, e, u),
            c
        }
        ,
        tr.prototype.saveTileTexture = function(t) {
            var e = this._tileTextures[t.size[0]];
            e ? e.push(t) : this._tileTextures[t.size[0]] = [t]
        }
        ,
        tr.prototype.getTileTexture = function(t) {
            var e = this._tileTextures[t];
            return e && e.length > 0 ? e.pop() : null
        }
        ,
        tr.prototype.isPatternMissing = function(t) {
            if (!t)
                return !1;
            var e = this.imageManager.getPattern(t.from)
              , i = this.imageManager.getPattern(t.to);
            return !e || !i
        }
        ,
        tr.prototype.useProgram = function(t, e) {
            void 0 === e && (e = this.emptyProgramConfiguration),
            this.cache = this.cache || {};
            var i = "" + t + (e.cacheKey || "") + (this._showOverdrawInspector ? "/overdraw" : "");
            return this.cache[i] || (this.cache[i] = new ui(this.context,si[t],e,Fi[t],this._showOverdrawInspector)),
            this.cache[i]
        }
        ,
        tr.prototype.setCustomLayerDefaults = function() {
            this.context.unbindVAO(),
            this.context.cullFace.setDefault(),
            this.context.activeTexture.setDefault(),
            this.context.pixelStoreUnpack.setDefault(),
            this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),
            this.context.pixelStoreUnpackFlipY.setDefault()
        }
        ,
        tr.prototype.setBaseState = function() {
            var t = this.context.gl;
            this.context.cullFace.set(!1),
            this.context.viewport.set([0, 0, this.width, this.height]),
            this.context.blendEquation.set(t.FUNC_ADD)
        }
        ;
        var nr = function(e, i, r) {
            this.tileSize = 512,
            this.maxValidLatitude = 85.051129,
            this._renderWorldCopies = void 0 === r || r,
            this._minZoom = e || 0,
            this._maxZoom = i || 22,
            this.setMaxBounds(),
            this.width = 0,
            this.height = 0,
            this._center = new t.LngLat(0,0),
            this.zoom = 0,
            this.angle = 0,
            this._fov = .6435011087932844,
            this._pitch = 0,
            this._unmodified = !0,
            this._posMatrixCache = {},
            this._alignedPosMatrixCache = {}
        }
          , or = {
            minZoom: {
                configurable: !0
            },
            maxZoom: {
                configurable: !0
            },
            renderWorldCopies: {
                configurable: !0
            },
            worldSize: {
                configurable: !0
            },
            centerPoint: {
                configurable: !0
            },
            size: {
                configurable: !0
            },
            bearing: {
                configurable: !0
            },
            pitch: {
                configurable: !0
            },
            fov: {
                configurable: !0
            },
            zoom: {
                configurable: !0
            },
            center: {
                configurable: !0
            },
            unmodified: {
                configurable: !0
            },
            point: {
                configurable: !0
            }
        };
        nr.prototype.clone = function() {
            var t = new nr(this._minZoom,this._maxZoom,this._renderWorldCopies);
            return t.tileSize = this.tileSize,
            t.latRange = this.latRange,
            t.width = this.width,
            t.height = this.height,
            t._center = this._center,
            t.zoom = this.zoom,
            t.angle = this.angle,
            t._fov = this._fov,
            t._pitch = this._pitch,
            t._unmodified = this._unmodified,
            t._calcMatrices(),
            t
        }
        ,
        or.minZoom.get = function() {
            return this._minZoom
        }
        ,
        or.minZoom.set = function(t) {
            this._minZoom !== t && (this._minZoom = t,
            this.zoom = Math.max(this.zoom, t))
        }
        ,
        or.maxZoom.get = function() {
            return this._maxZoom
        }
        ,
        or.maxZoom.set = function(t) {
            this._maxZoom !== t && (this._maxZoom = t,
            this.zoom = Math.min(this.zoom, t))
        }
        ,
        or.renderWorldCopies.get = function() {
            return this._renderWorldCopies
        }
        ,
        or.renderWorldCopies.set = function(t) {
            void 0 === t ? t = !0 : null === t && (t = !1),
            this._renderWorldCopies = t
        }
        ,
        or.worldSize.get = function() {
            return this.tileSize * this.scale
        }
        ,
        or.centerPoint.get = function() {
            return this.size._div(2)
        }
        ,
        or.size.get = function() {
            return new t.Point(this.width,this.height)
        }
        ,
        or.bearing.get = function() {
            return -this.angle / Math.PI * 180
        }
        ,
        or.bearing.set = function(e) {
            var i = -t.wrap(e, -180, 180) * Math.PI / 180;
            this.angle !== i && (this._unmodified = !1,
            this.angle = i,
            this._calcMatrices(),
            this.rotationMatrix = t.create$4(),
            t.rotate(this.rotationMatrix, this.rotationMatrix, this.angle))
        }
        ,
        or.pitch.get = function() {
            return this._pitch / Math.PI * 180
        }
        ,
        or.pitch.set = function(e) {
            var i = t.clamp(e, 0, 60) / 180 * Math.PI;
            this._pitch !== i && (this._unmodified = !1,
            this._pitch = i,
            this._calcMatrices())
        }
        ,
        or.fov.get = function() {
            return this._fov / Math.PI * 180
        }
        ,
        or.fov.set = function(t) {
            t = Math.max(.01, Math.min(60, t)),
            this._fov !== t && (this._unmodified = !1,
            this._fov = t / 180 * Math.PI,
            this._calcMatrices())
        }
        ,
        or.zoom.get = function() {
            return this._zoom
        }
        ,
        or.zoom.set = function(t) {
            var e = Math.min(Math.max(t, this.minZoom), this.maxZoom);
            this._zoom !== e && (this._unmodified = !1,
            this._zoom = e,
            this.scale = this.zoomScale(e),
            this.tileZoom = Math.floor(e),
            this.zoomFraction = e - this.tileZoom,
            this._constrain(),
            this._calcMatrices())
        }
        ,
        or.center.get = function() {
            return this._center
        }
        ,
        or.center.set = function(t) {
            t.lat === this._center.lat && t.lng === this._center.lng || (this._unmodified = !1,
            this._center = t,
            this._constrain(),
            this._calcMatrices())
        }
        ,
        nr.prototype.coveringZoomLevel = function(t) {
            return (t.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t.tileSize))
        }
        ,
        nr.prototype.getVisibleUnwrappedCoordinates = function(e) {
            var i = [new t.UnwrappedTileID(0,e)];
            if (this._renderWorldCopies)
                for (var r = this.pointCoordinate(new t.Point(0,0)), n = this.pointCoordinate(new t.Point(this.width,0)), o = this.pointCoordinate(new t.Point(this.width,this.height)), a = this.pointCoordinate(new t.Point(0,this.height)), s = Math.floor(Math.min(r.x, n.x, o.x, a.x)), l = Math.floor(Math.max(r.x, n.x, o.x, a.x)), u = s - 1; u <= l + 1; u++)
                    0 !== u && i.push(new t.UnwrappedTileID(u,e));
            return i
        }
        ,
        nr.prototype.coveringTiles = function(e) {
            var i = this.coveringZoomLevel(e)
              , r = i;
            if (void 0 !== e.minzoom && i < e.minzoom)
                return [];
            void 0 !== e.maxzoom && i > e.maxzoom && (i = e.maxzoom);
            var n = t.MercatorCoordinate.fromLngLat(this.center)
              , o = Math.pow(2, i)
              , a = new t.Point(o * n.x - .5,o * n.y - .5);
            return function(e, i, r, n) {
                void 0 === n && (n = !0);
                var o = 1 << e
                  , a = {};
                function s(i, s, l) {
                    var u, c, p, h;
                    if (l >= 0 && l <= o)
                        for (u = i; u < s; u++)
                            c = Math.floor(u / o),
                            p = (u % o + o) % o,
                            0 !== c && !0 !== n || (h = new t.OverscaledTileID(r,c,e,p,l),
                            a[h.key] = h)
                }
                var l = i.map(function(e) {
                    return new t.Point(e.x,e.y)._mult(o)
                });
                return rr(l[0], l[1], l[2], 0, o, s),
                rr(l[2], l[3], l[0], 0, o, s),
                Object.keys(a).map(function(t) {
                    return a[t]
                })
            }(i, [this.pointCoordinate(new t.Point(0,0)), this.pointCoordinate(new t.Point(this.width,0)), this.pointCoordinate(new t.Point(this.width,this.height)), this.pointCoordinate(new t.Point(0,this.height))], e.reparseOverscaled ? r : i, this._renderWorldCopies).sort(function(t, e) {
                return a.dist(t.canonical) - a.dist(e.canonical)
            })
        }
        ,
        nr.prototype.resize = function(t, e) {
            this.width = t,
            this.height = e,
            this.pixelsToGLUnits = [2 / t, -2 / e],
            this._constrain(),
            this._calcMatrices()
        }
        ,
        or.unmodified.get = function() {
            return this._unmodified
        }
        ,
        nr.prototype.zoomScale = function(t) {
            return Math.pow(2, t)
        }
        ,
        nr.prototype.scaleZoom = function(t) {
            return Math.log(t) / Math.LN2
        }
        ,
        nr.prototype.project = function(e) {
            var i = t.clamp(e.lat, -this.maxValidLatitude, this.maxValidLatitude);
            return new t.Point(t.mercatorXfromLng(e.lng) * this.worldSize,t.mercatorYfromLat(i) * this.worldSize)
        }
        ,
        nr.prototype.unproject = function(e) {
            return new t.MercatorCoordinate(e.x / this.worldSize,e.y / this.worldSize).toLngLat()
        }
        ,
        or.point.get = function() {
            return this.project(this.center)
        }
        ,
        nr.prototype.setLocationAtPoint = function(e, i) {
            var r = this.pointCoordinate(i)
              , n = this.pointCoordinate(this.centerPoint)
              , o = this.locationCoordinate(e)
              , a = new t.MercatorCoordinate(o.x - (r.x - n.x),o.y - (r.y - n.y));
            this.center = this.coordinateLocation(a),
            this._renderWorldCopies && (this.center = this.center.wrap())
        }
        ,
        nr.prototype.locationPoint = function(t) {
            return this.coordinatePoint(this.locationCoordinate(t))
        }
        ,
        nr.prototype.pointLocation = function(t) {
            return this.coordinateLocation(this.pointCoordinate(t))
        }
        ,
        nr.prototype.locationCoordinate = function(e) {
            return t.MercatorCoordinate.fromLngLat(e)
        }
        ,
        nr.prototype.coordinateLocation = function(t) {
            return t.toLngLat()
        }
        ,
        nr.prototype.pointCoordinate = function(e) {
            var i = [e.x, e.y, 0, 1]
              , r = [e.x, e.y, 1, 1];
            t.transformMat4(i, i, this.pixelMatrixInverse),
            t.transformMat4(r, r, this.pixelMatrixInverse);
            var n = i[3]
              , o = r[3]
              , a = i[0] / n
              , s = r[0] / o
              , l = i[1] / n
              , u = r[1] / o
              , c = i[2] / n
              , p = r[2] / o
              , h = c === p ? 0 : (0 - c) / (p - c);
            return new t.MercatorCoordinate(t.number(a, s, h) / this.worldSize,t.number(l, u, h) / this.worldSize)
        }
        ,
        nr.prototype.coordinatePoint = function(e) {
            var i = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];
            return t.transformMat4(i, i, this.pixelMatrix),
            new t.Point(i[0] / i[3],i[1] / i[3])
        }
        ,
        nr.prototype.getBounds = function() {
            return (new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))
        }
        ,
        nr.prototype.getMaxBounds = function() {
            return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new t.LngLatBounds([this.lngRange[0], this.latRange[0]],[this.lngRange[1], this.latRange[1]]) : null
        }
        ,
        nr.prototype.setMaxBounds = function(t) {
            t ? (this.lngRange = [t.getWest(), t.getEast()],
            this.latRange = [t.getSouth(), t.getNorth()],
            this._constrain()) : (this.lngRange = null,
            this.latRange = [-this.maxValidLatitude, this.maxValidLatitude])
        }
        ,
        nr.prototype.calculatePosMatrix = function(e, i) {
            void 0 === i && (i = !1);
            var r = e.key
              , n = i ? this._alignedPosMatrixCache : this._posMatrixCache;
            if (n[r])
                return n[r];
            var o = e.canonical
              , a = this.worldSize / this.zoomScale(o.z)
              , s = o.x + Math.pow(2, o.z) * e.wrap
              , l = t.identity(new Float64Array(16));
            return t.translate(l, l, [s * a, o.y * a, 0]),
            t.scale(l, l, [a / t.EXTENT, a / t.EXTENT, 1]),
            t.multiply(l, i ? this.alignedProjMatrix : this.projMatrix, l),
            n[r] = new Float32Array(l),
            n[r]
        }
        ,
        nr.prototype.customLayerMatrix = function() {
            return this.mercatorMatrix.slice()
        }
        ,
        nr.prototype._constrain = function() {
            if (this.center && this.width && this.height && !this._constraining) {
                this._constraining = !0;
                var e, i, r, n, o = -90, a = 90, s = -180, l = 180, u = this.size, c = this._unmodified;
                if (this.latRange) {
                    var p = this.latRange;
                    o = t.mercatorYfromLat(p[1]) * this.worldSize,
                    e = (a = t.mercatorYfromLat(p[0]) * this.worldSize) - o < u.y ? u.y / (a - o) : 0
                }
                if (this.lngRange) {
                    var h = this.lngRange;
                    s = t.mercatorXfromLng(h[0]) * this.worldSize,
                    i = (l = t.mercatorXfromLng(h[1]) * this.worldSize) - s < u.x ? u.x / (l - s) : 0
                }
                var d = this.point
                  , f = Math.max(i || 0, e || 0);
                if (f)
                    return this.center = this.unproject(new t.Point(i ? (l + s) / 2 : d.x,e ? (a + o) / 2 : d.y)),
                    this.zoom += this.scaleZoom(f),
                    this._unmodified = c,
                    void (this._constraining = !1);
                if (this.latRange) {
                    var m = d.y
                      , y = u.y / 2;
                    m - y < o && (n = o + y),
                    m + y > a && (n = a - y)
                }
                if (this.lngRange) {
                    var g = d.x
                      , _ = u.x / 2;
                    g - _ < s && (r = s + _),
                    g + _ > l && (r = l - _)
                }
                void 0 === r && void 0 === n || (this.center = this.unproject(new t.Point(void 0 !== r ? r : d.x,void 0 !== n ? n : d.y))),
                this._unmodified = c,
                this._constraining = !1
            }
        }
        ,
        nr.prototype._calcMatrices = function() {
            if (this.height) {
                this.cameraToCenterDistance = .5 / Math.tan(this._fov / 2) * this.height;
                var e = this._fov / 2
                  , i = Math.PI / 2 + this._pitch
                  , r = Math.sin(e) * this.cameraToCenterDistance / Math.sin(Math.PI - i - e)
                  , n = this.point
                  , o = n.x
                  , a = n.y
                  , s = 1.01 * (Math.cos(Math.PI / 2 - this._pitch) * r + this.cameraToCenterDistance)
                  , l = new Float64Array(16);
                t.perspective(l, this._fov, this.width / this.height, 1, s),
                t.scale(l, l, [1, -1, 1]),
                t.translate(l, l, [0, 0, -this.cameraToCenterDistance]),
                t.rotateX(l, l, this._pitch),
                t.rotateZ(l, l, this.angle),
                t.translate(l, l, [-o, -a, 0]),
                this.mercatorMatrix = t.scale([], l, [this.worldSize, this.worldSize, this.worldSize]),
                t.scale(l, l, [1, 1, t.mercatorZfromAltitude(1, this.center.lat) * this.worldSize, 1]),
                this.projMatrix = l;
                var u = this.width % 2 / 2
                  , c = this.height % 2 / 2
                  , p = Math.cos(this.angle)
                  , h = Math.sin(this.angle)
                  , d = o - Math.round(o) + p * u + h * c
                  , f = a - Math.round(a) + p * c + h * u
                  , m = new Float64Array(l);
                if (t.translate(m, m, [d > .5 ? d - 1 : d, f > .5 ? f - 1 : f, 0]),
                this.alignedProjMatrix = m,
                l = t.create(),
                t.scale(l, l, [this.width / 2, -this.height / 2, 1]),
                t.translate(l, l, [1, -1, 0]),
                this.pixelMatrix = t.multiply(new Float64Array(16), l, this.projMatrix),
                !(l = t.invert(new Float64Array(16), this.pixelMatrix)))
                    throw new Error("failed to invert matrix");
                this.pixelMatrixInverse = l,
                this._posMatrixCache = {},
                this._alignedPosMatrixCache = {}
            }
        }
        ,
        nr.prototype.maxPitchScaleFactor = function() {
            if (!this.pixelMatrixInverse)
                return 1;
            var e = this.pointCoordinate(new t.Point(0,0))
              , i = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];
            return t.transformMat4(i, i, this.pixelMatrix)[3] / this.cameraToCenterDistance
        }
        ,
        Object.defineProperties(nr.prototype, or);
        var ar = function() {
            var e, i, r, n;
            t.bindAll(["_onHashChange", "_updateHash"], this),
            this._updateHash = (e = this._updateHashUnthrottled.bind(this),
            300,
            i = !1,
            r = 0,
            n = function() {
                r = 0,
                i && (e(),
                r = setTimeout(n, 300),
                i = !1)
            }
            ,
            function() {
                return i = !0,
                r || n(),
                r
            }
            )
        };
        ar.prototype.addTo = function(e) {
            return this._map = e,
            t.window.addEventListener("hashchange", this._onHashChange, !1),
            this._map.on("moveend", this._updateHash),
            this
        }
        ,
        ar.prototype.remove = function() {
            return t.window.removeEventListener("hashchange", this._onHashChange, !1),
            this._map.off("moveend", this._updateHash),
            clearTimeout(this._updateHash()),
            delete this._map,
            this
        }
        ,
        ar.prototype.getHashString = function(t) {
            var e = this._map.getCenter()
              , i = Math.round(100 * this._map.getZoom()) / 100
              , r = Math.ceil((i * Math.LN2 + Math.log(512 / 360 / .5)) / Math.LN10)
              , n = Math.pow(10, r)
              , o = Math.round(e.lng * n) / n
              , a = Math.round(e.lat * n) / n
              , s = this._map.getBearing()
              , l = this._map.getPitch()
              , u = "";
            return u += t ? "#/" + o + "/" + a + "/" + i : "#" + i + "/" + a + "/" + o,
            (s || l) && (u += "/" + Math.round(10 * s) / 10),
            l && (u += "/" + Math.round(l)),
            u
        }
        ,
        ar.prototype._onHashChange = function() {
            var e = t.window.location.hash.replace("#", "").split("/");
            return e.length >= 3 && (this._map.jumpTo({
                center: [+e[2], +e[1]],
                zoom: +e[0],
                bearing: +(e[3] || 0),
                pitch: +(e[4] || 0)
            }),
            !0)
        }
        ,
        ar.prototype._updateHashUnthrottled = function() {
            var e = this.getHashString();
            try {
                t.window.history.replaceState(t.window.history.state, "", e)
            } catch (t) {}
        }
        ;
        var sr = function(e) {
            function r(r, n, o, a) {
                void 0 === a && (a = {});
                var s = i.mousePos(n.getCanvasContainer(), o)
                  , l = n.unproject(s);
                e.call(this, r, t.extend({
                    point: s,
                    lngLat: l,
                    originalEvent: o
                }, a)),
                this._defaultPrevented = !1,
                this.target = n
            }
            e && (r.__proto__ = e),
            r.prototype = Object.create(e && e.prototype),
            r.prototype.constructor = r;
            var n = {
                defaultPrevented: {
                    configurable: !0
                }
            };
            return r.prototype.preventDefault = function() {
                this._defaultPrevented = !0
            }
            ,
            n.defaultPrevented.get = function() {
                return this._defaultPrevented
            }
            ,
            Object.defineProperties(r.prototype, n),
            r
        }(t.Event)
          , lr = function(e) {
            function r(r, n, o) {
                var a = i.touchPos(n.getCanvasContainer(), o)
                  , s = a.map(function(t) {
                    return n.unproject(t)
                })
                  , l = a.reduce(function(t, e, i, r) {
                    return t.add(e.div(r.length))
                }, new t.Point(0,0))
                  , u = n.unproject(l);
                e.call(this, r, {
                    points: a,
                    point: l,
                    lngLats: s,
                    lngLat: u,
                    originalEvent: o
                }),
                this._defaultPrevented = !1
            }
            e && (r.__proto__ = e),
            r.prototype = Object.create(e && e.prototype),
            r.prototype.constructor = r;
            var n = {
                defaultPrevented: {
                    configurable: !0
                }
            };
            return r.prototype.preventDefault = function() {
                this._defaultPrevented = !0
            }
            ,
            n.defaultPrevented.get = function() {
                return this._defaultPrevented
            }
            ,
            Object.defineProperties(r.prototype, n),
            r
        }(t.Event)
          , ur = function(t) {
            function e(e, i, r) {
                t.call(this, e, {
                    originalEvent: r
                }),
                this._defaultPrevented = !1
            }
            t && (e.__proto__ = t),
            e.prototype = Object.create(t && t.prototype),
            e.prototype.constructor = e;
            var i = {
                defaultPrevented: {
                    configurable: !0
                }
            };
            return e.prototype.preventDefault = function() {
                this._defaultPrevented = !0
            }
            ,
            i.defaultPrevented.get = function() {
                return this._defaultPrevented
            }
            ,
            Object.defineProperties(e.prototype, i),
            e
        }(t.Event)
          , cr = function(e) {
            this._map = e,
            this._el = e.getCanvasContainer(),
            this._delta = 0,
            t.bindAll(["_onWheel", "_onTimeout", "_onScrollFrame", "_onScrollFinished"], this)
        };
        cr.prototype.isEnabled = function() {
            return !!this._enabled
        }
        ,
        cr.prototype.isActive = function() {
            return !!this._active
        }
        ,
        cr.prototype.isZooming = function() {
            return !!this._zooming
        }
        ,
        cr.prototype.enable = function(t) {
            this.isEnabled() || (this._enabled = !0,
            this._aroundCenter = t && "center" === t.around)
        }
        ,
        cr.prototype.disable = function() {
            this.isEnabled() && (this._enabled = !1)
        }
        ,
        cr.prototype.onWheel = function(e) {
            if (this.isEnabled()) {
                var i = e.deltaMode === t.window.WheelEvent.DOM_DELTA_LINE ? 40 * e.deltaY : e.deltaY
                  , r = t.browser.now()
                  , n = r - (this._lastWheelEventTime || 0);
                this._lastWheelEventTime = r,
                0 !== i && i % 4.000244140625 == 0 ? this._type = "wheel" : 0 !== i && Math.abs(i) < 4 ? this._type = "trackpad" : n > 400 ? (this._type = null,
                this._lastValue = i,
                this._timeout = setTimeout(this._onTimeout, 40, e)) : this._type || (this._type = Math.abs(n * i) < 200 ? "trackpad" : "wheel",
                this._timeout && (clearTimeout(this._timeout),
                this._timeout = null,
                i += this._lastValue)),
                e.shiftKey && i && (i /= 4),
                this._type && (this._lastWheelEvent = e,
                this._delta -= i,
                this.isActive() || this._start(e)),
                e.preventDefault()
            }
        }
        ,
        cr.prototype._onTimeout = function(t) {
            this._type = "wheel",
            this._delta -= this._lastValue,
            this.isActive() || this._start(t)
        }
        ,
        cr.prototype._start = function(e) {
            if (this._delta) {
                this._frameId && (this._map._cancelRenderFrame(this._frameId),
                this._frameId = null),
                this._active = !0,
                this._zooming = !0,
                this._map.fire(new t.Event("movestart",{
                    originalEvent: e
                })),
                this._map.fire(new t.Event("zoomstart",{
                    originalEvent: e
                })),
                this._finishTimeout && clearTimeout(this._finishTimeout);
                var r = i.mousePos(this._el, e);
                this._around = t.LngLat.convert(this._aroundCenter ? this._map.getCenter() : this._map.unproject(r)),
                this._aroundPoint = this._map.transform.locationPoint(this._around),
                this._frameId || (this._frameId = this._map._requestRenderFrame(this._onScrollFrame))
            }
        }
        ,
        cr.prototype._onScrollFrame = function() {
            var e = this;
            if (this._frameId = null,
            this.isActive()) {
                var i = this._map.transform;
                if (0 !== this._delta) {
                    var r = "wheel" === this._type && Math.abs(this._delta) > 4.000244140625 ? 1 / 450 : .01
                      , n = 2 / (1 + Math.exp(-Math.abs(this._delta * r)));
                    this._delta < 0 && 0 !== n && (n = 1 / n);
                    var o = "number" == typeof this._targetZoom ? i.zoomScale(this._targetZoom) : i.scale;
                    this._targetZoom = Math.min(i.maxZoom, Math.max(i.minZoom, i.scaleZoom(o * n))),
                    "wheel" === this._type && (this._startZoom = i.zoom,
                    this._easing = this._smoothOutEasing(200)),
                    this._delta = 0
                }
                var a = "number" == typeof this._targetZoom ? this._targetZoom : i.zoom
                  , s = this._startZoom
                  , l = this._easing
                  , u = !1;
                if ("wheel" === this._type && s && l) {
                    var c = Math.min((t.browser.now() - this._lastWheelEventTime) / 200, 1)
                      , p = l(c);
                    i.zoom = t.number(s, a, p),
                    c < 1 ? this._frameId || (this._frameId = this._map._requestRenderFrame(this._onScrollFrame)) : u = !0
                } else
                    i.zoom = a,
                    u = !0;
                i.setLocationAtPoint(this._around, this._aroundPoint),
                this._map.fire(new t.Event("move",{
                    originalEvent: this._lastWheelEvent
                })),
                this._map.fire(new t.Event("zoom",{
                    originalEvent: this._lastWheelEvent
                })),
                u && (this._active = !1,
                this._finishTimeout = setTimeout(function() {
                    e._zooming = !1,
                    e._map.fire(new t.Event("zoomend",{
                        originalEvent: e._lastWheelEvent
                    })),
                    e._map.fire(new t.Event("moveend",{
                        originalEvent: e._lastWheelEvent
                    })),
                    delete e._targetZoom
                }, 200))
            }
        }
        ,
        cr.prototype._smoothOutEasing = function(e) {
            var i = t.ease;
            if (this._prevEase) {
                var r = this._prevEase
                  , n = (t.browser.now() - r.start) / r.duration
                  , o = r.easing(n + .01) - r.easing(n)
                  , a = .27 / Math.sqrt(o * o + 1e-4) * .01
                  , s = Math.sqrt(.0729 - a * a);
                i = t.bezier(a, s, .25, 1)
            }
            return this._prevEase = {
                start: t.browser.now(),
                duration: e,
                easing: i
            },
            i
        }
        ;
        var pr = function(e, i) {
            this._map = e,
            this._el = e.getCanvasContainer(),
            this._container = e.getContainer(),
            this._clickTolerance = i.clickTolerance || 1,
            t.bindAll(["_onMouseMove", "_onMouseUp", "_onKeyDown"], this)
        };
        pr.prototype.isEnabled = function() {
            return !!this._enabled
        }
        ,
        pr.prototype.isActive = function() {
            return !!this._active
        }
        ,
        pr.prototype.enable = function() {
            this.isEnabled() || (this._enabled = !0)
        }
        ,
        pr.prototype.disable = function() {
            this.isEnabled() && (this._enabled = !1)
        }
        ,
        pr.prototype.onMouseDown = function(e) {
            this.isEnabled() && e.shiftKey && 0 === e.button && (t.window.document.addEventListener("mousemove", this._onMouseMove, !1),
            t.window.document.addEventListener("keydown", this._onKeyDown, !1),
            t.window.document.addEventListener("mouseup", this._onMouseUp, !1),
            i.disableDrag(),
            this._startPos = this._lastPos = i.mousePos(this._el, e),
            this._active = !0)
        }
        ,
        pr.prototype._onMouseMove = function(t) {
            var e = i.mousePos(this._el, t);
            if (!(this._lastPos.equals(e) || !this._box && e.dist(this._startPos) < this._clickTolerance)) {
                var r = this._startPos;
                this._lastPos = e,
                this._box || (this._box = i.create("div", "mapboxgl-boxzoom", this._container),
                this._container.classList.add("mapboxgl-crosshair"),
                this._fireEvent("boxzoomstart", t));
                var n = Math.min(r.x, e.x)
                  , o = Math.max(r.x, e.x)
                  , a = Math.min(r.y, e.y)
                  , s = Math.max(r.y, e.y);
                i.setTransform(this._box, "translate(" + n + "px," + a + "px)"),
                this._box.style.width = o - n + "px",
                this._box.style.height = s - a + "px"
            }
        }
        ,
        pr.prototype._onMouseUp = function(e) {
            if (0 === e.button) {
                var r = this._startPos
                  , n = i.mousePos(this._el, e);
                this._finish(),
                i.suppressClick(),
                r.x === n.x && r.y === n.y ? this._fireEvent("boxzoomcancel", e) : this._map.fitScreenCoordinates(r, n, this._map.getBearing(), {
                    linear: !0
                }).fire(new t.Event("boxzoomend",{
                    originalEvent: e
                }))
            }
        }
        ,
        pr.prototype._onKeyDown = function(t) {
            27 === t.keyCode && (this._finish(),
            this._fireEvent("boxzoomcancel", t))
        }
        ,
        pr.prototype._finish = function() {
            this._active = !1,
            t.window.document.removeEventListener("mousemove", this._onMouseMove, !1),
            t.window.document.removeEventListener("keydown", this._onKeyDown, !1),
            t.window.document.removeEventListener("mouseup", this._onMouseUp, !1),
            this._container.classList.remove("mapboxgl-crosshair"),
            this._box && (i.remove(this._box),
            this._box = null),
            i.enableDrag(),
            delete this._startPos,
            delete this._lastPos
        }
        ,
        pr.prototype._fireEvent = function(e, i) {
            return this._map.fire(new t.Event(e,{
                originalEvent: i
            }))
        }
        ;
        var hr = t.bezier(0, 0, .25, 1)
          , dr = function(e, i) {
            this._map = e,
            this._el = i.element || e.getCanvasContainer(),
            this._state = "disabled",
            this._button = i.button || "right",
            this._bearingSnap = i.bearingSnap || 0,
            this._pitchWithRotate = !1 !== i.pitchWithRotate,
            t.bindAll(["onMouseDown", "_onMouseMove", "_onMouseUp", "_onBlur", "_onDragFrame"], this)
        };
        dr.prototype.isEnabled = function() {
            return "disabled" !== this._state
        }
        ,
        dr.prototype.isActive = function() {
            return "active" === this._state
        }
        ,
        dr.prototype.enable = function() {
            this.isEnabled() || (this._state = "enabled")
        }
        ,
        dr.prototype.disable = function() {
            if (this.isEnabled())
                switch (this._state) {
                case "active":
                    this._state = "disabled",
                    this._unbind(),
                    this._deactivate(),
                    this._fireEvent("rotateend"),
                    this._pitchWithRotate && this._fireEvent("pitchend"),
                    this._fireEvent("moveend");
                    break;
                case "pending":
                    this._state = "disabled",
                    this._unbind();
                    break;
                default:
                    this._state = "disabled"
                }
        }
        ,
        dr.prototype.onMouseDown = function(e) {
            if ("enabled" === this._state) {
                if ("right" === this._button) {
                    if (this._eventButton = i.mouseButton(e),
                    this._eventButton !== (e.ctrlKey ? 0 : 2))
                        return
                } else {
                    if (e.ctrlKey || 0 !== i.mouseButton(e))
                        return;
                    this._eventButton = 0
                }
                i.disableDrag(),
                t.window.document.addEventListener("mousemove", this._onMouseMove, {
                    capture: !0
                }),
                t.window.document.addEventListener("mouseup", this._onMouseUp),
                t.window.addEventListener("blur", this._onBlur),
                this._state = "pending",
                this._inertia = [[t.browser.now(), this._map.getBearing()]],
                this._startPos = this._lastPos = i.mousePos(this._el, e),
                this._center = this._map.transform.centerPoint,
                e.preventDefault()
            }
        }
        ,
        dr.prototype._onMouseMove = function(t) {
            var e = i.mousePos(this._el, t);
            this._lastPos.equals(e) || (this._lastMoveEvent = t,
            this._lastPos = e,
            "pending" === this._state && (this._state = "active",
            this._fireEvent("rotatestart", t),
            this._fireEvent("movestart", t),
            this._pitchWithRotate && this._fireEvent("pitchstart", t)),
            this._frameId || (this._frameId = this._map._requestRenderFrame(this._onDragFrame)))
        }
        ,
        dr.prototype._onDragFrame = function() {
            this._frameId = null;
            var e = this._lastMoveEvent;
            if (e) {
                var i = this._map.transform
                  , r = this._startPos
                  , n = this._lastPos
                  , o = .8 * (r.x - n.x)
                  , a = -.5 * (r.y - n.y)
                  , s = i.bearing - o
                  , l = i.pitch - a
                  , u = this._inertia
                  , c = u[u.length - 1];
                this._drainInertiaBuffer(),
                u.push([t.browser.now(), this._map._normalizeBearing(s, c[1])]),
                i.bearing = s,
                this._pitchWithRotate && (this._fireEvent("pitch", e),
                i.pitch = l),
                this._fireEvent("rotate", e),
                this._fireEvent("move", e),
                delete this._lastMoveEvent,
                this._startPos = this._lastPos
            }
        }
        ,
        dr.prototype._onMouseUp = function(t) {
            if (i.mouseButton(t) === this._eventButton)
                switch (this._state) {
                case "active":
                    this._state = "enabled",
                    i.suppressClick(),
                    this._unbind(),
                    this._deactivate(),
                    this._inertialRotate(t);
                    break;
                case "pending":
                    this._state = "enabled",
                    this._unbind()
                }
        }
        ,
        dr.prototype._onBlur = function(t) {
            switch (this._state) {
            case "active":
                this._state = "enabled",
                this._unbind(),
                this._deactivate(),
                this._fireEvent("rotateend", t),
                this._pitchWithRotate && this._fireEvent("pitchend", t),
                this._fireEvent("moveend", t);
                break;
            case "pending":
                this._state = "enabled",
                this._unbind()
            }
        }
        ,
        dr.prototype._unbind = function() {
            t.window.document.removeEventListener("mousemove", this._onMouseMove, {
                capture: !0
            }),
            t.window.document.removeEventListener("mouseup", this._onMouseUp),
            t.window.removeEventListener("blur", this._onBlur),
            i.enableDrag()
        }
        ,
        dr.prototype._deactivate = function() {
            this._frameId && (this._map._cancelRenderFrame(this._frameId),
            this._frameId = null),
            delete this._lastMoveEvent,
            delete this._startPos,
            delete this._lastPos
        }
        ,
        dr.prototype._inertialRotate = function(t) {
            var e = this;
            this._fireEvent("rotateend", t),
            this._drainInertiaBuffer();
            var i = this._map
              , r = i.getBearing()
              , n = this._inertia
              , o = function() {
                Math.abs(r) < e._bearingSnap ? i.resetNorth({
                    noMoveStart: !0
                }, {
                    originalEvent: t
                }) : e._fireEvent("moveend", t),
                e._pitchWithRotate && e._fireEvent("pitchend", t)
            };
            if (n.length < 2)
                o();
            else {
                var a = n[0]
                  , s = n[n.length - 1]
                  , l = n[n.length - 2]
                  , u = i._normalizeBearing(r, l[1])
                  , c = s[1] - a[1]
                  , p = c < 0 ? -1 : 1
                  , h = (s[0] - a[0]) / 1e3;
                if (0 !== c && 0 !== h) {
                    var d = Math.abs(c * (.25 / h));
                    d > 180 && (d = 180);
                    var f = d / 180;
                    u += p * d * (f / 2),
                    Math.abs(i._normalizeBearing(u, 0)) < this._bearingSnap && (u = i._normalizeBearing(0, u)),
                    i.rotateTo(u, {
                        duration: 1e3 * f,
                        easing: hr,
                        noMoveStart: !0
                    }, {
                        originalEvent: t
                    })
                } else
                    o()
            }
        }
        ,
        dr.prototype._fireEvent = function(e, i) {
            return this._map.fire(new t.Event(e,i ? {
                originalEvent: i
            } : {}))
        }
        ,
        dr.prototype._drainInertiaBuffer = function() {
            for (var e = this._inertia, i = t.browser.now(); e.length > 0 && i - e[0][0] > 160; )
                e.shift()
        }
        ;
        var fr = t.bezier(0, 0, .3, 1)
          , mr = function(e, i) {
            this._map = e,
            this._el = e.getCanvasContainer(),
            this._state = "disabled",
            this._clickTolerance = i.clickTolerance || 1,
            t.bindAll(["_onMove", "_onMouseUp", "_onTouchEnd", "_onBlur", "_onDragFrame"], this)
        };
        mr.prototype.isEnabled = function() {
            return "disabled" !== this._state
        }
        ,
        mr.prototype.isActive = function() {
            return "active" === this._state
        }
        ,
        mr.prototype.enable = function() {
            this.isEnabled() || (this._el.classList.add("mapboxgl-touch-drag-pan"),
            this._state = "enabled")
        }
        ,
        mr.prototype.disable = function() {
            if (this.isEnabled())
                switch (this._el.classList.remove("mapboxgl-touch-drag-pan"),
                this._state) {
                case "active":
                    this._state = "disabled",
                    this._unbind(),
                    this._deactivate(),
                    this._fireEvent("dragend"),
                    this._fireEvent("moveend");
                    break;
                case "pending":
                    this._state = "disabled",
                    this._unbind();
                    break;
                default:
                    this._state = "disabled"
                }
        }
        ,
        mr.prototype.onMouseDown = function(e) {
            "enabled" === this._state && (e.ctrlKey || 0 !== i.mouseButton(e) || (i.addEventListener(t.window.document, "mousemove", this._onMove, {
                capture: !0
            }),
            i.addEventListener(t.window.document, "mouseup", this._onMouseUp),
            this._start(e)))
        }
        ,
        mr.prototype.onTouchStart = function(e) {
            "enabled" === this._state && (e.touches.length > 1 || (i.addEventListener(t.window.document, "touchmove", this._onMove, {
                capture: !0,
                passive: !1
            }),
            i.addEventListener(t.window.document, "touchend", this._onTouchEnd),
            this._start(e)))
        }
        ,
        mr.prototype._start = function(e) {
            t.window.addEventListener("blur", this._onBlur),
            this._state = "pending",
            this._startPos = this._mouseDownPos = this._lastPos = i.mousePos(this._el, e),
            this._inertia = [[t.browser.now(), this._startPos]]
        }
        ,
        mr.prototype._onMove = function(e) {
            e.preventDefault();
            var r = i.mousePos(this._el, e);
            this._lastPos.equals(r) || "pending" === this._state && r.dist(this._mouseDownPos) < this._clickTolerance || (this._lastMoveEvent = e,
            this._lastPos = r,
            this._drainInertiaBuffer(),
            this._inertia.push([t.browser.now(), this._lastPos]),
            "pending" === this._state && (this._state = "active",
            this._fireEvent("dragstart", e),
            this._fireEvent("movestart", e)),
            this._frameId || (this._frameId = this._map._requestRenderFrame(this._onDragFrame)))
        }
        ,
        mr.prototype._onDragFrame = function() {
            this._frameId = null;
            var t = this._lastMoveEvent;
            if (t) {
                var e = this._map.transform;
                e.setLocationAtPoint(e.pointLocation(this._startPos), this._lastPos),
                this._fireEvent("drag", t),
                this._fireEvent("move", t),
                this._startPos = this._lastPos,
                delete this._lastMoveEvent
            }
        }
        ,
        mr.prototype._onMouseUp = function(t) {
            if (0 === i.mouseButton(t))
                switch (this._state) {
                case "active":
                    this._state = "enabled",
                    i.suppressClick(),
                    this._unbind(),
                    this._deactivate(),
                    this._inertialPan(t);
                    break;
                case "pending":
                    this._state = "enabled",
                    this._unbind()
                }
        }
        ,
        mr.prototype._onTouchEnd = function(t) {
            switch (this._state) {
            case "active":
                this._state = "enabled",
                this._unbind(),
                this._deactivate(),
                this._inertialPan(t);
                break;
            case "pending":
                this._state = "enabled",
                this._unbind()
            }
        }
        ,
        mr.prototype._onBlur = function(t) {
            switch (this._state) {
            case "active":
                this._state = "enabled",
                this._unbind(),
                this._deactivate(),
                this._fireEvent("dragend", t),
                this._fireEvent("moveend", t);
                break;
            case "pending":
                this._state = "enabled",
                this._unbind()
            }
        }
        ,
        mr.prototype._unbind = function() {
            i.removeEventListener(t.window.document, "touchmove", this._onMove, {
                capture: !0,
                passive: !1
            }),
            i.removeEventListener(t.window.document, "touchend", this._onTouchEnd),
            i.removeEventListener(t.window.document, "mousemove", this._onMove, {
                capture: !0
            }),
            i.removeEventListener(t.window.document, "mouseup", this._onMouseUp),
            i.removeEventListener(t.window, "blur", this._onBlur)
        }
        ,
        mr.prototype._deactivate = function() {
            this._frameId && (this._map._cancelRenderFrame(this._frameId),
            this._frameId = null),
            delete this._lastMoveEvent,
            delete this._startPos,
            delete this._mouseDownPos,
            delete this._lastPos
        }
        ,
        mr.prototype._inertialPan = function(t) {
            this._fireEvent("dragend", t),
            this._drainInertiaBuffer();
            var e = this._inertia;
            if (e.length < 2)
                this._fireEvent("moveend", t);
            else {
                var i = e[e.length - 1]
                  , r = e[0]
                  , n = i[1].sub(r[1])
                  , o = (i[0] - r[0]) / 1e3;
                if (0 === o || i[1].equals(r[1]))
                    this._fireEvent("moveend", t);
                else {
                    var a = n.mult(.3 / o)
                      , s = a.mag();
                    s > 1400 && (s = 1400,
                    a._unit()._mult(s));
                    var l = s / 750
                      , u = a.mult(-l / 2);
                    this._map.panBy(u, {
                        duration: 1e3 * l,
                        easing: fr,
                        noMoveStart: !0
                    }, {
                        originalEvent: t
                    })
                }
            }
        }
        ,
        mr.prototype._fireEvent = function(e, i) {
            return this._map.fire(new t.Event(e,i ? {
                originalEvent: i
            } : {}))
        }
        ,
        mr.prototype._drainInertiaBuffer = function() {
            for (var e = this._inertia, i = t.browser.now(); e.length > 0 && i - e[0][0] > 160; )
                e.shift()
        }
        ;
        var yr = function(e) {
            this._map = e,
            this._el = e.getCanvasContainer(),
            t.bindAll(["_onKeyDown"], this)
        };
        function gr(t) {
            return t * (2 - t)
        }
        yr.prototype.isEnabled = function() {
            return !!this._enabled
        }
        ,
        yr.prototype.enable = function() {
            this.isEnabled() || (this._el.addEventListener("keydown", this._onKeyDown, !1),
            this._enabled = !0)
        }
        ,
        yr.prototype.disable = function() {
            this.isEnabled() && (this._el.removeEventListener("keydown", this._onKeyDown),
            this._enabled = !1)
        }
        ,
        yr.prototype._onKeyDown = function(t) {
            if (!(t.altKey || t.ctrlKey || t.metaKey)) {
                var e = 0
                  , i = 0
                  , r = 0
                  , n = 0
                  , o = 0;
                switch (t.keyCode) {
                case 61:
                case 107:
                case 171:
                case 187:
                    e = 1;
                    break;
                case 189:
                case 109:
                case 173:
                    e = -1;
                    break;
                case 37:
                    t.shiftKey ? i = -1 : (t.preventDefault(),
                    n = -1);
                    break;
                case 39:
                    t.shiftKey ? i = 1 : (t.preventDefault(),
                    n = 1);
                    break;
                case 38:
                    t.shiftKey ? r = 1 : (t.preventDefault(),
                    o = -1);
                    break;
                case 40:
                    t.shiftKey ? r = -1 : (o = 1,
                    t.preventDefault());
                    break;
                default:
                    return
                }
                var a = this._map
                  , s = a.getZoom()
                  , l = {
                    duration: 300,
                    delayEndEvents: 500,
                    easing: gr,
                    zoom: e ? Math.round(s) + e * (t.shiftKey ? 2 : 1) : s,
                    bearing: a.getBearing() + 15 * i,
                    pitch: a.getPitch() + 10 * r,
                    offset: [100 * -n, 100 * -o],
                    center: a.getCenter()
                };
                a.easeTo(l, {
                    originalEvent: t
                })
            }
        }
        ;
        var _r = function(e) {
            this._map = e,
            t.bindAll(["_onDblClick", "_onZoomEnd"], this)
        };
        _r.prototype.isEnabled = function() {
            return !!this._enabled
        }
        ,
        _r.prototype.isActive = function() {
            return !!this._active
        }
        ,
        _r.prototype.enable = function() {
            this.isEnabled() || (this._enabled = !0)
        }
        ,
        _r.prototype.disable = function() {
            this.isEnabled() && (this._enabled = !1)
        }
        ,
        _r.prototype.onTouchStart = function(t) {
            var e = this;
            this.isEnabled() && (t.points.length > 1 || (this._tapped ? (clearTimeout(this._tapped),
            this._tapped = null,
            this._zoom(t)) : this._tapped = setTimeout(function() {
                e._tapped = null
            }, 300)))
        }
        ,
        _r.prototype.onDblClick = function(t) {
            this.isEnabled() && (t.originalEvent.preventDefault(),
            this._zoom(t))
        }
        ,
        _r.prototype._zoom = function(t) {
            this._active = !0,
            this._map.on("zoomend", this._onZoomEnd),
            this._map.zoomTo(this._map.getZoom() + (t.originalEvent.shiftKey ? -1 : 1), {
                around: t.lngLat
            }, t)
        }
        ,
        _r.prototype._onZoomEnd = function() {
            this._active = !1,
            this._map.off("zoomend", this._onZoomEnd)
        }
        ;
        var vr = t.bezier(0, 0, .15, 1)
          , xr = function(e) {
            this._map = e,
            this._el = e.getCanvasContainer(),
            t.bindAll(["_onMove", "_onEnd", "_onTouchFrame"], this)
        };
        xr.prototype.isEnabled = function() {
            return !!this._enabled
        }
        ,
        xr.prototype.enable = function(t) {
            this.isEnabled() || (this._el.classList.add("mapboxgl-touch-zoom-rotate"),
            this._enabled = !0,
            this._aroundCenter = !!t && "center" === t.around)
        }
        ,
        xr.prototype.disable = function() {
            this.isEnabled() && (this._el.classList.remove("mapboxgl-touch-zoom-rotate"),
            this._enabled = !1)
        }
        ,
        xr.prototype.disableRotation = function() {
            this._rotationDisabled = !0
        }
        ,
        xr.prototype.enableRotation = function() {
            this._rotationDisabled = !1
        }
        ,
        xr.prototype.onStart = function(e) {
            if (this.isEnabled() && 2 === e.touches.length) {
                var r = i.mousePos(this._el, e.touches[0])
                  , n = i.mousePos(this._el, e.touches[1])
                  , o = r.add(n).div(2);
                this._startVec = r.sub(n),
                this._startAround = this._map.transform.pointLocation(o),
                this._gestureIntent = void 0,
                this._inertia = [],
                i.addEventListener(t.window.document, "touchmove", this._onMove, {
                    passive: !1
                }),
                i.addEventListener(t.window.document, "touchend", this._onEnd)
            }
        }
        ,
        xr.prototype._getTouchEventData = function(t) {
            var e = i.mousePos(this._el, t.touches[0])
              , r = i.mousePos(this._el, t.touches[1])
              , n = e.sub(r);
            return {
                vec: n,
                center: e.add(r).div(2),
                scale: n.mag() / this._startVec.mag(),
                bearing: this._rotationDisabled ? 0 : 180 * n.angleWith(this._startVec) / Math.PI
            }
        }
        ,
        xr.prototype._onMove = function(e) {
            if (2 === e.touches.length) {
                var i = this._getTouchEventData(e)
                  , r = i.vec
                  , n = i.scale
                  , o = i.bearing;
                if (!this._gestureIntent) {
                    var a = Math.abs(1 - n) > .15;
                    Math.abs(o) > 10 ? this._gestureIntent = "rotate" : a && (this._gestureIntent = "zoom"),
                    this._gestureIntent && (this._map.fire(new t.Event(this._gestureIntent + "start",{
                        originalEvent: e
                    })),
                    this._map.fire(new t.Event("movestart",{
                        originalEvent: e
                    })),
                    this._startVec = r)
                }
                this._lastTouchEvent = e,
                this._frameId || (this._frameId = this._map._requestRenderFrame(this._onTouchFrame)),
                e.preventDefault()
            }
        }
        ,
        xr.prototype._onTouchFrame = function() {
            this._frameId = null;
            var e = this._gestureIntent;
            if (e) {
                var i = this._map.transform;
                this._startScale || (this._startScale = i.scale,
                this._startBearing = i.bearing);
                var r = this._getTouchEventData(this._lastTouchEvent)
                  , n = r.center
                  , o = r.bearing
                  , a = r.scale
                  , s = i.pointLocation(n)
                  , l = i.locationPoint(s);
                "rotate" === e && (i.bearing = this._startBearing + o),
                i.zoom = i.scaleZoom(this._startScale * a),
                i.setLocationAtPoint(this._startAround, l),
                this._map.fire(new t.Event(e,{
                    originalEvent: this._lastTouchEvent
                })),
                this._map.fire(new t.Event("move",{
                    originalEvent: this._lastTouchEvent
                })),
                this._drainInertiaBuffer(),
                this._inertia.push([t.browser.now(), a, n])
            }
        }
        ,
        xr.prototype._onEnd = function(e) {
            i.removeEventListener(t.window.document, "touchmove", this._onMove, {
                passive: !1
            }),
            i.removeEventListener(t.window.document, "touchend", this._onEnd);
            var r = this._gestureIntent
              , n = this._startScale;
            if (this._frameId && (this._map._cancelRenderFrame(this._frameId),
            this._frameId = null),
            delete this._gestureIntent,
            delete this._startScale,
            delete this._startBearing,
            delete this._lastTouchEvent,
            r) {
                this._map.fire(new t.Event(r + "end",{
                    originalEvent: e
                })),
                this._drainInertiaBuffer();
                var o = this._inertia
                  , a = this._map;
                if (o.length < 2)
                    a.snapToNorth({}, {
                        originalEvent: e
                    });
                else {
                    var s = o[o.length - 1]
                      , l = o[0]
                      , u = a.transform.scaleZoom(n * s[1])
                      , c = a.transform.scaleZoom(n * l[1])
                      , p = u - c
                      , h = (s[0] - l[0]) / 1e3
                      , d = s[2];
                    if (0 !== h && u !== c) {
                        var f = .15 * p / h;
                        Math.abs(f) > 2.5 && (f = f > 0 ? 2.5 : -2.5);
                        var m = 1e3 * Math.abs(f / (12 * .15))
                          , y = u + f * m / 2e3;
                        y < 0 && (y = 0),
                        a.easeTo({
                            zoom: y,
                            duration: m,
                            easing: vr,
                            around: this._aroundCenter ? a.getCenter() : a.unproject(d),
                            noMoveStart: !0
                        }, {
                            originalEvent: e
                        })
                    } else
                        a.snapToNorth({}, {
                            originalEvent: e
                        })
                }
            }
        }
        ,
        xr.prototype._drainInertiaBuffer = function() {
            for (var e = this._inertia, i = t.browser.now(); e.length > 2 && i - e[0][0] > 160; )
                e.shift()
        }
        ;
        var br = {
            scrollZoom: cr,
            boxZoom: pr,
            dragRotate: dr,
            dragPan: mr,
            keyboard: yr,
            doubleClickZoom: _r,
            touchZoomRotate: xr
        }
          , wr = function(e) {
            function i(i, r) {
                e.call(this),
                this._moving = !1,
                this._zooming = !1,
                this.transform = i,
                this._bearingSnap = r.bearingSnap,
                t.bindAll(["_renderFrameCallback"], this)
            }
            return e && (i.__proto__ = e),
            i.prototype = Object.create(e && e.prototype),
            i.prototype.constructor = i,
            i.prototype.getCenter = function() {
                return this.transform.center
            }
            ,
            i.prototype.setCenter = function(t, e) {
                return this.jumpTo({
                    center: t
                }, e)
            }
            ,
            i.prototype.panBy = function(e, i, r) {
                return e = t.Point.convert(e).mult(-1),
                this.panTo(this.transform.center, t.extend({
                    offset: e
                }, i), r)
            }
            ,
            i.prototype.panTo = function(e, i, r) {
                return this.easeTo(t.extend({
                    center: e
                }, i), r)
            }
            ,
            i.prototype.getZoom = function() {
                return this.transform.zoom
            }
            ,
            i.prototype.setZoom = function(t, e) {
                return this.jumpTo({
                    zoom: t
                }, e),
                this
            }
            ,
            i.prototype.zoomTo = function(e, i, r) {
                return this.easeTo(t.extend({
                    zoom: e
                }, i), r)
            }
            ,
            i.prototype.zoomIn = function(t, e) {
                return this.zoomTo(this.getZoom() + 1, t, e),
                this
            }
            ,
            i.prototype.zoomOut = function(t, e) {
                return this.zoomTo(this.getZoom() - 1, t, e),
                this
            }
            ,
            i.prototype.getBearing = function() {
                return this.transform.bearing
            }
            ,
            i.prototype.setBearing = function(t, e) {
                return this.jumpTo({
                    bearing: t
                }, e),
                this
            }
            ,
            i.prototype.rotateTo = function(e, i, r) {
                return this.easeTo(t.extend({
                    bearing: e
                }, i), r)
            }
            ,
            i.prototype.resetNorth = function(e, i) {
                return this.rotateTo(0, t.extend({
                    duration: 1e3
                }, e), i),
                this
            }
            ,
            i.prototype.snapToNorth = function(t, e) {
                return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(t, e) : this
            }
            ,
            i.prototype.getPitch = function() {
                return this.transform.pitch
            }
            ,
            i.prototype.setPitch = function(t, e) {
                return this.jumpTo({
                    pitch: t
                }, e),
                this
            }
            ,
            i.prototype.cameraForBounds = function(e, i) {
                return e = t.LngLatBounds.convert(e),
                this._cameraForBoxAndBearing(e.getNorthWest(), e.getSouthEast(), 0, i)
            }
            ,
            i.prototype._cameraForBoxAndBearing = function(e, i, r, n) {
                if ("number" == typeof (n = t.extend({
                    padding: {
                        top: 0,
                        bottom: 0,
                        right: 0,
                        left: 0
                    },
                    offset: [0, 0],
                    maxZoom: this.transform.maxZoom
                }, n)).padding) {
                    var o = n.padding;
                    n.padding = {
                        top: o,
                        bottom: o,
                        right: o,
                        left: o
                    }
                }
                if (t.isEqual(Object.keys(n.padding).sort(function(t, e) {
                    return t < e ? -1 : t > e ? 1 : 0
                }), ["bottom", "left", "right", "top"])) {
                    var a = [(n.padding.left - n.padding.right) / 2, (n.padding.top - n.padding.bottom) / 2]
                      , s = Math.min(n.padding.right, n.padding.left)
                      , l = Math.min(n.padding.top, n.padding.bottom);
                    n.offset = [n.offset[0] + a[0], n.offset[1] + a[1]];
                    var u = this.transform
                      , c = u.project(t.LngLat.convert(e))
                      , p = u.project(t.LngLat.convert(i))
                      , h = c.rotate(-r * Math.PI / 180)
                      , d = p.rotate(-r * Math.PI / 180)
                      , f = new t.Point(Math.max(h.x, d.x),Math.max(h.y, d.y))
                      , m = new t.Point(Math.min(h.x, d.x),Math.min(h.y, d.y))
                      , y = t.Point.convert(n.offset)
                      , g = f.sub(m)
                      , _ = (u.width - 2 * s - 2 * Math.abs(y.x)) / g.x
                      , v = (u.height - 2 * l - 2 * Math.abs(y.y)) / g.y;
                    if (!(v < 0 || _ < 0))
                        return n.center = u.unproject(c.add(p).div(2)),
                        n.zoom = Math.min(u.scaleZoom(u.scale * Math.min(_, v)), n.maxZoom),
                        n.bearing = r,
                        n;
                    t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")
                } else
                    t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")
            }
            ,
            i.prototype.fitBounds = function(t, e, i) {
                return this._fitInternal(this.cameraForBounds(t, e), e, i)
            }
            ,
            i.prototype.fitScreenCoordinates = function(e, i, r, n, o) {
                return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)), this.transform.pointLocation(t.Point.convert(i)), r, n), n, o)
            }
            ,
            i.prototype._fitInternal = function(e, i, r) {
                return e ? (i = t.extend(e, i)).linear ? this.easeTo(i, r) : this.flyTo(i, r) : this
            }
            ,
            i.prototype.jumpTo = function(e, i) {
                this.stop();
                var r = this.transform
                  , n = !1
                  , o = !1
                  , a = !1;
                return "zoom"in e && r.zoom !== +e.zoom && (n = !0,
                r.zoom = +e.zoom),
                void 0 !== e.center && (r.center = t.LngLat.convert(e.center)),
                "bearing"in e && r.bearing !== +e.bearing && (o = !0,
                r.bearing = +e.bearing),
                "pitch"in e && r.pitch !== +e.pitch && (a = !0,
                r.pitch = +e.pitch),
                this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),
                n && this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),
                o && this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),
                a && this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),
                this.fire(new t.Event("moveend",i))
            }
            ,
            i.prototype.easeTo = function(e, i) {
                var r = this;
                this.stop(),
                !1 === (e = t.extend({
                    offset: [0, 0],
                    duration: 500,
                    easing: t.ease
                }, e)).animate && (e.duration = 0);
                var n = this.transform
                  , o = this.getZoom()
                  , a = this.getBearing()
                  , s = this.getPitch()
                  , l = "zoom"in e ? +e.zoom : o
                  , u = "bearing"in e ? this._normalizeBearing(e.bearing, a) : a
                  , c = "pitch"in e ? +e.pitch : s
                  , p = n.centerPoint.add(t.Point.convert(e.offset))
                  , h = n.pointLocation(p)
                  , d = t.LngLat.convert(e.center || h);
                this._normalizeCenter(d);
                var f, m, y = n.project(h), g = n.project(d).sub(y), _ = n.zoomScale(l - o);
                return e.around && (f = t.LngLat.convert(e.around),
                m = n.locationPoint(f)),
                this._zooming = l !== o,
                this._rotating = a !== u,
                this._pitching = c !== s,
                this._prepareEase(i, e.noMoveStart),
                clearTimeout(this._easeEndTimeoutID),
                this._ease(function(e) {
                    if (r._zooming && (n.zoom = t.number(o, l, e)),
                    r._rotating && (n.bearing = t.number(a, u, e)),
                    r._pitching && (n.pitch = t.number(s, c, e)),
                    f)
                        n.setLocationAtPoint(f, m);
                    else {
                        var h = n.zoomScale(n.zoom - o)
                          , d = l > o ? Math.min(2, _) : Math.max(.5, _)
                          , v = Math.pow(d, 1 - e)
                          , x = n.unproject(y.add(g.mult(e * v)).mult(h));
                        n.setLocationAtPoint(n.renderWorldCopies ? x.wrap() : x, p)
                    }
                    r._fireMoveEvents(i)
                }, function() {
                    e.delayEndEvents ? r._easeEndTimeoutID = setTimeout(function() {
                        return r._afterEase(i)
                    }, e.delayEndEvents) : r._afterEase(i)
                }, e),
                this
            }
            ,
            i.prototype._prepareEase = function(e, i) {
                this._moving = !0,
                i || this.fire(new t.Event("movestart",e)),
                this._zooming && this.fire(new t.Event("zoomstart",e)),
                this._rotating && this.fire(new t.Event("rotatestart",e)),
                this._pitching && this.fire(new t.Event("pitchstart",e))
            }
            ,
            i.prototype._fireMoveEvents = function(e) {
                this.fire(new t.Event("move",e)),
                this._zooming && this.fire(new t.Event("zoom",e)),
                this._rotating && this.fire(new t.Event("rotate",e)),
                this._pitching && this.fire(new t.Event("pitch",e))
            }
            ,
            i.prototype._afterEase = function(e) {
                var i = this._zooming
                  , r = this._rotating
                  , n = this._pitching;
                this._moving = !1,
                this._zooming = !1,
                this._rotating = !1,
                this._pitching = !1,
                i && this.fire(new t.Event("zoomend",e)),
                r && this.fire(new t.Event("rotateend",e)),
                n && this.fire(new t.Event("pitchend",e)),
                this.fire(new t.Event("moveend",e))
            }
            ,
            i.prototype.flyTo = function(e, i) {
                var r = this;
                this.stop(),
                e = t.extend({
                    offset: [0, 0],
                    speed: 1.2,
                    curve: 1.42,
                    easing: t.ease
                }, e);
                var n = this.transform
                  , o = this.getZoom()
                  , a = this.getBearing()
                  , s = this.getPitch()
                  , l = "zoom"in e ? t.clamp(+e.zoom, n.minZoom, n.maxZoom) : o
                  , u = "bearing"in e ? this._normalizeBearing(e.bearing, a) : a
                  , c = "pitch"in e ? +e.pitch : s
                  , p = n.zoomScale(l - o)
                  , h = n.centerPoint.add(t.Point.convert(e.offset))
                  , d = n.pointLocation(h)
                  , f = t.LngLat.convert(e.center || d);
                this._normalizeCenter(f);
                var m = n.project(d)
                  , y = n.project(f).sub(m)
                  , g = e.curve
                  , _ = Math.max(n.width, n.height)
                  , v = _ / p
                  , x = y.mag();
                if ("minZoom"in e) {
                    var b = t.clamp(Math.min(e.minZoom, o, l), n.minZoom, n.maxZoom)
                      , w = _ / n.zoomScale(b - o);
                    g = Math.sqrt(w / x * 2)
                }
                var T = g * g;
                function S(t) {
                    var e = (v * v - _ * _ + (t ? -1 : 1) * T * T * x * x) / (2 * (t ? v : _) * T * x);
                    return Math.log(Math.sqrt(e * e + 1) - e)
                }
                function A(t) {
                    return (Math.exp(t) - Math.exp(-t)) / 2
                }
                function k(t) {
                    return (Math.exp(t) + Math.exp(-t)) / 2
                }
                var E = S(0)
                  , C = function(t) {
                    return k(E) / k(E + g * t)
                }
                  , P = function(t) {
                    return _ * ((k(E) * (A(e = E + g * t) / k(e)) - A(E)) / T) / x;
                    var e
                }
                  , M = (S(1) - E) / g;
                if (Math.abs(x) < 1e-6 || !isFinite(M)) {
                    if (Math.abs(_ - v) < 1e-6)
                        return this.easeTo(e, i);
                    var I = v < _ ? -1 : 1;
                    M = Math.abs(Math.log(v / _)) / g,
                    P = function() {
                        return 0
                    }
                    ,
                    C = function(t) {
                        return Math.exp(I * g * t)
                    }
                }
                if ("duration"in e)
                    e.duration = +e.duration;
                else {
                    var z = "screenSpeed"in e ? +e.screenSpeed / g : +e.speed;
                    e.duration = 1e3 * M / z
                }
                return e.maxDuration && e.duration > e.maxDuration && (e.duration = 0),
                this._zooming = !0,
                this._rotating = a !== u,
                this._pitching = c !== s,
                this._prepareEase(i, !1),
                this._ease(function(e) {
                    var p = e * M
                      , d = 1 / C(p);
                    n.zoom = 1 === e ? l : o + n.scaleZoom(d),
                    r._rotating && (n.bearing = t.number(a, u, e)),
                    r._pitching && (n.pitch = t.number(s, c, e));
                    var g = 1 === e ? f : n.unproject(m.add(y.mult(P(p))).mult(d));
                    n.setLocationAtPoint(n.renderWorldCopies ? g.wrap() : g, h),
                    r._fireMoveEvents(i)
                }, function() {
                    return r._afterEase(i)
                }, e),
                this
            }
            ,
            i.prototype.isEasing = function() {
                return !!this._easeFrameId
            }
            ,
            i.prototype.stop = function() {
                if (this._easeFrameId && (this._cancelRenderFrame(this._easeFrameId),
                delete this._easeFrameId,
                delete this._onEaseFrame),
                this._onEaseEnd) {
                    var t = this._onEaseEnd;
                    delete this._onEaseEnd,
                    t.call(this)
                }
                return this
            }
            ,
            i.prototype._ease = function(e, i, r) {
                !1 === r.animate || 0 === r.duration ? (e(1),
                i()) : (this._easeStart = t.browser.now(),
                this._easeOptions = r,
                this._onEaseFrame = e,
                this._onEaseEnd = i,
                this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback))
            }
            ,
            i.prototype._renderFrameCallback = function() {
                var e = Math.min((t.browser.now() - this._easeStart) / this._easeOptions.duration, 1);
                this._onEaseFrame(this._easeOptions.easing(e)),
                e < 1 ? this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback) : this.stop()
            }
            ,
            i.prototype._normalizeBearing = function(e, i) {
                e = t.wrap(e, -180, 180);
                var r = Math.abs(e - i);
                return Math.abs(e - 360 - i) < r && (e -= 360),
                Math.abs(e + 360 - i) < r && (e += 360),
                e
            }
            ,
            i.prototype._normalizeCenter = function(t) {
                var e = this.transform;
                if (e.renderWorldCopies && !e.lngRange) {
                    var i = t.lng - e.center.lng;
                    t.lng += i > 180 ? -360 : i < -180 ? 360 : 0
                }
            }
            ,
            i
        }(t.Evented)
          , Tr = function(e) {
            void 0 === e && (e = {}),
            this.options = e,
            t.bindAll(["_updateEditLink", "_updateData", "_updateCompact"], this)
        };
        Tr.prototype.getDefaultPosition = function() {
            return "bottom-right"
        }
        ,
        Tr.prototype.onAdd = function(t) {
            var e = this.options && this.options.compact;
            return this._map = t,
            this._container = i.create("div", "mapboxgl-ctrl mapboxgl-ctrl-attrib"),
            e && this._container.classList.add("mapboxgl-compact"),
            this._updateAttributions(),
            this._updateEditLink(),
            this._map.on("styledata", this._updateData),
            this._map.on("sourcedata", this._updateData),
            this._map.on("moveend", this._updateEditLink),
            void 0 === e && (this._map.on("resize", this._updateCompact),
            this._updateCompact()),
            this._container
        }
        ,
        Tr.prototype.onRemove = function() {
            i.remove(this._container),
            this._map.off("styledata", this._updateData),
            this._map.off("sourcedata", this._updateData),
            this._map.off("moveend", this._updateEditLink),
            this._map.off("resize", this._updateCompact),
            this._map = void 0
        }
        ,
        Tr.prototype._updateEditLink = function() {
            var e = this._editLink;
            e || (e = this._editLink = this._container.querySelector(".mapbox-improve-map"));
            var i = [{
                key: "owner",
                value: this.styleOwner
            }, {
                key: "id",
                value: this.styleId
            }, {
                key: "access_token",
                value: t.config.ACCESS_TOKEN
            }];
            if (e) {
                var r = i.reduce(function(t, e, r) {
                    return e.value && (t += e.key + "=" + e.value + (r < i.length - 1 ? "&" : "")),
                    t
                }, "?");
                e.href = "https://www.mapbox.com/feedback/" + r + (this._map._hash ? this._map._hash.getHashString(!0) : "")
            }
        }
        ,
        Tr.prototype._updateData = function(t) {
            !t || "metadata" !== t.sourceDataType && "style" !== t.dataType || (this._updateAttributions(),
            this._updateEditLink())
        }
        ,
        Tr.prototype._updateAttributions = function() {
            if (this._map.style) {
                var t = [];
                if (this.options.customAttribution && (Array.isArray(this.options.customAttribution) ? t = t.concat(this.options.customAttribution.map(function(t) {
                    return "string" != typeof t ? "" : "<p>" + t + "</p>"
                })) : "string" == typeof this.options.customAttribution && t.push("<p>" + this.options.customAttribution + "</p>")),
                this._map.style.stylesheet) {
                    var e = this._map.style.stylesheet;
                    this.styleOwner = e.owner,
                    this.styleId = e.id
                }
                var i = this._map.style.sourceCaches;
                for (var r in i) {
                    var n = i[r];
                    if (n.used) {
                        var o = n.getSource();
                        o.attribution && t.indexOf(o.attribution) < 0 && t.push(o.attribution)
                    }
                }
                t.sort(function(t, e) {
                    return t.length - e.length
                }),
                (t = t.filter(function(e, i) {
                    for (var r = i + 1; r < t.length; r++)
                        if (t[r].indexOf(e) >= 0)
                            return !1;
                    return !0
                })).length ? (this._container.innerHTML = t.join("<p> | </p>"),
                this._container.classList.remove("mapboxgl-attrib-empty")) : this._container.classList.add("mapboxgl-attrib-empty"),
                this._editLink = null
            }
        }
        ,
        Tr.prototype._updateCompact = function() {
            this._map.getCanvasContainer().offsetWidth <= 640 ? this._container.classList.add("mapboxgl-compact") : this._container.classList.remove("mapboxgl-compact")
        }
        ;
        var Sr = function() {
            t.bindAll(["_updateLogo"], this),
            t.bindAll(["_updateCompact"], this)
        };
        Sr.prototype.onAdd = function(t) {
            this._map = t,
            this._container = i.create("div", "mapboxgl-ctrl");
            var e = i.create("a", "mapboxgl-ctrl-logo");
            return e.target = "_blank",
            e.href = "https://www.mapbox.com/",
            e.setAttribute("aria-label", "Mapbox logo"),
            e.setAttribute("rel", "noopener"),
            this._container.appendChild(e),
            this._container.style.display = "none",
            this._map.on("sourcedata", this._updateLogo),
            this._updateLogo(),
            this._map.on("resize", this._updateCompact),
            this._updateCompact(),
            this._container
        }
        ,
        Sr.prototype.onRemove = function() {
            i.remove(this._container),
            this._map.off("sourcedata", this._updateLogo),
            this._map.off("resize", this._updateCompact)
        }
        ,
        Sr.prototype.getDefaultPosition = function() {
            return "bottom-left"
        }
        ,
        Sr.prototype._updateLogo = function(t) {
            t && "metadata" !== t.sourceDataType || (this._container.style.display = this._logoRequired() ? "block" : "none")
        }
        ,
        Sr.prototype._logoRequired = function() {
            if (this._map.style) {
                var t = this._map.style.sourceCaches;
                for (var e in t)
                    if (t[e].getSource().mapbox_logo)
                        return !0;
                return !1
            }
        }
        ,
        Sr.prototype._updateCompact = function() {
            var t = this._container.children;
            if (t.length) {
                var e = t[0];
                this._map.getCanvasContainer().offsetWidth < 250 ? e.classList.add("mapboxgl-compact") : e.classList.remove("mapboxgl-compact")
            }
        }
        ;
        var Ar = function() {
            this._queue = [],
            this._id = 0,
            this._cleared = !1,
            this._currentlyRunning = !1
        };
        Ar.prototype.add = function(t) {
            var e = ++this._id;
            return this._queue.push({
                callback: t,
                id: e,
                cancelled: !1
            }),
            e
        }
        ,
        Ar.prototype.remove = function(t) {
            for (var e = this._currentlyRunning, i = 0, r = e ? this._queue.concat(e) : this._queue; i < r.length; i += 1) {
                var n = r[i];
                if (n.id === t)
                    return void (n.cancelled = !0)
            }
        }
        ,
        Ar.prototype.run = function() {
            var t = this._currentlyRunning = this._queue;
            this._queue = [];
            for (var e = 0, i = t; e < i.length; e += 1) {
                var r = i[e];
                if (!r.cancelled && (r.callback(),
                this._cleared))
                    break
            }
            this._cleared = !1,
            this._currentlyRunning = !1
        }
        ,
        Ar.prototype.clear = function() {
            this._currentlyRunning && (this._cleared = !0),
            this._queue = []
        }
        ;
        var kr = t.window.HTMLImageElement
          , Er = t.window.HTMLElement
          , Cr = {
            center: [0, 0],
            zoom: 0,
            bearing: 0,
            pitch: 0,
            minZoom: 0,
            maxZoom: 22,
            interactive: !0,
            scrollZoom: !0,
            boxZoom: !0,
            dragRotate: !0,
            dragPan: !0,
            keyboard: !0,
            doubleClickZoom: !0,
            touchZoomRotate: !0,
            bearingSnap: 7,
            clickTolerance: 3,
            hash: !1,
            attributionControl: !0,
            failIfMajorPerformanceCaveat: !1,
            preserveDrawingBuffer: !1,
            trackResize: !0,
            renderWorldCopies: !0,
            refreshExpiredTiles: !0,
            maxTileCacheSize: null,
            transformRequest: null,
            fadeDuration: 300,
            crossSourceCollisions: !0
        }
          , Pr = function(r) {
            function n(e) {
                var n = this;
                if (null != (e = t.extend({}, Cr, e)).minZoom && null != e.maxZoom && e.minZoom > e.maxZoom)
                    throw new Error("maxZoom must be greater than minZoom");
                var o = new nr(e.minZoom,e.maxZoom,e.renderWorldCopies);
                r.call(this, o, e),
                this._interactive = e.interactive,
                this._maxTileCacheSize = e.maxTileCacheSize,
                this._failIfMajorPerformanceCaveat = e.failIfMajorPerformanceCaveat,
                this._preserveDrawingBuffer = e.preserveDrawingBuffer,
                this._trackResize = e.trackResize,
                this._bearingSnap = e.bearingSnap,
                this._refreshExpiredTiles = e.refreshExpiredTiles,
                this._fadeDuration = e.fadeDuration,
                this._crossSourceCollisions = e.crossSourceCollisions,
                this._crossFadingFactor = 1,
                this._collectResourceTiming = e.collectResourceTiming,
                this._renderTaskQueue = new Ar,
                this._controls = [],
                this._mapId = t.uniqueId();
                var a = e.transformRequest;
                if (this._transformRequest = a ? function(t, e) {
                    return a(t, e) || {
                        url: t
                    }
                }
                : function(t) {
                    return {
                        url: t
                    }
                }
                ,
                "string" == typeof e.container) {
                    if (this._container = t.window.document.getElementById(e.container),
                    !this._container)
                        throw new Error("Container '" + e.container + "' not found.")
                } else {
                    if (!(e.container instanceof Er))
                        throw new Error("Invalid type: 'container' must be a String or HTMLElement.");
                    this._container = e.container
                }
                if (e.maxBounds && this.setMaxBounds(e.maxBounds),
                t.bindAll(["_onWindowOnline", "_onWindowResize", "_contextLost", "_contextRestored"], this),
                this._setupContainer(),
                this._setupPainter(),
                void 0 === this.painter)
                    throw new Error("Failed to initialize WebGL.");
                this.on("move", function() {
                    return n._update(!1)
                }),
                this.on("zoom", function() {
                    return n._update(!0)
                }),
                void 0 !== t.window && (t.window.addEventListener("online", this._onWindowOnline, !1),
                t.window.addEventListener("resize", this._onWindowResize, !1)),
                function(t, e) {
                    var r = t.getCanvasContainer()
                      , n = null
                      , o = !1
                      , a = null;
                    for (var s in br)
                        t[s] = new br[s](t,e),
                        e.interactive && e[s] && t[s].enable(e[s]);
                    i.addEventListener(r, "mouseout", function(e) {
                        t.fire(new sr("mouseout",t,e))
                    }),
                    i.addEventListener(r, "mousedown", function(n) {
                        o = !0,
                        a = i.mousePos(r, n);
                        var s = new sr("mousedown",t,n);
                        t.fire(s),
                        s.defaultPrevented || (e.interactive && !t.doubleClickZoom.isActive() && t.stop(),
                        t.boxZoom.onMouseDown(n),
                        t.boxZoom.isActive() || t.dragPan.isActive() || t.dragRotate.onMouseDown(n),
                        t.boxZoom.isActive() || t.dragRotate.isActive() || t.dragPan.onMouseDown(n))
                    }),
                    i.addEventListener(r, "mouseup", function(e) {
                        var i = t.dragRotate.isActive();
                        n && !i && t.fire(new sr("contextmenu",t,n)),
                        n = null,
                        o = !1,
                        t.fire(new sr("mouseup",t,e))
                    }),
                    i.addEventListener(r, "mousemove", function(e) {
                        if (!t.dragPan.isActive() && !t.dragRotate.isActive()) {
                            for (var i = e.target; i && i !== r; )
                                i = i.parentNode;
                            i === r && t.fire(new sr("mousemove",t,e))
                        }
                    }),
                    i.addEventListener(r, "mouseover", function(e) {
                        for (var i = e.target; i && i !== r; )
                            i = i.parentNode;
                        i === r && t.fire(new sr("mouseover",t,e))
                    }),
                    i.addEventListener(r, "touchstart", function(i) {
                        var r = new lr("touchstart",t,i);
                        t.fire(r),
                        r.defaultPrevented || (e.interactive && t.stop(),
                        t.boxZoom.isActive() || t.dragRotate.isActive() || t.dragPan.onTouchStart(i),
                        t.touchZoomRotate.onStart(i),
                        t.doubleClickZoom.onTouchStart(r))
                    }, {
                        passive: !1
                    }),
                    i.addEventListener(r, "touchmove", function(e) {
                        t.fire(new lr("touchmove",t,e))
                    }, {
                        passive: !1
                    }),
                    i.addEventListener(r, "touchend", function(e) {
                        t.fire(new lr("touchend",t,e))
                    }),
                    i.addEventListener(r, "touchcancel", function(e) {
                        t.fire(new lr("touchcancel",t,e))
                    }),
                    i.addEventListener(r, "click", function(n) {
                        var o = i.mousePos(r, n);
                        (o.equals(a) || o.dist(a) < e.clickTolerance) && t.fire(new sr("click",t,n))
                    }),
                    i.addEventListener(r, "dblclick", function(e) {
                        var i = new sr("dblclick",t,e);
                        t.fire(i),
                        i.defaultPrevented || t.doubleClickZoom.onDblClick(i)
                    }),
                    i.addEventListener(r, "contextmenu", function(e) {
                        var i = t.dragRotate.isActive();
                        o || i ? o && (n = e) : t.fire(new sr("contextmenu",t,e)),
                        (t.dragRotate.isEnabled() || t.listens("contextmenu")) && e.preventDefault()
                    }),
                    i.addEventListener(r, "wheel", function(i) {
                        e.interactive && t.stop();
                        var r = new ur("wheel",t,i);
                        t.fire(r),
                        r.defaultPrevented || t.scrollZoom.onWheel(i)
                    }, {
                        passive: !1
                    })
                }(this, e),
                this._hash = e.hash && (new ar).addTo(this),
                this._hash && this._hash._onHashChange() || (e.bounds ? (this.resize(),
                this.fitBounds(e.bounds, {
                    duration: 0
                })) : this.jumpTo({
                    center: e.center,
                    zoom: e.zoom,
                    bearing: e.bearing,
                    pitch: e.pitch
                })),
                this.resize(),
                e.style && this.setStyle(e.style, {
                    localIdeographFontFamily: e.localIdeographFontFamily
                }),
                e.attributionControl && this.addControl(new Tr({
                    customAttribution: e.customAttribution
                })),
                this.addControl(new Sr, e.logoPosition),
                this.on("style.load", function() {
                    n.transform.unmodified && n.jumpTo(n.style.stylesheet)
                }),
                this.on("data", function(e) {
                    n._update("style" === e.dataType),
                    n.fire(new t.Event(e.dataType + "data",e))
                }),
                this.on("dataloading", function(e) {
                    n.fire(new t.Event(e.dataType + "dataloading",e))
                })
            }
            r && (n.__proto__ = r),
            n.prototype = Object.create(r && r.prototype),
            n.prototype.constructor = n;
            var o = {
                showTileBoundaries: {
                    configurable: !0
                },
                showCollisionBoxes: {
                    configurable: !0
                },
                showOverdrawInspector: {
                    configurable: !0
                },
                repaint: {
                    configurable: !0
                },
                vertices: {
                    configurable: !0
                }
            };
            return n.prototype._getMapId = function() {
                return this._mapId
            }
            ,
            n.prototype.addControl = function(e, i) {
                if (void 0 === i && e.getDefaultPosition && (i = e.getDefaultPosition()),
                void 0 === i && (i = "top-right"),
                !e || !e.onAdd)
                    return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
                var r = e.onAdd(this);
                this._controls.push(e);
                var n = this._controlPositions[i];
                return -1 !== i.indexOf("bottom") ? n.insertBefore(r, n.firstChild) : n.appendChild(r),
                this
            }
            ,
            n.prototype.removeControl = function(e) {
                if (!e || !e.onRemove)
                    return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));
                var i = this._controls.indexOf(e);
                return i > -1 && this._controls.splice(i, 1),
                e.onRemove(this),
                this
            }
            ,
            n.prototype.resize = function(e) {
                var i = this._containerDimensions()
                  , r = i[0]
                  , n = i[1];
                return this._resizeCanvas(r, n),
                this.transform.resize(r, n),
                this.painter.resize(r, n),
                this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),
                this
            }
            ,
            n.prototype.getBounds = function() {
                return this.transform.getBounds()
            }
            ,
            n.prototype.getMaxBounds = function() {
                return this.transform.getMaxBounds()
            }
            ,
            n.prototype.setMaxBounds = function(e) {
                return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),
                this._update()
            }
            ,
            n.prototype.setMinZoom = function(t) {
                if ((t = null == t ? 0 : t) >= 0 && t <= this.transform.maxZoom)
                    return this.transform.minZoom = t,
                    this._update(),
                    this.getZoom() < t && this.setZoom(t),
                    this;
                throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")
            }
            ,
            n.prototype.getMinZoom = function() {
                return this.transform.minZoom
            }
            ,
            n.prototype.setMaxZoom = function(t) {
                if ((t = null == t ? 22 : t) >= this.transform.minZoom)
                    return this.transform.maxZoom = t,
                    this._update(),
                    this.getZoom() > t && this.setZoom(t),
                    this;
                throw new Error("maxZoom must be greater than the current minZoom")
            }
            ,
            n.prototype.getRenderWorldCopies = function() {
                return this.transform.renderWorldCopies
            }
            ,
            n.prototype.setRenderWorldCopies = function(t) {
                return this.transform.renderWorldCopies = t,
                this._update()
            }
            ,
            n.prototype.getMaxZoom = function() {
                return this.transform.maxZoom
            }
            ,
            n.prototype.project = function(e) {
                return this.transform.locationPoint(t.LngLat.convert(e))
            }
            ,
            n.prototype.unproject = function(e) {
                return this.transform.pointLocation(t.Point.convert(e))
            }
            ,
            n.prototype.isMoving = function() {
                return this._moving || this.dragPan.isActive() || this.dragRotate.isActive() || this.scrollZoom.isActive()
            }
            ,
            n.prototype.isZooming = function() {
                return this._zooming || this.scrollZoom.isZooming()
            }
            ,
            n.prototype.isRotating = function() {
                return this._rotating || this.dragRotate.isActive()
            }
            ,
            n.prototype.on = function(t, e, i) {
                var n, o = this;
                if (void 0 === i)
                    return r.prototype.on.call(this, t, e);
                var a = function() {
                    if ("mouseenter" === t || "mouseover" === t) {
                        var r = !1;
                        return {
                            layer: e,
                            listener: i,
                            delegates: {
                                mousemove: function(n) {
                                    var a = o.getLayer(e) ? o.queryRenderedFeatures(n.point, {
                                        layers: [e]
                                    }) : [];
                                    a.length ? r || (r = !0,
                                    i.call(o, new sr(t,o,n.originalEvent,{
                                        features: a
                                    }))) : r = !1
                                },
                                mouseout: function() {
                                    r = !1
                                }
                            }
                        }
                    }
                    if ("mouseleave" === t || "mouseout" === t) {
                        var a = !1;
                        return {
                            layer: e,
                            listener: i,
                            delegates: {
                                mousemove: function(r) {
                                    (o.getLayer(e) ? o.queryRenderedFeatures(r.point, {
                                        layers: [e]
                                    }) : []).length ? a = !0 : a && (a = !1,
                                    i.call(o, new sr(t,o,r.originalEvent)))
                                },
                                mouseout: function(e) {
                                    a && (a = !1,
                                    i.call(o, new sr(t,o,e.originalEvent)))
                                }
                            }
                        }
                    }
                    return {
                        layer: e,
                        listener: i,
                        delegates: (n = {},
                        n[t] = function(t) {
                            var r = o.getLayer(e) ? o.queryRenderedFeatures(t.point, {
                                layers: [e]
                            }) : [];
                            r.length && (t.features = r,
                            i.call(o, t),
                            delete t.features)
                        }
                        ,
                        n)
                    }
                }();
                for (var s in this._delegatedListeners = this._delegatedListeners || {},
                this._delegatedListeners[t] = this._delegatedListeners[t] || [],
                this._delegatedListeners[t].push(a),
                a.delegates)
                    o.on(s, a.delegates[s]);
                return this
            }
            ,
            n.prototype.off = function(t, e, i) {
                if (void 0 === i)
                    return r.prototype.off.call(this, t, e);
                if (this._delegatedListeners && this._delegatedListeners[t])
                    for (var n = this._delegatedListeners[t], o = 0; o < n.length; o++) {
                        var a = n[o];
                        if (a.layer === e && a.listener === i) {
                            for (var s in a.delegates)
                                this.off(s, a.delegates[s]);
                            return n.splice(o, 1),
                            this
                        }
                    }
                return this
            }
            ,
            n.prototype.queryRenderedFeatures = function(e, i) {
                if (!this.style)
                    return [];
                var r;
                if (void 0 !== i || void 0 === e || e instanceof t.Point || Array.isArray(e) || (i = e,
                e = void 0),
                i = i || {},
                (e = e || [[0, 0], [this.transform.width, this.transform.height]])instanceof t.Point || "number" == typeof e[0])
                    r = [t.Point.convert(e)];
                else {
                    var n = t.Point.convert(e[0])
                      , o = t.Point.convert(e[1]);
                    r = [n, new t.Point(o.x,n.y), o, new t.Point(n.x,o.y), n]
                }
                return this.style.queryRenderedFeatures(r, i, this.transform)
            }
            ,
            n.prototype.querySourceFeatures = function(t, e) {
                return this.style.querySourceFeatures(t, e)
            }
            ,
            n.prototype.setStyle = function(e, i) {
                if ((!i || !1 !== i.diff && !i.localIdeographFontFamily) && this.style && e && "object" == typeof e)
                    try {
                        return this.style.setState(e) && this._update(!0),
                        this
                    } catch (e) {
                        t.warnOnce("Unable to perform style diff: " + (e.message || e.error || e) + ".  Rebuilding the style from scratch.")
                    }
                return this.style && (this.style.setEventedParent(null),
                this.style._remove()),
                e ? (this.style = new ze(this,i || {}),
                this.style.setEventedParent(this, {
                    style: this.style
                }),
                "string" == typeof e ? this.style.loadURL(e) : this.style.loadJSON(e),
                this) : (delete this.style,
                this)
            }
            ,
            n.prototype.getStyle = function() {
                if (this.style)
                    return this.style.serialize()
            }
            ,
            n.prototype.isStyleLoaded = function() {
                return this.style ? this.style.loaded() : t.warnOnce("There is no style added to the map.")
            }
            ,
            n.prototype.addSource = function(t, e) {
                return this.style.addSource(t, e),
                this._update(!0)
            }
            ,
            n.prototype.isSourceLoaded = function(e) {
                var i = this.style && this.style.sourceCaches[e];
                if (void 0 !== i)
                    return i.loaded();
                this.fire(new t.ErrorEvent(new Error("There is no source with ID '" + e + "'")))
            }
            ,
            n.prototype.areTilesLoaded = function() {
                var t = this.style && this.style.sourceCaches;
                for (var e in t) {
                    var i = t[e]._tiles;
                    for (var r in i) {
                        var n = i[r];
                        if ("loaded" !== n.state && "errored" !== n.state)
                            return !1
                    }
                }
                return !0
            }
            ,
            n.prototype.addSourceType = function(t, e, i) {
                return this.style.addSourceType(t, e, i)
            }
            ,
            n.prototype.removeSource = function(t) {
                return this.style.removeSource(t),
                this._update(!0)
            }
            ,
            n.prototype.getSource = function(t) {
                return this.style.getSource(t)
            }
            ,
            n.prototype.addImage = function(e, i, r) {
                void 0 === r && (r = {});
                var n = r.pixelRatio;
                void 0 === n && (n = 1);
                var o = r.sdf;
                if (void 0 === o && (o = !1),
                i instanceof kr) {
                    var a = t.browser.getImageData(i)
                      , s = a.width
                      , l = a.height
                      , u = a.data;
                    this.style.addImage(e, {
                        data: new t.RGBAImage({
                            width: s,
                            height: l
                        },u),
                        pixelRatio: n,
                        sdf: o
                    })
                } else {
                    if (void 0 === i.width || void 0 === i.height)
                        return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
                    var c = i.width
                      , p = i.height
                      , h = i.data;
                    this.style.addImage(e, {
                        data: new t.RGBAImage({
                            width: c,
                            height: p
                        },new Uint8Array(h)),
                        pixelRatio: n,
                        sdf: o
                    })
                }
            }
            ,
            n.prototype.hasImage = function(e) {
                return e ? !!this.style.getImage(e) : (this.fire(new t.ErrorEvent(new Error("Missing required image id"))),
                !1)
            }
            ,
            n.prototype.removeImage = function(t) {
                this.style.removeImage(t)
            }
            ,
            n.prototype.loadImage = function(e, i) {
                t.getImage(this._transformRequest(e, t.ResourceType.Image), i)
            }
            ,
            n.prototype.listImages = function() {
                return this.style.listImages()
            }
            ,
            n.prototype.addLayer = function(t, e) {
                return this.style.addLayer(t, e),
                this._update(!0)
            }
            ,
            n.prototype.moveLayer = function(t, e) {
                return this.style.moveLayer(t, e),
                this._update(!0)
            }
            ,
            n.prototype.removeLayer = function(t) {
                return this.style.removeLayer(t),
                this._update(!0)
            }
            ,
            n.prototype.getLayer = function(t) {
                return this.style.getLayer(t)
            }
            ,
            n.prototype.setFilter = function(t, e) {
                return this.style.setFilter(t, e),
                this._update(!0)
            }
            ,
            n.prototype.setLayerZoomRange = function(t, e, i) {
                return this.style.setLayerZoomRange(t, e, i),
                this._update(!0)
            }
            ,
            n.prototype.getFilter = function(t) {
                return this.style.getFilter(t)
            }
            ,
            n.prototype.setPaintProperty = function(t, e, i) {
                return this.style.setPaintProperty(t, e, i),
                this._update(!0)
            }
            ,
            n.prototype.getPaintProperty = function(t, e) {
                return this.style.getPaintProperty(t, e)
            }
            ,
            n.prototype.setLayoutProperty = function(t, e, i) {
                return this.style.setLayoutProperty(t, e, i),
                this._update(!0)
            }
            ,
            n.prototype.getLayoutProperty = function(t, e) {
                return this.style.getLayoutProperty(t, e)
            }
            ,
            n.prototype.setLight = function(t) {
                return this.style.setLight(t),
                this._update(!0)
            }
            ,
            n.prototype.getLight = function() {
                return this.style.getLight()
            }
            ,
            n.prototype.setFeatureState = function(t, e) {
                return this.style.setFeatureState(t, e),
                this._update()
            }
            ,
            n.prototype.getFeatureState = function(t) {
                return this.style.getFeatureState(t)
            }
            ,
            n.prototype.getContainer = function() {
                return this._container
            }
            ,
            n.prototype.getCanvasContainer = function() {
                return this._canvasContainer
            }
            ,
            n.prototype.getCanvas = function() {
                return this._canvas
            }
            ,
            n.prototype._containerDimensions = function() {
                var t = 0
                  , e = 0;
                return this._container && (t = this._container.clientWidth || 400,
                e = this._container.clientHeight || 300),
                [t, e]
            }
            ,
            n.prototype._detectMissingCSS = function() {
                "rgb(250, 128, 114)" !== t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color") && t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")
            }
            ,
            n.prototype._setupContainer = function() {
                var t = this._container;
                t.classList.add("mapboxgl-map"),
                (this._missingCSSCanary = i.create("div", "mapboxgl-canary", t)).style.visibility = "hidden",
                this._detectMissingCSS();
                var e = this._canvasContainer = i.create("div", "mapboxgl-canvas-container", t);
                this._interactive && e.classList.add("mapboxgl-interactive"),
                this._canvas = i.create("canvas", "mapboxgl-canvas", e),
                this._canvas.style.position = "absolute",
                this._canvas.addEventListener("webglcontextlost", this._contextLost, !1),
                this._canvas.addEventListener("webglcontextrestored", this._contextRestored, !1),
                this._canvas.setAttribute("tabindex", "0"),
                this._canvas.setAttribute("aria-label", "Map");
                var r = this._containerDimensions();
                this._resizeCanvas(r[0], r[1]);
                var n = this._controlContainer = i.create("div", "mapboxgl-control-container", t)
                  , o = this._controlPositions = {};
                ["top-left", "top-right", "bottom-left", "bottom-right"].forEach(function(t) {
                    o[t] = i.create("div", "mapboxgl-ctrl-" + t, n)
                })
            }
            ,
            n.prototype._resizeCanvas = function(e, i) {
                var r = t.window.devicePixelRatio || 1;
                this._canvas.width = r * e,
                this._canvas.height = r * i,
                this._canvas.style.width = e + "px",
                this._canvas.style.height = i + "px"
            }
            ,
            n.prototype._setupPainter = function() {
                var i = t.extend({
                    failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat,
                    preserveDrawingBuffer: this._preserveDrawingBuffer
                }, e.webGLContextAttributes)
                  , r = this._canvas.getContext("webgl", i) || this._canvas.getContext("experimental-webgl", i);
                r ? this.painter = new tr(r,this.transform) : this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))
            }
            ,
            n.prototype._contextLost = function(e) {
                e.preventDefault(),
                this._frame && (this._frame.cancel(),
                this._frame = null),
                this.fire(new t.Event("webglcontextlost",{
                    originalEvent: e
                }))
            }
            ,
            n.prototype._contextRestored = function(e) {
                this._setupPainter(),
                this.resize(),
                this._update(),
                this.fire(new t.Event("webglcontextrestored",{
                    originalEvent: e
                }))
            }
            ,
            n.prototype.loaded = function() {
                return !this._styleDirty && !this._sourcesDirty && !!this.style && this.style.loaded()
            }
            ,
            n.prototype._update = function(t) {
                return this.style ? (this._styleDirty = this._styleDirty || t,
                this._sourcesDirty = !0,
                this.triggerRepaint(),
                this) : this
            }
            ,
            n.prototype._requestRenderFrame = function(t) {
                return this._update(),
                this._renderTaskQueue.add(t)
            }
            ,
            n.prototype._cancelRenderFrame = function(t) {
                this._renderTaskQueue.remove(t)
            }
            ,
            n.prototype._render = function() {
                this.painter.context.setDirty(),
                this.painter.setBaseState(),
                this._renderTaskQueue.run();
                var e = !1;
                if (this.style && this._styleDirty) {
                    this._styleDirty = !1;
                    var i = this.transform.zoom
                      , r = t.browser.now();
                    this.style.zoomHistory.update(i, r);
                    var n = new t.EvaluationParameters(i,{
                        now: r,
                        fadeDuration: this._fadeDuration,
                        zoomHistory: this.style.zoomHistory,
                        transition: this.style.getTransition()
                    })
                      , o = n.crossFadingFactor();
                    1 === o && o === this._crossFadingFactor || (e = !0,
                    this._crossFadingFactor = o),
                    this.style.update(n)
                }
                return this.style && this._sourcesDirty && (this._sourcesDirty = !1,
                this.style._updateSources(this.transform)),
                this._placementDirty = this.style && this.style._updatePlacement(this.painter.transform, this.showCollisionBoxes, this._fadeDuration, this._crossSourceCollisions),
                this.painter.render(this.style, {
                    showTileBoundaries: this.showTileBoundaries,
                    showOverdrawInspector: this._showOverdrawInspector,
                    rotating: this.isRotating(),
                    zooming: this.isZooming(),
                    fadeDuration: this._fadeDuration
                }),
                this.fire(new t.Event("render")),
                this.loaded() && !this._loaded && (this._loaded = !0,
                this.fire(new t.Event("load"))),
                this.style && (this.style.hasTransitions() || e) && (this._styleDirty = !0),
                this.style && !this._placementDirty && this.style._releaseSymbolFadeTiles(),
                (this._sourcesDirty || this._repaint || this._styleDirty || this._placementDirty) && this.triggerRepaint(),
                this
            }
            ,
            n.prototype.remove = function() {
                this._hash && this._hash.remove();
                for (var e = 0, i = this._controls; e < i.length; e += 1)
                    i[e].onRemove(this);
                this._controls = [],
                this._frame && (this._frame.cancel(),
                this._frame = null),
                this._renderTaskQueue.clear(),
                this.setStyle(null),
                void 0 !== t.window && (t.window.removeEventListener("resize", this._onWindowResize, !1),
                t.window.removeEventListener("online", this._onWindowOnline, !1));
                var r = this.painter.context.gl.getExtension("WEBGL_lose_context");
                r && r.loseContext(),
                Mr(this._canvasContainer),
                Mr(this._controlContainer),
                Mr(this._missingCSSCanary),
                this._container.classList.remove("mapboxgl-map"),
                this.fire(new t.Event("remove"))
            }
            ,
            n.prototype.triggerRepaint = function() {
                var e = this;
                this.style && !this._frame && (this._frame = t.browser.frame(function() {
                    e._frame = null,
                    e._render()
                }))
            }
            ,
            n.prototype._onWindowOnline = function() {
                this._update()
            }
            ,
            n.prototype._onWindowResize = function() {
                this._trackResize && this.resize()._update()
            }
            ,
            o.showTileBoundaries.get = function() {
                return !!this._showTileBoundaries
            }
            ,
            o.showTileBoundaries.set = function(t) {
                this._showTileBoundaries !== t && (this._showTileBoundaries = t,
                this._update())
            }
            ,
            o.showCollisionBoxes.get = function() {
                return !!this._showCollisionBoxes
            }
            ,
            o.showCollisionBoxes.set = function(t) {
                this._showCollisionBoxes !== t && (this._showCollisionBoxes = t,
                t ? this.style._generateCollisionBoxes() : this._update())
            }
            ,
            o.showOverdrawInspector.get = function() {
                return !!this._showOverdrawInspector
            }
            ,
            o.showOverdrawInspector.set = function(t) {
                this._showOverdrawInspector !== t && (this._showOverdrawInspector = t,
                this._update())
            }
            ,
            o.repaint.get = function() {
                return !!this._repaint
            }
            ,
            o.repaint.set = function(t) {
                this._repaint = t,
                this._update()
            }
            ,
            o.vertices.get = function() {
                return !!this._vertices
            }
            ,
            o.vertices.set = function(t) {
                this._vertices = t,
                this._update()
            }
            ,
            Object.defineProperties(n.prototype, o),
            n
        }(wr);
        function Mr(t) {
            t.parentNode && t.parentNode.removeChild(t)
        }
        var Ir = {
            showCompass: !0,
            showZoom: !0
        }
          , zr = function(e) {
            var r = this;
            this.options = t.extend({}, Ir, e),
            this._container = i.create("div", "mapboxgl-ctrl mapboxgl-ctrl-group"),
            this._container.addEventListener("contextmenu", function(t) {
                return t.preventDefault()
            }),
            this.options.showZoom && (this._zoomInButton = this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in", "Zoom in", function() {
                return r._map.zoomIn()
            }),
            this._zoomOutButton = this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out", "Zoom out", function() {
                return r._map.zoomOut()
            })),
            this.options.showCompass && (t.bindAll(["_rotateCompassArrow"], this),
            this._compass = this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass", "Reset bearing to north", function() {
                return r._map.resetNorth()
            }),
            this._compassArrow = i.create("span", "mapboxgl-ctrl-compass-arrow", this._compass))
        };
        function Lr(e, i, r) {
            if (e = new t.LngLat(e.lng,e.lat),
            i) {
                var n = new t.LngLat(e.lng - 360,e.lat)
                  , o = new t.LngLat(e.lng + 360,e.lat)
                  , a = r.locationPoint(e).distSqr(i);
                r.locationPoint(n).distSqr(i) < a ? e = n : r.locationPoint(o).distSqr(i) < a && (e = o)
            }
            for (; Math.abs(e.lng - r.center.lng) > 180; ) {
                var s = r.locationPoint(e);
                if (s.x >= 0 && s.y >= 0 && s.x <= r.width && s.y <= r.height)
                    break;
                e.lng > r.center.lng ? e.lng -= 360 : e.lng += 360
            }
            return e
        }
        zr.prototype._rotateCompassArrow = function() {
            var t = "rotate(" + this._map.transform.angle * (180 / Math.PI) + "deg)";
            this._compassArrow.style.transform = t
        }
        ,
        zr.prototype.onAdd = function(t) {
            return this._map = t,
            this.options.showCompass && (this._map.on("rotate", this._rotateCompassArrow),
            this._rotateCompassArrow(),
            this._handler = new dr(t,{
                button: "left",
                element: this._compass
            }),
            i.addEventListener(this._compass, "mousedown", this._handler.onMouseDown),
            this._handler.enable()),
            this._container
        }
        ,
        zr.prototype.onRemove = function() {
            i.remove(this._container),
            this.options.showCompass && (this._map.off("rotate", this._rotateCompassArrow),
            i.removeEventListener(this._compass, "mousedown", this._handler.onMouseDown),
            this._handler.disable(),
            delete this._handler),
            delete this._map
        }
        ,
        zr.prototype._createButton = function(t, e, r) {
            var n = i.create("button", t, this._container);
            return n.type = "button",
            n.title = e,
            n.setAttribute("aria-label", e),
            n.addEventListener("click", r),
            n
        }
        ;
        var Dr = {
            center: "translate(-50%,-50%)",
            top: "translate(-50%,0)",
            "top-left": "translate(0,0)",
            "top-right": "translate(-100%,0)",
            bottom: "translate(-50%,-100%)",
            "bottom-left": "translate(0,-100%)",
            "bottom-right": "translate(-100%,-100%)",
            left: "translate(0,-50%)",
            right: "translate(-100%,-50%)"
        };
        function Or(t, e, i) {
            var r = t.classList;
            for (var n in Dr)
                r.remove("mapboxgl-" + i + "-anchor-" + n);
            r.add("mapboxgl-" + i + "-anchor-" + e)
        }
        var Rr, Fr = function(e) {
            function r(r) {
                if (e.call(this),
                (arguments[0]instanceof t.window.HTMLElement || 2 === arguments.length) && (r = t.extend({
                    element: r
                }, arguments[1])),
                t.bindAll(["_update", "_onMove", "_onUp", "_addDragHandler", "_onMapClick"], this),
                this._anchor = r && r.anchor || "center",
                this._color = r && r.color || "#3FB1CE",
                this._draggable = r && r.draggable || !1,
                this._state = "inactive",
                r && r.element)
                    this._element = r.element,
                    this._offset = t.Point.convert(r && r.offset || [0, 0]);
                else {
                    this._defaultMarker = !0,
                    this._element = i.create("div");
                    var n = i.createNS("http://www.w3.org/2000/svg", "svg");
                    n.setAttributeNS(null, "height", "41px"),
                    n.setAttributeNS(null, "width", "27px"),
                    n.setAttributeNS(null, "viewBox", "0 0 27 41");
                    var o = i.createNS("http://www.w3.org/2000/svg", "g");
                    o.setAttributeNS(null, "stroke", "none"),
                    o.setAttributeNS(null, "stroke-width", "1"),
                    o.setAttributeNS(null, "fill", "none"),
                    o.setAttributeNS(null, "fill-rule", "evenodd");
                    var a = i.createNS("http://www.w3.org/2000/svg", "g");
                    a.setAttributeNS(null, "fill-rule", "nonzero");
                    var s = i.createNS("http://www.w3.org/2000/svg", "g");
                    s.setAttributeNS(null, "transform", "translate(3.0, 29.0)"),
                    s.setAttributeNS(null, "fill", "#000000");
                    for (var l = 0, u = [{
                        rx: "10.5",
                        ry: "5.25002273"
                    }, {
                        rx: "10.5",
                        ry: "5.25002273"
                    }, {
                        rx: "9.5",
                        ry: "4.77275007"
                    }, {
                        rx: "8.5",
                        ry: "4.29549936"
                    }, {
                        rx: "7.5",
                        ry: "3.81822308"
                    }, {
                        rx: "6.5",
                        ry: "3.34094679"
                    }, {
                        rx: "5.5",
                        ry: "2.86367051"
                    }, {
                        rx: "4.5",
                        ry: "2.38636864"
                    }]; l < u.length; l += 1) {
                        var c = u[l]
                          , p = i.createNS("http://www.w3.org/2000/svg", "ellipse");
                        p.setAttributeNS(null, "opacity", "0.04"),
                        p.setAttributeNS(null, "cx", "10.5"),
                        p.setAttributeNS(null, "cy", "5.80029008"),
                        p.setAttributeNS(null, "rx", c.rx),
                        p.setAttributeNS(null, "ry", c.ry),
                        s.appendChild(p)
                    }
                    var h = i.createNS("http://www.w3.org/2000/svg", "g");
                    h.setAttributeNS(null, "fill", this._color);
                    var d = i.createNS("http://www.w3.org/2000/svg", "path");
                    d.setAttributeNS(null, "d", "M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),
                    h.appendChild(d);
                    var f = i.createNS("http://www.w3.org/2000/svg", "g");
                    f.setAttributeNS(null, "opacity", "0.25"),
                    f.setAttributeNS(null, "fill", "#000000");
                    var m = i.createNS("http://www.w3.org/2000/svg", "path");
                    m.setAttributeNS(null, "d", "M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),
                    f.appendChild(m);
                    var y = i.createNS("http://www.w3.org/2000/svg", "g");
                    y.setAttributeNS(null, "transform", "translate(6.0, 7.0)"),
                    y.setAttributeNS(null, "fill", "#FFFFFF");
                    var g = i.createNS("http://www.w3.org/2000/svg", "g");
                    g.setAttributeNS(null, "transform", "translate(8.0, 8.0)");
                    var _ = i.createNS("http://www.w3.org/2000/svg", "circle");
                    _.setAttributeNS(null, "fill", "#000000"),
                    _.setAttributeNS(null, "opacity", "0.25"),
                    _.setAttributeNS(null, "cx", "5.5"),
                    _.setAttributeNS(null, "cy", "5.5"),
                    _.setAttributeNS(null, "r", "5.4999962");
                    var v = i.createNS("http://www.w3.org/2000/svg", "circle");
                    v.setAttributeNS(null, "fill", "#FFFFFF"),
                    v.setAttributeNS(null, "cx", "5.5"),
                    v.setAttributeNS(null, "cy", "5.5"),
                    v.setAttributeNS(null, "r", "5.4999962"),
                    g.appendChild(_),
                    g.appendChild(v),
                    a.appendChild(s),
                    a.appendChild(h),
                    a.appendChild(f),
                    a.appendChild(y),
                    a.appendChild(g),
                    n.appendChild(a),
                    this._element.appendChild(n),
                    this._offset = t.Point.convert(r && r.offset || [0, -14])
                }
                this._element.classList.add("mapboxgl-marker"),
                this._popup = null
            }
            return e && (r.__proto__ = e),
            r.prototype = Object.create(e && e.prototype),
            r.prototype.constructor = r,
            r.prototype.addTo = function(t) {
                return this.remove(),
                this._map = t,
                t.getCanvasContainer().appendChild(this._element),
                t.on("move", this._update),
                t.on("moveend", this._update),
                this.setDraggable(this._draggable),
                this._update(),
                this._map.on("click", this._onMapClick),
                this
            }
            ,
            r.prototype.remove = function() {
                return this._map && (this._map.off("click", this._onMapClick),
                this._map.off("move", this._update),
                this._map.off("moveend", this._update),
                this._map.off("mousedown", this._addDragHandler),
                this._map.off("touchstart", this._addDragHandler),
                this._map.off("mouseup", this._onUp),
                this._map.off("touchend", this._onUp),
                delete this._map),
                i.remove(this._element),
                this._popup && this._popup.remove(),
                this
            }
            ,
            r.prototype.getLngLat = function() {
                return this._lngLat
            }
            ,
            r.prototype.setLngLat = function(e) {
                return this._lngLat = t.LngLat.convert(e),
                this._pos = null,
                this._popup && this._popup.setLngLat(this._lngLat),
                this._update(),
                this
            }
            ,
            r.prototype.getElement = function() {
                return this._element
            }
            ,
            r.prototype.setPopup = function(t) {
                if (this._popup && (this._popup.remove(),
                this._popup = null),
                t) {
                    if (!("offset"in t.options)) {
                        var e = Math.sqrt(Math.pow(13.5, 2) / 2);
                        t.options.offset = this._defaultMarker ? {
                            top: [0, 0],
                            "top-left": [0, 0],
                            "top-right": [0, 0],
                            bottom: [0, -38.1],
                            "bottom-left": [e, -1 * (24.6 + e)],
                            "bottom-right": [-e, -1 * (24.6 + e)],
                            left: [13.5, -24.6],
                            right: [-13.5, -24.6]
                        } : this._offset
                    }
                    this._popup = t,
                    this._lngLat && this._popup.setLngLat(this._lngLat)
                }
                return this
            }
            ,
            r.prototype._onMapClick = function(t) {
                var e = t.originalEvent.target
                  , i = this._element;
                this._popup && (e === i || i.contains(e)) && this.togglePopup()
            }
            ,
            r.prototype.getPopup = function() {
                return this._popup
            }
            ,
            r.prototype.togglePopup = function() {
                var t = this._popup;
                return t ? (t.isOpen() ? t.remove() : t.addTo(this._map),
                this) : this
            }
            ,
            r.prototype._update = function(t) {
                this._map && (this._map.transform.renderWorldCopies && (this._lngLat = Lr(this._lngLat, this._pos, this._map.transform)),
                this._pos = this._map.project(this._lngLat)._add(this._offset),
                t && "moveend" !== t.type || (this._pos = this._pos.round()),
                i.setTransform(this._element, Dr[this._anchor] + " translate(" + this._pos.x + "px, " + this._pos.y + "px)"),
                Or(this._element, this._anchor, "marker"))
            }
            ,
            r.prototype.getOffset = function() {
                return this._offset
            }
            ,
            r.prototype.setOffset = function(e) {
                return this._offset = t.Point.convert(e),
                this._update(),
                this
            }
            ,
            r.prototype._onMove = function(e) {
                this._pos = e.point.sub(this._positionDelta),
                this._lngLat = this._map.unproject(this._pos),
                this.setLngLat(this._lngLat),
                this._element.style.pointerEvents = "none",
                "pending" === this._state && (this._state = "active",
                this.fire(new t.Event("dragstart"))),
                this.fire(new t.Event("drag"))
            }
            ,
            r.prototype._onUp = function() {
                this._element.style.pointerEvents = "auto",
                this._positionDelta = null,
                this._map.off("mousemove", this._onMove),
                this._map.off("touchmove", this._onMove),
                "active" === this._state && this.fire(new t.Event("dragend")),
                this._state = "inactive"
            }
            ,
            r.prototype._addDragHandler = function(t) {
                this._element.contains(t.originalEvent.target) && (t.preventDefault(),
                this._positionDelta = t.point.sub(this._pos).add(this._offset),
                this._state = "pending",
                this._map.on("mousemove", this._onMove),
                this._map.on("touchmove", this._onMove),
                this._map.once("mouseup", this._onUp),
                this._map.once("touchend", this._onUp))
            }
            ,
            r.prototype.setDraggable = function(t) {
                return this._draggable = !!t,
                this._map && (t ? (this._map.on("mousedown", this._addDragHandler),
                this._map.on("touchstart", this._addDragHandler)) : (this._map.off("mousedown", this._addDragHandler),
                this._map.off("touchstart", this._addDragHandler))),
                this
            }
            ,
            r.prototype.isDraggable = function() {
                return this._draggable
            }
            ,
            r
        }(t.Evented), Br = {
            positionOptions: {
                enableHighAccuracy: !1,
                maximumAge: 0,
                timeout: 6e3
            },
            fitBoundsOptions: {
                maxZoom: 15
            },
            trackUserLocation: !1,
            showUserLocation: !0
        }, Nr = function(e) {
            function r(i) {
                e.call(this),
                this.options = t.extend({}, Br, i),
                t.bindAll(["_onSuccess", "_onError", "_finish", "_setupUI", "_updateCamera", "_updateMarker"], this)
            }
            return e && (r.__proto__ = e),
            r.prototype = Object.create(e && e.prototype),
            r.prototype.constructor = r,
            r.prototype.onAdd = function(e) {
                var r;
                return this._map = e,
                this._container = i.create("div", "mapboxgl-ctrl mapboxgl-ctrl-group"),
                r = this._setupUI,
                void 0 !== Rr ? r(Rr) : void 0 !== t.window.navigator.permissions ? t.window.navigator.permissions.query({
                    name: "geolocation"
                }).then(function(t) {
                    Rr = "denied" !== t.state,
                    r(Rr)
                }) : (Rr = !!t.window.navigator.geolocation,
                r(Rr)),
                this._container
            }
            ,
            r.prototype.onRemove = function() {
                void 0 !== this._geolocationWatchID && (t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),
                this._geolocationWatchID = void 0),
                this.options.showUserLocation && this._userLocationDotMarker && this._userLocationDotMarker.remove(),
                i.remove(this._container),
                this._map = void 0
            }
            ,
            r.prototype._onSuccess = function(e) {
                if (this.options.trackUserLocation)
                    switch (this._lastKnownPosition = e,
                    this._watchState) {
                    case "WAITING_ACTIVE":
                    case "ACTIVE_LOCK":
                    case "ACTIVE_ERROR":
                        this._watchState = "ACTIVE_LOCK",
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");
                        break;
                    case "BACKGROUND":
                    case "BACKGROUND_ERROR":
                        this._watchState = "BACKGROUND",
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")
                    }
                this.options.showUserLocation && "OFF" !== this._watchState && this._updateMarker(e),
                this.options.trackUserLocation && "ACTIVE_LOCK" !== this._watchState || this._updateCamera(e),
                this.options.showUserLocation && this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),
                this.fire(new t.Event("geolocate",e)),
                this._finish()
            }
            ,
            r.prototype._updateCamera = function(e) {
                var i = new t.LngLat(e.coords.longitude,e.coords.latitude)
                  , r = e.coords.accuracy;
                this._map.fitBounds(i.toBounds(r), this.options.fitBoundsOptions, {
                    geolocateSource: !0
                })
            }
            ,
            r.prototype._updateMarker = function(t) {
                t ? this._userLocationDotMarker.setLngLat([t.coords.longitude, t.coords.latitude]).addTo(this._map) : this._userLocationDotMarker.remove()
            }
            ,
            r.prototype._onError = function(e) {
                if (this.options.trackUserLocation)
                    if (1 === e.code)
                        this._watchState = "OFF",
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),
                        void 0 !== this._geolocationWatchID && this._clearWatch();
                    else
                        switch (this._watchState) {
                        case "WAITING_ACTIVE":
                            this._watchState = "ACTIVE_ERROR",
                            this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),
                            this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
                            break;
                        case "ACTIVE_LOCK":
                            this._watchState = "ACTIVE_ERROR",
                            this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),
                            this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),
                            this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
                            break;
                        case "BACKGROUND":
                            this._watchState = "BACKGROUND_ERROR",
                            this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),
                            this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),
                            this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")
                        }
                "OFF" !== this._watchState && this.options.showUserLocation && this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),
                this.fire(new t.Event("error",e)),
                this._finish()
            }
            ,
            r.prototype._finish = function() {
                this._timeoutId && clearTimeout(this._timeoutId),
                this._timeoutId = void 0
            }
            ,
            r.prototype._setupUI = function(e) {
                var r = this;
                !1 !== e ? (this._container.addEventListener("contextmenu", function(t) {
                    return t.preventDefault()
                }),
                this._geolocateButton = i.create("button", "mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate", this._container),
                this._geolocateButton.type = "button",
                this._geolocateButton.setAttribute("aria-label", "Geolocate"),
                this.options.trackUserLocation && (this._geolocateButton.setAttribute("aria-pressed", "false"),
                this._watchState = "OFF"),
                this.options.showUserLocation && (this._dotElement = i.create("div", "mapboxgl-user-location-dot"),
                this._userLocationDotMarker = new Fr(this._dotElement),
                this.options.trackUserLocation && (this._watchState = "OFF")),
                this._geolocateButton.addEventListener("click", this.trigger.bind(this)),
                this._setup = !0,
                this.options.trackUserLocation && this._map.on("movestart", function(e) {
                    e.geolocateSource || "ACTIVE_LOCK" !== r._watchState || (r._watchState = "BACKGROUND",
                    r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),
                    r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),
                    r.fire(new t.Event("trackuserlocationend")))
                })) : t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")
            }
            ,
            r.prototype.trigger = function() {
                if (!this._setup)
                    return t.warnOnce("Geolocate control triggered before added to a map"),
                    !1;
                if (this.options.trackUserLocation) {
                    switch (this._watchState) {
                    case "OFF":
                        this._watchState = "WAITING_ACTIVE",
                        this.fire(new t.Event("trackuserlocationstart"));
                        break;
                    case "WAITING_ACTIVE":
                    case "ACTIVE_LOCK":
                    case "ACTIVE_ERROR":
                    case "BACKGROUND_ERROR":
                        this._watchState = "OFF",
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),
                        this.fire(new t.Event("trackuserlocationend"));
                        break;
                    case "BACKGROUND":
                        this._watchState = "ACTIVE_LOCK",
                        this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),
                        this._lastKnownPosition && this._updateCamera(this._lastKnownPosition),
                        this.fire(new t.Event("trackuserlocationstart"))
                    }
                    switch (this._watchState) {
                    case "WAITING_ACTIVE":
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");
                        break;
                    case "ACTIVE_LOCK":
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");
                        break;
                    case "ACTIVE_ERROR":
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
                        break;
                    case "BACKGROUND":
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");
                        break;
                    case "BACKGROUND_ERROR":
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),
                        this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")
                    }
                    "OFF" === this._watchState && void 0 !== this._geolocationWatchID ? this._clearWatch() : void 0 === this._geolocationWatchID && (this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),
                    this._geolocateButton.setAttribute("aria-pressed", "true"),
                    this._geolocationWatchID = t.window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, this.options.positionOptions))
                } else
                    t.window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, this.options.positionOptions),
                    this._timeoutId = setTimeout(this._finish, 1e4);
                return !0
            }
            ,
            r.prototype._clearWatch = function() {
                t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),
                this._geolocationWatchID = void 0,
                this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),
                this._geolocateButton.setAttribute("aria-pressed", "false"),
                this.options.showUserLocation && this._updateMarker(null)
            }
            ,
            r
        }(t.Evented), Ur = {
            maxWidth: 100,
            unit: "metric"
        }, Vr = function(e) {
            this.options = t.extend({}, Ur, e),
            t.bindAll(["_onMove", "setUnit"], this)
        };
        function jr(t, e, i) {
            var r, n, o, a, s, l, u = i && i.maxWidth || 100, c = t._container.clientHeight / 2, p = (r = t.unproject([0, c]),
            n = t.unproject([u, c]),
            o = Math.PI / 180,
            a = r.lat * o,
            s = n.lat * o,
            l = Math.sin(a) * Math.sin(s) + Math.cos(a) * Math.cos(s) * Math.cos((n.lng - r.lng) * o),
            6371e3 * Math.acos(Math.min(l, 1)));
            if (i && "imperial" === i.unit) {
                var h = 3.2808 * p;
                h > 5280 ? $r(e, u, h / 5280, "mi") : $r(e, u, h, "ft")
            } else
                i && "nautical" === i.unit ? $r(e, u, p / 1852, "nm") : $r(e, u, p, "m")
        }
        function $r(t, e, i, r) {
            var n, o, a, s = (n = i,
            (o = Math.pow(10, ("" + Math.floor(n)).length - 1)) * (a = (a = n / o) >= 10 ? 10 : a >= 5 ? 5 : a >= 3 ? 3 : a >= 2 ? 2 : a >= 1 ? 1 : function(t) {
                var e = Math.pow(10, Math.ceil(-Math.log(t) / Math.LN10));
                return Math.round(t * e) / e
            }(a))), l = s / i;
            "m" === r && s >= 1e3 && (s /= 1e3,
            r = "km"),
            t.style.width = e * l + "px",
            t.innerHTML = s + r
        }
        Vr.prototype.getDefaultPosition = function() {
            return "bottom-left"
        }
        ,
        Vr.prototype._onMove = function() {
            jr(this._map, this._container, this.options)
        }
        ,
        Vr.prototype.onAdd = function(t) {
            return this._map = t,
            this._container = i.create("div", "mapboxgl-ctrl mapboxgl-ctrl-scale", t.getContainer()),
            this._map.on("move", this._onMove),
            this._onMove(),
            this._container
        }
        ,
        Vr.prototype.onRemove = function() {
            i.remove(this._container),
            this._map.off("move", this._onMove),
            this._map = void 0
        }
        ,
        Vr.prototype.setUnit = function(t) {
            this.options.unit = t,
            jr(this._map, this._container, this.options)
        }
        ;
        var qr = function() {
            this._fullscreen = !1,
            t.bindAll(["_onClickFullscreen", "_changeIcon"], this),
            "onfullscreenchange"in t.window.document ? this._fullscreenchange = "fullscreenchange" : "onmozfullscreenchange"in t.window.document ? this._fullscreenchange = "mozfullscreenchange" : "onwebkitfullscreenchange"in t.window.document ? this._fullscreenchange = "webkitfullscreenchange" : "onmsfullscreenchange"in t.window.document && (this._fullscreenchange = "MSFullscreenChange"),
            this._className = "mapboxgl-ctrl"
        };
        qr.prototype.onAdd = function(e) {
            return this._map = e,
            this._mapContainer = this._map.getContainer(),
            this._container = i.create("div", this._className + " mapboxgl-ctrl-group"),
            this._checkFullscreenSupport() ? this._setupUI() : (this._container.style.display = "none",
            t.warnOnce("This device does not support fullscreen mode.")),
            this._container
        }
        ,
        qr.prototype.onRemove = function() {
            i.remove(this._container),
            this._map = null,
            t.window.document.removeEventListener(this._fullscreenchange, this._changeIcon)
        }
        ,
        qr.prototype._checkFullscreenSupport = function() {
            return !!(t.window.document.fullscreenEnabled || t.window.document.mozFullScreenEnabled || t.window.document.msFullscreenEnabled || t.window.document.webkitFullscreenEnabled)
        }
        ,
        qr.prototype._setupUI = function() {
            var e = this._fullscreenButton = i.create("button", this._className + "-icon " + this._className + "-fullscreen", this._container);
            e.setAttribute("aria-label", "Toggle fullscreen"),
            e.type = "button",
            this._fullscreenButton.addEventListener("click", this._onClickFullscreen),
            t.window.document.addEventListener(this._fullscreenchange, this._changeIcon)
        }
        ,
        qr.prototype._isFullscreen = function() {
            return this._fullscreen
        }
        ,
        qr.prototype._changeIcon = function() {
            (t.window.document.fullscreenElement || t.window.document.mozFullScreenElement || t.window.document.webkitFullscreenElement || t.window.document.msFullscreenElement) === this._mapContainer !== this._fullscreen && (this._fullscreen = !this._fullscreen,
            this._fullscreenButton.classList.toggle(this._className + "-shrink"),
            this._fullscreenButton.classList.toggle(this._className + "-fullscreen"))
        }
        ,
        qr.prototype._onClickFullscreen = function() {
            this._isFullscreen() ? t.window.document.exitFullscreen ? t.window.document.exitFullscreen() : t.window.document.mozCancelFullScreen ? t.window.document.mozCancelFullScreen() : t.window.document.msExitFullscreen ? t.window.document.msExitFullscreen() : t.window.document.webkitCancelFullScreen && t.window.document.webkitCancelFullScreen() : this._mapContainer.requestFullscreen ? this._mapContainer.requestFullscreen() : this._mapContainer.mozRequestFullScreen ? this._mapContainer.mozRequestFullScreen() : this._mapContainer.msRequestFullscreen ? this._mapContainer.msRequestFullscreen() : this._mapContainer.webkitRequestFullscreen && this._mapContainer.webkitRequestFullscreen()
        }
        ;
        var Wr = {
            closeButton: !0,
            closeOnClick: !0,
            className: ""
        }
          , Hr = function(e) {
            function r(i) {
                e.call(this),
                this.options = t.extend(Object.create(Wr), i),
                t.bindAll(["_update", "_onClickClose"], this)
            }
            return e && (r.__proto__ = e),
            r.prototype = Object.create(e && e.prototype),
            r.prototype.constructor = r,
            r.prototype.addTo = function(e) {
                return this._map = e,
                this._map.on("move", this._update),
                this.options.closeOnClick && this._map.on("click", this._onClickClose),
                this._update(),
                this.fire(new t.Event("open")),
                this
            }
            ,
            r.prototype.isOpen = function() {
                return !!this._map
            }
            ,
            r.prototype.remove = function() {
                return this._content && i.remove(this._content),
                this._container && (i.remove(this._container),
                delete this._container),
                this._map && (this._map.off("move", this._update),
                this._map.off("click", this._onClickClose),
                delete this._map),
                this.fire(new t.Event("close")),
                this
            }
            ,
            r.prototype.getLngLat = function() {
                return this._lngLat
            }
            ,
            r.prototype.setLngLat = function(e) {
                return this._lngLat = t.LngLat.convert(e),
                this._pos = null,
                this._update(),
                this
            }
            ,
            r.prototype.setText = function(e) {
                return this.setDOMContent(t.window.document.createTextNode(e))
            }
            ,
            r.prototype.setHTML = function(e) {
                var i, r = t.window.document.createDocumentFragment(), n = t.window.document.createElement("body");
                for (n.innerHTML = e; i = n.firstChild; )
                    r.appendChild(i);
                return this.setDOMContent(r)
            }
            ,
            r.prototype.setDOMContent = function(t) {
                return this._createContent(),
                this._content.appendChild(t),
                this._update(),
                this
            }
            ,
            r.prototype._createContent = function() {
                this._content && i.remove(this._content),
                this._content = i.create("div", "mapboxgl-popup-content", this._container),
                this.options.closeButton && (this._closeButton = i.create("button", "mapboxgl-popup-close-button", this._content),
                this._closeButton.type = "button",
                this._closeButton.setAttribute("aria-label", "Close popup"),
                this._closeButton.innerHTML = "&#215;",
                this._closeButton.addEventListener("click", this._onClickClose))
            }
            ,
            r.prototype._update = function() {
                var e = this;
                if (this._map && this._lngLat && this._content) {
                    this._container || (this._container = i.create("div", "mapboxgl-popup", this._map.getContainer()),
                    this._tip = i.create("div", "mapboxgl-popup-tip", this._container),
                    this._container.appendChild(this._content),
                    this.options.className && this.options.className.split(" ").forEach(function(t) {
                        return e._container.classList.add(t)
                    })),
                    this._map.transform.renderWorldCopies && (this._lngLat = Lr(this._lngLat, this._pos, this._map.transform));
                    var r = this._pos = this._map.project(this._lngLat)
                      , n = this.options.anchor
                      , o = function e(i) {
                        if (i) {
                            if ("number" == typeof i) {
                                var r = Math.round(Math.sqrt(.5 * Math.pow(i, 2)));
                                return {
                                    center: new t.Point(0,0),
                                    top: new t.Point(0,i),
                                    "top-left": new t.Point(r,r),
                                    "top-right": new t.Point(-r,r),
                                    bottom: new t.Point(0,-i),
                                    "bottom-left": new t.Point(r,-r),
                                    "bottom-right": new t.Point(-r,-r),
                                    left: new t.Point(i,0),
                                    right: new t.Point(-i,0)
                                }
                            }
                            if (i instanceof t.Point || Array.isArray(i)) {
                                var n = t.Point.convert(i);
                                return {
                                    center: n,
                                    top: n,
                                    "top-left": n,
                                    "top-right": n,
                                    bottom: n,
                                    "bottom-left": n,
                                    "bottom-right": n,
                                    left: n,
                                    right: n
                                }
                            }
                            return {
                                center: t.Point.convert(i.center || [0, 0]),
                                top: t.Point.convert(i.top || [0, 0]),
                                "top-left": t.Point.convert(i["top-left"] || [0, 0]),
                                "top-right": t.Point.convert(i["top-right"] || [0, 0]),
                                bottom: t.Point.convert(i.bottom || [0, 0]),
                                "bottom-left": t.Point.convert(i["bottom-left"] || [0, 0]),
                                "bottom-right": t.Point.convert(i["bottom-right"] || [0, 0]),
                                left: t.Point.convert(i.left || [0, 0]),
                                right: t.Point.convert(i.right || [0, 0])
                            }
                        }
                        return e(new t.Point(0,0))
                    }(this.options.offset);
                    if (!n) {
                        var a, s = this._container.offsetWidth, l = this._container.offsetHeight;
                        a = r.y + o.bottom.y < l ? ["top"] : r.y > this._map.transform.height - l ? ["bottom"] : [],
                        r.x < s / 2 ? a.push("left") : r.x > this._map.transform.width - s / 2 && a.push("right"),
                        n = 0 === a.length ? "bottom" : a.join("-")
                    }
                    var u = r.add(o[n]).round();
                    i.setTransform(this._container, Dr[n] + " translate(" + u.x + "px," + u.y + "px)"),
                    Or(this._container, n, "popup")
                }
            }
            ,
            r.prototype._onClickClose = function() {
                this.remove()
            }
            ,
            r
        }(t.Evented)
          , Xr = {
            version: t.version,
            supported: e,
            setRTLTextPlugin: t.setRTLTextPlugin,
            Map: Pr,
            NavigationControl: zr,
            GeolocateControl: Nr,
            AttributionControl: Tr,
            ScaleControl: Vr,
            FullscreenControl: qr,
            Popup: Hr,
            Marker: Fr,
            Style: ze,
            LngLat: t.LngLat,
            LngLatBounds: t.LngLatBounds,
            Point: t.Point,
            MercatorCoordinate: t.MercatorCoordinate,
            Evented: t.Evented,
            config: t.config,
            get accessToken() {
                return t.config.ACCESS_TOKEN
            },
            set accessToken(e) {
                t.config.ACCESS_TOKEN = e
            },
            get workerCount() {
                return It.workerCount
            },
            set workerCount(t) {
                It.workerCount = t
            },
            get maxParallelImageRequests() {
                return t.config.MAX_PARALLEL_IMAGE_REQUESTS
            },
            set maxParallelImageRequests(e) {
                t.config.MAX_PARALLEL_IMAGE_REQUESTS = e
            },
            workerUrl: ""
        };
        return Xr
    }),
    i
}),
$(document).ready(function() {
    initMouseEvents()
});
const getMousePos = t => {
    let e = 0
      , i = 0;
    return t || (t = window.event),
    t.pageX || t.pageY ? (e = t.pageX,
    i = t.pageY) : (t.clientX || t.clientY) && (e = t.clientX + document.body.scrollLeft + document.documentElement.scrollLeft,
    i = t.clientY + document.body.scrollTop + document.documentElement.scrollTop),
    {
        x: e,
        y: i
    }
}
;
let winsize;
const calcWinsize = () => winsize = {
    width: window.innerWidth,
    height: window.innerHeight
};
calcWinsize(),
window.addEventListener("resize", calcWinsize, !0);
let allowTilt = !(winsize.width <= 960);
class Slide {
    constructor(t) {
        this.DOM = {
            el: t
        },
        this.DOM.header = document.querySelector("#masthead > div"),
        this.DOM.figWrap = this.DOM.el.querySelector(".slide_fig-wrap"),
        this.DOM.imgWrap = this.DOM.el.querySelector(".slide_img-wrap"),
        this.DOM.img = this.DOM.imgWrap.querySelector(".slide_img"),
        this.DOM.texts = {
            wrap: this.DOM.el.querySelector(".slide_title-wrap"),
            title: this.DOM.el.querySelector(".slide_title"),
            subtitle: this.DOM.el.querySelector(".slide_subtitle")
        },
        this.calcSizes(),
        this.calcTransforms(),
        this.initEvents()
    }
    calcSizes() {
        this.width = this.DOM.imgWrap.offsetWidth,
        this.height = this.DOM.imgWrap.offsetHeight,
        this.headerHeight = this.DOM.header.offsetHeight
    }
    calcTransforms() {
        var t = winsize.width / 2
          , e = winsize.height / 2 + this.height
          , i = winsize.width <= 1150 ? winsize.height : this.DOM.figWrap.offsetHeight
          , r = winsize.width <= 1150 ? winsize.height : this.height + this.headerHeight;
        this.transforms = [{
            x: -1 * t,
            y: e,
            rotation: 30
        }, {
            x: -1 * t,
            y: i,
            rotation: 0
        }, {
            x: 0,
            y: 0,
            rotation: 0
        }, {
            x: t,
            y: -1 * r,
            rotation: 0
        }, {
            x: t,
            y: -1 * e,
            rotation: -30
        }]
    }
    initEvents() {
        this.mouseenterFn = ( () => {
            this.isPositionedCenter() && allowTilt && (clearTimeout(this.mousetime),
            this.mousetime = setTimeout( () => {
                TweenMax.to(this.DOM.img, .8, {
                    ease: Power3.easeOut,
                    scale: 1.1
                })
            }
            , 40))
        }
        ),
        this.mousemoveFn = (t => requestAnimationFrame( () => {
            allowTilt && this.isPositionedCenter() && this.tilt(t)
        }
        )),
        this.mouseleaveFn = (t => requestAnimationFrame( () => {
            allowTilt && this.isPositionedCenter() && (clearTimeout(this.mousetime),
            TweenMax.to([this.DOM.imgWrap, this.DOM.texts.wrap], 1.8, {
                ease: "Power4.easeOut",
                x: 0,
                y: 0,
                rotationX: 0,
                rotationY: 0
            }),
            TweenMax.to(this.DOM.img, 1.8, {
                ease: "Power4.easeOut",
                scale: 1
            }))
        }
        )),
        this.resizeFn = ( () => {
            this.calcSizes(),
            this.calcTransforms()
        }
        ),
        this.DOM.imgWrap.addEventListener("mouseenter", this.mouseenterFn, !0),
        this.DOM.imgWrap.addEventListener("mousemove", this.mousemoveFn, !0),
        this.DOM.imgWrap.addEventListener("mouseleave", this.mouseleaveFn, !0),
        $(window).on("resize.slideResize", this.resizeFn)
    }
    removeEvents() {
        this.DOM.imgWrap.removeEventListener("mouseenter", this.mouseenterFn),
        this.DOM.imgWrap.removeEventListener("mousemove", this.mousemoveFn),
        this.DOM.imgWrap.removeEventListener("mouseleave", this.mouseleaveFn),
        TweenMax.set([this.DOM.imgWrap, this.DOM.texts.wrap], {
            clearProps: "all"
        }),
        TweenMax.set(this.DOM.img, {
            clearProps: "transform"
        }),
        this.reset(),
        $(window).off("resize.slideResize")
    }
    tilt(t) {
        const e = getMousePos(t)
          , i = document.body.scrollLeft + document.documentElement.scrollLeft
          , r = document.body.scrollTop + document.documentElement.scrollTop
          , n = this.DOM.imgWrap.getBoundingClientRect()
          , o = e.x - n.left - i
          , a = e.y - n.top - r;
        let s = [-20, 20]
          , l = [-20, 20]
          , u = [-15, 15]
          , c = [-15, 15];
        const p = {
            translation: {
                x: (s[1] - s[0]) / n.width * o + s[0],
                y: (l[1] - l[0]) / n.height * a + l[0]
            },
            rotation: {
                x: (u[1] - u[0]) / n.height * a + u[0],
                y: (c[1] - c[0]) / n.width * o + c[0]
            }
        };
        TweenMax.to(this.DOM.imgWrap, 1.5, {
            ease: "Power1.easeOut",
            x: p.translation.x,
            y: p.translation.y,
            rotationX: p.rotation.x,
            rotationY: p.rotation.y
        }),
        TweenMax.to(this.DOM.texts.wrap, 1.5, {
            ease: "Power1.easeOut",
            x: -1 * p.translation.x,
            y: -1 * p.translation.y
        })
    }
    position(t) {
        TweenMax.set(this.DOM.imgWrap, {
            x: this.transforms[t].x,
            y: this.transforms[t].y,
            rotationX: 0,
            rotationY: 0,
            opacity: 1,
            rotationZ: this.transforms[t].rotation
        })
    }
    setCurrent() {
        this.isCurrent = !0,
        this.DOM.el.classList.add("slide-current", "slide-visible"),
        this.position(2)
    }
    setLeft() {
        this.isRight = this.isCurrent = !1,
        this.isLeft = !0,
        this.DOM.el.classList.add("slide-visible", "slide-left"),
        this.position(1)
    }
    setRight() {
        this.isLeft = this.isCurrent = !1,
        this.isRight = !0,
        this.DOM.el.classList.add("slide-visible", "slide-right"),
        this.position(3)
    }
    isPositionedRight() {
        return this.isRight
    }
    isPositionedLeft() {
        return this.isLeft
    }
    isPositionedCenter() {
        return this.isCurrent
    }
    reset() {
        this.isRight = this.isLeft = this.isCurrent = !1,
        this.DOM.el.classList.remove("slide-current", "slide-visible", "slide-left", "slide-right")
    }
    hide() {
        TweenMax.set(this.DOM.imgWrap, {
            x: 0,
            y: 0,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            opacity: 0
        })
    }
    moveToPosition(t) {
        return new Promise( (e, i) => {
            TweenMax.to(this.DOM.imgWrap, .8, {
                ease: Power4.easeInOut,
                delay: t.delay || 0,
                startAt: void 0 !== t.from ? {
                    x: this.transforms[t.from + 2].x,
                    y: this.transforms[t.from + 2].y,
                    rotationX: 0,
                    rotationY: 0,
                    rotationZ: this.transforms[t.from + 2].rotation
                } : {},
                x: this.transforms[t.position + 2].x,
                y: this.transforms[t.position + 2].y,
                rotationX: 0,
                rotationY: 0,
                rotationZ: this.transforms[t.position + 2].rotation,
                onStart: void 0 !== t.from ? () => TweenMax.set(this.DOM.imgWrap, {
                    opacity: 1
                }) : null,
                onComplete: e
            })
        }
        )
    }
    hideTexts() {
        TweenMax.to(this.DOM.texts.wrap, 1, {
            opacity: 0
        })
    }
    showTexts() {
        TweenMax.to(this.DOM.texts.wrap, 1, {
            delay: 1,
            ease: Elastic.easeOut.config(1, .5),
            startAt: {
                x: "-10%",
                opacity: 0
            },
            x: "0%",
            opacity: 1
        })
    }
}
class Slideshow {
    constructor(t) {
        if (this.DOM = {
            el: t
        },
        this.categories = this.DOM.el.querySelector(".categories_filter"),
        this.categoriesItems = $(".categories_filter a"),
        this.navItems = $(".slideshow .nav"),
        this.slides = [],
        Array.from(this.DOM.el.querySelectorAll(".slide:not(.hidden)")).forEach(t => this.slides.push(new Slide(t))),
        this.slidesTotal = this.slides.length,
        1 == this.slidesTotal)
            return this.currentSlide = this.slides[0],
            this.currentSlide.setCurrent(),
            this.currentSlide.showTexts(!0),
            !1;
        this.current = 0,
        this.DOM.deco = this.DOM.el.querySelector(".slideshow_deco"),
        this.render(),
        this.currentSlide.showTexts(!1),
        this.initEvents(),
        $(this.DOM.el).addClass("slideshow-initialized")
    }
    render() {
        this.currentSlide = this.slides[this.current],
        this.nextSlide = this.slides[this.current + 1 <= this.slidesTotal - 1 ? this.current + 1 : 0],
        this.prevSlide = this.slides[this.current - 1 >= 0 ? this.current - 1 : this.slidesTotal - 1],
        this.currentSlide.setCurrent(),
        this.nextSlide.setRight(),
        this.prevSlide.setLeft()
    }
    initEvents() {
        var t = this;
        this.clickFn = (t => {
            t.isPositionedRight() ? this.navigate("next") : t.isPositionedLeft() && this.navigate("prev")
        }
        ),
        this.categoryClickFn = (t => {
            var e = this;
            TweenLite.to(".slide", 1, {
                y: 80,
                autoAlpha: 0,
                ease: Power2.easeOut,
                onComplete: function() {
                    e.destroy(),
                    e.categories.querySelector(".active").classList.remove("active"),
                    t.classList.add("active"),
                    $(".slide").addClass("hidden"),
                    $(".slide.category-" + t.id).removeClass("hidden"),
                    new Slideshow(document.querySelector(".slideshow")),
                    TweenLite.to(".slide.category-" + t.id, 1, {
                        y: 0,
                        autoAlpha: 1,
                        ease: Power2.easeOut,
                        onComplete: function() {}
                    })
                }
            })
        }
        );
        for (let t of this.slides)
            t.DOM.imgWrap.addEventListener("click", () => this.clickFn(t), !0);
        $(t.categoriesItems).on("click.catFilter", function(e) {
            t.categoryClickFn(e.target)
        }),
        $(t.navItems).on("click.navClick", function(t) {
            $(this).hasClass("nav-prev") && $(".slide-left .slide_img-wrap").trigger("click"),
            $(this).hasClass("nav-next") && $(".slide-right .slide_img-wrap").trigger("click")
        }),
        this.resizeFn = ( () => {
            if (this.nextSlide.setRight(),
            this.prevSlide.setLeft(),
            this.currentSlide.setCurrent(),
            $(this.categories).length > 0) {
                var t = $(".slide:eq(0) > div").height() + 100;
                $(this.categories).css("margin-top", -t + "px")
            }
        }
        ),
        $(window).on("resize.showResize", this.resizeFn)
    }
    destroy() {
        $(window).off("resize.showResize");
        for (let t of this.slides)
            t.removeEvents();
        $(this.categoriesItems).off("click.catFilter"),
        $(this.navItems).off("click.navClick"),
        $(this.categories).css("margin-top", "0px"),
        $(this.DOM.el).removeClass("slideshow-initialized")
    }
    bounceDeco(t, e) {
        TweenMax.to(this.DOM.deco, .4, {
            ease: "Power2.easeIn",
            delay: e + .2 * e,
            marginLeft: "next" === t ? 40 : -40,
            marginTop: "next" === t ? 40 : -40,
            onComplete: () => {
                TweenMax.to(this.DOM.deco, .6, {
                    ease: "Power2.easeOut",
                    marginLeft: 0,
                    marginTop: 0
                })
            }
        })
    }
    navigate(t) {
        if (this.isAnimating)
            return;
        this.isAnimating = !0,
        allowTilt = !1;
        const e = "next" === t ? this.current < this.slidesTotal - 2 ? this.current + 2 : Math.abs(this.slidesTotal - 2 - this.current) : this.current >= 2 ? this.current - 2 : Math.abs(this.slidesTotal - 2 + this.current);
        this.upcomingSlide = this.slides[e],
        this.current = "next" === t ? this.current < this.slidesTotal - 1 ? this.current + 1 : 0 : this.current > 0 ? this.current - 1 : this.slidesTotal - 1,
        this.prevSlide.moveToPosition({
            position: "next" === t ? -2 : 0,
            delay: "next" === t ? 0 : .14
        }).then( () => {
            "next" === t && this.prevSlide.hide()
        }
        ),
        this.currentSlide.moveToPosition({
            position: "next" === t ? -1 : 1,
            delay: .07
        }),
        this.currentSlide.hideTexts(),
        this.bounceDeco(t, .07),
        this.nextSlide.moveToPosition({
            position: "next" === t ? 0 : 2,
            delay: "next" === t ? .14 : 0
        }).then( () => {
            "prev" === t && this.nextSlide.hide()
        }
        ),
        "next" === t ? this.nextSlide.showTexts() : this.prevSlide.showTexts(),
        this.upcomingSlide.moveToPosition({
            position: "next" === t ? 1 : -1,
            from: "next" === t ? 2 : -2,
            delay: .21
        }).then( () => {
            [this.nextSlide, this.currentSlide, this.prevSlide].forEach(t => t.reset()),
            this.render(),
            allowTilt = !0,
            this.isAnimating = !1
        }
        )
    }
}
function initNewsSlider() {
    if ($(".slideshow").length > 0) {
        let t;
        const e = function() {
            $("body").innerWidth() > 960 ? $(".slideshow").hasClass("slideshow-initialized") || ($(".categories_filter a").off("click.mobileCatFilter"),
            $(".slick-news").hasClass("slick-initialized") && $(".slick-news").slick("unslick"),
            t = new Slideshow(document.querySelector(".slideshow")),
            document.querySelector(".categories_filter a.active") && document.querySelector(".categories_filter a.active").click()) : $(".slick-news").hasClass("slick-initialized") || (t && t.destroy(),
            $(".slick-news").slick({
                dots: !1,
                slidesToShow: 1,
                slidesToScroll: 1,
                arrows: !1,
                cursors: !1,
                infinite: !0,
                centerMode: !0,
                adaptiveHeight: !1,
                autoplay: !0,
                autoplaySpeed: 8e3
            }),
            $(".categories_filter a.active").length > 0 && $(".slick-news").slick("slickFilter", ".category-" + $(".categories_filter a.active").attr("id")),
            $(".categories_filter a").on("click.mobileCatFilter", function(t) {
                const e = this.id;
                $(".categories_filter a.active").removeClass("active"),
                $(this).addClass("active"),
                $(".slick-news").slick("slickUnfilter"),
                "all" != e && $(".slick-news").slick("slickFilter", ".category-" + e)
            }))
        };
        e(),
        $(window).resize(function(t) {
            e()
        })
    }
}
function initApplyForm() {
    var t = document.getElementById("applyForm");
    new stepsForm(t,{
        onSubmit: function(e) {
            $(".wpcf7-submit").trigger("click"),
            $(t.querySelector(".simform-inner")).addClass("hide");
            var i = t.querySelectorAll(".final-message");
            Array.from(i).forEach(function(t) {
                t.innerHTML = "Thank you! We'll be in touch."
            }),
            $(i).parent().addClass("show")
        }
    })
}
function isValidEmailAddress(t) {
    return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(t)
}
!function(t) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery"], t) : "undefined" != typeof exports ? module.exports = t(require("jquery")) : t(jQuery)
}(function(t) {
    "use strict";
    var e = window.Slick || {};
    (e = function() {
        var e = 0;
        return function(i, r) {
            var n, o = this;
            o.defaults = {
                accessibility: !0,
                adaptiveHeight: !1,
                appendArrows: t(i),
                appendDots: t(i),
                arrows: !0,
                asNavFor: null,
                prevArrow: '<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',
                nextArrow: '<button class="slick-next" aria-label="Next" type="button">Next</button>',
                autoplay: !1,
                autoplaySpeed: 3e3,
                centerMode: !1,
                centerPadding: "50px",
                cssEase: "ease",
                customPaging: function(e, i) {
                    return t('<button type="button" />').text(i + 1)
                },
                dots: !1,
                dotsClass: "slick-dots",
                draggable: !0,
                easing: "linear",
                edgeFriction: .35,
                fade: !1,
                focusOnSelect: !1,
                focusOnChange: !1,
                infinite: !0,
                initialSlide: 0,
                lazyLoad: "ondemand",
                mobileFirst: !1,
                pauseOnHover: !0,
                pauseOnFocus: !0,
                pauseOnDotsHover: !1,
                respondTo: "window",
                responsive: null,
                rows: 1,
                rtl: !1,
                slide: "",
                slidesPerRow: 1,
                slidesToShow: 1,
                slidesToScroll: 1,
                speed: 500,
                swipe: !0,
                swipeToSlide: !1,
                touchMove: !0,
                touchThreshold: 5,
                useCSS: !0,
                useTransform: !0,
                variableWidth: !1,
                vertical: !1,
                verticalSwiping: !1,
                waitForAnimate: !0,
                zIndex: 1e3
            },
            o.initials = {
                animating: !1,
                dragging: !1,
                autoPlayTimer: null,
                currentDirection: 0,
                currentLeft: null,
                currentSlide: 0,
                direction: 1,
                $dots: null,
                listWidth: null,
                listHeight: null,
                loadIndex: 0,
                $nextArrow: null,
                $prevArrow: null,
                scrolling: !1,
                slideCount: null,
                slideWidth: null,
                $slideTrack: null,
                $slides: null,
                sliding: !1,
                slideOffset: 0,
                swipeLeft: null,
                swiping: !1,
                $list: null,
                touchObject: {},
                transformsEnabled: !1,
                unslicked: !1
            },
            t.extend(o, o.initials),
            o.activeBreakpoint = null,
            o.animType = null,
            o.animProp = null,
            o.breakpoints = [],
            o.breakpointSettings = [],
            o.cssTransitions = !1,
            o.focussed = !1,
            o.interrupted = !1,
            o.hidden = "hidden",
            o.paused = !0,
            o.positionProp = null,
            o.respondTo = null,
            o.rowCount = 1,
            o.shouldClick = !0,
            o.$slider = t(i),
            o.$slidesCache = null,
            o.transformType = null,
            o.transitionType = null,
            o.visibilityChange = "visibilitychange",
            o.windowWidth = 0,
            o.windowTimer = null,
            n = t(i).data("slick") || {},
            o.options = t.extend({}, o.defaults, r, n),
            o.currentSlide = o.options.initialSlide,
            o.originalSettings = o.options,
            void 0 !== document.mozHidden ? (o.hidden = "mozHidden",
            o.visibilityChange = "mozvisibilitychange") : void 0 !== document.webkitHidden && (o.hidden = "webkitHidden",
            o.visibilityChange = "webkitvisibilitychange"),
            o.autoPlay = t.proxy(o.autoPlay, o),
            o.autoPlayClear = t.proxy(o.autoPlayClear, o),
            o.autoPlayIterator = t.proxy(o.autoPlayIterator, o),
            o.changeSlide = t.proxy(o.changeSlide, o),
            o.clickHandler = t.proxy(o.clickHandler, o),
            o.selectHandler = t.proxy(o.selectHandler, o),
            o.setPosition = t.proxy(o.setPosition, o),
            o.swipeHandler = t.proxy(o.swipeHandler, o),
            o.dragHandler = t.proxy(o.dragHandler, o),
            o.keyHandler = t.proxy(o.keyHandler, o),
            o.instanceUid = e++,
            o.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/,
            o.registerBreakpoints(),
            o.init(!0)
        }
    }()).prototype.activateADA = function() {
        this.$slideTrack.find(".slick-active").attr({
            "aria-hidden": "false"
        }).find("a, input, button, select").attr({
            tabindex: "0"
        })
    }
    ,
    e.prototype.addSlide = e.prototype.slickAdd = function(e, i, r) {
        var n = this;
        if ("boolean" == typeof i)
            r = i,
            i = null;
        else if (i < 0 || i >= n.slideCount)
            return !1;
        n.unload(),
        "number" == typeof i ? 0 === i && 0 === n.$slides.length ? t(e).appendTo(n.$slideTrack) : r ? t(e).insertBefore(n.$slides.eq(i)) : t(e).insertAfter(n.$slides.eq(i)) : !0 === r ? t(e).prependTo(n.$slideTrack) : t(e).appendTo(n.$slideTrack),
        n.$slides = n.$slideTrack.children(this.options.slide),
        n.$slideTrack.children(this.options.slide).detach(),
        n.$slideTrack.append(n.$slides),
        n.$slides.each(function(e, i) {
            t(i).attr("data-slick-index", e)
        }),
        n.$slidesCache = n.$slides,
        n.reinit()
    }
    ,
    e.prototype.animateHeight = function() {
        var t = this;
        if (1 === t.options.slidesToShow && !0 === t.options.adaptiveHeight && !1 === t.options.vertical) {
            var e = t.$slides.eq(t.currentSlide).outerHeight(!0);
            t.$list.animate({
                height: e
            }, t.options.speed)
        }
    }
    ,
    e.prototype.animateSlide = function(e, i) {
        var r = {}
          , n = this;
        n.animateHeight(),
        !0 === n.options.rtl && !1 === n.options.vertical && (e = -e),
        !1 === n.transformsEnabled ? !1 === n.options.vertical ? n.$slideTrack.animate({
            left: e
        }, n.options.speed, n.options.easing, i) : n.$slideTrack.animate({
            top: e
        }, n.options.speed, n.options.easing, i) : !1 === n.cssTransitions ? (!0 === n.options.rtl && (n.currentLeft = -n.currentLeft),
        t({
            animStart: n.currentLeft
        }).animate({
            animStart: e
        }, {
            duration: n.options.speed,
            easing: n.options.easing,
            step: function(t) {
                t = Math.ceil(t),
                !1 === n.options.vertical ? (r[n.animType] = "translate(" + t + "px, 0px)",
                n.$slideTrack.css(r)) : (r[n.animType] = "translate(0px," + t + "px)",
                n.$slideTrack.css(r))
            },
            complete: function() {
                i && i.call()
            }
        })) : (n.applyTransition(),
        e = Math.ceil(e),
        !1 === n.options.vertical ? r[n.animType] = "translate3d(" + e + "px, 0px, 0px)" : r[n.animType] = "translate3d(0px," + e + "px, 0px)",
        n.$slideTrack.css(r),
        i && setTimeout(function() {
            n.disableTransition(),
            i.call()
        }, n.options.speed))
    }
    ,
    e.prototype.getNavTarget = function() {
        var e = this.options.asNavFor;
        return e && null !== e && (e = t(e).not(this.$slider)),
        e
    }
    ,
    e.prototype.asNavFor = function(e) {
        var i = this.getNavTarget();
        null !== i && "object" == typeof i && i.each(function() {
            var i = t(this).slick("getSlick");
            i.unslicked || i.slideHandler(e, !0)
        })
    }
    ,
    e.prototype.applyTransition = function(t) {
        var e = this
          , i = {};
        !1 === e.options.fade ? i[e.transitionType] = e.transformType + " " + e.options.speed + "ms " + e.options.cssEase : i[e.transitionType] = "opacity " + e.options.speed + "ms " + e.options.cssEase,
        !1 === e.options.fade ? e.$slideTrack.css(i) : e.$slides.eq(t).css(i)
    }
    ,
    e.prototype.autoPlay = function() {
        var t = this;
        t.autoPlayClear(),
        t.slideCount > t.options.slidesToShow && (t.autoPlayTimer = setInterval(t.autoPlayIterator, t.options.autoplaySpeed))
    }
    ,
    e.prototype.autoPlayClear = function() {
        this.autoPlayTimer && clearInterval(this.autoPlayTimer)
    }
    ,
    e.prototype.autoPlayIterator = function() {
        var t = this
          , e = t.currentSlide + t.options.slidesToScroll;
        t.paused || t.interrupted || t.focussed || (!1 === t.options.infinite && (1 === t.direction && t.currentSlide + 1 === t.slideCount - 1 ? t.direction = 0 : 0 === t.direction && (e = t.currentSlide - t.options.slidesToScroll,
        t.currentSlide - 1 == 0 && (t.direction = 1))),
        t.slideHandler(e))
    }
    ,
    e.prototype.buildArrows = function() {
        var e = this;
        !0 === e.options.arrows && (e.$prevArrow = t(e.options.prevArrow).addClass("slick-arrow"),
        e.$nextArrow = t(e.options.nextArrow).addClass("slick-arrow"),
        e.slideCount > e.options.slidesToShow ? (e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),
        e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),
        e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.prependTo(e.options.appendArrows),
        e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.appendTo(e.options.appendArrows),
        !0 !== e.options.infinite && e.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true")) : e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({
            "aria-disabled": "true",
            tabindex: "-1"
        }))
    }
    ,
    e.prototype.buildDots = function() {
        var e, i, r = this;
        if (!0 === r.options.dots) {
            for (r.$slider.addClass("slick-dotted"),
            i = t("<ul />").addClass(r.options.dotsClass),
            e = 0; e <= r.getDotCount(); e += 1)
                i.append(t("<li />").append(r.options.customPaging.call(this, r, e)));
            r.$dots = i.appendTo(r.options.appendDots),
            r.$dots.find("li").first().addClass("slick-active")
        }
    }
    ,
    e.prototype.buildOut = function() {
        var e = this;
        e.$slides = e.$slider.children(e.options.slide + ":not(.slick-cloned)").addClass("slick-slide"),
        e.slideCount = e.$slides.length,
        e.$slides.each(function(e, i) {
            t(i).attr("data-slick-index", e).data("originalStyling", t(i).attr("style") || "")
        }),
        e.$slider.addClass("slick-slider"),
        e.$slideTrack = 0 === e.slideCount ? t('<div class="slick-track"/>').appendTo(e.$slider) : e.$slides.wrapAll('<div class="slick-track"/>').parent(),
        e.$list = e.$slideTrack.wrap('<div class="slick-list"/>').parent(),
        e.$slideTrack.css("opacity", 0),
        !0 !== e.options.centerMode && !0 !== e.options.swipeToSlide || (e.options.slidesToScroll = 1),
        t("img[data-lazy]", e.$slider).not("[src]").addClass("slick-loading"),
        e.setupInfinite(),
        e.buildArrows(),
        e.buildDots(),
        e.updateDots(),
        e.setSlideClasses("number" == typeof e.currentSlide ? e.currentSlide : 0),
        !0 === e.options.draggable && e.$list.addClass("draggable")
    }
    ,
    e.prototype.buildRows = function() {
        var t, e, i, r, n, o, a, s = this;
        if (r = document.createDocumentFragment(),
        o = s.$slider.children(),
        s.options.rows > 1) {
            for (a = s.options.slidesPerRow * s.options.rows,
            n = Math.ceil(o.length / a),
            t = 0; t < n; t++) {
                var l = document.createElement("div");
                for (e = 0; e < s.options.rows; e++) {
                    var u = document.createElement("div");
                    for (i = 0; i < s.options.slidesPerRow; i++) {
                        var c = t * a + (e * s.options.slidesPerRow + i);
                        o.get(c) && u.appendChild(o.get(c))
                    }
                    l.appendChild(u)
                }
                r.appendChild(l)
            }
            s.$slider.empty().append(r),
            s.$slider.children().children().children().css({
                width: 100 / s.options.slidesPerRow + "%",
                display: "inline-block"
            })
        }
    }
    ,
    e.prototype.checkResponsive = function(e, i) {
        var r, n, o, a = this, s = !1, l = a.$slider.width(), u = window.innerWidth || t(window).width();
        if ("window" === a.respondTo ? o = u : "slider" === a.respondTo ? o = l : "min" === a.respondTo && (o = Math.min(u, l)),
        a.options.responsive && a.options.responsive.length && null !== a.options.responsive) {
            for (r in n = null,
            a.breakpoints)
                a.breakpoints.hasOwnProperty(r) && (!1 === a.originalSettings.mobileFirst ? o < a.breakpoints[r] && (n = a.breakpoints[r]) : o > a.breakpoints[r] && (n = a.breakpoints[r]));
            null !== n ? null !== a.activeBreakpoint ? (n !== a.activeBreakpoint || i) && (a.activeBreakpoint = n,
            "unslick" === a.breakpointSettings[n] ? a.unslick(n) : (a.options = t.extend({}, a.originalSettings, a.breakpointSettings[n]),
            !0 === e && (a.currentSlide = a.options.initialSlide),
            a.refresh(e)),
            s = n) : (a.activeBreakpoint = n,
            "unslick" === a.breakpointSettings[n] ? a.unslick(n) : (a.options = t.extend({}, a.originalSettings, a.breakpointSettings[n]),
            !0 === e && (a.currentSlide = a.options.initialSlide),
            a.refresh(e)),
            s = n) : null !== a.activeBreakpoint && (a.activeBreakpoint = null,
            a.options = a.originalSettings,
            !0 === e && (a.currentSlide = a.options.initialSlide),
            a.refresh(e),
            s = n),
            e || !1 === s || a.$slider.trigger("breakpoint", [a, s])
        }
    }
    ,
    e.prototype.changeSlide = function(e, i) {
        var r, n, o = this, a = t(e.currentTarget);
        switch (a.is("a") && e.preventDefault(),
        a.is("li") || (a = a.closest("li")),
        r = o.slideCount % o.options.slidesToScroll != 0 ? 0 : (o.slideCount - o.currentSlide) % o.options.slidesToScroll,
        e.data.message) {
        case "previous":
            n = 0 === r ? o.options.slidesToScroll : o.options.slidesToShow - r,
            o.slideCount > o.options.slidesToShow && o.slideHandler(o.currentSlide - n, !1, i);
            break;
        case "next":
            n = 0 === r ? o.options.slidesToScroll : r,
            o.slideCount > o.options.slidesToShow && o.slideHandler(o.currentSlide + n, !1, i);
            break;
        case "index":
            var s = 0 === e.data.index ? 0 : e.data.index || a.index() * o.options.slidesToScroll;
            o.slideHandler(o.checkNavigable(s), !1, i),
            a.children().trigger("focus");
            break;
        default:
            return
        }
    }
    ,
    e.prototype.checkNavigable = function(t) {
        var e, i;
        if (i = 0,
        t > (e = this.getNavigableIndexes())[e.length - 1])
            t = e[e.length - 1];
        else
            for (var r in e) {
                if (t < e[r]) {
                    t = i;
                    break
                }
                i = e[r]
            }
        return t
    }
    ,
    e.prototype.cleanUpEvents = function() {
        var e = this;
        e.options.dots && null !== e.$dots && (t("li", e.$dots).off("click.slick", e.changeSlide).off("mouseenter.slick", t.proxy(e.interrupt, e, !0)).off("mouseleave.slick", t.proxy(e.interrupt, e, !1)),
        !0 === e.options.accessibility && e.$dots.off("keydown.slick", e.keyHandler)),
        e.$slider.off("focus.slick blur.slick"),
        !0 === e.options.arrows && e.slideCount > e.options.slidesToShow && (e.$prevArrow && e.$prevArrow.off("click.slick", e.changeSlide),
        e.$nextArrow && e.$nextArrow.off("click.slick", e.changeSlide),
        !0 === e.options.accessibility && (e.$prevArrow && e.$prevArrow.off("keydown.slick", e.keyHandler),
        e.$nextArrow && e.$nextArrow.off("keydown.slick", e.keyHandler))),
        e.$list.off("touchstart.slick mousedown.slick", e.swipeHandler),
        e.$list.off("touchmove.slick mousemove.slick", e.swipeHandler),
        e.$list.off("touchend.slick mouseup.slick", e.swipeHandler),
        e.$list.off("touchcancel.slick mouseleave.slick", e.swipeHandler),
        e.$list.off("click.slick", e.clickHandler),
        t(document).off(e.visibilityChange, e.visibility),
        e.cleanUpSlideEvents(),
        !0 === e.options.accessibility && e.$list.off("keydown.slick", e.keyHandler),
        !0 === e.options.focusOnSelect && t(e.$slideTrack).children().off("click.slick", e.selectHandler),
        t(window).off("orientationchange.slick.slick-" + e.instanceUid, e.orientationChange),
        t(window).off("resize.slick.slick-" + e.instanceUid, e.resize),
        t("[draggable!=true]", e.$slideTrack).off("dragstart", e.preventDefault),
        t(window).off("load.slick.slick-" + e.instanceUid, e.setPosition)
    }
    ,
    e.prototype.cleanUpSlideEvents = function() {
        var e = this;
        e.$list.off("mouseenter.slick", t.proxy(e.interrupt, e, !0)),
        e.$list.off("mouseleave.slick", t.proxy(e.interrupt, e, !1))
    }
    ,
    e.prototype.cleanUpRows = function() {
        var t, e = this;
        e.options.rows > 1 && ((t = e.$slides.children().children()).removeAttr("style"),
        e.$slider.empty().append(t))
    }
    ,
    e.prototype.clickHandler = function(t) {
        !1 === this.shouldClick && (t.stopImmediatePropagation(),
        t.stopPropagation(),
        t.preventDefault())
    }
    ,
    e.prototype.destroy = function(e) {
        var i = this;
        i.autoPlayClear(),
        i.touchObject = {},
        i.cleanUpEvents(),
        t(".slick-cloned", i.$slider).detach(),
        i.$dots && i.$dots.remove(),
        i.$prevArrow && i.$prevArrow.length && (i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""),
        i.htmlExpr.test(i.options.prevArrow) && i.$prevArrow.remove()),
        i.$nextArrow && i.$nextArrow.length && (i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""),
        i.htmlExpr.test(i.options.nextArrow) && i.$nextArrow.remove()),
        i.$slides && (i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function() {
            t(this).attr("style", t(this).data("originalStyling"))
        }),
        i.$slideTrack.children(this.options.slide).detach(),
        i.$slideTrack.detach(),
        i.$list.detach(),
        i.$slider.append(i.$slides)),
        i.cleanUpRows(),
        i.$slider.removeClass("slick-slider"),
        i.$slider.removeClass("slick-initialized"),
        i.$slider.removeClass("slick-dotted"),
        i.unslicked = !0,
        e || i.$slider.trigger("destroy", [i])
    }
    ,
    e.prototype.disableTransition = function(t) {
        var e = this
          , i = {};
        i[e.transitionType] = "",
        !1 === e.options.fade ? e.$slideTrack.css(i) : e.$slides.eq(t).css(i)
    }
    ,
    e.prototype.fadeSlide = function(t, e) {
        var i = this;
        !1 === i.cssTransitions ? (i.$slides.eq(t).css({
            zIndex: i.options.zIndex
        }),
        i.$slides.eq(t).animate({
            opacity: 1
        }, i.options.speed, i.options.easing, e)) : (i.applyTransition(t),
        i.$slides.eq(t).css({
            opacity: 1,
            zIndex: i.options.zIndex
        }),
        e && setTimeout(function() {
            i.disableTransition(t),
            e.call()
        }, i.options.speed))
    }
    ,
    e.prototype.fadeSlideOut = function(t) {
        var e = this;
        !1 === e.cssTransitions ? e.$slides.eq(t).animate({
            opacity: 0,
            zIndex: e.options.zIndex - 2
        }, e.options.speed, e.options.easing) : (e.applyTransition(t),
        e.$slides.eq(t).css({
            opacity: 0,
            zIndex: e.options.zIndex - 2
        }))
    }
    ,
    e.prototype.filterSlides = e.prototype.slickFilter = function(t) {
        var e = this;
        null !== t && (e.$slidesCache = e.$slides,
        e.unload(),
        e.$slideTrack.children(this.options.slide).detach(),
        e.$slidesCache.filter(t).appendTo(e.$slideTrack),
        e.reinit())
    }
    ,
    e.prototype.focusHandler = function() {
        var e = this;
        e.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick", "*", function(i) {
            i.stopImmediatePropagation();
            var r = t(this);
            setTimeout(function() {
                e.options.pauseOnFocus && (e.focussed = r.is(":focus"),
                e.autoPlay())
            }, 0)
        })
    }
    ,
    e.prototype.getCurrent = e.prototype.slickCurrentSlide = function() {
        return this.currentSlide
    }
    ,
    e.prototype.getDotCount = function() {
        var t = this
          , e = 0
          , i = 0
          , r = 0;
        if (!0 === t.options.infinite)
            if (t.slideCount <= t.options.slidesToShow)
                ++r;
            else
                for (; e < t.slideCount; )
                    ++r,
                    e = i + t.options.slidesToScroll,
                    i += t.options.slidesToScroll <= t.options.slidesToShow ? t.options.slidesToScroll : t.options.slidesToShow;
        else if (!0 === t.options.centerMode)
            r = t.slideCount;
        else if (t.options.asNavFor)
            for (; e < t.slideCount; )
                ++r,
                e = i + t.options.slidesToScroll,
                i += t.options.slidesToScroll <= t.options.slidesToShow ? t.options.slidesToScroll : t.options.slidesToShow;
        else
            r = 1 + Math.ceil((t.slideCount - t.options.slidesToShow) / t.options.slidesToScroll);
        return r - 1
    }
    ,
    e.prototype.getLeft = function(t) {
        var e, i, r, n, o = this, a = 0;
        return o.slideOffset = 0,
        i = o.$slides.first().outerHeight(!0),
        !0 === o.options.infinite ? (o.slideCount > o.options.slidesToShow && (o.slideOffset = o.slideWidth * o.options.slidesToShow * -1,
        n = -1,
        !0 === o.options.vertical && !0 === o.options.centerMode && (2 === o.options.slidesToShow ? n = -1.5 : 1 === o.options.slidesToShow && (n = -2)),
        a = i * o.options.slidesToShow * n),
        o.slideCount % o.options.slidesToScroll != 0 && t + o.options.slidesToScroll > o.slideCount && o.slideCount > o.options.slidesToShow && (t > o.slideCount ? (o.slideOffset = (o.options.slidesToShow - (t - o.slideCount)) * o.slideWidth * -1,
        a = (o.options.slidesToShow - (t - o.slideCount)) * i * -1) : (o.slideOffset = o.slideCount % o.options.slidesToScroll * o.slideWidth * -1,
        a = o.slideCount % o.options.slidesToScroll * i * -1))) : t + o.options.slidesToShow > o.slideCount && (o.slideOffset = (t + o.options.slidesToShow - o.slideCount) * o.slideWidth,
        a = (t + o.options.slidesToShow - o.slideCount) * i),
        o.slideCount <= o.options.slidesToShow && (o.slideOffset = 0,
        a = 0),
        !0 === o.options.centerMode && o.slideCount <= o.options.slidesToShow ? o.slideOffset = o.slideWidth * Math.floor(o.options.slidesToShow) / 2 - o.slideWidth * o.slideCount / 2 : !0 === o.options.centerMode && !0 === o.options.infinite ? o.slideOffset += o.slideWidth * Math.floor(o.options.slidesToShow / 2) - o.slideWidth : !0 === o.options.centerMode && (o.slideOffset = 0,
        o.slideOffset += o.slideWidth * Math.floor(o.options.slidesToShow / 2)),
        e = !1 === o.options.vertical ? t * o.slideWidth * -1 + o.slideOffset : t * i * -1 + a,
        !0 === o.options.variableWidth && (r = o.slideCount <= o.options.slidesToShow || !1 === o.options.infinite ? o.$slideTrack.children(".slick-slide").eq(t) : o.$slideTrack.children(".slick-slide").eq(t + o.options.slidesToShow),
        e = !0 === o.options.rtl ? r[0] ? -1 * (o.$slideTrack.width() - r[0].offsetLeft - r.width()) : 0 : r[0] ? -1 * r[0].offsetLeft : 0,
        !0 === o.options.centerMode && (r = o.slideCount <= o.options.slidesToShow || !1 === o.options.infinite ? o.$slideTrack.children(".slick-slide").eq(t) : o.$slideTrack.children(".slick-slide").eq(t + o.options.slidesToShow + 1),
        e = !0 === o.options.rtl ? r[0] ? -1 * (o.$slideTrack.width() - r[0].offsetLeft - r.width()) : 0 : r[0] ? -1 * r[0].offsetLeft : 0,
        e += (o.$list.width() - r.outerWidth()) / 2)),
        e
    }
    ,
    e.prototype.getOption = e.prototype.slickGetOption = function(t) {
        return this.options[t]
    }
    ,
    e.prototype.getNavigableIndexes = function() {
        var t, e = this, i = 0, r = 0, n = [];
        for (!1 === e.options.infinite ? t = e.slideCount : (i = -1 * e.options.slidesToScroll,
        r = -1 * e.options.slidesToScroll,
        t = 2 * e.slideCount); i < t; )
            n.push(i),
            i = r + e.options.slidesToScroll,
            r += e.options.slidesToScroll <= e.options.slidesToShow ? e.options.slidesToScroll : e.options.slidesToShow;
        return n
    }
    ,
    e.prototype.getSlick = function() {
        return this
    }
    ,
    e.prototype.getSlideCount = function() {
        var e, i, r = this;
        return i = !0 === r.options.centerMode ? r.slideWidth * Math.floor(r.options.slidesToShow / 2) : 0,
        !0 === r.options.swipeToSlide ? (r.$slideTrack.find(".slick-slide").each(function(n, o) {
            if (o.offsetLeft - i + t(o).outerWidth() / 2 > -1 * r.swipeLeft)
                return e = o,
                !1
        }),
        Math.abs(t(e).attr("data-slick-index") - r.currentSlide) || 1) : r.options.slidesToScroll
    }
    ,
    e.prototype.goTo = e.prototype.slickGoTo = function(t, e) {
        this.changeSlide({
            data: {
                message: "index",
                index: parseInt(t)
            }
        }, e)
    }
    ,
    e.prototype.init = function(e) {
        var i = this;
        t(i.$slider).hasClass("slick-initialized") || (t(i.$slider).addClass("slick-initialized"),
        i.buildRows(),
        i.buildOut(),
        i.setProps(),
        i.startLoad(),
        i.loadSlider(),
        i.initializeEvents(),
        i.updateArrows(),
        i.updateDots(),
        i.checkResponsive(!0),
        i.focusHandler()),
        e && i.$slider.trigger("init", [i]),
        !0 === i.options.accessibility && i.initADA(),
        i.options.autoplay && (i.paused = !1,
        i.autoPlay())
    }
    ,
    e.prototype.initADA = function() {
        var e = this
          , i = Math.ceil(e.slideCount / e.options.slidesToShow)
          , r = e.getNavigableIndexes().filter(function(t) {
            return t >= 0 && t < e.slideCount
        });
        e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({
            "aria-hidden": "true",
            tabindex: "-1"
        }).find("a, input, button, select").attr({
            tabindex: "-1"
        }),
        null !== e.$dots && (e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(i) {
            var n = r.indexOf(i);
            t(this).attr({
                role: "tabpanel",
                id: "slick-slide" + e.instanceUid + i,
                tabindex: -1
            }),
            -1 !== n && t(this).attr({
                "aria-describedby": "slick-slide-control" + e.instanceUid + n
            })
        }),
        e.$dots.attr("role", "tablist").find("li").each(function(n) {
            var o = r[n];
            t(this).attr({
                role: "presentation"
            }),
            t(this).find("button").first().attr({
                role: "tab",
                id: "slick-slide-control" + e.instanceUid + n,
                "aria-controls": "slick-slide" + e.instanceUid + o,
                "aria-label": n + 1 + " of " + i,
                "aria-selected": null,
                tabindex: "-1"
            })
        }).eq(e.currentSlide).find("button").attr({
            "aria-selected": "true",
            tabindex: "0"
        }).end());
        for (var n = e.currentSlide, o = n + e.options.slidesToShow; n < o; n++)
            e.$slides.eq(n).attr("tabindex", 0);
        e.activateADA()
    }
    ,
    e.prototype.initArrowEvents = function() {
        var t = this;
        !0 === t.options.arrows && t.slideCount > t.options.slidesToShow && (t.$prevArrow.off("click.slick").on("click.slick", {
            message: "previous"
        }, t.changeSlide),
        t.$nextArrow.off("click.slick").on("click.slick", {
            message: "next"
        }, t.changeSlide),
        !0 === t.options.accessibility && (t.$prevArrow.on("keydown.slick", t.keyHandler),
        t.$nextArrow.on("keydown.slick", t.keyHandler)))
    }
    ,
    e.prototype.initDotEvents = function() {
        var e = this;
        !0 === e.options.dots && (t("li", e.$dots).on("click.slick", {
            message: "index"
        }, e.changeSlide),
        !0 === e.options.accessibility && e.$dots.on("keydown.slick", e.keyHandler)),
        !0 === e.options.dots && !0 === e.options.pauseOnDotsHover && t("li", e.$dots).on("mouseenter.slick", t.proxy(e.interrupt, e, !0)).on("mouseleave.slick", t.proxy(e.interrupt, e, !1))
    }
    ,
    e.prototype.initSlideEvents = function() {
        var e = this;
        e.options.pauseOnHover && (e.$list.on("mouseenter.slick", t.proxy(e.interrupt, e, !0)),
        e.$list.on("mouseleave.slick", t.proxy(e.interrupt, e, !1)))
    }
    ,
    e.prototype.initializeEvents = function() {
        var e = this;
        e.initArrowEvents(),
        e.initDotEvents(),
        e.initSlideEvents(),
        e.$list.on("touchstart.slick mousedown.slick", {
            action: "start"
        }, e.swipeHandler),
        e.$list.on("touchmove.slick mousemove.slick", {
            action: "move"
        }, e.swipeHandler),
        e.$list.on("touchend.slick mouseup.slick", {
            action: "end"
        }, e.swipeHandler),
        e.$list.on("touchcancel.slick mouseleave.slick", {
            action: "end"
        }, e.swipeHandler),
        e.$list.on("click.slick", e.clickHandler),
        t(document).on(e.visibilityChange, t.proxy(e.visibility, e)),
        !0 === e.options.accessibility && e.$list.on("keydown.slick", e.keyHandler),
        !0 === e.options.focusOnSelect && t(e.$slideTrack).children().on("click.slick", e.selectHandler),
        t(window).on("orientationchange.slick.slick-" + e.instanceUid, t.proxy(e.orientationChange, e)),
        t(window).on("resize.slick.slick-" + e.instanceUid, t.proxy(e.resize, e)),
        t("[draggable!=true]", e.$slideTrack).on("dragstart", e.preventDefault),
        t(window).on("load.slick.slick-" + e.instanceUid, e.setPosition),
        t(e.setPosition)
    }
    ,
    e.prototype.initUI = function() {
        var t = this;
        !0 === t.options.arrows && t.slideCount > t.options.slidesToShow && (t.$prevArrow.show(),
        t.$nextArrow.show()),
        !0 === t.options.dots && t.slideCount > t.options.slidesToShow && t.$dots.show()
    }
    ,
    e.prototype.keyHandler = function(t) {
        var e = this;
        t.target.tagName.match("TEXTAREA|INPUT|SELECT") || (37 === t.keyCode && !0 === e.options.accessibility ? e.changeSlide({
            data: {
                message: !0 === e.options.rtl ? "next" : "previous"
            }
        }) : 39 === t.keyCode && !0 === e.options.accessibility && e.changeSlide({
            data: {
                message: !0 === e.options.rtl ? "previous" : "next"
            }
        }))
    }
    ,
    e.prototype.lazyLoad = function() {
        function e(e) {
            t("img[data-lazy]", e).each(function() {
                var e = t(this)
                  , i = t(this).attr("data-lazy")
                  , r = t(this).attr("data-srcset")
                  , n = t(this).attr("data-sizes") || o.$slider.attr("data-sizes")
                  , a = document.createElement("img");
                a.onload = function() {
                    e.animate({
                        opacity: 0
                    }, 100, function() {
                        r && (e.attr("srcset", r),
                        n && e.attr("sizes", n)),
                        e.attr("src", i).animate({
                            opacity: 1
                        }, 200, function() {
                            e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")
                        }),
                        o.$slider.trigger("lazyLoaded", [o, e, i])
                    })
                }
                ,
                a.onerror = function() {
                    e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),
                    o.$slider.trigger("lazyLoadError", [o, e, i])
                }
                ,
                a.src = i
            })
        }
        var i, r, n, o = this;
        if (!0 === o.options.centerMode ? !0 === o.options.infinite ? n = (r = o.currentSlide + (o.options.slidesToShow / 2 + 1)) + o.options.slidesToShow + 2 : (r = Math.max(0, o.currentSlide - (o.options.slidesToShow / 2 + 1)),
        n = o.options.slidesToShow / 2 + 1 + 2 + o.currentSlide) : (r = o.options.infinite ? o.options.slidesToShow + o.currentSlide : o.currentSlide,
        n = Math.ceil(r + o.options.slidesToShow),
        !0 === o.options.fade && (r > 0 && r--,
        n <= o.slideCount && n++)),
        i = o.$slider.find(".slick-slide").slice(r, n),
        "anticipated" === o.options.lazyLoad)
            for (var a = r - 1, s = n, l = o.$slider.find(".slick-slide"), u = 0; u < o.options.slidesToScroll; u++)
                a < 0 && (a = o.slideCount - 1),
                i = (i = i.add(l.eq(a))).add(l.eq(s)),
                a--,
                s++;
        e(i),
        o.slideCount <= o.options.slidesToShow ? e(o.$slider.find(".slick-slide")) : o.currentSlide >= o.slideCount - o.options.slidesToShow ? e(o.$slider.find(".slick-cloned").slice(0, o.options.slidesToShow)) : 0 === o.currentSlide && e(o.$slider.find(".slick-cloned").slice(-1 * o.options.slidesToShow))
    }
    ,
    e.prototype.loadSlider = function() {
        var t = this;
        t.setPosition(),
        t.$slideTrack.css({
            opacity: 1
        }),
        t.$slider.removeClass("slick-loading"),
        t.initUI(),
        "progressive" === t.options.lazyLoad && t.progressiveLazyLoad()
    }
    ,
    e.prototype.next = e.prototype.slickNext = function() {
        this.changeSlide({
            data: {
                message: "next"
            }
        })
    }
    ,
    e.prototype.orientationChange = function() {
        this.checkResponsive(),
        this.setPosition()
    }
    ,
    e.prototype.pause = e.prototype.slickPause = function() {
        this.autoPlayClear(),
        this.paused = !0
    }
    ,
    e.prototype.play = e.prototype.slickPlay = function() {
        var t = this;
        t.autoPlay(),
        t.options.autoplay = !0,
        t.paused = !1,
        t.focussed = !1,
        t.interrupted = !1
    }
    ,
    e.prototype.postSlide = function(e) {
        var i = this;
        i.unslicked || (i.$slider.trigger("afterChange", [i, e]),
        i.animating = !1,
        i.slideCount > i.options.slidesToShow && i.setPosition(),
        i.swipeLeft = null,
        i.options.autoplay && i.autoPlay(),
        !0 === i.options.accessibility && (i.initADA(),
        i.options.focusOnChange && t(i.$slides.get(i.currentSlide)).attr("tabindex", 0).focus()))
    }
    ,
    e.prototype.prev = e.prototype.slickPrev = function() {
        this.changeSlide({
            data: {
                message: "previous"
            }
        })
    }
    ,
    e.prototype.preventDefault = function(t) {
        t.preventDefault()
    }
    ,
    e.prototype.progressiveLazyLoad = function(e) {
        e = e || 1;
        var i, r, n, o, a, s = this, l = t("img[data-lazy]", s.$slider);
        l.length ? (i = l.first(),
        r = i.attr("data-lazy"),
        n = i.attr("data-srcset"),
        o = i.attr("data-sizes") || s.$slider.attr("data-sizes"),
        (a = document.createElement("img")).onload = function() {
            n && (i.attr("srcset", n),
            o && i.attr("sizes", o)),
            i.attr("src", r).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),
            !0 === s.options.adaptiveHeight && s.setPosition(),
            s.$slider.trigger("lazyLoaded", [s, i, r]),
            s.progressiveLazyLoad()
        }
        ,
        a.onerror = function() {
            e < 3 ? setTimeout(function() {
                s.progressiveLazyLoad(e + 1)
            }, 500) : (i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),
            s.$slider.trigger("lazyLoadError", [s, i, r]),
            s.progressiveLazyLoad())
        }
        ,
        a.src = r) : s.$slider.trigger("allImagesLoaded", [s])
    }
    ,
    e.prototype.refresh = function(e) {
        var i, r, n = this;
        r = n.slideCount - n.options.slidesToShow,
        !n.options.infinite && n.currentSlide > r && (n.currentSlide = r),
        n.slideCount <= n.options.slidesToShow && (n.currentSlide = 0),
        i = n.currentSlide,
        n.destroy(!0),
        t.extend(n, n.initials, {
            currentSlide: i
        }),
        n.init(),
        e || n.changeSlide({
            data: {
                message: "index",
                index: i
            }
        }, !1)
    }
    ,
    e.prototype.registerBreakpoints = function() {
        var e, i, r, n = this, o = n.options.responsive || null;
        if ("array" === t.type(o) && o.length) {
            for (e in n.respondTo = n.options.respondTo || "window",
            o)
                if (r = n.breakpoints.length - 1,
                o.hasOwnProperty(e)) {
                    for (i = o[e].breakpoint; r >= 0; )
                        n.breakpoints[r] && n.breakpoints[r] === i && n.breakpoints.splice(r, 1),
                        r--;
                    n.breakpoints.push(i),
                    n.breakpointSettings[i] = o[e].settings
                }
            n.breakpoints.sort(function(t, e) {
                return n.options.mobileFirst ? t - e : e - t
            })
        }
    }
    ,
    e.prototype.reinit = function() {
        var e = this;
        e.$slides = e.$slideTrack.children(e.options.slide).addClass("slick-slide"),
        e.slideCount = e.$slides.length,
        e.currentSlide >= e.slideCount && 0 !== e.currentSlide && (e.currentSlide = e.currentSlide - e.options.slidesToScroll),
        e.slideCount <= e.options.slidesToShow && (e.currentSlide = 0),
        e.registerBreakpoints(),
        e.setProps(),
        e.setupInfinite(),
        e.buildArrows(),
        e.updateArrows(),
        e.initArrowEvents(),
        e.buildDots(),
        e.updateDots(),
        e.initDotEvents(),
        e.cleanUpSlideEvents(),
        e.initSlideEvents(),
        e.checkResponsive(!1, !0),
        !0 === e.options.focusOnSelect && t(e.$slideTrack).children().on("click.slick", e.selectHandler),
        e.setSlideClasses("number" == typeof e.currentSlide ? e.currentSlide : 0),
        e.setPosition(),
        e.focusHandler(),
        e.paused = !e.options.autoplay,
        e.autoPlay(),
        e.$slider.trigger("reInit", [e])
    }
    ,
    e.prototype.resize = function() {
        var e = this;
        t(window).width() !== e.windowWidth && (clearTimeout(e.windowDelay),
        e.windowDelay = window.setTimeout(function() {
            e.windowWidth = t(window).width(),
            e.checkResponsive(),
            e.unslicked || e.setPosition()
        }, 50))
    }
    ,
    e.prototype.removeSlide = e.prototype.slickRemove = function(t, e, i) {
        var r = this;
        if (t = "boolean" == typeof t ? !0 === (e = t) ? 0 : r.slideCount - 1 : !0 === e ? --t : t,
        r.slideCount < 1 || t < 0 || t > r.slideCount - 1)
            return !1;
        r.unload(),
        !0 === i ? r.$slideTrack.children().remove() : r.$slideTrack.children(this.options.slide).eq(t).remove(),
        r.$slides = r.$slideTrack.children(this.options.slide),
        r.$slideTrack.children(this.options.slide).detach(),
        r.$slideTrack.append(r.$slides),
        r.$slidesCache = r.$slides,
        r.reinit()
    }
    ,
    e.prototype.setCSS = function(t) {
        var e, i, r = this, n = {};
        !0 === r.options.rtl && (t = -t),
        e = "left" == r.positionProp ? Math.ceil(t) + "px" : "0px",
        i = "top" == r.positionProp ? Math.ceil(t) + "px" : "0px",
        n[r.positionProp] = t,
        !1 === r.transformsEnabled ? r.$slideTrack.css(n) : (n = {},
        !1 === r.cssTransitions ? (n[r.animType] = "translate(" + e + ", " + i + ")",
        r.$slideTrack.css(n)) : (n[r.animType] = "translate3d(" + e + ", " + i + ", 0px)",
        r.$slideTrack.css(n)))
    }
    ,
    e.prototype.setDimensions = function() {
        var t = this;
        !1 === t.options.vertical ? !0 === t.options.centerMode && t.$list.css({
            padding: "0px " + t.options.centerPadding
        }) : (t.$list.height(t.$slides.first().outerHeight(!0) * t.options.slidesToShow),
        !0 === t.options.centerMode && t.$list.css({
            padding: t.options.centerPadding + " 0px"
        })),
        t.listWidth = t.$list.width(),
        t.listHeight = t.$list.height(),
        !1 === t.options.vertical && !1 === t.options.variableWidth ? (t.slideWidth = Math.ceil(t.listWidth / t.options.slidesToShow),
        t.$slideTrack.width(Math.ceil(t.slideWidth * t.$slideTrack.children(".slick-slide").length))) : !0 === t.options.variableWidth ? t.$slideTrack.width(5e3 * t.slideCount) : (t.slideWidth = Math.ceil(t.listWidth),
        t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0) * t.$slideTrack.children(".slick-slide").length)));
        var e = t.$slides.first().outerWidth(!0) - t.$slides.first().width();
        !1 === t.options.variableWidth && t.$slideTrack.children(".slick-slide").width(t.slideWidth - e)
    }
    ,
    e.prototype.setFade = function() {
        var e, i = this;
        i.$slides.each(function(r, n) {
            e = i.slideWidth * r * -1,
            !0 === i.options.rtl ? t(n).css({
                position: "relative",
                right: e,
                top: 0,
                zIndex: i.options.zIndex - 2,
                opacity: 0
            }) : t(n).css({
                position: "relative",
                left: e,
                top: 0,
                zIndex: i.options.zIndex - 2,
                opacity: 0
            })
        }),
        i.$slides.eq(i.currentSlide).css({
            zIndex: i.options.zIndex - 1,
            opacity: 1
        })
    }
    ,
    e.prototype.setHeight = function() {
        var t = this;
        if (1 === t.options.slidesToShow && !0 === t.options.adaptiveHeight && !1 === t.options.vertical) {
            var e = t.$slides.eq(t.currentSlide).outerHeight(!0);
            t.$list.css("height", e)
        }
    }
    ,
    e.prototype.setOption = e.prototype.slickSetOption = function() {
        var e, i, r, n, o, a = this, s = !1;
        if ("object" === t.type(arguments[0]) ? (r = arguments[0],
        s = arguments[1],
        o = "multiple") : "string" === t.type(arguments[0]) && (r = arguments[0],
        n = arguments[1],
        s = arguments[2],
        "responsive" === arguments[0] && "array" === t.type(arguments[1]) ? o = "responsive" : void 0 !== arguments[1] && (o = "single")),
        "single" === o)
            a.options[r] = n;
        else if ("multiple" === o)
            t.each(r, function(t, e) {
                a.options[t] = e
            });
        else if ("responsive" === o)
            for (i in n)
                if ("array" !== t.type(a.options.responsive))
                    a.options.responsive = [n[i]];
                else {
                    for (e = a.options.responsive.length - 1; e >= 0; )
                        a.options.responsive[e].breakpoint === n[i].breakpoint && a.options.responsive.splice(e, 1),
                        e--;
                    a.options.responsive.push(n[i])
                }
        s && (a.unload(),
        a.reinit())
    }
    ,
    e.prototype.setPosition = function() {
        var t = this;
        t.setDimensions(),
        t.setHeight(),
        !1 === t.options.fade ? t.setCSS(t.getLeft(t.currentSlide)) : t.setFade(),
        t.$slider.trigger("setPosition", [t])
    }
    ,
    e.prototype.setProps = function() {
        var t = this
          , e = document.body.style;
        t.positionProp = !0 === t.options.vertical ? "top" : "left",
        "top" === t.positionProp ? t.$slider.addClass("slick-vertical") : t.$slider.removeClass("slick-vertical"),
        void 0 === e.WebkitTransition && void 0 === e.MozTransition && void 0 === e.msTransition || !0 === t.options.useCSS && (t.cssTransitions = !0),
        t.options.fade && ("number" == typeof t.options.zIndex ? t.options.zIndex < 3 && (t.options.zIndex = 3) : t.options.zIndex = t.defaults.zIndex),
        void 0 !== e.OTransform && (t.animType = "OTransform",
        t.transformType = "-o-transform",
        t.transitionType = "OTransition",
        void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (t.animType = !1)),
        void 0 !== e.MozTransform && (t.animType = "MozTransform",
        t.transformType = "-moz-transform",
        t.transitionType = "MozTransition",
        void 0 === e.perspectiveProperty && void 0 === e.MozPerspective && (t.animType = !1)),
        void 0 !== e.webkitTransform && (t.animType = "webkitTransform",
        t.transformType = "-webkit-transform",
        t.transitionType = "webkitTransition",
        void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (t.animType = !1)),
        void 0 !== e.msTransform && (t.animType = "msTransform",
        t.transformType = "-ms-transform",
        t.transitionType = "msTransition",
        void 0 === e.msTransform && (t.animType = !1)),
        void 0 !== e.transform && !1 !== t.animType && (t.animType = "transform",
        t.transformType = "transform",
        t.transitionType = "transition"),
        t.transformsEnabled = t.options.useTransform && null !== t.animType && !1 !== t.animType
    }
    ,
    e.prototype.setSlideClasses = function(t) {
        var e, i, r, n, o = this;
        if (i = o.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden", "true"),
        o.$slides.eq(t).addClass("slick-current"),
        !0 === o.options.centerMode) {
            var a = o.options.slidesToShow % 2 == 0 ? 1 : 0;
            e = Math.floor(o.options.slidesToShow / 2),
            !0 === o.options.infinite && (t >= e && t <= o.slideCount - 1 - e ? o.$slides.slice(t - e + a, t + e + 1).addClass("slick-active").attr("aria-hidden", "false") : (r = o.options.slidesToShow + t,
            i.slice(r - e + 1 + a, r + e + 2).addClass("slick-active").attr("aria-hidden", "false")),
            0 === t ? i.eq(i.length - 1 - o.options.slidesToShow).addClass("slick-center") : t === o.slideCount - 1 && i.eq(o.options.slidesToShow).addClass("slick-center")),
            o.$slides.eq(t).addClass("slick-center")
        } else
            t >= 0 && t <= o.slideCount - o.options.slidesToShow ? o.$slides.slice(t, t + o.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false") : i.length <= o.options.slidesToShow ? i.addClass("slick-active").attr("aria-hidden", "false") : (n = o.slideCount % o.options.slidesToShow,
            r = !0 === o.options.infinite ? o.options.slidesToShow + t : t,
            o.options.slidesToShow == o.options.slidesToScroll && o.slideCount - t < o.options.slidesToShow ? i.slice(r - (o.options.slidesToShow - n), r + n).addClass("slick-active").attr("aria-hidden", "false") : i.slice(r, r + o.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false"));
        "ondemand" !== o.options.lazyLoad && "anticipated" !== o.options.lazyLoad || o.lazyLoad()
    }
    ,
    e.prototype.setupInfinite = function() {
        var e, i, r, n = this;
        if (!0 === n.options.fade && (n.options.centerMode = !1),
        !0 === n.options.infinite && !1 === n.options.fade && (i = null,
        n.slideCount > n.options.slidesToShow)) {
            for (r = !0 === n.options.centerMode ? n.options.slidesToShow + 1 : n.options.slidesToShow,
            e = n.slideCount; e > n.slideCount - r; e -= 1)
                i = e - 1,
                t(n.$slides[i]).clone(!0).attr("id", "").attr("data-slick-index", i - n.slideCount).prependTo(n.$slideTrack).addClass("slick-cloned");
            for (e = 0; e < r + n.slideCount; e += 1)
                i = e,
                t(n.$slides[i]).clone(!0).attr("id", "").attr("data-slick-index", i + n.slideCount).appendTo(n.$slideTrack).addClass("slick-cloned");
            n.$slideTrack.find(".slick-cloned").find("[id]").each(function() {
                t(this).attr("id", "")
            })
        }
    }
    ,
    e.prototype.interrupt = function(t) {
        t || this.autoPlay(),
        this.interrupted = t
    }
    ,
    e.prototype.selectHandler = function(e) {
        var i = this
          , r = t(e.target).is(".slick-slide") ? t(e.target) : t(e.target).parents(".slick-slide")
          , n = parseInt(r.attr("data-slick-index"));
        n || (n = 0),
        i.slideCount <= i.options.slidesToShow ? i.slideHandler(n, !1, !0) : i.slideHandler(n)
    }
    ,
    e.prototype.slideHandler = function(t, e, i) {
        var r, n, o, a, s, l = null, u = this;
        if (e = e || !1,
        !(!0 === u.animating && !0 === u.options.waitForAnimate || !0 === u.options.fade && u.currentSlide === t))
            if (!1 === e && u.asNavFor(t),
            r = t,
            l = u.getLeft(r),
            a = u.getLeft(u.currentSlide),
            u.currentLeft = null === u.swipeLeft ? a : u.swipeLeft,
            !1 === u.options.infinite && !1 === u.options.centerMode && (t < 0 || t > u.getDotCount() * u.options.slidesToScroll))
                !1 === u.options.fade && (r = u.currentSlide,
                !0 !== i ? u.animateSlide(a, function() {
                    u.postSlide(r)
                }) : u.postSlide(r));
            else if (!1 === u.options.infinite && !0 === u.options.centerMode && (t < 0 || t > u.slideCount - u.options.slidesToScroll))
                !1 === u.options.fade && (r = u.currentSlide,
                !0 !== i ? u.animateSlide(a, function() {
                    u.postSlide(r)
                }) : u.postSlide(r));
            else {
                if (u.options.autoplay && clearInterval(u.autoPlayTimer),
                n = r < 0 ? u.slideCount % u.options.slidesToScroll != 0 ? u.slideCount - u.slideCount % u.options.slidesToScroll : u.slideCount + r : r >= u.slideCount ? u.slideCount % u.options.slidesToScroll != 0 ? 0 : r - u.slideCount : r,
                u.animating = !0,
                u.$slider.trigger("beforeChange", [u, u.currentSlide, n]),
                o = u.currentSlide,
                u.currentSlide = n,
                u.setSlideClasses(u.currentSlide),
                u.options.asNavFor && (s = (s = u.getNavTarget()).slick("getSlick")).slideCount <= s.options.slidesToShow && s.setSlideClasses(u.currentSlide),
                u.updateDots(),
                u.updateArrows(),
                !0 === u.options.fade)
                    return !0 !== i ? (u.fadeSlideOut(o),
                    u.fadeSlide(n, function() {
                        u.postSlide(n)
                    })) : u.postSlide(n),
                    void u.animateHeight();
                !0 !== i ? u.animateSlide(l, function() {
                    u.postSlide(n)
                }) : u.postSlide(n)
            }
    }
    ,
    e.prototype.startLoad = function() {
        var t = this;
        !0 === t.options.arrows && t.slideCount > t.options.slidesToShow && (t.$prevArrow.hide(),
        t.$nextArrow.hide()),
        !0 === t.options.dots && t.slideCount > t.options.slidesToShow && t.$dots.hide(),
        t.$slider.addClass("slick-loading")
    }
    ,
    e.prototype.swipeDirection = function() {
        var t, e, i, r, n = this;
        return t = n.touchObject.startX - n.touchObject.curX,
        e = n.touchObject.startY - n.touchObject.curY,
        i = Math.atan2(e, t),
        (r = Math.round(180 * i / Math.PI)) < 0 && (r = 360 - Math.abs(r)),
        r <= 45 && r >= 0 ? !1 === n.options.rtl ? "left" : "right" : r <= 360 && r >= 315 ? !1 === n.options.rtl ? "left" : "right" : r >= 135 && r <= 225 ? !1 === n.options.rtl ? "right" : "left" : !0 === n.options.verticalSwiping ? r >= 35 && r <= 135 ? "down" : "up" : "vertical"
    }
    ,
    e.prototype.swipeEnd = function(t) {
        var e, i, r = this;
        if (r.dragging = !1,
        r.swiping = !1,
        r.scrolling)
            return r.scrolling = !1,
            !1;
        if (r.interrupted = !1,
        r.shouldClick = !(r.touchObject.swipeLength > 10),
        void 0 === r.touchObject.curX)
            return !1;
        if (!0 === r.touchObject.edgeHit && r.$slider.trigger("edge", [r, r.swipeDirection()]),
        r.touchObject.swipeLength >= r.touchObject.minSwipe) {
            switch (i = r.swipeDirection()) {
            case "left":
            case "down":
                e = r.options.swipeToSlide ? r.checkNavigable(r.currentSlide + r.getSlideCount()) : r.currentSlide + r.getSlideCount(),
                r.currentDirection = 0;
                break;
            case "right":
            case "up":
                e = r.options.swipeToSlide ? r.checkNavigable(r.currentSlide - r.getSlideCount()) : r.currentSlide - r.getSlideCount(),
                r.currentDirection = 1
            }
            "vertical" != i && (r.slideHandler(e),
            r.touchObject = {},
            r.$slider.trigger("swipe", [r, i]))
        } else
            r.touchObject.startX !== r.touchObject.curX && (r.slideHandler(r.currentSlide),
            r.touchObject = {})
    }
    ,
    e.prototype.swipeHandler = function(t) {
        var e = this;
        if (!(!1 === e.options.swipe || "ontouchend"in document && !1 === e.options.swipe || !1 === e.options.draggable && -1 !== t.type.indexOf("mouse")))
            switch (e.touchObject.fingerCount = t.originalEvent && void 0 !== t.originalEvent.touches ? t.originalEvent.touches.length : 1,
            e.touchObject.minSwipe = e.listWidth / e.options.touchThreshold,
            !0 === e.options.verticalSwiping && (e.touchObject.minSwipe = e.listHeight / e.options.touchThreshold),
            t.data.action) {
            case "start":
                e.swipeStart(t);
                break;
            case "move":
                e.swipeMove(t);
                break;
            case "end":
                e.swipeEnd(t)
            }
    }
    ,
    e.prototype.swipeMove = function(t) {
        var e, i, r, n, o, a, s = this;
        return o = void 0 !== t.originalEvent ? t.originalEvent.touches : null,
        !(!s.dragging || s.scrolling || o && 1 !== o.length) && (e = s.getLeft(s.currentSlide),
        s.touchObject.curX = void 0 !== o ? o[0].pageX : t.clientX,
        s.touchObject.curY = void 0 !== o ? o[0].pageY : t.clientY,
        s.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(s.touchObject.curX - s.touchObject.startX, 2))),
        a = Math.round(Math.sqrt(Math.pow(s.touchObject.curY - s.touchObject.startY, 2))),
        !s.options.verticalSwiping && !s.swiping && a > 4 ? (s.scrolling = !0,
        !1) : (!0 === s.options.verticalSwiping && (s.touchObject.swipeLength = a),
        i = s.swipeDirection(),
        void 0 !== t.originalEvent && s.touchObject.swipeLength > 4 && (s.swiping = !0,
        t.preventDefault()),
        n = (!1 === s.options.rtl ? 1 : -1) * (s.touchObject.curX > s.touchObject.startX ? 1 : -1),
        !0 === s.options.verticalSwiping && (n = s.touchObject.curY > s.touchObject.startY ? 1 : -1),
        r = s.touchObject.swipeLength,
        s.touchObject.edgeHit = !1,
        !1 === s.options.infinite && (0 === s.currentSlide && "right" === i || s.currentSlide >= s.getDotCount() && "left" === i) && (r = s.touchObject.swipeLength * s.options.edgeFriction,
        s.touchObject.edgeHit = !0),
        !1 === s.options.vertical ? s.swipeLeft = e + r * n : s.swipeLeft = e + r * (s.$list.height() / s.listWidth) * n,
        !0 === s.options.verticalSwiping && (s.swipeLeft = e + r * n),
        !0 !== s.options.fade && !1 !== s.options.touchMove && (!0 === s.animating ? (s.swipeLeft = null,
        !1) : void s.setCSS(s.swipeLeft))))
    }
    ,
    e.prototype.swipeStart = function(t) {
        var e, i = this;
        if (i.interrupted = !0,
        1 !== i.touchObject.fingerCount || i.slideCount <= i.options.slidesToShow)
            return i.touchObject = {},
            !1;
        void 0 !== t.originalEvent && void 0 !== t.originalEvent.touches && (e = t.originalEvent.touches[0]),
        i.touchObject.startX = i.touchObject.curX = void 0 !== e ? e.pageX : t.clientX,
        i.touchObject.startY = i.touchObject.curY = void 0 !== e ? e.pageY : t.clientY,
        i.dragging = !0
    }
    ,
    e.prototype.unfilterSlides = e.prototype.slickUnfilter = function() {
        var t = this;
        null !== t.$slidesCache && (t.unload(),
        t.$slideTrack.children(this.options.slide).detach(),
        t.$slidesCache.appendTo(t.$slideTrack),
        t.reinit())
    }
    ,
    e.prototype.unload = function() {
        var e = this;
        t(".slick-cloned", e.$slider).remove(),
        e.$dots && e.$dots.remove(),
        e.$prevArrow && e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.remove(),
        e.$nextArrow && e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.remove(),
        e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden", "true").css("width", "")
    }
    ,
    e.prototype.unslick = function(t) {
        var e = this;
        e.$slider.trigger("unslick", [e, t]),
        e.destroy()
    }
    ,
    e.prototype.updateArrows = function() {
        var t = this;
        Math.floor(t.options.slidesToShow / 2),
        !0 === t.options.arrows && t.slideCount > t.options.slidesToShow && !t.options.infinite && (t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false"),
        t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false"),
        0 === t.currentSlide ? (t.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true"),
        t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : t.currentSlide >= t.slideCount - t.options.slidesToShow && !1 === t.options.centerMode ? (t.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"),
        t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : t.currentSlide >= t.slideCount - 1 && !0 === t.options.centerMode && (t.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"),
        t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")))
    }
    ,
    e.prototype.updateDots = function() {
        var t = this;
        null !== t.$dots && (t.$dots.find("li").removeClass("slick-active").end(),
        t.$dots.find("li").eq(Math.floor(t.currentSlide / t.options.slidesToScroll)).addClass("slick-active"))
    }
    ,
    e.prototype.visibility = function() {
        var t = this;
        t.options.autoplay && (document[t.hidden] ? t.interrupted = !0 : t.interrupted = !1)
    }
    ,
    t.fn.slick = function() {
        var t, i, r = this, n = arguments[0], o = Array.prototype.slice.call(arguments, 1), a = r.length;
        for (t = 0; t < a; t++)
            if ("object" == typeof n || void 0 === n ? r[t].slick = new e(r[t],n) : i = r[t].slick[n].apply(r[t].slick, o),
            void 0 !== i)
                return i;
        return r
    }
}),
function(t) {
    "use strict";
    var e = {
        WebkitTransition: "webkitTransitionEnd",
        MozTransition: "transitionend",
        OTransition: "oTransitionEnd",
        msTransition: "MSTransitionEnd",
        transition: "transitionend"
    }[Modernizr.prefixed("transition")]
      , i = Modernizr.csstransitions;
    function r(t, e) {
        for (var i in e)
            e.hasOwnProperty(i) && (t[i] = e[i]);
        return t
    }
    function n(t, e) {
        this.el = t,
        this.el && (this.options = r({}, this.options),
        r(this.options, e),
        this._init())
    }
    n.prototype.options = {
        onSubmit: function() {
            return !1
        }
    },
    n.prototype._init = function() {
        this.current = 0,
        this.questions = [].slice.call(this.el.querySelectorAll("ol.questions > li")),
        this.questionsCount = this.questions.length,
        $(this.questions[0]).addClass("current"),
        this.ctrlNext = this.el.querySelector("button.next"),
        this.progress = this.el.querySelector("div.progress"),
        this.questionStatus = this.el.querySelector("p.number"),
        this.currentNum = this.questionStatus.querySelector("span.number-current"),
        this.currentNum.innerHTML = Number(this.current + 1),
        this.totalQuestionNum = this.questionStatus.querySelector("span.number-total"),
        this.totalQuestionNum.innerHTML = this.questionsCount,
        this.error = this.el.querySelector("p.error-message"),
        this._initEvents()
    }
    ,
    n.prototype._initEvents = function() {
        var t = this
          , e = this.questions[this.current].querySelector('[aria-required="true"]')
          , i = function() {
            e.removeEventListener("focus", i),
            $(t.ctrlNext).addClass("show")
        };
        $(".wpcf7-form-control-wrap").addClass("field_holder"),
        e.addEventListener("focus", i),
        this.ctrlNext.addEventListener("click", function(e) {
            e.preventDefault(),
            t._nextQuestion()
        }),
        document.addEventListener("keydown", function(e) {
            var i = e.keyCode || e.which
              , r = e.target;
            13 === i && "textarea" != r.type && (e.preventDefault(),
            t._nextQuestion())
        }),
        this.el.addEventListener("keydown", function(t) {
            9 === (t.keyCode || t.which) && t.preventDefault()
        })
    }
    ,
    n.prototype._nextQuestion = function() {
        if (!this._validade())
            return !1;
        this.current === this.questionsCount - 1 && (this.isFilled = !0),
        this._clearError();
        var t = this.questions[this.current];
        if (++this.current,
        this._progress(),
        !this.isFilled) {
            this._updateQuestionNumber(),
            $(this.el).addClass("show-next");
            var r = this.questions[this.current];
            $(t).removeClass("current"),
            $(r).addClass("current")
        }
        var n = this
          , o = function(t) {
            i && this.removeEventListener(e, o),
            n.isFilled ? n._submit() : ($(n.el).removeClass("show-next"),
            n.currentNum.innerHTML = n.nextQuestionNum.innerHTML,
            n.questionStatus.removeChild(n.nextQuestionNum),
            r.querySelector('[aria-required="true"]').focus())
        };
        i ? this.progress.addEventListener(e, o) : o()
    }
    ,
    n.prototype._progress = function() {
        this.progress.style.width = this.current * (100 / this.questionsCount) + "%"
    }
    ,
    n.prototype._updateQuestionNumber = function() {
        this.nextQuestionNum = document.createElement("span"),
        this.nextQuestionNum.className = "number-next",
        this.nextQuestionNum.innerHTML = Number(this.current + 1),
        this.questionStatus.appendChild(this.nextQuestionNum)
    }
    ,
    n.prototype._submit = function() {
        this.options.onSubmit(this.el)
    }
    ,
    n.prototype._validade = function() {
        var t = this.questions[this.current].querySelector('[aria-required="true"]');
        return "" === t.value ? (this._showError("EMPTYSTR"),
        !1) : !("email" == $(t).attr("type") && !isValidEmailAddress(t.value)) || (this._showError("INVALIDEMAIL"),
        !1)
    }
    ,
    n.prototype._showError = function(t) {
        var e = "";
        switch (t) {
        case "EMPTYSTR":
            e = "Please fill the field before continuing";
            break;
        case "INVALIDEMAIL":
            e = "Please fill a valid email address"
        }
        this.error.innerHTML = e,
        $(this.error).addClass("show")
    }
    ,
    n.prototype._clearError = function() {
        $(this.error).removeClass("show")
    }
    ,
    t.stepsForm = n
}(window);
//# sourceMappingURL=vendors.min.js.map
